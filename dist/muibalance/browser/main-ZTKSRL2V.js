import{A as OC,B as yj,C as gv,D as yr,E as dl,F as hl,G as sg,H as vj,I as ml,J as gd,K as ag,L as bj,M as fl,N as NC,O as ei,P as wf,Q as kk,R as Ak,a as Be,b as rg,c as MC,d as cj,e as lj,f as Mh,g as vf,h as og,i as uj,j as Sk,k as dj,l as cu,m as hj,n as Tk,o as fv,p as mj,q as PC,r as Pr,s as fj,t as pj,u as lu,v as bf,w as Dk,x as pv,y as gj,z as _j}from"./chunk-6534PSKY.js";import{$ as Oo,$a as lv,$b as Vt,$c as yf,A as ri,Aa as ff,Ab as ll,Ac as qt,B as st,Ba as wo,Bb as tt,Bc as gf,C as mk,Ca as au,Cb as re,Cc as X$,D as fd,Da as He,Db as Co,Dc as J$,E as Dh,Ea as Ah,Eb as ut,Ec as We,F as Hp,Fa as R$,Fb as _r,Fc as Eo,G as fk,Ga as sv,Gb as q$,Gc as nr,H as xi,Ha as M$,Hb as kt,Hc as ul,I as w$,Ia as hs,Ib as Jp,Ic as IC,J as ru,Ja as _i,Jb as No,Jc as SC,K as kh,Ka as av,Kb as Fo,Kc as Z$,L as ou,La as vk,Lb as D,Lc as ig,M as pk,Ma as vC,Mb as R,Mc as ej,N as C$,Na as bC,Nb as be,Nc as tj,O as E$,Oa as Xr,Ob as Jn,Oc as xt,P as gk,Pa as cv,Pb as Zn,Pc as nj,Q as x$,Qa as Gp,Qb as Zr,Qc as hv,R as I$,Ra as Qp,Rb as Pt,Rc as ij,S as su,Sa as P$,Sb as ms,Sc as rj,T as _C,Ta as O$,Tb as Zp,Tc as _f,U as Kn,Ua as N$,Ub as he,Uc as TC,V as di,Va as F$,Vb as eg,Vc as DC,W as _k,Wa as V$,Wb as Se,Wc as kC,X as An,Xa as L$,Xb as Xt,Xc as AC,Y as S$,Ya as B$,Yb as nt,Yc as mv,Z as Di,Za as Pa,Zb as Rh,Zc as oj,_ as oi,_a as $$,_b as jt,_c as sj,a as It,aa as _e,ab as B,ac as Pe,ad as aj,b as _$,ba as je,bb as pe,bc as Oe,bd as RC,c as kr,ca as T$,cb as Yp,cc as K$,d as dk,da as ce,db as tr,dc as H$,e as rv,ea as yk,eb as pd,ec as hi,ed as ps,f as ye,fa as Ve,fb as Jr,fc as z,fd as Or,g as gi,ga as w,gb as Mr,gc as Zt,gd as Rk,h as y$,ha as Rn,hb as pf,hc as Ut,i as v$,ia as ov,ib as Le,ic as Ek,id as yi,j as al,ja as Rr,jb as j$,jc as W$,jd as Vo,k as Th,ka as D$,kb as gr,kc as yt,kd as Mk,l as uf,la as cl,lb as bk,lc as vt,ld as vr,m as Ar,ma as wc,mb as U$,mc as bt,md as _v,n as Ye,na as Tt,nb as wk,nc as St,nd as yv,o as df,oa as xe,ob as le,oc as tg,p as hf,pa as Ie,pb as Ue,pc as EC,q as b$,qa as bo,qb as ve,qc as fs,r as mf,ra as Wp,rb as Xp,rc as G$,s as ht,sa as hn,sb as Et,sc as $s,t as iu,ta as k$,tb as z$,tc as dv,u as ji,ua as Mt,ub as Ft,uc as ng,v as hk,va as Cc,vb as Ee,vc as xk,w as fC,wa as A$,wb as wC,wc as xC,x as md,xa as yC,xb as CC,xc as Q$,y as pC,ya as ke,yb as Ck,yc as Y$,z as gC,za as Ke,zb as uv,zc as Ik}from"./chunk-YMXXBCHV.js";import{a as ee,b as Qe,c as p$,d as ot,f as g$,h as O}from"./chunk-2HP4JIPC.js";var ZQ=ot((QL,YL)=>{"use strict";(function(n,t){typeof QL=="object"&&typeof YL<"u"?YL.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self).Dexie=t()})(QL,function(){"use strict";var n=function(m,g){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(v[A]=x[A])})(m,g)},t=function(){return(t=Object.assign||function(m){for(var g,v=1,x=arguments.length;v<x;v++)for(var A in g=arguments[v])Object.prototype.hasOwnProperty.call(g,A)&&(m[A]=g[A]);return m}).apply(this,arguments)};function e(m,g,v){if(v||arguments.length===2)for(var x,A=0,F=g.length;A<F;A++)!x&&A in g||((x=x||Array.prototype.slice.call(g,0,A))[A]=g[A]);return m.concat(x||Array.prototype.slice.call(g))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,r=Object.keys,o=Array.isArray;function s(m,g){return typeof g!="object"||r(g).forEach(function(v){m[v]=g[v]}),m}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var a=Object.getPrototypeOf,l={}.hasOwnProperty;function u(m,g){return l.call(m,g)}function h(m,g){typeof g=="function"&&(g=g(a(m))),(typeof Reflect>"u"?r:Reflect.ownKeys)(g).forEach(function(v){_(m,v,g[v])})}var p=Object.defineProperty;function _(m,g,v,x){p(m,g,s(v&&u(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},x))}function b(m){return{from:function(g){return m.prototype=Object.create(g.prototype),_(m.prototype,"constructor",m),{extend:h.bind(null,m.prototype)}}}}var C=Object.getOwnPropertyDescriptor,T=[].slice;function k(m,g,v){return T.call(m,g,v)}function U(m,g){return g(m)}function W(m){if(!m)throw new Error("Assertion Failed")}function K(m){i.setImmediate?setImmediate(m):setTimeout(m,0)}function oe(m,g){if(typeof g=="string"&&u(m,g))return m[g];if(!g)return m;if(typeof g!="string"){for(var v=[],x=0,A=g.length;x<A;++x){var F=oe(m,g[x]);v.push(F)}return v}var j=g.indexOf(".");if(j!==-1){var q=m[g.substr(0,j)];return q==null?void 0:oe(q,g.substr(j+1))}}function ae(m,g,v){if(m&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof g!="string"&&"length"in g){W(typeof v!="string"&&"length"in v);for(var x=0,A=g.length;x<A;++x)ae(m,g[x],v[x])}else{var F,j,q=g.indexOf(".");q!==-1?(F=g.substr(0,q),(j=g.substr(q+1))===""?v===void 0?o(m)&&!isNaN(parseInt(F))?m.splice(F,1):delete m[F]:m[F]=v:ae(q=!(q=m[F])||!u(m,F)?m[F]={}:q,j,v)):v===void 0?o(m)&&!isNaN(parseInt(g))?m.splice(g,1):delete m[g]:m[g]=v}}function we(m){var g,v={};for(g in m)u(m,g)&&(v[g]=m[g]);return v}var M=[].concat;function E(m){return M.apply([],m)}var ui="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(g){return g+m+"Array"})}))).filter(function(m){return i[m]}),I=new Set(ui.map(function(m){return i[m]})),P=null;function N(m){return P=new WeakMap,m=function g(v){if(!v||typeof v!="object")return v;var x=P.get(v);if(x)return x;if(o(v)){x=[],P.set(v,x);for(var A=0,F=v.length;A<F;++A)x.push(g(v[A]))}else if(I.has(v.constructor))x=v;else{var j,q=a(v);for(j in x=q===Object.prototype?{}:Object.create(q),P.set(v,x),v)u(v,j)&&(x[j]=g(v[j]))}return x}(m),P=null,m}var V={}.toString;function S(m){return V.call(m).slice(8,-1)}var Ot=typeof Symbol<"u"?Symbol.iterator:"@@iterator",On=typeof Ot=="symbol"?function(m){var g;return m!=null&&(g=m[Ot])&&g.apply(m)}:function(){return null};function fr(m,g){return g=m.indexOf(g),0<=g&&m.splice(g,1),0<=g}var Ti={};function Dn(m){var g,v,x,A;if(arguments.length===1){if(o(m))return m.slice();if(this===Ti&&typeof m=="string")return[m];if(A=On(m)){for(v=[];!(x=A.next()).done;)v.push(x.value);return v}if(m==null)return[m];if(typeof(g=m.length)!="number")return[m];for(v=new Array(g);g--;)v[g]=m[g];return v}for(g=arguments.length,v=new Array(g);g--;)v[g]=arguments[g];return v}var xr=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],bc=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zu),Qt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Yn(m,g){this.name=m,this.message=g}function Cn(m,g){return m+". Errors: "+Object.keys(g).map(function(v){return g[v].toString()}).filter(function(v,x,A){return A.indexOf(v)===x}).join(`
`)}function ct(m,g,v,x){this.failures=g,this.failedKeys=x,this.successCount=v,this.message=Cn(m,g)}function Ci(m,g){this.name="BulkError",this.failures=Object.keys(g).map(function(v){return g[v]}),this.failuresByPos=g,this.message=Cn(m,this.failures)}b(Yn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ct).from(Yn),b(Ci).from(Yn);var er=bc.reduce(function(m,g){return m[g]=g+"Error",m},{}),zm=Yn,pt=bc.reduce(function(m,g){var v=g+"Error";function x(A,F){this.name=v,A?typeof A=="string"?(this.message="".concat(A).concat(F?`
 `+F:""),this.inner=F||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Qt[g]||v,this.inner=null)}return b(x).from(zm),m[g]=x,m},{});pt.Syntax=SyntaxError,pt.Type=TypeError,pt.Range=RangeError;var Up=Zu.reduce(function(m,g){return m[g+"Error"]=pt[g],m},{}),ch=bc.reduce(function(m,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(m[g+"Error"]=pt[g]),m},{});function ln(){}function ns(m){return m}function Yu(m,g){return m==null||m===ns?g:function(v){return g(m(v))}}function is(m,g){return function(){m.apply(this,arguments),g.apply(this,arguments)}}function Xu(m,g){return m===ln?g:function(){var v=m.apply(this,arguments);v!==void 0&&(arguments[0]=v);var x=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var F=g.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?is(x,this.onsuccess):x),A&&(this.onerror=this.onerror?is(A,this.onerror):A),F!==void 0?F:v}}function Ju(m,g){return m===ln?g:function(){m.apply(this,arguments);var v=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?is(v,this.onsuccess):v),x&&(this.onerror=this.onerror?is(x,this.onerror):x)}}function qm(m,g){return m===ln?g:function(v){var x=m.apply(this,arguments);s(v,x);var A=this.onsuccess,F=this.onerror;return this.onsuccess=null,this.onerror=null,v=g.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?is(A,this.onsuccess):A),F&&(this.onerror=this.onerror?is(F,this.onerror):F),x===void 0?v===void 0?void 0:v:s(x,v)}}function Km(m,g){return m===ln?g:function(){return g.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function Hm(m,g){return m===ln?g:function(){var v=m.apply(this,arguments);if(v&&typeof v.then=="function"){for(var x=this,A=arguments.length,F=new Array(A);A--;)F[A]=arguments[A];return v.then(function(){return g.apply(x,F)})}return g.apply(this,arguments)}}ch.ModifyError=ct,ch.DexieError=Yn,ch.BulkError=Ci;var ko=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function lh(m){ko=m}var ya={},uh=100,ui=typeof Promise>"u"?[]:function(){var m=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[m,a(m),m];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,a(g),m]}(),Zu=ui[0],bc=ui[1],ui=ui[2],bc=bc&&bc.then,rs=Zu&&Zu.constructor,Zc=!!ui,va=function(m,g){el.push([m,g]),En&&(queueMicrotask(id),En=!1)},vn=!0,En=!0,ho=[],Hl=[],ed=ns,sc={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ln,pgp:!1,env:{},finalize:ln},rt=sc,el=[],ba=0,ac=[];function Je(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=rt;if(typeof m!="function"){if(m!==ya)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&td(this,this._value))}this._state=null,this._value=null,++g.ref,function v(x,A){try{A(function(F){if(x._state===null){if(F===x)throw new TypeError("A promise cannot be resolved with itself.");var j=x._lib&&or();F&&typeof F.then=="function"?v(x,function(q,G){F instanceof Je?F._then(q,G):F.then(q,G)}):(x._state=!0,x._value=F,dh(x)),j&&cc()}},td.bind(null,x))}catch(F){td(x,F)}}(this,m)}var Wm={get:function(){var m=rt,g=Ro;function v(x,A){var F=this,j=!m.global&&(m!==rt||g!==Ro),q=j&&!uc(),G=new Je(function(Y,Z){os(F,new Wl(Sr(x,m,j,q),Sr(A,m,j,q),Y,Z,m))});return this._consoleTask&&(G._consoleTask=this._consoleTask),G}return v.prototype=ya,v},set:function(m){_(this,"then",m&&m.prototype===ya?Wm:{get:function(){return m},set:Wm.set})}};function Wl(m,g,v,x,A){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof g=="function"?g:null,this.resolve=v,this.reject=x,this.psd=A}function td(m,g){var v,x;Hl.push(g),m._state===null&&(v=m._lib&&or(),g=ed(g),m._state=!1,m._value=g,x=m,ho.some(function(A){return A._value===x._value})||ho.push(x),dh(m),v&&cc())}function dh(m){var g=m._listeners;m._listeners=[];for(var v=0,x=g.length;v<x;++v)os(m,g[v]);var A=m._PSD;--A.ref||A.finalize(),ba===0&&(++ba,va(function(){--ba==0&&wa()},[]))}function os(m,g){if(m._state!==null){var v=m._state?g.onFulfilled:g.onRejected;if(v===null)return(m._state?g.resolve:g.reject)(m._value);++g.psd.ref,++ba,va(nd,[v,m,g])}else m._listeners.push(g)}function nd(m,g,v){try{var x,A=g._value;!g._state&&Hl.length&&(Hl=[]),x=ko&&g._consoleTask?g._consoleTask.run(function(){return m(A)}):m(A),g._state||Hl.indexOf(A)!==-1||function(F){for(var j=ho.length;j;)if(ho[--j]._value===F._value)return ho.splice(j,1)}(g),v.resolve(x)}catch(F){v.reject(F)}finally{--ba==0&&wa(),--v.psd.ref||v.psd.finalize()}}function id(){mo(sc,function(){or()&&cc()})}function or(){var m=vn;return En=vn=!1,m}function cc(){var m,g,v;do for(;0<el.length;)for(m=el,el=[],v=m.length,g=0;g<v;++g){var x=m[g];x[0].apply(null,x[1])}while(0<el.length);En=vn=!0}function wa(){var m=ho;ho=[],m.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var g=ac.slice(0),v=g.length;v;)g[--v]()}function Gl(m){return new Je(ya,!1,m)}function xn(m,g){var v=rt;return function(){var x=or(),A=rt;try{return Os(v,!0),m.apply(this,arguments)}catch(F){g&&g(F)}finally{Os(A,!1),x&&cc()}}}h(Je.prototype,{then:Wm,_then:function(m,g){os(this,new Wl(null,null,m,g,rt))},catch:function(m){if(arguments.length===1)return this.then(null,m);var g=m,v=arguments[1];return typeof g=="function"?this.then(null,function(x){return(x instanceof g?v:Gl)(x)}):this.then(null,function(x){return(x&&x.name===g?v:Gl)(x)})},finally:function(m){return this.then(function(g){return Je.resolve(m()).then(function(){return g})},function(g){return Je.resolve(m()).then(function(){return Gl(g)})})},timeout:function(m,g){var v=this;return m<1/0?new Je(function(x,A){var F=setTimeout(function(){return A(new pt.Timeout(g))},m);v.then(x,A).finally(clearTimeout.bind(null,F))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Je.prototype,Symbol.toStringTag,"Dexie.Promise"),sc.env=Yl(),h(Je,{all:function(){var m=Dn.apply(null,arguments).map(hh);return new Je(function(g,v){m.length===0&&g([]);var x=m.length;m.forEach(function(A,F){return Je.resolve(A).then(function(j){m[F]=j,--x||g(m)},v)})})},resolve:function(m){return m instanceof Je?m:m&&typeof m.then=="function"?new Je(function(g,v){m.then(g,v)}):new Je(ya,!0,m)},reject:Gl,race:function(){var m=Dn.apply(null,arguments).map(hh);return new Je(function(g,v){m.map(function(x){return Je.resolve(x).then(g,v)})})},PSD:{get:function(){return rt},set:function(m){return rt=m}},totalEchoes:{get:function(){return Ro}},newPSD:lc,usePSD:mo,scheduler:{get:function(){return va},set:function(m){va=m}},rejectionMapper:{get:function(){return ed},set:function(m){ed=m}},follow:function(m,g){return new Je(function(v,x){return lc(function(A,F){var j=rt;j.unhandleds=[],j.onunhandled=F,j.finalize=is(function(){var q,G=this;q=function(){G.unhandleds.length===0?A():F(G.unhandleds[0])},ac.push(function Y(){q(),ac.splice(ac.indexOf(Y),1)}),++ba,va(function(){--ba==0&&wa()},[])},j.finalize),m()},g,v,x)})}}),rs&&(rs.allSettled&&_(Je,"allSettled",function(){var m=Dn.apply(null,arguments).map(hh);return new Je(function(g){m.length===0&&g([]);var v=m.length,x=new Array(v);m.forEach(function(A,F){return Je.resolve(A).then(function(j){return x[F]={status:"fulfilled",value:j}},function(j){return x[F]={status:"rejected",reason:j}}).then(function(){return--v||g(x)})})})}),rs.any&&typeof AggregateError<"u"&&_(Je,"any",function(){var m=Dn.apply(null,arguments).map(hh);return new Je(function(g,v){m.length===0&&v(new AggregateError([]));var x=m.length,A=new Array(x);m.forEach(function(F,j){return Je.resolve(F).then(function(q){return g(q)},function(q){A[j]=q,--x||v(new AggregateError(A))})})})}),rs.withResolvers&&(Je.withResolvers=rs.withResolvers));var Bi={awaits:0,echoes:0,id:0},jn=0,Ql=[],Ao=0,Ro=0,tv=0;function lc(m,g,v,x){var A=rt,F=Object.create(A);return F.parent=A,F.ref=0,F.global=!1,F.id=++tv,sc.env,F.env=Zc?{Promise:Je,PromiseProp:{value:Je,configurable:!0,writable:!0},all:Je.all,race:Je.race,allSettled:Je.allSettled,any:Je.any,resolve:Je.resolve,reject:Je.reject}:{},g&&s(F,g),++A.ref,F.finalize=function(){--this.parent.ref||this.parent.finalize()},x=mo(F,m,v,x),F.ref===0&&F.finalize(),x}function Ir(){return Bi.id||(Bi.id=++jn),++Bi.awaits,Bi.echoes+=uh,Bi.id}function uc(){return!!Bi.awaits&&(--Bi.awaits==0&&(Bi.id=0),Bi.echoes=Bi.awaits*uh,!0)}function hh(m){return Bi.echoes&&m&&m.constructor===rs?(Ir(),m.then(function(g){return uc(),g},function(g){return uc(),Ei(g)})):m}function tl(){var m=Ql[Ql.length-1];Ql.pop(),Os(m,!1)}function Os(m,g){var v,x=rt;(g?!Bi.echoes||Ao++&&m===rt:!Ao||--Ao&&m===rt)||queueMicrotask(g?function(A){++Ro,Bi.echoes&&--Bi.echoes!=0||(Bi.echoes=Bi.awaits=Bi.id=0),Ql.push(rt),Os(A,!0)}.bind(null,m):tl),m!==rt&&(rt=m,x===sc&&(sc.env=Yl()),Zc&&(v=sc.env.Promise,g=m.env,(x.global||m.global)&&(Object.defineProperty(i,"Promise",g.PromiseProp),v.all=g.all,v.race=g.race,v.resolve=g.resolve,v.reject=g.reject,g.allSettled&&(v.allSettled=g.allSettled),g.any&&(v.any=g.any))))}function Yl(){var m=i.Promise;return Zc?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function mo(m,g,v,x,A){var F=rt;try{return Os(m,!0),g(v,x,A)}finally{Os(F,!1)}}function Sr(m,g,v,x){return typeof m!="function"?m:function(){var A=rt;v&&Ir(),Os(g,!0);try{return m.apply(this,arguments)}finally{Os(A,!1),x&&queueMicrotask(uc)}}}function rd(m){Promise===rs&&Bi.echoes===0?Ao===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+bc).indexOf("[native code]")===-1&&(Ir=uc=ln);var Ei=Je.reject,ss="\uFFFF",fo="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mh="String expected.",dc=[],fh="__dbnames",Ca="readonly",od="readwrite";function as(m,g){return m?g?function(){return m.apply(this,arguments)&&g.apply(this,arguments)}:m:g}var Ns={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tr(m){return typeof m!="string"||/\./.test(m)?function(g){return g}:function(g){return g[m]===void 0&&m in g&&delete(g=N(g))[m],g}}function Xl(){throw pt.Type()}function sn(m,g){try{var v=ph(m),x=ph(g);if(v!==x)return v==="Array"?1:x==="Array"?-1:v==="binary"?1:x==="binary"?-1:v==="string"?1:x==="string"?-1:v==="Date"?1:x!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return g<m?1:m<g?-1:0;case"binary":return function(A,F){for(var j=A.length,q=F.length,G=j<q?j:q,Y=0;Y<G;++Y)if(A[Y]!==F[Y])return A[Y]<F[Y]?-1:1;return j===q?0:j<q?-1:1}(gh(m),gh(g));case"Array":return function(A,F){for(var j=A.length,q=F.length,G=j<q?j:q,Y=0;Y<G;++Y){var Z=sn(A[Y],F[Y]);if(Z!==0)return Z}return j===q?0:j<q?-1:1}(m,g)}}catch{}return NaN}function ph(m){var g=typeof m;return g!="object"?g:ArrayBuffer.isView(m)?"binary":(m=S(m),m==="ArrayBuffer"?"binary":m)}function gh(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}var _h=(Un.prototype._trans=function(m,g,v){var x=this._tx||rt.trans,A=this.name,F=ko&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function j(Y,Z,H){if(!H.schema[A])throw new pt.NotFound("Table "+A+" not part of transaction");return g(H.idbtrans,H)}var q=or();try{var G=x&&x.db._novip===this.db._novip?x===rt.trans?x._promise(m,j,v):lc(function(){return x._promise(m,j,v)},{trans:x,transless:rt.transless||rt}):function Y(Z,H,ne,Q){if(Z.idbdb&&(Z._state.openComplete||rt.letThrough||Z._vip)){var J=Z._createTransaction(H,ne,Z._dbSchema);try{J.create(),Z._state.PR1398_maxLoop=3}catch(te){return te.name===er.InvalidState&&Z.isOpen()&&0<--Z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Z.close({disableAutoOpen:!1}),Z.open().then(function(){return Y(Z,H,ne,Q)})):Ei(te)}return J._promise(H,function(te,X){return lc(function(){return rt.trans=J,Q(te,X,J)})}).then(function(te){if(H==="readwrite")try{J.idbtrans.commit()}catch{}return H==="readonly"?te:J._completion.then(function(){return te})})}if(Z._state.openComplete)return Ei(new pt.DatabaseClosed(Z._state.dbOpenError));if(!Z._state.isBeingOpened){if(!Z._state.autoOpen)return Ei(new pt.DatabaseClosed);Z.open().catch(ln)}return Z._state.dbReadyPromise.then(function(){return Y(Z,H,ne,Q)})}(this.db,m,[this.name],j);return F&&(G._consoleTask=F,G=G.catch(function(Y){return console.trace(Y),Ei(Y)})),G}finally{q&&cc()}},Un.prototype.get=function(m,g){var v=this;return m&&m.constructor===Object?this.where(m).first(g):m==null?Ei(new pt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return v.core.get({trans:x,key:m}).then(function(A){return v.hook.reading.fire(A)})}).then(g)},Un.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(o(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var g=r(m);if(g.length===1)return this.where(g[0]).equals(m[g[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&g.every(function(Y){return 0<=q.keyPath.indexOf(Y)})){for(var G=0;G<g.length;++G)if(g.indexOf(q.keyPath[G])===-1)return!1;return!0}return!1}).sort(function(q,G){return q.keyPath.length-G.keyPath.length})[0];if(v&&this.db._maxKey!==ss){var F=v.keyPath.slice(0,g.length);return this.where(F).equals(F.map(function(G){return m[G]}))}!v&&ko&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var x=this.schema.idxByName;function A(q,G){return sn(q,G)===0}var j=g.reduce(function(H,G){var Y=H[0],Z=H[1],H=x[G],ne=m[G];return[Y||H,Y||!H?as(Z,H&&H.multi?function(Q){return Q=oe(Q,G),o(Q)&&Q.some(function(J){return A(ne,J)})}:function(Q){return A(ne,oe(Q,G))}):Z]},[null,null]),F=j[0],j=j[1];return F?this.where(F.name).equals(m[F.keyPath]).filter(j):v?this.filter(j):this.where(g).equals("")},Un.prototype.filter=function(m){return this.toCollection().and(m)},Un.prototype.count=function(m){return this.toCollection().count(m)},Un.prototype.offset=function(m){return this.toCollection().offset(m)},Un.prototype.limit=function(m){return this.toCollection().limit(m)},Un.prototype.each=function(m){return this.toCollection().each(m)},Un.prototype.toArray=function(m){return this.toCollection().toArray(m)},Un.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Un.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,o(m)?"[".concat(m.join("+"),"]"):m))},Un.prototype.reverse=function(){return this.toCollection().reverse()},Un.prototype.mapToClass=function(m){var g,v=this.db,x=this.name;function A(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=m).prototype instanceof Xl&&(function(G,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function Z(){this.constructor=G}n(G,Y),G.prototype=Y===null?Object.create(Y):(Z.prototype=Y.prototype,new Z)}(A,g=m),Object.defineProperty(A.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),A.prototype.table=function(){return x},m=A);for(var F=new Set,j=m.prototype;j;j=a(j))Object.getOwnPropertyNames(j).forEach(function(G){return F.add(G)});function q(G){if(!G)return G;var Y,Z=Object.create(m.prototype);for(Y in G)if(!F.has(Y))try{Z[Y]=G[Y]}catch{}return Z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=q,this.hook("reading",q),m},Un.prototype.defineClass=function(){return this.mapToClass(function(m){s(this,m)})},Un.prototype.add=function(m,g){var v=this,x=this.schema.primKey,A=x.auto,F=x.keyPath,j=m;return F&&A&&(j=Tr(F)(m)),this._trans("readwrite",function(q){return v.core.mutate({trans:q,type:"add",keys:g!=null?[g]:null,values:[j]})}).then(function(q){return q.numFailures?Je.reject(q.failures[0]):q.lastResult}).then(function(q){if(F)try{ae(m,F,q)}catch{}return q})},Un.prototype.update=function(m,g){return typeof m!="object"||o(m)?this.where(":id").equals(m).modify(g):(m=oe(m,this.schema.primKey.keyPath),m===void 0?Ei(new pt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(g))},Un.prototype.put=function(m,g){var v=this,x=this.schema.primKey,A=x.auto,F=x.keyPath,j=m;return F&&A&&(j=Tr(F)(m)),this._trans("readwrite",function(q){return v.core.mutate({trans:q,type:"put",values:[j],keys:g!=null?[g]:null})}).then(function(q){return q.numFailures?Je.reject(q.failures[0]):q.lastResult}).then(function(q){if(F)try{ae(m,F,q)}catch{}return q})},Un.prototype.delete=function(m){var g=this;return this._trans("readwrite",function(v){return g.core.mutate({trans:v,type:"delete",keys:[m]})}).then(function(v){return v.numFailures?Je.reject(v.failures[0]):void 0})},Un.prototype.clear=function(){var m=this;return this._trans("readwrite",function(g){return m.core.mutate({trans:g,type:"deleteRange",range:Ns})}).then(function(g){return g.numFailures?Je.reject(g.failures[0]):void 0})},Un.prototype.bulkGet=function(m){var g=this;return this._trans("readonly",function(v){return g.core.getMany({keys:m,trans:v}).then(function(x){return x.map(function(A){return g.hook.reading.fire(A)})})})},Un.prototype.bulkAdd=function(m,g,v){var x=this,A=Array.isArray(g)?g:void 0,F=(v=v||(A?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(j){var Y=x.schema.primKey,q=Y.auto,Y=Y.keyPath;if(Y&&A)throw new pt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==m.length)throw new pt.InvalidArgument("Arguments objects and keys must have the same length");var G=m.length,Y=Y&&q?m.map(Tr(Y)):m;return x.core.mutate({trans:j,type:"add",keys:A,values:Y,wantResults:F}).then(function(J){var H=J.numFailures,ne=J.results,Q=J.lastResult,J=J.failures;if(H===0)return F?ne:Q;throw new Ci("".concat(x.name,".bulkAdd(): ").concat(H," of ").concat(G," operations failed"),J)})})},Un.prototype.bulkPut=function(m,g,v){var x=this,A=Array.isArray(g)?g:void 0,F=(v=v||(A?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(j){var Y=x.schema.primKey,q=Y.auto,Y=Y.keyPath;if(Y&&A)throw new pt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==m.length)throw new pt.InvalidArgument("Arguments objects and keys must have the same length");var G=m.length,Y=Y&&q?m.map(Tr(Y)):m;return x.core.mutate({trans:j,type:"put",keys:A,values:Y,wantResults:F}).then(function(J){var H=J.numFailures,ne=J.results,Q=J.lastResult,J=J.failures;if(H===0)return F?ne:Q;throw new Ci("".concat(x.name,".bulkPut(): ").concat(H," of ").concat(G," operations failed"),J)})})},Un.prototype.bulkUpdate=function(m){var g=this,v=this.core,x=m.map(function(j){return j.key}),A=m.map(function(j){return j.changes}),F=[];return this._trans("readwrite",function(j){return v.getMany({trans:j,keys:x,cache:"clone"}).then(function(q){var G=[],Y=[];m.forEach(function(H,ne){var Q=H.key,J=H.changes,te=q[ne];if(te){for(var X=0,se=Object.keys(J);X<se.length;X++){var ue=se[X],de=J[ue];if(ue===g.schema.primKey.keyPath){if(sn(de,Q)!==0)throw new pt.Constraint("Cannot update primary key in bulkUpdate()")}else ae(te,ue,de)}F.push(ne),G.push(Q),Y.push(te)}});var Z=G.length;return v.mutate({trans:j,type:"put",keys:G,values:Y,updates:{keys:x,changeSpecs:A}}).then(function(H){var ne=H.numFailures,Q=H.failures;if(ne===0)return Z;for(var J=0,te=Object.keys(Q);J<te.length;J++){var X,se=te[J],ue=F[Number(se)];ue!=null&&(X=Q[se],delete Q[se],Q[ue]=X)}throw new Ci("".concat(g.name,".bulkUpdate(): ").concat(ne," of ").concat(Z," operations failed"),Q)})})})},Un.prototype.bulkDelete=function(m){var g=this,v=m.length;return this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"delete",keys:m})}).then(function(j){var A=j.numFailures,F=j.lastResult,j=j.failures;if(A===0)return F;throw new Ci("".concat(g.name,".bulkDelete(): ").concat(A," of ").concat(v," operations failed"),j)})},Un);function Un(){}function Ea(m){function g(j,q){if(q){for(var G=arguments.length,Y=new Array(G-1);--G;)Y[G-1]=arguments[G];return v[j].subscribe.apply(null,Y),m}if(typeof j=="string")return v[j]}var v={};g.addEventType=F;for(var x=1,A=arguments.length;x<A;++x)F(arguments[x]);return g;function F(j,q,G){if(typeof j!="object"){var Y;q=q||Km;var Z={subscribers:[],fire:G=G||ln,subscribe:function(H){Z.subscribers.indexOf(H)===-1&&(Z.subscribers.push(H),Z.fire=q(Z.fire,H))},unsubscribe:function(H){Z.subscribers=Z.subscribers.filter(function(ne){return ne!==H}),Z.fire=Z.subscribers.reduce(q,G)}};return v[j]=g[j]=Z}r(Y=j).forEach(function(H){var ne=Y[H];if(o(ne))F(H,Y[H][0],Y[H][1]);else{if(ne!=="asap")throw new pt.InvalidArgument("Invalid event config");var Q=F(H,ns,function(){for(var J=arguments.length,te=new Array(J);J--;)te[J]=arguments[J];Q.subscribers.forEach(function(X){K(function(){X.apply(null,te)})})})}})}}function nl(m,g){return b(g).from({prototype:m}),g}function hc(m,g){return!(m.filter||m.algorithm||m.or)&&(g?m.justLimit:!m.replayFilter)}function Gm(m,g){m.filter=as(m.filter,g)}function Qm(m,g,v){var x=m.replayFilter;m.replayFilter=x?function(){return as(x(),g())}:g,m.justLimit=v&&!x}function Jl(m,g){if(m.isPrimKey)return g.primaryKey;var v=g.getIndexByKeyPath(m.index);if(!v)throw new pt.Schema("KeyPath "+m.index+" on object store "+g.name+" is not indexed");return v}function yh(m,g,v){var x=Jl(m,g.schema);return g.openCursor({trans:v,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:x,range:m.range}})}function vh(m,g,v,x){var A=m.replayFilter?as(m.filter,m.replayFilter()):m.filter;if(m.or){var F={},j=function(q,G,Y){var Z,H;A&&!A(G,Y,function(ne){return G.stop(ne)},function(ne){return G.fail(ne)})||((H=""+(Z=G.primaryKey))=="[object ArrayBuffer]"&&(H=""+new Uint8Array(Z)),u(F,H)||(F[H]=!0,g(q,G,Y)))};return Promise.all([m.or._iterate(j,v),Yr(yh(m,x,v),m.algorithm,j,!m.keysOnly&&m.valueMapper)])}return Yr(yh(m,x,v),as(m.algorithm,A),g,!m.keysOnly&&m.valueMapper)}function Yr(m,g,v,x){var A=xn(x?function(F,j,q){return v(x(F),j,q)}:v);return m.then(function(F){if(F)return F.start(function(){var j=function(){return F.continue()};g&&!g(F,function(q){return j=q},function(q){F.stop(q),j=ln},function(q){F.fail(q),j=ln})||A(F.value,F,function(q){return j=q}),j()})})}var ui=Symbol(),cs=(mc.prototype.execute=function(m){if(this.add!==void 0){var g=this.add;if(o(g))return e(e([],o(m)?m:[],!0),g,!0).sort();if(typeof g=="number")return(Number(m)||0)+g;if(typeof g=="bigint")try{return BigInt(m)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(this.remove!==void 0){var v=this.remove;if(o(v))return o(m)?m.filter(function(x){return!v.includes(x)}).sort():[];if(typeof v=="number")return Number(m)-v;if(typeof v=="bigint")try{return BigInt(m)-v}catch{return BigInt(0)-v}throw new TypeError("Invalid subtrahend ".concat(v))}return g=(g=this.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof m=="string"&&m.startsWith(g)?this.replacePrefix[1]+m.substring(g.length):m},mc);function mc(m){Object.assign(this,m)}var Ym=($e.prototype._read=function(m,g){var v=this._ctx;return v.error?v.table._trans(null,Ei.bind(null,v.error)):v.table._trans("readonly",m).then(g)},$e.prototype._write=function(m){var g=this._ctx;return g.error?g.table._trans(null,Ei.bind(null,g.error)):g.table._trans("readwrite",m,"locked")},$e.prototype._addAlgorithm=function(m){var g=this._ctx;g.algorithm=as(g.algorithm,m)},$e.prototype._iterate=function(m,g){return vh(this._ctx,m,g,this._ctx.table.core)},$e.prototype.clone=function(m){var g=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return m&&s(v,m),g._ctx=v,g},$e.prototype.raw=function(){return this._ctx.valueMapper=null,this},$e.prototype.each=function(m){var g=this._ctx;return this._read(function(v){return vh(g,m,v,g.table.core)})},$e.prototype.count=function(m){var g=this;return this._read(function(v){var x=g._ctx,A=x.table.core;if(hc(x,!0))return A.count({trans:v,query:{index:Jl(x,A.schema),range:x.range}}).then(function(j){return Math.min(j,x.limit)});var F=0;return vh(x,function(){return++F,!1},v,A).then(function(){return F})}).then(m)},$e.prototype.sortBy=function(m,g){var v=m.split(".").reverse(),x=v[0],A=v.length-1;function F(G,Y){return Y?F(G[v[Y]],Y-1):G[x]}var j=this._ctx.dir==="next"?1:-1;function q(G,Y){return sn(F(G,A),F(Y,A))*j}return this.toArray(function(G){return G.sort(q)}).then(g)},$e.prototype.toArray=function(m){var g=this;return this._read(function(v){var x=g._ctx;if(x.dir==="next"&&hc(x,!0)&&0<x.limit){var A=x.valueMapper,F=Jl(x,x.table.core.schema);return x.table.core.query({trans:v,limit:x.limit,values:!0,query:{index:F,range:x.range}}).then(function(q){return q=q.result,A?q.map(A):q})}var j=[];return vh(x,function(q){return j.push(q)},v,x.table.core).then(function(){return j})},m)},$e.prototype.offset=function(m){var g=this._ctx;return m<=0||(g.offset+=m,hc(g)?Qm(g,function(){var v=m;return function(x,A){return v===0||(v===1?--v:A(function(){x.advance(v),v=0}),!1)}}):Qm(g,function(){var v=m;return function(){return--v<0}})),this},$e.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Qm(this._ctx,function(){var g=m;return function(v,x,A){return--g<=0&&x(A),0<=g}},!0),this},$e.prototype.until=function(m,g){return Gm(this._ctx,function(v,x,A){return!m(v.value)||(x(A),g)}),this},$e.prototype.first=function(m){return this.limit(1).toArray(function(g){return g[0]}).then(m)},$e.prototype.last=function(m){return this.reverse().first(m)},$e.prototype.filter=function(m){var g;return Gm(this._ctx,function(v){return m(v.value)}),(g=this._ctx).isMatch=as(g.isMatch,m),this},$e.prototype.and=function(m){return this.filter(m)},$e.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},$e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},$e.prototype.desc=function(){return this.reverse()},$e.prototype.eachKey=function(m){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,x){m(x.key,x)})},$e.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},$e.prototype.eachPrimaryKey=function(m){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,x){m(x.primaryKey,x)})},$e.prototype.keys=function(m){var g=this._ctx;g.keysOnly=!g.isMatch;var v=[];return this.each(function(x,A){v.push(A.key)}).then(function(){return v}).then(m)},$e.prototype.primaryKeys=function(m){var g=this._ctx;if(g.dir==="next"&&hc(g,!0)&&0<g.limit)return this._read(function(x){var A=Jl(g,g.table.core.schema);return g.table.core.query({trans:x,values:!1,limit:g.limit,query:{index:A,range:g.range}})}).then(function(x){return x.result}).then(m);g.keysOnly=!g.isMatch;var v=[];return this.each(function(x,A){v.push(A.primaryKey)}).then(function(){return v}).then(m)},$e.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},$e.prototype.firstKey=function(m){return this.limit(1).keys(function(g){return g[0]}).then(m)},$e.prototype.lastKey=function(m){return this.reverse().firstKey(m)},$e.prototype.distinct=function(){var m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];if(!m||!m.multi)return this;var g={};return Gm(this._ctx,function(A){var x=A.primaryKey.toString(),A=u(g,x);return g[x]=!0,!A}),this},$e.prototype.modify=function(m){var g=this,v=this._ctx;return this._write(function(x){var A,F,j;j=typeof m=="function"?m:(A=r(m),F=A.length,function(X){for(var se=!1,ue=0;ue<F;++ue){var de=A[ue],fe=m[de],Ae=oe(X,de);fe instanceof cs?(ae(X,de,fe.execute(Ae)),se=!0):Ae!==fe&&(ae(X,de,fe),se=!0)}return se});var q=v.table.core,H=q.schema.primaryKey,G=H.outbound,Y=H.extractKey,Z=200,H=g.db._options.modifyChunkSize;H&&(Z=typeof H=="object"?H[q.name]||H["*"]||200:H);function ne(X,de){var ue=de.failures,de=de.numFailures;J+=X-de;for(var fe=0,Ae=r(ue);fe<Ae.length;fe++){var qe=Ae[fe];Q.push(ue[qe])}}var Q=[],J=0,te=[];return g.clone().primaryKeys().then(function(X){function se(de){var fe=Math.min(Z,X.length-de);return q.getMany({trans:x,keys:X.slice(de,de+fe),cache:"immutable"}).then(function(Ae){for(var qe=[],Re=[],Fe=G?[]:null,Ze=[],ze=0;ze<fe;++ze){var dt=Ae[ze],Jt={value:N(dt),primKey:X[de+ze]};j.call(Jt,Jt.value,Jt)!==!1&&(Jt.value==null?Ze.push(X[de+ze]):G||sn(Y(dt),Y(Jt.value))===0?(Re.push(Jt.value),G&&Fe.push(X[de+ze])):(Ze.push(X[de+ze]),qe.push(Jt.value)))}return Promise.resolve(0<qe.length&&q.mutate({trans:x,type:"add",values:qe}).then(function(un){for(var dn in un.failures)Ze.splice(parseInt(dn),1);ne(qe.length,un)})).then(function(){return(0<Re.length||ue&&typeof m=="object")&&q.mutate({trans:x,type:"put",keys:Fe,values:Re,criteria:ue,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<de}).then(function(un){return ne(Re.length,un)})}).then(function(){return(0<Ze.length||ue&&m===xa)&&q.mutate({trans:x,type:"delete",keys:Ze,criteria:ue,isAdditionalChunk:0<de}).then(function(un){return ne(Ze.length,un)})}).then(function(){return X.length>de+fe&&se(de+Z)})})}var ue=hc(v)&&v.limit===1/0&&(typeof m!="function"||m===xa)&&{index:v.index,range:v.range};return se(0).then(function(){if(0<Q.length)throw new ct("Error modifying one or more objects",Q,J,te);return X.length})})})},$e.prototype.delete=function(){var m=this._ctx,g=m.range;return hc(m)&&(m.isPrimKey||g.type===3)?this._write(function(v){var x=m.table.core.schema.primaryKey,A=g;return m.table.core.count({trans:v,query:{index:x,range:A}}).then(function(F){return m.table.core.mutate({trans:v,type:"deleteRange",range:A}).then(function(j){var q=j.failures;if(j.lastResult,j.results,j=j.numFailures,j)throw new ct("Could not delete some values",Object.keys(q).map(function(G){return q[G]}),F-j);return F-j})})}):this.modify(xa)},$e);function $e(){}var xa=function(m,g){return g.value=null};function Ia(m,g){return m<g?-1:m===g?0:1}function Sa(m,g){return g<m?-1:m===g?0:1}function po(m,g,v){return m=m instanceof qp?new m.Collection(m):m,m._ctx.error=new(v||TypeError)(g),m}function fc(m){return new m.Collection(m,function(){return zp("")}).limit(0)}function bh(m,g,v,x){var A,F,j,q,G,Y,Z,H=v.length;if(!v.every(function(J){return typeof J=="string"}))return po(m,mh);function ne(J){A=J==="next"?function(X){return X.toUpperCase()}:function(X){return X.toLowerCase()},F=J==="next"?function(X){return X.toLowerCase()}:function(X){return X.toUpperCase()},j=J==="next"?Ia:Sa;var te=v.map(function(X){return{lower:F(X),upper:A(X)}}).sort(function(X,se){return j(X.lower,se.lower)});q=te.map(function(X){return X.upper}),G=te.map(function(X){return X.lower}),Z=(Y=J)==="next"?"":x}ne("next"),m=new m.Collection(m,function(){return pc(q[0],G[H-1]+x)}),m._ondirectionchange=function(J){ne(J)};var Q=0;return m._addAlgorithm(function(J,te,X){var se=J.key;if(typeof se!="string")return!1;var ue=F(se);if(g(ue,G,Q))return!0;for(var de=null,fe=Q;fe<H;++fe){var Ae=function(qe,Re,Fe,Ze,ze,dt){for(var Jt=Math.min(qe.length,Ze.length),un=-1,dn=0;dn<Jt;++dn){var Ma=Re[dn];if(Ma!==Ze[dn])return ze(qe[dn],Fe[dn])<0?qe.substr(0,dn)+Fe[dn]+Fe.substr(dn+1):ze(qe[dn],Ze[dn])<0?qe.substr(0,dn)+Ze[dn]+Fe.substr(dn+1):0<=un?qe.substr(0,un)+Re[un]+Fe.substr(un+1):null;ze(qe[dn],Ma)<0&&(un=dn)}return Jt<Ze.length&&dt==="next"?qe+Fe.substr(qe.length):Jt<qe.length&&dt==="prev"?qe.substr(0,Fe.length):un<0?null:qe.substr(0,un)+Ze[un]+Fe.substr(un+1)}(se,ue,q[fe],G[fe],j,Y);Ae===null&&de===null?Q=fe+1:(de===null||0<j(de,Ae))&&(de=Ae)}return te(de!==null?function(){J.continue(de+Z)}:X),!1}),m}function pc(m,g,v,x){return{type:2,lower:m,upper:g,lowerOpen:v,upperOpen:x}}function zp(m){return{type:1,lower:m,upper:m}}var qp=(Object.defineProperty(ii.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ii.prototype.between=function(m,g,v,x){v=v!==!1,x=x===!0;try{return 0<this._cmp(m,g)||this._cmp(m,g)===0&&(v||x)&&(!v||!x)?fc(this):new this.Collection(this,function(){return pc(m,g,!v,!x)})}catch{return po(this,fo)}},ii.prototype.equals=function(m){return m==null?po(this,fo):new this.Collection(this,function(){return zp(m)})},ii.prototype.above=function(m){return m==null?po(this,fo):new this.Collection(this,function(){return pc(m,void 0,!0)})},ii.prototype.aboveOrEqual=function(m){return m==null?po(this,fo):new this.Collection(this,function(){return pc(m,void 0,!1)})},ii.prototype.below=function(m){return m==null?po(this,fo):new this.Collection(this,function(){return pc(void 0,m,!1,!0)})},ii.prototype.belowOrEqual=function(m){return m==null?po(this,fo):new this.Collection(this,function(){return pc(void 0,m)})},ii.prototype.startsWith=function(m){return typeof m!="string"?po(this,mh):this.between(m,m+ss,!0,!0)},ii.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):bh(this,function(g,v){return g.indexOf(v[0])===0},[m],ss)},ii.prototype.equalsIgnoreCase=function(m){return bh(this,function(g,v){return g===v[0]},[m],"")},ii.prototype.anyOfIgnoreCase=function(){var m=Dn.apply(Ti,arguments);return m.length===0?fc(this):bh(this,function(g,v){return v.indexOf(g)!==-1},m,"")},ii.prototype.startsWithAnyOfIgnoreCase=function(){var m=Dn.apply(Ti,arguments);return m.length===0?fc(this):bh(this,function(g,v){return v.some(function(x){return g.indexOf(x)===0})},m,ss)},ii.prototype.anyOf=function(){var m=this,g=Dn.apply(Ti,arguments),v=this._cmp;try{g.sort(v)}catch{return po(this,fo)}if(g.length===0)return fc(this);var x=new this.Collection(this,function(){return pc(g[0],g[g.length-1])});x._ondirectionchange=function(F){v=F==="next"?m._ascending:m._descending,g.sort(v)};var A=0;return x._addAlgorithm(function(F,j,q){for(var G=F.key;0<v(G,g[A]);)if(++A===g.length)return j(q),!1;return v(G,g[A])===0||(j(function(){F.continue(g[A])}),!1)}),x},ii.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ii.prototype.noneOf=function(){var m=Dn.apply(Ti,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return po(this,fo)}var g=m.reduce(function(v,x){return v?v.concat([[v[v.length-1][1],x]]):[[-1/0,x]]},null);return g.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},ii.prototype.inAnyRange=function(se,g){var v=this,x=this._cmp,A=this._ascending,F=this._descending,j=this._min,q=this._max;if(se.length===0)return fc(this);if(!se.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&A(ue[0],ue[1])<=0}))return po(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pt.InvalidArgument);var G=!g||g.includeLowers!==!1,Y=g&&g.includeUppers===!0,Z,H=A;function ne(ue,de){return H(ue[0],de[0])}try{(Z=se.reduce(function(ue,de){for(var fe=0,Ae=ue.length;fe<Ae;++fe){var qe=ue[fe];if(x(de[0],qe[1])<0&&0<x(de[1],qe[0])){qe[0]=j(qe[0],de[0]),qe[1]=q(qe[1],de[1]);break}}return fe===Ae&&ue.push(de),ue},[])).sort(ne)}catch{return po(this,fo)}var Q=0,J=Y?function(ue){return 0<A(ue,Z[Q][1])}:function(ue){return 0<=A(ue,Z[Q][1])},te=G?function(ue){return 0<F(ue,Z[Q][0])}:function(ue){return 0<=F(ue,Z[Q][0])},X=J,se=new this.Collection(this,function(){return pc(Z[0][0],Z[Z.length-1][1],!G,!Y)});return se._ondirectionchange=function(ue){H=ue==="next"?(X=J,A):(X=te,F),Z.sort(ne)},se._addAlgorithm(function(ue,de,fe){for(var Ae,qe=ue.key;X(qe);)if(++Q===Z.length)return de(fe),!1;return!J(Ae=qe)&&!te(Ae)||(v._cmp(qe,Z[Q][1])===0||v._cmp(qe,Z[Q][0])===0||de(function(){H===A?ue.continue(Z[Q][0]):ue.continue(Z[Q][1])}),!1)}),se},ii.prototype.startsWithAnyOf=function(){var m=Dn.apply(Ti,arguments);return m.every(function(g){return typeof g=="string"})?m.length===0?fc(this):this.inAnyRange(m.map(function(g){return[g,g+ss]})):po(this,"startsWithAnyOf() only works with strings")},ii);function ii(){}function pi(m){return xn(function(g){return il(g),m(g.target.error),!1})}function il(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var rl="storagemutated",sd="x-storagemutated-1",sr=Ea(null,rl),nv=(Fs.prototype._lock=function(){return W(!rt.global),++this._reculock,this._reculock!==1||rt.global||(rt.lockOwnerFor=this),this},Fs.prototype._unlock=function(){if(W(!rt.global),--this._reculock==0)for(rt.global||(rt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{mo(m[1],m[0])}catch{}}return this},Fs.prototype._locked=function(){return this._reculock&&rt.lockOwnerFor!==this},Fs.prototype.create=function(m){var g=this;if(!this.mode)return this;var v=this.db.idbdb,x=this.db._state.dbOpenError;if(W(!this.idbtrans),!m&&!v)switch(x&&x.name){case"DatabaseClosedError":throw new pt.DatabaseClosed(x);case"MissingAPIError":throw new pt.MissingAPI(x.message,x);default:throw new pt.OpenFailed(x)}if(!this.active)throw new pt.TransactionInactive;return W(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xn(function(A){il(A),g._reject(m.error)}),m.onabort=xn(function(A){il(A),g.active&&g._reject(new pt.Abort(m.error)),g.active=!1,g.on("abort").fire(A)}),m.oncomplete=xn(function(){g.active=!1,g._resolve(),"mutatedParts"in m&&sr.storagemutated.fire(m.mutatedParts)}),this},Fs.prototype._promise=function(m,g,v){var x=this;if(m==="readwrite"&&this.mode!=="readwrite")return Ei(new pt.ReadOnly("Transaction is readonly"));if(!this.active)return Ei(new pt.TransactionInactive);if(this._locked())return new Je(function(F,j){x._blockedFuncs.push([function(){x._promise(m,g,v).then(F,j)},rt])});if(v)return lc(function(){var F=new Je(function(j,q){x._lock();var G=g(j,q,x);G&&G.then&&G.then(j,q)});return F.finally(function(){return x._unlock()}),F._lib=!0,F});var A=new Je(function(F,j){var q=g(F,j,x);q&&q.then&&q.then(F,j)});return A._lib=!0,A},Fs.prototype._root=function(){return this.parent?this.parent._root():this},Fs.prototype.waitFor=function(m){var g,v=this._root(),x=Je.resolve(m);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return x}):(v._waitingFor=x,v._waitingQueue=[],g=v.idbtrans.objectStore(v.storeNames[0]),function F(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(g.get(-1/0).onsuccess=F)}());var A=v._waitingFor;return new Je(function(F,j){x.then(function(q){return v._waitingQueue.push(xn(F.bind(null,q)))},function(q){return v._waitingQueue.push(xn(j.bind(null,q)))}).finally(function(){v._waitingFor===A&&(v._waitingFor=null)})})},Fs.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pt.Abort))},Fs.prototype.table=function(m){var g=this._memoizedTables||(this._memoizedTables={});if(u(g,m))return g[m];var v=this.schema[m];if(!v)throw new pt.NotFound("Table "+m+" not part of transaction");return v=new this.db.Table(m,v,this),v.core=this.db.core.table(m),g[m]=v},Fs);function Fs(){}function Xm(m,g,v,x,A,F,j){return{name:m,keyPath:g,unique:v,multi:x,auto:A,compound:F,src:(v&&!j?"&":"")+(x?"*":"")+(A?"++":"")+Dr(g)}}function Dr(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function Jm(m,g,v){return{name:m,primKey:g,indexes:v,mappedClass:null,idxByName:(x=function(A){return[A.name,A]},v.reduce(function(A,F,j){return j=x(F,j),j&&(A[j[0]]=j[1]),A},{}))};var x}var ad=function(m){try{return m.only([[]]),ad=function(){return[[]]},[[]]}catch{return ad=function(){return ss},ss}};function ls(m){return m==null?function(){}:typeof m=="string"?(g=m).split(".").length===1?function(v){return v[g]}:function(v){return oe(v,g)}:function(v){return oe(v,m)};var g}function gc(m){return[].slice.call(m)}var Zm=0;function go(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function Ta(m,g,G){function x(X){if(X.type===3)return null;if(X.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=X.lower,J=X.upper,te=X.lowerOpen,X=X.upperOpen;return Q===void 0?J===void 0?null:g.upperBound(J,!!X):J===void 0?g.lowerBound(Q,!!te):g.bound(Q,J,!!te,!!X)}function A(ne){var Q,J=ne.name;return{name:J,schema:ne,mutate:function(te){var X=te.trans,se=te.type,ue=te.keys,de=te.values,fe=te.range;return new Promise(function(Ae,qe){Ae=xn(Ae);var Re=X.objectStore(J),Fe=Re.keyPath==null,Ze=se==="put"||se==="add";if(!Ze&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var ze,dt=(ue||de||{length:1}).length;if(ue&&de&&ue.length!==de.length)throw new Error("Given keys array must have same length as given values array.");if(dt===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function Jt(ds){++Ma,il(ds)}var un=[],dn=[],Ma=0;if(se==="deleteRange"){if(fe.type===4)return Ae({numFailures:Ma,failures:dn,results:[],lastResult:void 0});fe.type===3?un.push(ze=Re.clear()):un.push(ze=Re.delete(x(fe)))}else{var Fe=Ze?Fe?[de,ue]:[de,null]:[ue,null],Yt=Fe[0],Mo=Fe[1];if(Ze)for(var Po=0;Po<dt;++Po)un.push(ze=Mo&&Mo[Po]!==void 0?Re[se](Yt[Po],Mo[Po]):Re[se](Yt[Po])),ze.onerror=Jt;else for(Po=0;Po<dt;++Po)un.push(ze=Re[se](Yt[Po])),ze.onerror=Jt}function mC(ds){ds=ds.target.result,un.forEach(function(lf,uk){return lf.error!=null&&(dn[uk]=lf.error)}),Ae({numFailures:Ma,failures:dn,results:se==="delete"?ue:un.map(function(lf){return lf.result}),lastResult:ds})}ze.onerror=function(ds){Jt(ds),mC(ds)},ze.onsuccess=mC})},getMany:function(te){var X=te.trans,se=te.keys;return new Promise(function(ue,de){ue=xn(ue);for(var fe,Ae=X.objectStore(J),qe=se.length,Re=new Array(qe),Fe=0,Ze=0,ze=function(un){un=un.target,Re[un._pos]=un.result,++Ze===Fe&&ue(Re)},dt=pi(de),Jt=0;Jt<qe;++Jt)se[Jt]!=null&&((fe=Ae.get(se[Jt]))._pos=Jt,fe.onsuccess=ze,fe.onerror=dt,++Fe);Fe===0&&ue(Re)})},get:function(te){var X=te.trans,se=te.key;return new Promise(function(ue,de){ue=xn(ue);var fe=X.objectStore(J).get(se);fe.onsuccess=function(Ae){return ue(Ae.target.result)},fe.onerror=pi(de)})},query:(Q=Y,function(te){return new Promise(function(X,se){X=xn(X);var ue,de,fe,Fe=te.trans,Ae=te.values,qe=te.limit,ze=te.query,Re=qe===1/0?void 0:qe,Ze=ze.index,ze=ze.range,Fe=Fe.objectStore(J),Ze=Ze.isPrimaryKey?Fe:Fe.index(Ze.name),ze=x(ze);if(qe===0)return X({result:[]});Q?((Re=Ae?Ze.getAll(ze,Re):Ze.getAllKeys(ze,Re)).onsuccess=function(dt){return X({result:dt.target.result})},Re.onerror=pi(se)):(ue=0,de=!Ae&&"openKeyCursor"in Ze?Ze.openKeyCursor(ze):Ze.openCursor(ze),fe=[],de.onsuccess=function(dt){var Jt=de.result;return Jt?(fe.push(Ae?Jt.value:Jt.primaryKey),++ue===qe?X({result:fe}):void Jt.continue()):X({result:fe})},de.onerror=pi(se))})}),openCursor:function(te){var X=te.trans,se=te.values,ue=te.query,de=te.reverse,fe=te.unique;return new Promise(function(Ae,qe){Ae=xn(Ae);var Ze=ue.index,Re=ue.range,Fe=X.objectStore(J),Fe=Ze.isPrimaryKey?Fe:Fe.index(Ze.name),Ze=de?fe?"prevunique":"prev":fe?"nextunique":"next",ze=!se&&"openKeyCursor"in Fe?Fe.openKeyCursor(x(Re),Ze):Fe.openCursor(x(Re),Ze);ze.onerror=pi(qe),ze.onsuccess=xn(function(dt){var Jt,un,dn,Ma,Yt=ze.result;Yt?(Yt.___id=++Zm,Yt.done=!1,Jt=Yt.continue.bind(Yt),un=(un=Yt.continuePrimaryKey)&&un.bind(Yt),dn=Yt.advance.bind(Yt),Ma=function(){throw new Error("Cursor not stopped")},Yt.trans=X,Yt.stop=Yt.continue=Yt.continuePrimaryKey=Yt.advance=function(){throw new Error("Cursor not started")},Yt.fail=xn(qe),Yt.next=function(){var Mo=this,Po=1;return this.start(function(){return Po--?Mo.continue():Mo.stop()}).then(function(){return Mo})},Yt.start=function(Mo){function Po(){if(ze.result)try{Mo()}catch(ds){Yt.fail(ds)}else Yt.done=!0,Yt.start=function(){throw new Error("Cursor behind last entry")},Yt.stop()}var mC=new Promise(function(ds,lf){ds=xn(ds),ze.onerror=pi(lf),Yt.fail=lf,Yt.stop=function(uk){Yt.stop=Yt.continue=Yt.continuePrimaryKey=Yt.advance=Ma,ds(uk)}});return ze.onsuccess=xn(function(ds){ze.onsuccess=Po,Po()}),Yt.continue=Jt,Yt.continuePrimaryKey=un,Yt.advance=dn,Po(),mC},Ae(Yt)):Ae(null)},qe)})},count:function(te){var X=te.query,se=te.trans,ue=X.index,de=X.range;return new Promise(function(fe,Ae){var qe=se.objectStore(J),Re=ue.isPrimaryKey?qe:qe.index(ue.name),qe=x(de),Re=qe?Re.count(qe):Re.count();Re.onsuccess=xn(function(Fe){return fe(Fe.target.result)}),Re.onerror=pi(Ae)})}}}var F,j,q,Z=(j=G,q=gc((F=m).objectStoreNames),{schema:{name:F.name,tables:q.map(function(ne){return j.objectStore(ne)}).map(function(ne){var Q=ne.keyPath,X=ne.autoIncrement,J=o(Q),te={},X={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:J,keyPath:Q,autoIncrement:X,unique:!0,extractKey:ls(Q)},indexes:gc(ne.indexNames).map(function(se){return ne.index(se)}).map(function(fe){var ue=fe.name,de=fe.unique,Ae=fe.multiEntry,fe=fe.keyPath,Ae={name:ue,compound:o(fe),keyPath:fe,unique:de,multiEntry:Ae,extractKey:ls(fe)};return te[go(fe)]=Ae}),getIndexByKeyPath:function(se){return te[go(se)]}};return te[":id"]=X.primaryKey,Q!=null&&(te[go(Q)]=X.primaryKey),X})},hasGetAll:0<q.length&&"getAll"in j.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),G=Z.schema,Y=Z.hasGetAll,Z=G.tables.map(A),H={};return Z.forEach(function(ne){return H[ne.name]=ne}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(ne){if(!H[ne])throw new Error("Table '".concat(ne,"' not found"));return H[ne]},MIN_KEY:-1/0,MAX_KEY:ad(g),schema:G}}function ef(m,g,v,x){var A=v.IDBKeyRange;return v.indexedDB,{dbcore:(x=Ta(g,A,x),m.dbcore.reduce(function(F,j){return j=j.create,t(t({},F),j(F))},x))}}function _c(m,x){var v=x.db,x=ef(m._middlewares,v,m._deps,x);m.core=x.dbcore,m.tables.forEach(function(A){var F=A.name;m.core.schema.tables.some(function(j){return j.name===F})&&(A.core=m.core.table(F),m[F]instanceof m.Table&&(m[F].core=A.core))})}function Nt(m,g,v,x){v.forEach(function(A){var F=x[A];g.forEach(function(j){var q=function G(Y,Z){return C(Y,Z)||(Y=a(Y))&&G(Y,Z)}(j,A);(!q||"value"in q&&q.value===void 0)&&(j===m.Transaction.prototype||j instanceof m.Transaction?_(j,A,{get:function(){return this.table(A)},set:function(G){p(this,A,{value:G,writable:!0,configurable:!0,enumerable:!0})}}):j[A]=new m.Table(A,F))})})}function tf(m,g){g.forEach(function(v){for(var x in v)v[x]instanceof m.Table&&delete v[x]})}function iv(m,g){return m._cfg.version-g._cfg.version}function nf(m,g,v,x){var A=m._dbSchema;v.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Jm("$meta",Vs("")[0],[]),m._storeNames.push("$meta"));var F=m._createTransaction("readwrite",m._storeNames,A);F.create(v),F._completion.catch(x);var j=F._reject.bind(F),q=rt.transless||rt;lc(function(){return rt.trans=F,rt.transless=q,g!==0?(_c(m,v),Y=g,((G=F).storeNames.includes("$meta")?G.table("$meta").get("version").then(function(Z){return Z??Y}):Je.resolve(Y)).then(function(Z){return ne=Z,Q=F,J=v,te=[],Z=(H=m)._versions,X=H._dbSchema=Zl(0,H.idbdb,J),(Z=Z.filter(function(se){return se._cfg.version>=ne})).length!==0?(Z.forEach(function(se){te.push(function(){var ue=X,de=se._cfg.dbschema;Ch(H,ue,J),Ch(H,de,J),X=H._dbSchema=de;var fe=cd(ue,de);fe.add.forEach(function(Ze){Da(J,Ze[0],Ze[1].primKey,Ze[1].indexes)}),fe.change.forEach(function(Ze){if(Ze.recreate)throw new pt.Upgrade("Not yet support for changing primary key");var ze=J.objectStore(Ze.name);Ze.add.forEach(function(dt){return $i(ze,dt)}),Ze.change.forEach(function(dt){ze.deleteIndex(dt.name),$i(ze,dt)}),Ze.del.forEach(function(dt){return ze.deleteIndex(dt)})});var Ae=se._cfg.contentUpgrade;if(Ae&&se._cfg.version>ne){_c(H,J),Q._memoizedTables={};var qe=we(de);fe.del.forEach(function(Ze){qe[Ze]=ue[Ze]}),tf(H,[H.Transaction.prototype]),Nt(H,[H.Transaction.prototype],r(qe),qe),Q.schema=qe;var Re,Fe=xr(Ae);return Fe&&Ir(),fe=Je.follow(function(){var Ze;(Re=Ae(Q))&&Fe&&(Ze=uc.bind(null,null),Re.then(Ze,Ze))}),Re&&typeof Re.then=="function"?Je.resolve(Re):fe.then(function(){return Re})}}),te.push(function(ue){var de,fe,Ae=se._cfg.dbschema;de=Ae,fe=ue,[].slice.call(fe.db.objectStoreNames).forEach(function(qe){return de[qe]==null&&fe.db.deleteObjectStore(qe)}),tf(H,[H.Transaction.prototype]),Nt(H,[H.Transaction.prototype],H._storeNames,H._dbSchema),Q.schema=H._dbSchema}),te.push(function(ue){H.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(H.idbdb.version/10)===se._cfg.version?(H.idbdb.deleteObjectStore("$meta"),delete H._dbSchema.$meta,H._storeNames=H._storeNames.filter(function(de){return de!=="$meta"})):ue.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return te.length?Je.resolve(te.shift()(Q.idbtrans)).then(se):Je.resolve()}().then(function(){wh(X,J)})):Je.resolve();var H,ne,Q,J,te,X}).catch(j)):(r(A).forEach(function(Z){Da(v,Z,A[Z].primKey,A[Z].indexes)}),_c(m,v),void Je.follow(function(){return m.on.populate.fire(F)}).catch(j));var G,Y})}function rf(m,g){wh(m._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var v=Zl(0,m.idbdb,g);Ch(m,m._dbSchema,g);for(var x=0,A=cd(v,m._dbSchema).change;x<A.length;x++){var F=function(j){if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=g.objectStore(j.name);j.add.forEach(function(G){ko&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(G.src)),$i(q,G)})}(A[x]);if(typeof F=="object")return F.value}}function cd(m,g){var v,x={del:[],add:[],change:[]};for(v in m)g[v]||x.del.push(v);for(v in g){var A=m[v],F=g[v];if(A){var j={name:v,def:F,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(F.primKey.keyPath||"")||A.primKey.auto!==F.primKey.auto)j.recreate=!0,x.change.push(j);else{var q=A.idxByName,G=F.idxByName,Y=void 0;for(Y in q)G[Y]||j.del.push(Y);for(Y in G){var Z=q[Y],H=G[Y];Z?Z.src!==H.src&&j.change.push(H):j.add.push(H)}(0<j.del.length||0<j.add.length||0<j.change.length)&&x.change.push(j)}}else x.add.push([v,F])}return x}function Da(m,g,v,x){var A=m.db.createObjectStore(g,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return x.forEach(function(F){return $i(A,F)}),A}function wh(m,g){r(m).forEach(function(v){g.db.objectStoreNames.contains(v)||(ko&&console.debug("Dexie: Creating missing table",v),Da(g,v,m[v].primKey,m[v].indexes))})}function $i(m,g){m.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Zl(m,g,v){var x={};return k(g.objectStoreNames,0).forEach(function(A){for(var F=v.objectStore(A),j=Xm(Dr(Y=F.keyPath),Y||"",!0,!1,!!F.autoIncrement,Y&&typeof Y!="string",!0),q=[],G=0;G<F.indexNames.length;++G){var Z=F.index(F.indexNames[G]),Y=Z.keyPath,Z=Xm(Z.name,Y,!!Z.unique,!!Z.multiEntry,!1,Y&&typeof Y!="string",!1);q.push(Z)}x[A]=Jm(A,j,q)}),x}function Ch(m,g,v){for(var x=v.db.objectStoreNames,A=0;A<x.length;++A){var F=x[A],j=v.objectStore(F);m._hasGetAll="getAll"in j;for(var q=0;q<j.indexNames.length;++q){var G=j.indexNames[q],Y=j.index(G).keyPath,Z=typeof Y=="string"?Y:"["+k(Y).join("+")+"]";!g[F]||(Y=g[F].idxByName[Z])&&(Y.name=G,delete g[F].idxByName[Z],g[F].idxByName[G]=Y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function Vs(m){return m.split(",").map(function(g,v){var x=(g=g.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return Xm(x,A||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),o(A),v===0)})}var of=(yc.prototype._parseStoresSpec=function(m,g){r(m).forEach(function(v){if(m[v]!==null){var x=Vs(m[v]),A=x.shift();if(A.unique=!0,A.multi)throw new pt.Schema("Primary key cannot be multi-valued");x.forEach(function(F){if(F.auto)throw new pt.Schema("Only primary key can be marked as autoIncrement (++)");if(!F.keyPath)throw new pt.Schema("Index must have a name and cannot be an empty string")}),g[v]=Jm(v,A,x)}})},yc.prototype.stores=function(v){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,v):v;var v=g._versions,x={},A={};return v.forEach(function(F){s(x,F._cfg.storesSource),A=F._cfg.dbschema={},F._parseStoresSpec(x,A)}),g._dbSchema=A,tf(g,[g._allTables,g,g.Transaction.prototype]),Nt(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],r(A),A),g._storeNames=r(A),this},yc.prototype.upgrade=function(m){return this._cfg.contentUpgrade=Hm(this._cfg.contentUpgrade||ln,m),this},yc);function yc(){}function ka(m,g){var v=m._dbNamesDB;return v||(v=m._dbNamesDB=new vo(fh,{addons:[],indexedDB:m,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function ld(m){return m&&typeof m.databases=="function"}function Aa(m){return lc(function(){return rt.letThrough=!0,m()})}function sf(m){return!("from"in m)}var ar=function(m,g){if(!this){var v=new ar;return m&&"d"in m&&s(v,m),v}s(this,arguments.length?{d:1,from:m,to:1<arguments.length?g:m}:{d:0})};function _o(m,g,v){var x=sn(g,v);if(!isNaN(x)){if(0<x)throw RangeError();if(sf(m))return s(m,{from:g,to:v,d:1});var A=m.l,x=m.r;if(sn(v,m.from)<0)return A?_o(A,g,v):m.l={from:g,to:v,d:1,l:null,r:null},eu(m);if(0<sn(g,m.to))return x?_o(x,g,v):m.r={from:g,to:v,d:1,l:null,r:null},eu(m);sn(g,m.from)<0&&(m.from=g,m.l=null,m.d=x?x.d+1:1),0<sn(v,m.to)&&(m.to=v,m.r=null,m.d=m.l?m.l.d+1:1),v=!m.r,A&&!m.l&&ol(m,A),x&&v&&ol(m,x)}}function ol(m,g){sf(g)||function v(x,G){var F=G.from,j=G.to,q=G.l,G=G.r;_o(x,F,j),q&&v(x,q),G&&v(x,G)}(m,g)}function Eh(m,g){var v=vc(g),x=v.next();if(x.done)return!1;for(var A=x.value,F=vc(m),j=F.next(A.from),q=j.value;!x.done&&!j.done;){if(sn(q.from,A.to)<=0&&0<=sn(q.to,A.from))return!0;sn(A.from,q.from)<0?A=(x=v.next(q.from)).value:q=(j=F.next(A.from)).value}return!1}function vc(m){var g=sf(m)?null:{s:0,n:m};return{next:function(v){for(var x=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,x)for(;g.n.l&&sn(v,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!x||sn(v,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function eu(m){var g,v,x=(((g=m.r)===null||g===void 0?void 0:g.d)||0)-(((v=m.l)===null||v===void 0?void 0:v.d)||0),A=1<x?"r":x<-1?"l":"";A&&(g=A=="r"?"l":"r",v=t({},m),x=m[A],m.from=x.from,m.to=x.to,m[A]=x[A],v[A]=x[g],(m[g]=v).d=xh(v)),m.d=xh(m)}function xh(v){var g=v.r,v=v.l;return(g?v?Math.max(g.d,v.d):g.d:v?v.d:0)+1}function Ls(m,g){return r(g).forEach(function(v){m[v]?ol(m[v],g[v]):m[v]=function x(A){var F,j,q={};for(F in A)u(A,F)&&(j=A[F],q[F]=!j||typeof j!="object"||I.has(j.constructor)?j:x(j));return q}(g[v])}),m}function ud(m,g){return m.all||g.all||Object.keys(m).some(function(v){return g[v]&&Eh(g[v],m[v])})}h(ar.prototype,((bc={add:function(m){return ol(this,m),this},addKey:function(m){return _o(this,m,m),this},addKeys:function(m){var g=this;return m.forEach(function(v){return _o(g,v,v)}),this},hasKey:function(m){var g=vc(this).next(m).value;return g&&sn(g.from,m)<=0&&0<=sn(g.to,m)}})[Ot]=function(){return vc(this)},bc));var Ra={},Kr={},dd=!1;function tu(m){Ls(Kr,m),dd||(dd=!0,setTimeout(function(){dd=!1,hd(Kr,!(Kr={}))},0))}function hd(m,g){g===void 0&&(g=!1);var v=new Set;if(m.all)for(var x=0,A=Object.values(Ra);x<A.length;x++)Ih(j=A[x],m,v,g);else for(var F in m){var j,q=/^idb\:\/\/(.*)\/(.*)\//.exec(F);q&&(F=q[1],q=q[2],(j=Ra["idb://".concat(F,"/").concat(q)])&&Ih(j,m,v,g))}v.forEach(function(G){return G()})}function Ih(m,g,v,x){for(var A=[],F=0,j=Object.entries(m.queries.query);F<j.length;F++){for(var q=j[F],G=q[0],Y=[],Z=0,H=q[1];Z<H.length;Z++){var ne=H[Z];ud(g,ne.obsSet)?ne.subscribers.forEach(function(X){return v.add(X)}):x&&Y.push(ne)}x&&A.push([G,Y])}if(x)for(var Q=0,J=A;Q<J.length;Q++){var te=J[Q],G=te[0],Y=te[1];m.queries.query[G]=Y}}function sl(m){var g=m._state,v=m._deps.indexedDB;if(g.isBeingOpened||m.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?Ei(g.dbOpenError):m});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var x=g.openCanceller,A=Math.round(10*m.verno),F=!1;function j(){if(g.openCanceller!==x)throw new pt.DatabaseClosed("db.open() was cancelled")}function q(){return new Je(function(ne,Q){if(j(),!v)throw new pt.MissingAPI;var J=m.name,te=g.autoSchema||!A?v.open(J):v.open(J,A);if(!te)throw new pt.MissingAPI;te.onerror=pi(Q),te.onblocked=xn(m._fireOnBlocked),te.onupgradeneeded=xn(function(X){var se;Z=te.transaction,g.autoSchema&&!m._options.allowEmptyDB?(te.onerror=il,Z.abort(),te.result.close(),(se=v.deleteDatabase(J)).onsuccess=se.onerror=xn(function(){Q(new pt.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(Z.onerror=pi(Q),X=X.oldVersion>Math.pow(2,62)?0:X.oldVersion,H=X<1,m.idbdb=te.result,F&&rf(m,Z),nf(m,X/10,Z,Q))},Q),te.onsuccess=xn(function(){Z=null;var X,se,ue,de,fe,Ae=m.idbdb=te.result,qe=k(Ae.objectStoreNames);if(0<qe.length)try{var Re=Ae.transaction((de=qe).length===1?de[0]:de,"readonly");if(g.autoSchema)se=Ae,ue=Re,(X=m).verno=se.version/10,ue=X._dbSchema=Zl(0,se,ue),X._storeNames=k(se.objectStoreNames,0),Nt(X,[X._allTables],r(ue),ue);else if(Ch(m,m._dbSchema,Re),((fe=cd(Zl(0,(fe=m).idbdb,Re),fe._dbSchema)).add.length||fe.change.some(function(Fe){return Fe.add.length||Fe.change.length}))&&!F)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),A=Ae.version+1,F=!0,ne(q());_c(m,Re)}catch{}dc.push(m),Ae.onversionchange=xn(function(Fe){g.vcFired=!0,m.on("versionchange").fire(Fe)}),Ae.onclose=xn(function(Fe){m.on("close").fire(Fe)}),H&&(fe=m._deps,Re=J,Ae=fe.indexedDB,fe=fe.IDBKeyRange,ld(Ae)||Re===fh||ka(Ae,fe).put({name:Re}).catch(ln)),ne()},Q)}).catch(function(ne){switch(ne?.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<A)return A=0,q()}return Je.reject(ne)})}var G,Y=g.dbReadyResolve,Z=null,H=!1;return Je.race([x,(typeof navigator>"u"?Je.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ne){function Q(){return indexedDB.databases().finally(ne)}G=setInterval(Q,100),Q()}).finally(function(){return clearInterval(G)}):Promise.resolve()).then(q)]).then(function(){return j(),g.onReadyBeingFired=[],Je.resolve(Aa(function(){return m.on.ready.fire(m.vip)})).then(function ne(){if(0<g.onReadyBeingFired.length){var Q=g.onReadyBeingFired.reduce(Hm,ln);return g.onReadyBeingFired=[],Je.resolve(Aa(function(){return Q(m.vip)})).then(ne)}})}).finally(function(){g.openCanceller===x&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(ne){g.dbOpenError=ne;try{Z&&Z.abort()}catch{}return x===g.openCanceller&&m._close(),Ei(ne)}).finally(function(){g.openComplete=!0,Y()}).then(function(){var ne;return H&&(ne={},m.tables.forEach(function(Q){Q.schema.indexes.forEach(function(J){J.name&&(ne["idb://".concat(m.name,"/").concat(Q.name,"/").concat(J.name)]=new ar(-1/0,[[[]]]))}),ne["idb://".concat(m.name,"/").concat(Q.name,"/")]=ne["idb://".concat(m.name,"/").concat(Q.name,"/:dels")]=new ar(-1/0,[[[]]])}),sr(rl).fire(ne),hd(ne,!0)),m})}function Xn(m){function g(F){return m.next(F)}var v=A(g),x=A(function(F){return m.throw(F)});function A(F){return function(G){var q=F(G),G=q.value;return q.done?G:G&&typeof G.then=="function"?G.then(v,x):o(G)?Promise.all(G).then(v,x):v(G)}}return A(g)()}function nu(m,g,v){for(var x=o(m)?m.slice():[m],A=0;A<v;++A)x.push(g);return x}var af={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return t(t({},m),{table:function(g){var v=m.table(g),x=v.schema,A={},F=[];function j(H,ne,Q){var J=go(H),te=A[J]=A[J]||[],X=H==null?0:typeof H=="string"?1:H.length,se=0<ne,se=t(t({},Q),{name:se?"".concat(J,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:se,keyTail:ne,keyLength:X,extractKey:ls(H),unique:!se&&Q.unique});return te.push(se),se.isPrimaryKey||F.push(se),1<X&&j(X===2?H[0]:H.slice(0,X-1),ne+1,Q),te.sort(function(ue,de){return ue.keyTail-de.keyTail}),se}g=j(x.primaryKey.keyPath,0,x.primaryKey),A[":id"]=[g];for(var q=0,G=x.indexes;q<G.length;q++){var Y=G[q];j(Y.keyPath,0,Y)}function Z(H){var ne,Q=H.query.index;return Q.isVirtual?t(t({},H),{query:{index:Q.lowLevelIndex,range:(ne=H.query.range,Q=Q.keyTail,{type:ne.type===1?2:ne.type,lower:nu(ne.lower,ne.lowerOpen?m.MAX_KEY:m.MIN_KEY,Q),lowerOpen:!0,upper:nu(ne.upper,ne.upperOpen?m.MIN_KEY:m.MAX_KEY,Q),upperOpen:!0})}}):H}return t(t({},v),{schema:t(t({},x),{primaryKey:g,indexes:F,getIndexByKeyPath:function(H){return(H=A[go(H)])&&H[0]}}),count:function(H){return v.count(Z(H))},query:function(H){return v.query(Z(H))},openCursor:function(H){var ne=H.query.index,Q=ne.keyTail,J=ne.isVirtual,te=ne.keyLength;return J?v.openCursor(Z(H)).then(function(se){return se&&X(se)}):v.openCursor(H);function X(se){return Object.create(se,{continue:{value:function(ue){ue!=null?se.continue(nu(ue,H.reverse?m.MAX_KEY:m.MIN_KEY,Q)):H.unique?se.continue(se.key.slice(0,te).concat(H.reverse?m.MIN_KEY:m.MAX_KEY,Q)):se.continue()}},continuePrimaryKey:{value:function(ue,de){se.continuePrimaryKey(nu(ue,m.MAX_KEY,Q),de)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var ue=se.key;return te===1?ue[0]:ue.slice(0,te)}},value:{get:function(){return se.value}}})}}})}})}};function yo(m,g,v,x){return v=v||{},x=x||"",r(m).forEach(function(A){var F,j,q;u(g,A)?(F=m[A],j=g[A],typeof F=="object"&&typeof j=="object"&&F&&j?(q=S(F))!==S(j)?v[x+A]=g[A]:q==="Object"?yo(F,j,v,x+A+"."):F!==j&&(v[x+A]=g[A]):F!==j&&(v[x+A]=g[A])):v[x+A]=void 0}),r(g).forEach(function(A){u(m,A)||(v[x+A]=g[A])}),v}function c(m,g){return g.type==="delete"?g.keys:g.keys||g.values.map(m.extractKey)}var d={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return t(t({},m),{table:function(g){var v=m.table(g),x=v.schema.primaryKey;return t(t({},v),{mutate:function(A){var F=rt.trans,j=F.table(g).hook,q=j.deleting,G=j.creating,Y=j.updating;switch(A.type){case"add":if(G.fire===ln)break;return F._promise("readwrite",function(){return Z(A)},!0);case"put":if(G.fire===ln&&Y.fire===ln)break;return F._promise("readwrite",function(){return Z(A)},!0);case"delete":if(q.fire===ln)break;return F._promise("readwrite",function(){return Z(A)},!0);case"deleteRange":if(q.fire===ln)break;return F._promise("readwrite",function(){return function H(ne,Q,J){return v.query({trans:ne,values:!1,query:{index:x,range:Q},limit:J}).then(function(te){var X=te.result;return Z({type:"delete",keys:X,trans:ne}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):X.length<J?{failures:[],numFailures:0,lastResult:void 0}:H(ne,t(t({},Q),{lower:X[X.length-1],lowerOpen:!0}),J)})})}(A.trans,A.range,1e4)},!0)}return v.mutate(A);function Z(H){var ne,Q,J,te=rt.trans,X=H.keys||c(x,H);if(!X)throw new Error("Keys missing");return(H=H.type==="add"||H.type==="put"?t(t({},H),{keys:X}):t({},H)).type!=="delete"&&(H.values=e([],H.values,!0)),H.keys&&(H.keys=e([],H.keys,!0)),ne=v,J=X,((Q=H).type==="add"?Promise.resolve([]):ne.getMany({trans:Q.trans,keys:J,cache:"immutable"})).then(function(se){var ue=X.map(function(de,fe){var Ae,qe,Re,Fe=se[fe],Ze={onerror:null,onsuccess:null};return H.type==="delete"?q.fire.call(Ze,de,Fe,te):H.type==="add"||Fe===void 0?(Ae=G.fire.call(Ze,de,H.values[fe],te),de==null&&Ae!=null&&(H.keys[fe]=de=Ae,x.outbound||ae(H.values[fe],x.keyPath,de))):(Ae=yo(Fe,H.values[fe]),(qe=Y.fire.call(Ze,Ae,de,Fe,te))&&(Re=H.values[fe],Object.keys(qe).forEach(function(ze){u(Re,ze)?Re[ze]=qe[ze]:ae(Re,ze,qe[ze])}))),Ze});return v.mutate(H).then(function(de){for(var fe=de.failures,Ae=de.results,qe=de.numFailures,de=de.lastResult,Re=0;Re<X.length;++Re){var Fe=(Ae||X)[Re],Ze=ue[Re];Fe==null?Ze.onerror&&Ze.onerror(fe[Re]):Ze.onsuccess&&Ze.onsuccess(H.type==="put"&&se[Re]?H.values[Re]:Fe)}return{failures:fe,results:Ae,numFailures:qe,lastResult:de}}).catch(function(de){return ue.forEach(function(fe){return fe.onerror&&fe.onerror(de)}),Promise.reject(de)})})}}})}})}};function f(m,g,v){try{if(!g||g.keys.length<m.length)return null;for(var x=[],A=0,F=0;A<g.keys.length&&F<m.length;++A)sn(g.keys[A],m[F])===0&&(x.push(v?N(g.values[A]):g.values[A]),++F);return x.length===m.length?x:null}catch{return null}}var y={stack:"dbcore",level:-1,create:function(m){return{table:function(g){var v=m.table(g);return t(t({},v),{getMany:function(x){if(!x.cache)return v.getMany(x);var A=f(x.keys,x.trans._cache,x.cache==="clone");return A?Je.resolve(A):v.getMany(x).then(function(F){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?N(F):F},F})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),v.mutate(x)}})}}}};function L(m,g){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function $(m,g){switch(m){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ie={stack:"dbcore",level:0,name:"Observability",create:function(m){var g=m.schema.name,v=new ar(m.MIN_KEY,m.MAX_KEY);return t(t({},m),{transaction:function(x,A,F){if(rt.subscr&&A!=="readonly")throw new pt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(rt.querier));return m.transaction(x,A,F)},table:function(x){var A=m.table(x),F=A.schema,j=F.primaryKey,H=F.indexes,q=j.extractKey,G=j.outbound,Y=j.autoIncrement&&H.filter(function(Q){return Q.compound&&Q.keyPath.includes(j.keyPath)}),Z=t(t({},A),{mutate:function(Q){function J(ze){return ze="idb://".concat(g,"/").concat(x,"/").concat(ze),de[ze]||(de[ze]=new ar)}var te,X,se,ue=Q.trans,de=Q.mutatedParts||(Q.mutatedParts={}),fe=J(""),Ae=J(":dels"),qe=Q.type,Ze=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[c(j,Q).filter(function(ze){return ze}),Q.values]:[],Re=Ze[0],Fe=Ze[1],Ze=Q.trans._cache;return o(Re)?(fe.addKeys(Re),(Ze=qe==="delete"||Re.length===Fe.length?f(Re,Ze):null)||Ae.addKeys(Re),(Ze||Fe)&&(te=J,X=Ze,se=Fe,F.indexes.forEach(function(ze){var dt=te(ze.name||"");function Jt(dn){return dn!=null?ze.extractKey(dn):null}function un(dn){return ze.multiEntry&&o(dn)?dn.forEach(function(Ma){return dt.addKey(Ma)}):dt.addKey(dn)}(X||se).forEach(function(dn,Mo){var Yt=X&&Jt(X[Mo]),Mo=se&&Jt(se[Mo]);sn(Yt,Mo)!==0&&(Yt!=null&&un(Yt),Mo!=null&&un(Mo))})}))):Re?(Fe={from:(Fe=Re.lower)!==null&&Fe!==void 0?Fe:m.MIN_KEY,to:(Fe=Re.upper)!==null&&Fe!==void 0?Fe:m.MAX_KEY},Ae.add(Fe),fe.add(Fe)):(fe.add(v),Ae.add(v),F.indexes.forEach(function(ze){return J(ze.name).add(v)})),A.mutate(Q).then(function(ze){return!Re||Q.type!=="add"&&Q.type!=="put"||(fe.addKeys(ze.results),Y&&Y.forEach(function(dt){for(var Jt=Q.values.map(function(Yt){return dt.extractKey(Yt)}),un=dt.keyPath.findIndex(function(Yt){return Yt===j.keyPath}),dn=0,Ma=ze.results.length;dn<Ma;++dn)Jt[dn][un]=ze.results[dn];J(dt.name).addKeys(Jt)})),ue.mutatedParts=Ls(ue.mutatedParts||{},de),ze})}}),H=function(J){var te=J.query,J=te.index,te=te.range;return[J,new ar((J=te.lower)!==null&&J!==void 0?J:m.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:m.MAX_KEY)]},ne={get:function(Q){return[j,new ar(Q.key)]},getMany:function(Q){return[j,new ar().addKeys(Q.keys)]},count:H,query:H,openCursor:H};return r(ne).forEach(function(Q){Z[Q]=function(J){var te=rt.subscr,X=!!te,se=L(rt,A)&&$(Q,J)?J.obsSet={}:te;if(X){var ue=function(Fe){return Fe="idb://".concat(g,"/").concat(x,"/").concat(Fe),se[Fe]||(se[Fe]=new ar)},de=ue(""),fe=ue(":dels"),te=ne[Q](J),X=te[0],te=te[1];if((Q==="query"&&X.isPrimaryKey&&!J.values?fe:ue(X.name||"")).add(te),!X.isPrimaryKey){if(Q!=="count"){var Ae=Q==="query"&&G&&J.values&&A.query(t(t({},J),{values:!1}));return A[Q].apply(this,arguments).then(function(Fe){if(Q==="query"){if(G&&J.values)return Ae.then(function(Jt){return Jt=Jt.result,de.addKeys(Jt),Fe});var Ze=J.values?Fe.result.map(q):Fe.result;(J.values?de:fe).addKeys(Ze)}else if(Q==="openCursor"){var ze=Fe,dt=J.values;return ze&&Object.create(ze,{key:{get:function(){return fe.addKey(ze.primaryKey),ze.key}},primaryKey:{get:function(){var Jt=ze.primaryKey;return fe.addKey(Jt),Jt}},value:{get:function(){return dt&&de.addKey(ze.primaryKey),ze.value}}})}return Fe})}fe.add(v)}}return A[Q].apply(this,arguments)}}),Z}})}};function wt(m,g,v){if(v.numFailures===0)return g;if(g.type==="deleteRange")return null;var x=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return v.numFailures===x?null:(g=t({},g),o(g.keys)&&(g.keys=g.keys.filter(function(A,F){return!(F in v.failures)})),"values"in g&&o(g.values)&&(g.values=g.values.filter(function(A,F){return!(F in v.failures)})),g)}function an(m,g){return v=m,((x=g).lower===void 0||(x.lowerOpen?0<sn(v,x.lower):0<=sn(v,x.lower)))&&(m=m,(g=g).upper===void 0||(g.upperOpen?sn(m,g.upper)<0:sn(m,g.upper)<=0));var v,x}function lt(m,g,ne,x,A,F){if(!ne||ne.length===0)return m;var j=g.query.index,q=j.multiEntry,G=g.query.range,Y=x.schema.primaryKey.extractKey,Z=j.extractKey,H=(j.lowLevelIndex||j).extractKey,ne=ne.reduce(function(Q,J){var te=Q,X=[];if(J.type==="add"||J.type==="put")for(var se=new ar,ue=J.values.length-1;0<=ue;--ue){var de,fe=J.values[ue],Ae=Y(fe);se.hasKey(Ae)||(de=Z(fe),(q&&o(de)?de.some(function(ze){return an(ze,G)}):an(de,G))&&(se.addKey(Ae),X.push(fe)))}switch(J.type){case"add":var qe=new ar().addKeys(g.values?Q.map(function(dt){return Y(dt)}):Q),te=Q.concat(g.values?X.filter(function(dt){return dt=Y(dt),!qe.hasKey(dt)&&(qe.addKey(dt),!0)}):X.map(function(dt){return Y(dt)}).filter(function(dt){return!qe.hasKey(dt)&&(qe.addKey(dt),!0)}));break;case"put":var Re=new ar().addKeys(J.values.map(function(dt){return Y(dt)}));te=Q.filter(function(dt){return!Re.hasKey(g.values?Y(dt):dt)}).concat(g.values?X:X.map(function(dt){return Y(dt)}));break;case"delete":var Fe=new ar().addKeys(J.keys);te=Q.filter(function(dt){return!Fe.hasKey(g.values?Y(dt):dt)});break;case"deleteRange":var Ze=J.range;te=Q.filter(function(dt){return!an(Y(dt),Ze)})}return te},m);return ne===m?m:(ne.sort(function(Q,J){return sn(H(Q),H(J))||sn(Y(Q),Y(J))}),g.limit&&g.limit<1/0&&(ne.length>g.limit?ne.length=g.limit:m.length===g.limit&&ne.length<g.limit&&(A.dirty=!0)),F?Object.freeze(ne):ne)}function In(m,g){return sn(m.lower,g.lower)===0&&sn(m.upper,g.upper)===0&&!!m.lowerOpen==!!g.lowerOpen&&!!m.upperOpen==!!g.upperOpen}function kn(m,g){return function(v,x,A,F){if(v===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=sn(v,x))===0){if(A&&F)return 0;if(A)return 1;if(F)return-1}return x}(m.lower,g.lower,m.lowerOpen,g.lowerOpen)<=0&&0<=function(v,x,A,F){if(v===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=sn(v,x))===0){if(A&&F)return 0;if(A)return-1;if(F)return 1}return x}(m.upper,g.upper,m.upperOpen,g.upperOpen)}function us(m,g,v,x){m.subscribers.add(v),x.addEventListener("abort",function(){var A,F;m.subscribers.delete(v),m.subscribers.size===0&&(A=m,F=g,setTimeout(function(){A.subscribers.size===0&&fr(F,A)},3e3))})}var Oi={stack:"dbcore",level:0,name:"Cache",create:function(m){var g=m.schema.name;return t(t({},m),{transaction:function(v,x,A){var F,j,q=m.transaction(v,x,A);return x==="readwrite"&&(j=(F=new AbortController).signal,A=function(G){return function(){if(F.abort(),x==="readwrite"){for(var Y=new Set,Z=0,H=v;Z<H.length;Z++){var ne=H[Z],Q=Ra["idb://".concat(g,"/").concat(ne)];if(Q){var J=m.table(ne),te=Q.optimisticOps.filter(function(dt){return dt.trans===q});if(q._explicit&&G&&q.mutatedParts)for(var X=0,se=Object.values(Q.queries.query);X<se.length;X++)for(var ue=0,de=(qe=se[X]).slice();ue<de.length;ue++)ud((Re=de[ue]).obsSet,q.mutatedParts)&&(fr(qe,Re),Re.subscribers.forEach(function(dt){return Y.add(dt)}));else if(0<te.length){Q.optimisticOps=Q.optimisticOps.filter(function(dt){return dt.trans!==q});for(var fe=0,Ae=Object.values(Q.queries.query);fe<Ae.length;fe++)for(var qe,Re,Fe,Ze=0,ze=(qe=Ae[fe]).slice();Ze<ze.length;Ze++)(Re=ze[Ze]).res!=null&&q.mutatedParts&&(G&&!Re.dirty?(Fe=Object.isFrozen(Re.res),Fe=lt(Re.res,Re.req,te,J,Re,Fe),Re.dirty?(fr(qe,Re),Re.subscribers.forEach(function(dt){return Y.add(dt)})):Fe!==Re.res&&(Re.res=Fe,Re.promise=Je.resolve({result:Fe}))):(Re.dirty&&fr(qe,Re),Re.subscribers.forEach(function(dt){return Y.add(dt)})))}}}Y.forEach(function(dt){return dt()})}}},q.addEventListener("abort",A(!1),{signal:j}),q.addEventListener("error",A(!1),{signal:j}),q.addEventListener("complete",A(!0),{signal:j})),q},table:function(v){var x=m.table(v),A=x.schema.primaryKey;return t(t({},x),{mutate:function(F){var j=rt.trans;if(A.outbound||j.db._options.cache==="disabled"||j.explicit||j.idbtrans.mode!=="readwrite")return x.mutate(F);var q=Ra["idb://".concat(g,"/").concat(v)];return q?(j=x.mutate(F),F.type!=="add"&&F.type!=="put"||!(50<=F.values.length||c(A,F).some(function(G){return G==null}))?(q.optimisticOps.push(F),F.mutatedParts&&tu(F.mutatedParts),j.then(function(G){0<G.numFailures&&(fr(q.optimisticOps,F),(G=wt(0,F,G))&&q.optimisticOps.push(G),F.mutatedParts&&tu(F.mutatedParts))}),j.catch(function(){fr(q.optimisticOps,F),F.mutatedParts&&tu(F.mutatedParts)})):j.then(function(G){var Y=wt(0,t(t({},F),{values:F.values.map(function(Z,H){var ne;return G.failures[H]?Z:(Z=(ne=A.keyPath)!==null&&ne!==void 0&&ne.includes(".")?N(Z):t({},Z),ae(Z,A.keyPath,G.results[H]),Z)})}),G);q.optimisticOps.push(Y),queueMicrotask(function(){return F.mutatedParts&&tu(F.mutatedParts)})}),j):x.mutate(F)},query:function(F){if(!L(rt,x)||!$("query",F))return x.query(F);var j=((Y=rt.trans)===null||Y===void 0?void 0:Y.db._options.cache)==="immutable",H=rt,q=H.requery,G=H.signal,Y=function(J,te,X,se){var ue=Ra["idb://".concat(J,"/").concat(te)];if(!ue)return[];if(!(te=ue.queries[X]))return[null,!1,ue,null];var de=te[(se.query?se.query.index.name:null)||""];if(!de)return[null,!1,ue,null];switch(X){case"query":var fe=de.find(function(Ae){return Ae.req.limit===se.limit&&Ae.req.values===se.values&&In(Ae.req.query.range,se.query.range)});return fe?[fe,!0,ue,de]:[de.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=se.limit&&(!se.values||Ae.req.values)&&kn(Ae.req.query.range,se.query.range)}),!1,ue,de];case"count":return fe=de.find(function(Ae){return In(Ae.req.query.range,se.query.range)}),[fe,!!fe,ue,de]}}(g,v,"query",F),Z=Y[0],H=Y[1],ne=Y[2],Q=Y[3];return Z&&H?Z.obsSet=F.obsSet:(H=x.query(F).then(function(J){var te=J.result;if(Z&&(Z.res=te),j){for(var X=0,se=te.length;X<se;++X)Object.freeze(te[X]);Object.freeze(te)}else J.result=N(te);return J}).catch(function(J){return Q&&Z&&fr(Q,Z),Promise.reject(J)}),Z={obsSet:F.obsSet,promise:H,subscribers:new Set,type:"query",req:F,dirty:!1},Q?Q.push(Z):(Q=[Z],(ne=ne||(Ra["idb://".concat(g,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[F.query.index.name||""]=Q)),us(Z,Q,q,G),Z.promise.then(function(J){return{result:lt(J.result,F,ne?.optimisticOps,x,Z,j)}})}})}})}};function Bs(m,g){return new Proxy(m,{get:function(v,x,A){return x==="db"?g:Reflect.get(v,x,A)}})}var vo=(pr.prototype.version=function(m){if(isNaN(m)||m<.1)throw new pt.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new pt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var g=this._versions,v=g.filter(function(x){return x._cfg.version===m})[0];return v||(v=new this.Version(m),g.push(v),g.sort(iv),v.stores({}),this._state.autoSchema=!1,v)},pr.prototype._whenReady=function(m){var g=this;return this.idbdb&&(this._state.openComplete||rt.letThrough||this._vip)?m():new Je(function(v,x){if(g._state.openComplete)return x(new pt.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void x(new pt.DatabaseClosed);g.open().catch(ln)}g._state.dbReadyPromise.then(v,x)}).then(m)},pr.prototype.use=function(m){var g=m.stack,v=m.create,x=m.level,A=m.name;return A&&this.unuse({stack:g,name:A}),m=this._middlewares[g]||(this._middlewares[g]=[]),m.push({stack:g,create:v,level:x??10,name:A}),m.sort(function(F,j){return F.level-j.level}),this},pr.prototype.unuse=function(m){var g=m.stack,v=m.name,x=m.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(A){return x?A.create!==x:!!v&&A.name!==v})),this},pr.prototype.open=function(){var m=this;return mo(sc,function(){return sl(m)})},pr.prototype._close=function(){var m=this._state,g=dc.indexOf(this);if(0<=g&&dc.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new Je(function(v){m.dbReadyResolve=v}),m.openCanceller=new Je(function(v,x){m.cancelOpen=x}))},pr.prototype.close=function(v){var g=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;g?(v.isBeingOpened&&v.cancelOpen(new pt.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new pt.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},pr.prototype.delete=function(m){var g=this;m===void 0&&(m={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new Je(function(A,F){function j(){g.close(m);var q=g._deps.indexedDB.deleteDatabase(g.name);q.onsuccess=xn(function(){var G,Y,Z;G=g._deps,Y=g.name,Z=G.indexedDB,G=G.IDBKeyRange,ld(Z)||Y===fh||ka(Z,G).delete(Y).catch(ln),A()}),q.onerror=pi(F),q.onblocked=g._fireOnBlocked}if(v)throw new pt.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(j):j()})},pr.prototype.backendDB=function(){return this.idbdb},pr.prototype.isOpen=function(){return this.idbdb!==null},pr.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},pr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pr.prototype,"tables",{get:function(){var m=this;return r(this._allTables).map(function(g){return m._allTables[g]})},enumerable:!1,configurable:!0}),pr.prototype.transaction=function(){var m=function(g,v,x){var A=arguments.length;if(A<2)throw new pt.InvalidArgument("Too few arguments");for(var F=new Array(A-1);--A;)F[A-1]=arguments[A];return x=F.pop(),[g,E(F),x]}.apply(this,arguments);return this._transaction.apply(this,m)},pr.prototype._transaction=function(m,g,v){var x=this,A=rt.trans;A&&A.db===this&&m.indexOf("!")===-1||(A=null);var F,j,q=m.indexOf("?")!==-1;m=m.replace("!","").replace("?","");try{if(j=g.map(function(Y){if(Y=Y instanceof x.Table?Y.name:Y,typeof Y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Y}),m=="r"||m===Ca)F=Ca;else{if(m!="rw"&&m!=od)throw new pt.InvalidArgument("Invalid transaction mode: "+m);F=od}if(A){if(A.mode===Ca&&F===od){if(!q)throw new pt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&j.forEach(function(Y){if(A&&A.storeNames.indexOf(Y)===-1){if(!q)throw new pt.SubTransaction("Table "+Y+" not included in parent transaction.");A=null}}),q&&A&&!A.active&&(A=null)}}catch(Y){return A?A._promise(null,function(Z,H){H(Y)}):Ei(Y)}var G=function Y(Z,H,ne,Q,J){return Je.resolve().then(function(){var te=rt.transless||rt,X=Z._createTransaction(H,ne,Z._dbSchema,Q);if(X.explicit=!0,te={trans:X,transless:te},Q)X.idbtrans=Q.idbtrans;else try{X.create(),X.idbtrans._explicit=!0,Z._state.PR1398_maxLoop=3}catch(de){return de.name===er.InvalidState&&Z.isOpen()&&0<--Z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Z.close({disableAutoOpen:!1}),Z.open().then(function(){return Y(Z,H,ne,null,J)})):Ei(de)}var se,ue=xr(J);return ue&&Ir(),te=Je.follow(function(){var de;(se=J.call(X,X))&&(ue?(de=uc.bind(null,null),se.then(de,de)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=Xn(se)))},te),(se&&typeof se.then=="function"?Je.resolve(se).then(function(de){return X.active?de:Ei(new pt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return se})).then(function(de){return Q&&X._resolve(),X._completion.then(function(){return de})}).catch(function(de){return X._reject(de),Ei(de)})})}.bind(null,this,F,j,A,v);return A?A._promise(F,G,"lock"):rt.trans?mo(rt.transless,function(){return x._whenReady(G)}):this._whenReady(G)},pr.prototype.table=function(m){if(!u(this._allTables,m))throw new pt.InvalidTable("Table ".concat(m," does not exist"));return this._allTables[m]},pr);function pr(m,g){var v=this;this._middlewares={},this.verno=0;var x=pr.dependencies;this._options=g=t({addons:pr.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},x=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,F,j,q,G,Y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ln,dbReadyPromise:null,cancelOpen:ln,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};Y.dbReadyPromise=new Je(function(H){Y.dbReadyResolve=H}),Y.openCanceller=new Je(function(H,ne){Y.cancelOpen=ne}),this._state=Y,this.name=m,this.on=Ea(this,"populate","blocked","versionchange","close",{ready:[Hm,ln]}),this.on.ready.subscribe=U(this.on.ready.subscribe,function(H){return function(ne,Q){pr.vip(function(){var J,te=v._state;te.openComplete?(te.dbOpenError||Je.resolve().then(ne),Q&&H(ne)):te.onReadyBeingFired?(te.onReadyBeingFired.push(ne),Q&&H(ne)):(H(ne),J=v,Q||H(function X(){J.on.ready.unsubscribe(ne),J.on.ready.unsubscribe(X)}))})}}),this.Collection=(A=this,nl(Ym.prototype,function(se,X){this.db=A;var Q=Ns,J=null;if(X)try{Q=X()}catch(ue){J=ue}var te=se._ctx,X=te.table,se=X.hook.reading.fire;this._ctx={table:X,index:te.index,isPrimKey:!te.index||X.schema.primKey.keyPath&&te.index===X.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:te.or,valueMapper:se!==ns?se:null}})),this.Table=(F=this,nl(_h.prototype,function(H,ne,Q){this.db=F,this._tx=Q,this.name=H,this.schema=ne,this.hook=F._allTables[H]?F._allTables[H].hook:Ea(null,{creating:[Xu,ln],reading:[Yu,ns],updating:[qm,ln],deleting:[Ju,ln]})})),this.Transaction=(j=this,nl(nv.prototype,function(H,ne,Q,J,te){var X=this;this.db=j,this.mode=H,this.storeNames=ne,this.schema=Q,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Ea(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Je(function(se,ue){X._resolve=se,X._reject=ue}),this._completion.then(function(){X.active=!1,X.on.complete.fire()},function(se){var ue=X.active;return X.active=!1,X.on.error.fire(se),X.parent?X.parent._reject(se):ue&&X.idbtrans&&X.idbtrans.abort(),Ei(se)})})),this.Version=(q=this,nl(of.prototype,function(H){this.db=q,this._cfg={version:H,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(G=this,nl(qp.prototype,function(H,ne,Q){if(this.db=G,this._ctx={table:H,index:ne===":id"?null:ne,or:Q},this._cmp=this._ascending=sn,this._descending=function(J,te){return sn(te,J)},this._max=function(J,te){return 0<sn(J,te)?J:te},this._min=function(J,te){return sn(J,te)<0?J:te},this._IDBKeyRange=G._deps.IDBKeyRange,!this._IDBKeyRange)throw new pt.MissingAPI})),this.on("versionchange",function(H){0<H.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(H){!H.newVersion||H.newVersion<H.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(H.oldVersion/10))}),this._maxKey=ad(g.IDBKeyRange),this._createTransaction=function(H,ne,Q,J){return new v.Transaction(H,ne,Q,v._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(H){v.on("blocked").fire(H),dc.filter(function(ne){return ne.name===v.name&&ne!==v&&!ne._state.vcFired}).map(function(ne){return ne.on("versionchange").fire(H)})},this.use(y),this.use(Oi),this.use(ie),this.use(af),this.use(d);var Z=new Proxy(this,{get:function(H,ne,Q){if(ne==="_vip")return!0;if(ne==="table")return function(te){return Bs(v.table(te),Z)};var J=Reflect.get(H,ne,Q);return J instanceof _h?Bs(J,Z):ne==="tables"?J.map(function(te){return Bs(te,Z)}):ne==="_createTransaction"?function(){return Bs(J.apply(this,arguments),Z)}:J}});this.vip=Z,x.forEach(function(H){return H(v)})}var hC,bc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",eZ=(ck.prototype.subscribe=function(m,g,v){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:g,complete:v})},ck.prototype[bc]=function(){return this},ck);function ck(m){this._subscribe=m}try{hC={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{hC={indexedDB:null,IDBKeyRange:null}}function m$(m){var g,v=!1,x=new eZ(function(A){var F=xr(m),j,q=!1,G={},Y={},Z={get closed(){return q},unsubscribe:function(){q||(q=!0,j&&j.abort(),H&&sr.storagemutated.unsubscribe(Q))}};A.start&&A.start(Z);var H=!1,ne=function(){return rd(J)},Q=function(te){Ls(G,te),ud(Y,G)&&ne()},J=function(){var te,X,se;!q&&hC.indexedDB&&(G={},te={},j&&j.abort(),j=new AbortController,se=function(ue){var de=or();try{F&&Ir();var fe=lc(m,ue);return fe=F?fe.finally(uc):fe}finally{de&&cc()}}(X={subscr:te,signal:j.signal,requery:ne,querier:m,trans:null}),Promise.resolve(se).then(function(ue){v=!0,g=ue,q||X.signal.aborted||(G={},function(de){for(var fe in de)if(u(de,fe))return;return 1}(Y=te)||H||(sr(rl,Q),H=!0),rd(function(){return!q&&A.next&&A.next(ue)}))},function(ue){v=!1,["DatabaseClosedError","AbortError"].includes(ue?.name)||q||rd(function(){q||A.error&&A.error(ue)})}))};return setTimeout(ne,0),Z});return x.hasValue=function(){return v},x.getValue=function(){return g},x}var cf=vo;function lk(m){var g=Sh;try{Sh=!0,sr.storagemutated.fire(m),hd(m,!0)}finally{Sh=g}}h(cf,t(t({},ch),{delete:function(m){return new cf(m,{addons:[]}).delete()},exists:function(m){return new cf(m,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return g=cf.dependencies,v=g.indexedDB,g=g.IDBKeyRange,(ld(v)?Promise.resolve(v.databases()).then(function(x){return x.map(function(A){return A.name}).filter(function(A){return A!==fh})}):ka(v,g).toCollection().primaryKeys()).then(m)}catch{return Ei(new pt.MissingAPI)}var g,v},defineClass:function(){return function(m){s(this,m)}},ignoreTransaction:function(m){return rt.trans?mo(rt.transless,m):m()},vip:Aa,async:function(m){return function(){try{var g=Xn(m.apply(this,arguments));return g&&typeof g.then=="function"?g:Je.resolve(g)}catch(v){return Ei(v)}}},spawn:function(m,g,v){try{var x=Xn(m.apply(v,g||[]));return x&&typeof x.then=="function"?x:Je.resolve(x)}catch(A){return Ei(A)}},currentTransaction:{get:function(){return rt.trans||null}},waitFor:function(m,g){return g=Je.resolve(typeof m=="function"?cf.ignoreTransaction(m):m).timeout(g||6e4),rt.trans?rt.trans.waitFor(g):g},Promise:Je,debug:{get:function(){return ko},set:function(m){lh(m)}},derive:b,extend:s,props:h,override:U,Events:Ea,on:sr,liveQuery:m$,extendObservabilitySet:Ls,getByKeyPath:oe,setByKeyPath:ae,delByKeyPath:function(m,g){typeof g=="string"?ae(m,g,void 0):"length"in g&&[].map.call(g,function(v){ae(m,v,void 0)})},shallowClone:we,deepClone:N,getObjectDiff:yo,cmp:sn,asap:K,minKey:-1/0,addons:[],connections:dc,errnames:er,dependencies:hC,cache:Ra,semVer:"4.0.10",version:"4.0.10".split(".").map(function(m){return parseInt(m)}).reduce(function(m,g,v){return m+g/Math.pow(10,2*v)})})),cf.maxKey=ad(cf.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(sr(rl,function(m){Sh||(m=new CustomEvent(sd,{detail:m}),Sh=!0,dispatchEvent(m),Sh=!1)}),addEventListener(sd,function(m){m=m.detail,Sh||lk(m)}));var Kp,Sh=!1,f$=function(){};return typeof BroadcastChannel<"u"&&((f$=function(){(Kp=new BroadcastChannel(sd)).onmessage=function(m){return m.data&&lk(m.data)}})(),typeof Kp.unref=="function"&&Kp.unref(),sr(rl,function(m){Sh||Kp.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!vo.disableBfCache&&m.persisted){ko&&console.debug("Dexie: handling persisted pagehide"),Kp?.close();for(var g=0,v=dc;g<v.length;g++)v[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!vo.disableBfCache&&m.persisted&&(ko&&console.debug("Dexie: handling persisted pageshow"),f$(),lk({all:new ar(-1/0,[[]])}))})),Je.rejectionMapper=function(m,g){return!m||m instanceof Yn||m instanceof TypeError||m instanceof SyntaxError||!m.name||!Up[m.name]?m:(g=new Up[m.name](g||m.message,m),"stack"in m&&_(g,"stack",{get:function(){return this.inner.stack}}),g)},lh(ko),t(vo,Object.freeze({__proto__:null,Dexie:vo,liveQuery:m$,Entity:Xl,cmp:sn,PropModSymbol:ui,PropModification:cs,replacePrefix:function(m,g){return new cs({replacePrefix:[m,g]})},add:function(m){return new cs({add:m})},remove:function(m){return new cs({remove:m})},default:vo,RangeSet:ar,mergeRanges:ol,rangesOverlap:Eh}),{default:vo}),vo})});var Nw=ot(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.regexpCode=zn.getEsmExportName=zn.getProperty=zn.safeStringify=zn.stringify=zn.strConcat=zn.addCodeArg=zn.str=zn._=zn.nil=zn._Code=zn.Name=zn.IDENTIFIER=zn._CodeOrName=void 0;var Pw=class{};zn._CodeOrName=Pw;zn.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var kp=class extends Pw{constructor(t){if(super(),!zn.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};zn.Name=kp;var Kc=class extends Pw{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((e,i)=>`${e}${i}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((e,i)=>(i instanceof kp&&(e[i.str]=(e[i.str]||0)+1),e),{})}};zn._Code=Kc;zn.nil=new Kc("");function m7(n,...t){let e=[n[0]],i=0;for(;i<t.length;)o2(e,t[i]),e.push(n[++i]);return new Kc(e)}zn._=m7;var r2=new Kc("+");function f7(n,...t){let e=[Ow(n[0])],i=0;for(;i<t.length;)e.push(r2),o2(e,t[i]),e.push(r2,Ow(n[++i]));return cve(e),new Kc(e)}zn.str=f7;function o2(n,t){t instanceof Kc?n.push(...t._items):t instanceof kp?n.push(t):n.push(dve(t))}zn.addCodeArg=o2;function cve(n){let t=1;for(;t<n.length-1;){if(n[t]===r2){let e=lve(n[t-1],n[t+1]);if(e!==void 0){n.splice(t-1,3,e);continue}n[t++]="+"}t++}}function lve(n,t){if(t==='""')return n;if(n==='""')return t;if(typeof n=="string")return t instanceof kp||n[n.length-1]!=='"'?void 0:typeof t!="string"?`${n.slice(0,-1)}${t}"`:t[0]==='"'?n.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(n instanceof kp))return`"${n}${t.slice(1)}`}function uve(n,t){return t.emptyStr()?n:n.emptyStr()?t:f7`${n}${t}`}zn.strConcat=uve;function dve(n){return typeof n=="number"||typeof n=="boolean"||n===null?n:Ow(Array.isArray(n)?n.join(","):n)}function hve(n){return new Kc(Ow(n))}zn.stringify=hve;function Ow(n){return JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}zn.safeStringify=Ow;function mve(n){return typeof n=="string"&&zn.IDENTIFIER.test(n)?new Kc(`.${n}`):m7`[${n}]`}zn.getProperty=mve;function fve(n){if(typeof n=="string"&&zn.IDENTIFIER.test(n))return new Kc(`${n}`);throw new Error(`CodeGen: invalid export name: ${n}, use explicit $id name mapping`)}zn.getEsmExportName=fve;function pve(n){return new Kc(n.toString())}zn.regexpCode=pve});var c2=ot(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.ValueScope=ma.ValueScopeName=ma.Scope=ma.varKinds=ma.UsedValueState=void 0;var ha=Nw(),s2=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},jT=function(n){return n[n.Started=0]="Started",n[n.Completed=1]="Completed",n}(jT||(ma.UsedValueState=jT={}));ma.varKinds={const:new ha.Name("const"),let:new ha.Name("let"),var:new ha.Name("var")};var UT=class{constructor({prefixes:t,parent:e}={}){this._names={},this._prefixes=t,this._parent=e}toName(t){return t instanceof ha.Name?t:this.name(t)}name(t){return new ha.Name(this._newName(t))}_newName(t){let e=this._names[t]||this._nameGroup(t);return`${t}${e.index++}`}_nameGroup(t){var e,i;if(!((i=(e=this._parent)===null||e===void 0?void 0:e._prefixes)===null||i===void 0)&&i.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};ma.Scope=UT;var zT=class extends ha.Name{constructor(t,e){super(e),this.prefix=t}setValue(t,{property:e,itemIndex:i}){this.value=t,this.scopePath=(0,ha._)`.${new ha.Name(e)}[${i}]`}};ma.ValueScopeName=zT;var gve=(0,ha._)`\n`,a2=class extends UT{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts=Qe(ee({},t),{_n:t.lines?gve:ha.nil})}get(){return this._scope}name(t){return new zT(t,this._newName(t))}value(t,e){var i;if(e.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let r=this.toName(t),{prefix:o}=r,s=(i=e.key)!==null&&i!==void 0?i:e.ref,a=this._values[o];if(a){let h=a.get(s);if(h)return h}else a=this._values[o]=new Map;a.set(s,r);let l=this._scope[o]||(this._scope[o]=[]),u=l.length;return l[u]=e.ref,r.setValue(e,{property:o,itemIndex:u}),r}getValue(t,e){let i=this._values[t];if(i)return i.get(e)}scopeRefs(t,e=this._values){return this._reduceValues(e,i=>{if(i.scopePath===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return(0,ha._)`${t}${i.scopePath}`})}scopeCode(t=this._values,e,i){return this._reduceValues(t,r=>{if(r.value===void 0)throw new Error(`CodeGen: name "${r}" has no value`);return r.value.code},e,i)}_reduceValues(t,e,i={},r){let o=ha.nil;for(let s in t){let a=t[s];if(!a)continue;let l=i[s]=i[s]||new Map;a.forEach(u=>{if(l.has(u))return;l.set(u,jT.Started);let h=e(u);if(h){let p=this.opts.es5?ma.varKinds.var:ma.varKinds.const;o=(0,ha._)`${o}${p} ${u} = ${h};${this.opts._n}`}else if(h=r?.(u))o=(0,ha._)`${o}${h}${this.opts._n}`;else throw new s2(u);l.set(u,jT.Completed)})}return o}};ma.ValueScope=a2});var _n=ot(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.or=cn.and=cn.not=cn.CodeGen=cn.operators=cn.varKinds=cn.ValueScopeName=cn.ValueScope=cn.Scope=cn.Name=cn.regexpCode=cn.stringify=cn.getProperty=cn.nil=cn.strConcat=cn.str=cn._=void 0;var Pn=Nw(),Bl=c2(),Dm=Nw();Object.defineProperty(cn,"_",{enumerable:!0,get:function(){return Dm._}});Object.defineProperty(cn,"str",{enumerable:!0,get:function(){return Dm.str}});Object.defineProperty(cn,"strConcat",{enumerable:!0,get:function(){return Dm.strConcat}});Object.defineProperty(cn,"nil",{enumerable:!0,get:function(){return Dm.nil}});Object.defineProperty(cn,"getProperty",{enumerable:!0,get:function(){return Dm.getProperty}});Object.defineProperty(cn,"stringify",{enumerable:!0,get:function(){return Dm.stringify}});Object.defineProperty(cn,"regexpCode",{enumerable:!0,get:function(){return Dm.regexpCode}});Object.defineProperty(cn,"Name",{enumerable:!0,get:function(){return Dm.Name}});var GT=c2();Object.defineProperty(cn,"Scope",{enumerable:!0,get:function(){return GT.Scope}});Object.defineProperty(cn,"ValueScope",{enumerable:!0,get:function(){return GT.ValueScope}});Object.defineProperty(cn,"ValueScopeName",{enumerable:!0,get:function(){return GT.ValueScopeName}});Object.defineProperty(cn,"varKinds",{enumerable:!0,get:function(){return GT.varKinds}});cn.operators={GT:new Pn._Code(">"),GTE:new Pn._Code(">="),LT:new Pn._Code("<"),LTE:new Pn._Code("<="),EQ:new Pn._Code("==="),NEQ:new Pn._Code("!=="),NOT:new Pn._Code("!"),OR:new Pn._Code("||"),AND:new Pn._Code("&&"),ADD:new Pn._Code("+")};var eh=class{optimizeNodes(){return this}optimizeNames(t,e){return this}},l2=class extends eh{constructor(t,e,i){super(),this.varKind=t,this.name=e,this.rhs=i}render({es5:t,_n:e}){let i=t?Bl.varKinds.var:this.varKind,r=this.rhs===void 0?"":` = ${this.rhs}`;return`${i} ${this.name}${r};`+e}optimizeNames(t,e){if(t[this.name.str])return this.rhs&&(this.rhs=Py(this.rhs,t,e)),this}get names(){return this.rhs instanceof Pn._CodeOrName?this.rhs.names:{}}},KT=class extends eh{constructor(t,e,i){super(),this.lhs=t,this.rhs=e,this.sideEffects=i}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,e){if(!(this.lhs instanceof Pn.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Py(this.rhs,t,e),this}get names(){let t=this.lhs instanceof Pn.Name?{}:ee({},this.lhs.names);return WT(t,this.rhs)}},u2=class extends KT{constructor(t,e,i,r){super(t,i,r),this.op=e}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},d2=class extends eh{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},h2=class extends eh{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},m2=class extends eh{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},f2=class extends eh{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,e){return this.code=Py(this.code,t,e),this}get names(){return this.code instanceof Pn._CodeOrName?this.code.names:{}}},Fw=class extends eh{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((e,i)=>e+i.render(t),"")}optimizeNodes(){let{nodes:t}=this,e=t.length;for(;e--;){let i=t[e].optimizeNodes();Array.isArray(i)?t.splice(e,1,...i):i?t[e]=i:t.splice(e,1)}return t.length>0?this:void 0}optimizeNames(t,e){let{nodes:i}=this,r=i.length;for(;r--;){let o=i[r];o.optimizeNames(t,e)||(_ve(t,o.names),i.splice(r,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce((t,e)=>Ap(t,e.names),{})}},th=class extends Fw{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},p2=class extends Fw{},g2=(()=>{class n extends th{}return n.kind="else",n})(),qT=(()=>{class n extends th{constructor(e,i){super(i),this.condition=e}render(e){let i=`if(${this.condition})`+super.render(e);return this.else&&(i+="else "+this.else.render(e)),i}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let i=this.else;if(i){let r=i.optimizeNodes();i=this.else=Array.isArray(r)?new g2(r):r}if(i)return e===!1?i instanceof n?i:i.nodes:this.nodes.length?this:new n(v7(e),i instanceof n?[i]:i.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,i){var r;if(this.else=(r=this.else)===null||r===void 0?void 0:r.optimizeNames(e,i),!!(super.optimizeNames(e,i)||this.else))return this.condition=Py(this.condition,e,i),this}get names(){let e=super.names;return WT(e,this.condition),this.else&&Ap(e,this.else.names),e}}return n.kind="if",n})(),QT=(()=>{class n extends th{}return n.kind="for",n})(),_2=class extends QT{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iteration=Py(this.iteration,t,e),this}get names(){return Ap(super.names,this.iteration.names)}},y2=class extends QT{constructor(t,e,i,r){super(),this.varKind=t,this.name=e,this.from=i,this.to=r}render(t){let e=t.es5?Bl.varKinds.var:this.varKind,{name:i,from:r,to:o}=this;return`for(${e} ${i}=${r}; ${i}<${o}; ${i}++)`+super.render(t)}get names(){let t=WT(super.names,this.from);return WT(t,this.to)}},HT=class extends QT{constructor(t,e,i,r){super(),this.loop=t,this.varKind=e,this.name=i,this.iterable=r}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iterable=Py(this.iterable,t,e),this}get names(){return Ap(super.names,this.iterable.names)}},p7=(()=>{class n extends th{constructor(e,i,r){super(),this.name=e,this.args=i,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}return n.kind="func",n})(),g7=(()=>{class n extends Fw{render(e){return"return "+super.render(e)}}return n.kind="return",n})(),v2=class extends th{render(t){let e="try"+super.render(t);return this.catch&&(e+=this.catch.render(t)),this.finally&&(e+=this.finally.render(t)),e}optimizeNodes(){var t,e;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(e=this.finally)===null||e===void 0||e.optimizeNodes(),this}optimizeNames(t,e){var i,r;return super.optimizeNames(t,e),(i=this.catch)===null||i===void 0||i.optimizeNames(t,e),(r=this.finally)===null||r===void 0||r.optimizeNames(t,e),this}get names(){let t=super.names;return this.catch&&Ap(t,this.catch.names),this.finally&&Ap(t,this.finally.names),t}},_7=(()=>{class n extends th{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}return n.kind="catch",n})(),y7=(()=>{class n extends th{render(e){return"finally"+super.render(e)}}return n.kind="finally",n})(),b2=class{constructor(t,e={}){this._values={},this._blockStarts=[],this._constants={},this.opts=Qe(ee({},e),{_n:e.lines?`
`:""}),this._extScope=t,this._scope=new Bl.Scope({parent:t}),this._nodes=[new p2]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,e){let i=this._extScope.value(t,e);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(t,e){return this._extScope.getValue(t,e)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,e,i,r){let o=this._scope.toName(e);return i!==void 0&&r&&(this._constants[o.str]=i),this._leafNode(new l2(t,o,i)),o}const(t,e,i){return this._def(Bl.varKinds.const,t,e,i)}let(t,e,i){return this._def(Bl.varKinds.let,t,e,i)}var(t,e,i){return this._def(Bl.varKinds.var,t,e,i)}assign(t,e,i){return this._leafNode(new KT(t,e,i))}add(t,e){return this._leafNode(new u2(t,cn.operators.ADD,e))}code(t){return typeof t=="function"?t():t!==Pn.nil&&this._leafNode(new f2(t)),this}object(...t){let e=["{"];for(let[i,r]of t)e.length>1&&e.push(","),e.push(i),(i!==r||this.opts.es5)&&(e.push(":"),(0,Pn.addCodeArg)(e,r));return e.push("}"),new Pn._Code(e)}if(t,e,i){if(this._blockNode(new qT(t)),e&&i)this.code(e).else().code(i).endIf();else if(e)this.code(e).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new qT(t))}else(){return this._elseNode(new g2)}endIf(){return this._endBlockNode(qT,g2)}_for(t,e){return this._blockNode(t),e&&this.code(e).endFor(),this}for(t,e){return this._for(new _2(t),e)}forRange(t,e,i,r,o=this.opts.es5?Bl.varKinds.var:Bl.varKinds.let){let s=this._scope.toName(t);return this._for(new y2(o,s,e,i),()=>r(s))}forOf(t,e,i,r=Bl.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let s=e instanceof Pn.Name?e:this.var("_arr",e);return this.forRange("_i",0,(0,Pn._)`${s}.length`,a=>{this.var(o,(0,Pn._)`${s}[${a}]`),i(o)})}return this._for(new HT("of",r,o,e),()=>i(o))}forIn(t,e,i,r=this.opts.es5?Bl.varKinds.var:Bl.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,Pn._)`Object.keys(${e})`,i);let o=this._scope.toName(t);return this._for(new HT("in",r,o,e),()=>i(o))}endFor(){return this._endBlockNode(QT)}label(t){return this._leafNode(new d2(t))}break(t){return this._leafNode(new h2(t))}return(t){let e=new g7;if(this._blockNode(e),this.code(t),e.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(g7)}try(t,e,i){if(!e&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');let r=new v2;if(this._blockNode(r),this.code(t),e){let o=this.name("e");this._currNode=r.catch=new _7(o),e(o)}return i&&(this._currNode=r.finally=new y7,this.code(i)),this._endBlockNode(_7,y7)}throw(t){return this._leafNode(new m2(t))}block(t,e){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(e),this}endBlock(t){let e=this._blockStarts.pop();if(e===void 0)throw new Error("CodeGen: not in self-balancing block");let i=this._nodes.length-e;if(i<0||t!==void 0&&i!==t)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${t} expected`);return this._nodes.length=e,this}func(t,e=Pn.nil,i,r){return this._blockNode(new p7(t,e,i)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(p7)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,e){let i=this._currNode;if(i instanceof t||e&&i instanceof e)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${e?`${t.kind}/${e.kind}`:t.kind}"`)}_elseNode(t){let e=this._currNode;if(!(e instanceof qT))throw new Error('CodeGen: "else" without "if"');return this._currNode=e.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let e=this._nodes;e[e.length-1]=t}};cn.CodeGen=b2;function Ap(n,t){for(let e in t)n[e]=(n[e]||0)+(t[e]||0);return n}function WT(n,t){return t instanceof Pn._CodeOrName?Ap(n,t.names):n}function Py(n,t,e){if(n instanceof Pn.Name)return i(n);if(!r(n))return n;return new Pn._Code(n._items.reduce((o,s)=>(s instanceof Pn.Name&&(s=i(s)),s instanceof Pn._Code?o.push(...s._items):o.push(s),o),[]));function i(o){let s=e[o.str];return s===void 0||t[o.str]!==1?o:(delete t[o.str],s)}function r(o){return o instanceof Pn._Code&&o._items.some(s=>s instanceof Pn.Name&&t[s.str]===1&&e[s.str]!==void 0)}}function _ve(n,t){for(let e in t)n[e]=(n[e]||0)-(t[e]||0)}function v7(n){return typeof n=="boolean"||typeof n=="number"||n===null?!n:(0,Pn._)`!${w2(n)}`}cn.not=v7;var yve=b7(cn.operators.AND);function vve(...n){return n.reduce(yve)}cn.and=vve;var bve=b7(cn.operators.OR);function wve(...n){return n.reduce(bve)}cn.or=wve;function b7(n){return(t,e)=>t===Pn.nil?e:e===Pn.nil?t:(0,Pn._)`${w2(t)} ${n} ${w2(e)}`}function w2(n){return n instanceof Pn.Name?n:(0,Pn._)`(${n})`}});var qn=ot(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.checkStrictMode=yn.getErrorPath=yn.Type=yn.useFunc=yn.setEvaluated=yn.evaluatedPropsToName=yn.mergeEvaluated=yn.eachItem=yn.unescapeJsonPointer=yn.escapeJsonPointer=yn.escapeFragment=yn.unescapeFragment=yn.schemaRefOrVal=yn.schemaHasRulesButRef=yn.schemaHasRules=yn.checkUnknownRules=yn.alwaysValidSchema=yn.toHash=void 0;var Si=_n(),Cve=Nw();function Eve(n){let t={};for(let e of n)t[e]=!0;return t}yn.toHash=Eve;function xve(n,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(E7(n,t),!x7(t,n.self.RULES.all))}yn.alwaysValidSchema=xve;function E7(n,t=n.schema){let{opts:e,self:i}=n;if(!e.strictSchema||typeof t=="boolean")return;let r=i.RULES.keywords;for(let o in t)r[o]||T7(n,`unknown keyword: "${o}"`)}yn.checkUnknownRules=E7;function x7(n,t){if(typeof n=="boolean")return!n;for(let e in n)if(t[e])return!0;return!1}yn.schemaHasRules=x7;function Ive(n,t){if(typeof n=="boolean")return!n;for(let e in n)if(e!=="$ref"&&t.all[e])return!0;return!1}yn.schemaHasRulesButRef=Ive;function Sve({topSchemaRef:n,schemaPath:t},e,i,r){if(!r){if(typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="string")return(0,Si._)`${e}`}return(0,Si._)`${n}${t}${(0,Si.getProperty)(i)}`}yn.schemaRefOrVal=Sve;function Tve(n){return I7(decodeURIComponent(n))}yn.unescapeFragment=Tve;function Dve(n){return encodeURIComponent(E2(n))}yn.escapeFragment=Dve;function E2(n){return typeof n=="number"?`${n}`:n.replace(/~/g,"~0").replace(/\//g,"~1")}yn.escapeJsonPointer=E2;function I7(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}yn.unescapeJsonPointer=I7;function kve(n,t){if(Array.isArray(n))for(let e of n)t(e);else t(n)}yn.eachItem=kve;function w7({mergeNames:n,mergeToName:t,mergeValues:e,resultToName:i}){return(r,o,s,a)=>{let l=s===void 0?o:s instanceof Si.Name?(o instanceof Si.Name?n(r,o,s):t(r,o,s),s):o instanceof Si.Name?(t(r,s,o),o):e(o,s);return a===Si.Name&&!(l instanceof Si.Name)?i(r,l):l}}yn.mergeEvaluated={props:w7({mergeNames:(n,t,e)=>n.if((0,Si._)`${e} !== true && ${t} !== undefined`,()=>{n.if((0,Si._)`${t} === true`,()=>n.assign(e,!0),()=>n.assign(e,(0,Si._)`${e} || {}`).code((0,Si._)`Object.assign(${e}, ${t})`))}),mergeToName:(n,t,e)=>n.if((0,Si._)`${e} !== true`,()=>{t===!0?n.assign(e,!0):(n.assign(e,(0,Si._)`${e} || {}`),x2(n,e,t))}),mergeValues:(n,t)=>n===!0?!0:ee(ee({},n),t),resultToName:S7}),items:w7({mergeNames:(n,t,e)=>n.if((0,Si._)`${e} !== true && ${t} !== undefined`,()=>n.assign(e,(0,Si._)`${t} === true ? true : ${e} > ${t} ? ${e} : ${t}`)),mergeToName:(n,t,e)=>n.if((0,Si._)`${e} !== true`,()=>n.assign(e,t===!0?!0:(0,Si._)`${e} > ${t} ? ${e} : ${t}`)),mergeValues:(n,t)=>n===!0?!0:Math.max(n,t),resultToName:(n,t)=>n.var("items",t)})};function S7(n,t){if(t===!0)return n.var("props",!0);let e=n.var("props",(0,Si._)`{}`);return t!==void 0&&x2(n,e,t),e}yn.evaluatedPropsToName=S7;function x2(n,t,e){Object.keys(e).forEach(i=>n.assign((0,Si._)`${t}${(0,Si.getProperty)(i)}`,!0))}yn.setEvaluated=x2;var C7={};function Ave(n,t){return n.scopeValue("func",{ref:t,code:C7[t.code]||(C7[t.code]=new Cve._Code(t.code))})}yn.useFunc=Ave;var C2=function(n){return n[n.Num=0]="Num",n[n.Str=1]="Str",n}(C2||(yn.Type=C2={}));function Rve(n,t,e){if(n instanceof Si.Name){let i=t===C2.Num;return e?i?(0,Si._)`"[" + ${n} + "]"`:(0,Si._)`"['" + ${n} + "']"`:i?(0,Si._)`"/" + ${n}`:(0,Si._)`"/" + ${n}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return e?(0,Si.getProperty)(n).toString():"/"+E2(n)}yn.getErrorPath=Rve;function T7(n,t,e=n.opts.strictSchema){if(e){if(t=`strict mode: ${t}`,e===!0)throw new Error(t);n.self.logger.warn(t)}}yn.checkStrictMode=T7});var nh=ot(I2=>{"use strict";Object.defineProperty(I2,"__esModule",{value:!0});var Xo=_n(),Mve={data:new Xo.Name("data"),valCxt:new Xo.Name("valCxt"),instancePath:new Xo.Name("instancePath"),parentData:new Xo.Name("parentData"),parentDataProperty:new Xo.Name("parentDataProperty"),rootData:new Xo.Name("rootData"),dynamicAnchors:new Xo.Name("dynamicAnchors"),vErrors:new Xo.Name("vErrors"),errors:new Xo.Name("errors"),this:new Xo.Name("this"),self:new Xo.Name("self"),scope:new Xo.Name("scope"),json:new Xo.Name("json"),jsonPos:new Xo.Name("jsonPos"),jsonLen:new Xo.Name("jsonLen"),jsonPart:new Xo.Name("jsonPart")};I2.default=Mve});var Vw=ot(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.extendErrors=Jo.resetErrorsCount=Jo.reportExtraError=Jo.reportError=Jo.keyword$DataError=Jo.keywordError=void 0;var $n=_n(),YT=qn(),Rs=nh();Jo.keywordError={message:({keyword:n})=>(0,$n.str)`must pass "${n}" keyword validation`};Jo.keyword$DataError={message:({keyword:n,schemaType:t})=>t?(0,$n.str)`"${n}" keyword must be ${t} ($data)`:(0,$n.str)`"${n}" keyword is invalid ($data)`};function Pve(n,t=Jo.keywordError,e,i){let{it:r}=n,{gen:o,compositeRule:s,allErrors:a}=r,l=A7(n,t,e);i??(s||a)?D7(o,l):k7(r,(0,$n._)`[${l}]`)}Jo.reportError=Pve;function Ove(n,t=Jo.keywordError,e){let{it:i}=n,{gen:r,compositeRule:o,allErrors:s}=i,a=A7(n,t,e);D7(r,a),o||s||k7(i,Rs.default.vErrors)}Jo.reportExtraError=Ove;function Nve(n,t){n.assign(Rs.default.errors,t),n.if((0,$n._)`${Rs.default.vErrors} !== null`,()=>n.if(t,()=>n.assign((0,$n._)`${Rs.default.vErrors}.length`,t),()=>n.assign(Rs.default.vErrors,null)))}Jo.resetErrorsCount=Nve;function Fve({gen:n,keyword:t,schemaValue:e,data:i,errsCount:r,it:o}){if(r===void 0)throw new Error("ajv implementation error");let s=n.name("err");n.forRange("i",r,Rs.default.errors,a=>{n.const(s,(0,$n._)`${Rs.default.vErrors}[${a}]`),n.if((0,$n._)`${s}.instancePath === undefined`,()=>n.assign((0,$n._)`${s}.instancePath`,(0,$n.strConcat)(Rs.default.instancePath,o.errorPath))),n.assign((0,$n._)`${s}.schemaPath`,(0,$n.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(n.assign((0,$n._)`${s}.schema`,e),n.assign((0,$n._)`${s}.data`,i))})}Jo.extendErrors=Fve;function D7(n,t){let e=n.const("err",t);n.if((0,$n._)`${Rs.default.vErrors} === null`,()=>n.assign(Rs.default.vErrors,(0,$n._)`[${e}]`),(0,$n._)`${Rs.default.vErrors}.push(${e})`),n.code((0,$n._)`${Rs.default.errors}++`)}function k7(n,t){let{gen:e,validateName:i,schemaEnv:r}=n;r.$async?e.throw((0,$n._)`new ${n.ValidationError}(${t})`):(e.assign((0,$n._)`${i}.errors`,t),e.return(!1))}var Rp={keyword:new $n.Name("keyword"),schemaPath:new $n.Name("schemaPath"),params:new $n.Name("params"),propertyName:new $n.Name("propertyName"),message:new $n.Name("message"),schema:new $n.Name("schema"),parentSchema:new $n.Name("parentSchema")};function A7(n,t,e){let{createErrors:i}=n.it;return i===!1?(0,$n._)`{}`:Vve(n,t,e)}function Vve(n,t,e={}){let{gen:i,it:r}=n,o=[Lve(r,e),Bve(n,e)];return $ve(n,t,o),i.object(...o)}function Lve({errorPath:n},{instancePath:t}){let e=t?(0,$n.str)`${n}${(0,YT.getErrorPath)(t,YT.Type.Str)}`:n;return[Rs.default.instancePath,(0,$n.strConcat)(Rs.default.instancePath,e)]}function Bve({keyword:n,it:{errSchemaPath:t}},{schemaPath:e,parentSchema:i}){let r=i?t:(0,$n.str)`${t}/${n}`;return e&&(r=(0,$n.str)`${r}${(0,YT.getErrorPath)(e,YT.Type.Str)}`),[Rp.schemaPath,r]}function $ve(n,{params:t,message:e},i){let{keyword:r,data:o,schemaValue:s,it:a}=n,{opts:l,propertyName:u,topSchemaRef:h,schemaPath:p}=a;i.push([Rp.keyword,r],[Rp.params,typeof t=="function"?t(n):t||(0,$n._)`{}`]),l.messages&&i.push([Rp.message,typeof e=="function"?e(n):e]),l.verbose&&i.push([Rp.schema,s],[Rp.parentSchema,(0,$n._)`${h}${p}`],[Rs.default.data,o]),u&&i.push([Rp.propertyName,u])}});var M7=ot(Oy=>{"use strict";Object.defineProperty(Oy,"__esModule",{value:!0});Oy.boolOrEmptySchema=Oy.topBoolOrEmptySchema=void 0;var jve=Vw(),Uve=_n(),zve=nh(),qve={message:"boolean schema is false"};function Kve(n){let{gen:t,schema:e,validateName:i}=n;e===!1?R7(n,!1):typeof e=="object"&&e.$async===!0?t.return(zve.default.data):(t.assign((0,Uve._)`${i}.errors`,null),t.return(!0))}Oy.topBoolOrEmptySchema=Kve;function Hve(n,t){let{gen:e,schema:i}=n;i===!1?(e.var(t,!1),R7(n)):e.var(t,!0)}Oy.boolOrEmptySchema=Hve;function R7(n,t){let{gen:e,data:i}=n,r={gen:e,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:n};(0,jve.reportError)(r,qve,void 0,t)}});var S2=ot(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0});Ny.getRules=Ny.isJSONType=void 0;var Wve=["string","number","integer","boolean","null","object","array"],Gve=new Set(Wve);function Qve(n){return typeof n=="string"&&Gve.has(n)}Ny.isJSONType=Qve;function Yve(){let n={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:Qe(ee({},n),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},n.number,n.string,n.array,n.object],post:{rules:[]},all:{},keywords:{}}}Ny.getRules=Yve});var T2=ot(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.shouldUseRule=km.shouldUseGroup=km.schemaHasRulesForType=void 0;function Xve({schema:n,self:t},e){let i=t.RULES.types[e];return i&&i!==!0&&P7(n,i)}km.schemaHasRulesForType=Xve;function P7(n,t){return t.rules.some(e=>O7(n,e))}km.shouldUseGroup=P7;function O7(n,t){var e;return n[t.keyword]!==void 0||((e=t.definition.implements)===null||e===void 0?void 0:e.some(i=>n[i]!==void 0))}km.shouldUseRule=O7});var Lw=ot(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.reportTypeError=Zo.checkDataTypes=Zo.checkDataType=Zo.coerceAndCheckDataType=Zo.getJSONTypes=Zo.getSchemaTypes=Zo.DataType=void 0;var Jve=S2(),Zve=T2(),ebe=Vw(),on=_n(),N7=qn(),Fy=function(n){return n[n.Correct=0]="Correct",n[n.Wrong=1]="Wrong",n}(Fy||(Zo.DataType=Fy={}));function tbe(n){let t=F7(n.type);if(t.includes("null")){if(n.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&n.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');n.nullable===!0&&t.push("null")}return t}Zo.getSchemaTypes=tbe;function F7(n){let t=Array.isArray(n)?n:n?[n]:[];if(t.every(Jve.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Zo.getJSONTypes=F7;function nbe(n,t){let{gen:e,data:i,opts:r}=n,o=ibe(t,r.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,Zve.schemaHasRulesForType)(n,t[0]));if(s){let a=k2(t,i,r.strictNumbers,Fy.Wrong);e.if(a,()=>{o.length?rbe(n,t,o):A2(n)})}return s}Zo.coerceAndCheckDataType=nbe;var V7=new Set(["string","number","integer","boolean","null"]);function ibe(n,t){return t?n.filter(e=>V7.has(e)||t==="array"&&e==="array"):[]}function rbe(n,t,e){let{gen:i,data:r,opts:o}=n,s=i.let("dataType",(0,on._)`typeof ${r}`),a=i.let("coerced",(0,on._)`undefined`);o.coerceTypes==="array"&&i.if((0,on._)`${s} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,()=>i.assign(r,(0,on._)`${r}[0]`).assign(s,(0,on._)`typeof ${r}`).if(k2(t,r,o.strictNumbers),()=>i.assign(a,r))),i.if((0,on._)`${a} !== undefined`);for(let u of e)(V7.has(u)||u==="array"&&o.coerceTypes==="array")&&l(u);i.else(),A2(n),i.endIf(),i.if((0,on._)`${a} !== undefined`,()=>{i.assign(r,a),obe(n,a)});function l(u){switch(u){case"string":i.elseIf((0,on._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,on._)`"" + ${r}`).elseIf((0,on._)`${r} === null`).assign(a,(0,on._)`""`);return;case"number":i.elseIf((0,on._)`${s} == "boolean" || ${r} === null
              || (${s} == "string" && ${r} && ${r} == +${r})`).assign(a,(0,on._)`+${r}`);return;case"integer":i.elseIf((0,on._)`${s} === "boolean" || ${r} === null
              || (${s} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(a,(0,on._)`+${r}`);return;case"boolean":i.elseIf((0,on._)`${r} === "false" || ${r} === 0 || ${r} === null`).assign(a,!1).elseIf((0,on._)`${r} === "true" || ${r} === 1`).assign(a,!0);return;case"null":i.elseIf((0,on._)`${r} === "" || ${r} === 0 || ${r} === false`),i.assign(a,null);return;case"array":i.elseIf((0,on._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${r} === null`).assign(a,(0,on._)`[${r}]`)}}}function obe({gen:n,parentData:t,parentDataProperty:e},i){n.if((0,on._)`${t} !== undefined`,()=>n.assign((0,on._)`${t}[${e}]`,i))}function D2(n,t,e,i=Fy.Correct){let r=i===Fy.Correct?on.operators.EQ:on.operators.NEQ,o;switch(n){case"null":return(0,on._)`${t} ${r} null`;case"array":o=(0,on._)`Array.isArray(${t})`;break;case"object":o=(0,on._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,on._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,on._)`typeof ${t} ${r} ${n}`}return i===Fy.Correct?o:(0,on.not)(o);function s(a=on.nil){return(0,on.and)((0,on._)`typeof ${t} == "number"`,a,e?(0,on._)`isFinite(${t})`:on.nil)}}Zo.checkDataType=D2;function k2(n,t,e,i){if(n.length===1)return D2(n[0],t,e,i);let r,o=(0,N7.toHash)(n);if(o.array&&o.object){let s=(0,on._)`typeof ${t} != "object"`;r=o.null?s:(0,on._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else r=on.nil;o.number&&delete o.integer;for(let s in o)r=(0,on.and)(r,D2(s,t,e,i));return r}Zo.checkDataTypes=k2;var sbe={message:({schema:n})=>`must be ${n}`,params:({schema:n,schemaValue:t})=>typeof n=="string"?(0,on._)`{type: ${n}}`:(0,on._)`{type: ${t}}`};function A2(n){let t=abe(n);(0,ebe.reportError)(t,sbe)}Zo.reportTypeError=A2;function abe(n){let{gen:t,data:e,schema:i}=n,r=(0,N7.schemaRefOrVal)(n,i,"type");return{gen:t,keyword:"type",data:e,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:n}}});var B7=ot(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.assignDefaults=void 0;var Vy=_n(),cbe=qn();function lbe(n,t){let{properties:e,items:i}=n.schema;if(t==="object"&&e)for(let r in e)L7(n,r,e[r].default);else t==="array"&&Array.isArray(i)&&i.forEach((r,o)=>L7(n,o,r.default))}XT.assignDefaults=lbe;function L7(n,t,e){let{gen:i,compositeRule:r,data:o,opts:s}=n;if(e===void 0)return;let a=(0,Vy._)`${o}${(0,Vy.getProperty)(t)}`;if(r){(0,cbe.checkStrictMode)(n,`default is ignored for: ${a}`);return}let l=(0,Vy._)`${a} === undefined`;s.useDefaults==="empty"&&(l=(0,Vy._)`${l} || ${a} === null || ${a} === ""`),i.if(l,(0,Vy._)`${a} = ${(0,Vy.stringify)(e)}`)}});var Hc=ot(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.validateUnion=wi.validateArray=wi.usePattern=wi.callValidateCode=wi.schemaProperties=wi.allSchemaProperties=wi.noPropertyInData=wi.propertyInData=wi.isOwnProperty=wi.hasPropFunc=wi.reportMissingProp=wi.checkMissingProp=wi.checkReportMissingProp=void 0;var Vi=_n(),R2=qn(),Am=nh(),ube=qn();function dbe(n,t){let{gen:e,data:i,it:r}=n;e.if(P2(e,i,t,r.opts.ownProperties),()=>{n.setParams({missingProperty:(0,Vi._)`${t}`},!0),n.error()})}wi.checkReportMissingProp=dbe;function hbe({gen:n,data:t,it:{opts:e}},i,r){return(0,Vi.or)(...i.map(o=>(0,Vi.and)(P2(n,t,o,e.ownProperties),(0,Vi._)`${r} = ${o}`)))}wi.checkMissingProp=hbe;function mbe(n,t){n.setParams({missingProperty:t},!0),n.error()}wi.reportMissingProp=mbe;function $7(n){return n.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Vi._)`Object.prototype.hasOwnProperty`})}wi.hasPropFunc=$7;function M2(n,t,e){return(0,Vi._)`${$7(n)}.call(${t}, ${e})`}wi.isOwnProperty=M2;function fbe(n,t,e,i){let r=(0,Vi._)`${t}${(0,Vi.getProperty)(e)} !== undefined`;return i?(0,Vi._)`${r} && ${M2(n,t,e)}`:r}wi.propertyInData=fbe;function P2(n,t,e,i){let r=(0,Vi._)`${t}${(0,Vi.getProperty)(e)} === undefined`;return i?(0,Vi.or)(r,(0,Vi.not)(M2(n,t,e))):r}wi.noPropertyInData=P2;function j7(n){return n?Object.keys(n).filter(t=>t!=="__proto__"):[]}wi.allSchemaProperties=j7;function pbe(n,t){return j7(t).filter(e=>!(0,R2.alwaysValidSchema)(n,t[e]))}wi.schemaProperties=pbe;function gbe({schemaCode:n,data:t,it:{gen:e,topSchemaRef:i,schemaPath:r,errorPath:o},it:s},a,l,u){let h=u?(0,Vi._)`${n}, ${t}, ${i}${r}`:t,p=[[Am.default.instancePath,(0,Vi.strConcat)(Am.default.instancePath,o)],[Am.default.parentData,s.parentData],[Am.default.parentDataProperty,s.parentDataProperty],[Am.default.rootData,Am.default.rootData]];s.opts.dynamicRef&&p.push([Am.default.dynamicAnchors,Am.default.dynamicAnchors]);let _=(0,Vi._)`${h}, ${e.object(...p)}`;return l!==Vi.nil?(0,Vi._)`${a}.call(${l}, ${_})`:(0,Vi._)`${a}(${_})`}wi.callValidateCode=gbe;var _be=(0,Vi._)`new RegExp`;function ybe({gen:n,it:{opts:t}},e){let i=t.unicodeRegExp?"u":"",{regExp:r}=t.code,o=r(e,i);return n.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Vi._)`${r.code==="new RegExp"?_be:(0,ube.useFunc)(n,r)}(${e}, ${i})`})}wi.usePattern=ybe;function vbe(n){let{gen:t,data:e,keyword:i,it:r}=n,o=t.name("valid");if(r.allErrors){let a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(o,!0),s(()=>t.break()),o;function s(a){let l=t.const("len",(0,Vi._)`${e}.length`);t.forRange("i",0,l,u=>{n.subschema({keyword:i,dataProp:u,dataPropType:R2.Type.Num},o),t.if((0,Vi.not)(o),a)})}}wi.validateArray=vbe;function bbe(n){let{gen:t,schema:e,keyword:i,it:r}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");if(e.some(l=>(0,R2.alwaysValidSchema)(r,l))&&!r.opts.unevaluated)return;let s=t.let("valid",!1),a=t.name("_valid");t.block(()=>e.forEach((l,u)=>{let h=n.subschema({keyword:i,schemaProp:u,compositeRule:!0},a);t.assign(s,(0,Vi._)`${s} || ${a}`),n.mergeValidEvaluated(h,a)||t.if((0,Vi.not)(s))})),n.result(s,()=>n.reset(),()=>n.error(!0))}wi.validateUnion=bbe});var q7=ot(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.validateKeywordUsage=ju.validSchemaType=ju.funcKeywordCode=ju.macroKeywordCode=void 0;var Ms=_n(),Mp=nh(),wbe=Hc(),Cbe=Vw();function Ebe(n,t){let{gen:e,keyword:i,schema:r,parentSchema:o,it:s}=n,a=t.macro.call(s.self,r,o,s),l=z7(e,i,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let u=e.name("valid");n.subschema({schema:a,schemaPath:Ms.nil,errSchemaPath:`${s.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},u),n.pass(u,()=>n.error(!0))}ju.macroKeywordCode=Ebe;function xbe(n,t){var e;let{gen:i,keyword:r,schema:o,parentSchema:s,$data:a,it:l}=n;Sbe(l,t);let u=!a&&t.compile?t.compile.call(l.self,o,s,l):t.validate,h=z7(i,r,u),p=i.let("valid");n.block$data(p,_),n.ok((e=t.valid)!==null&&e!==void 0?e:p);function _(){if(t.errors===!1)T(),t.modifying&&U7(n),k(()=>n.error());else{let U=t.async?b():C();t.modifying&&U7(n),k(()=>Ibe(n,U))}}function b(){let U=i.let("ruleErrs",null);return i.try(()=>T((0,Ms._)`await `),W=>i.assign(p,!1).if((0,Ms._)`${W} instanceof ${l.ValidationError}`,()=>i.assign(U,(0,Ms._)`${W}.errors`),()=>i.throw(W))),U}function C(){let U=(0,Ms._)`${h}.errors`;return i.assign(U,null),T(Ms.nil),U}function T(U=t.async?(0,Ms._)`await `:Ms.nil){let W=l.opts.passContext?Mp.default.this:Mp.default.self,K=!("compile"in t&&!a||t.schema===!1);i.assign(p,(0,Ms._)`${U}${(0,wbe.callValidateCode)(n,h,W,K)}`,t.modifying)}function k(U){var W;i.if((0,Ms.not)((W=t.valid)!==null&&W!==void 0?W:p),U)}}ju.funcKeywordCode=xbe;function U7(n){let{gen:t,data:e,it:i}=n;t.if(i.parentData,()=>t.assign(e,(0,Ms._)`${i.parentData}[${i.parentDataProperty}]`))}function Ibe(n,t){let{gen:e}=n;e.if((0,Ms._)`Array.isArray(${t})`,()=>{e.assign(Mp.default.vErrors,(0,Ms._)`${Mp.default.vErrors} === null ? ${t} : ${Mp.default.vErrors}.concat(${t})`).assign(Mp.default.errors,(0,Ms._)`${Mp.default.vErrors}.length`),(0,Cbe.extendErrors)(n)},()=>n.error())}function Sbe({schemaEnv:n},t){if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}function z7(n,t,e){if(e===void 0)throw new Error(`keyword "${t}" failed to compile`);return n.scopeValue("keyword",typeof e=="function"?{ref:e}:{ref:e,code:(0,Ms.stringify)(e)})}function Tbe(n,t,e=!1){return!t.length||t.some(i=>i==="array"?Array.isArray(n):i==="object"?n&&typeof n=="object"&&!Array.isArray(n):typeof n==i||e&&typeof n>"u")}ju.validSchemaType=Tbe;function Dbe({schema:n,opts:t,self:e,errSchemaPath:i},r,o){if(Array.isArray(r.keyword)?!r.keyword.includes(o):r.keyword!==o)throw new Error("ajv implementation error");let s=r.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(n,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(r.validateSchema&&!r.validateSchema(n[o])){let l=`keyword "${o}" value is invalid at path "${i}": `+e.errorsText(r.validateSchema.errors);if(t.validateSchema==="log")e.logger.error(l);else throw new Error(l)}}ju.validateKeywordUsage=Dbe});var H7=ot(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.extendSubschemaMode=Rm.extendSubschemaData=Rm.getSubschema=void 0;var Uu=_n(),K7=qn();function kbe(n,{keyword:t,schemaProp:e,schema:i,schemaPath:r,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=n.schema[t];return e===void 0?{schema:a,schemaPath:(0,Uu._)`${n.schemaPath}${(0,Uu.getProperty)(t)}`,errSchemaPath:`${n.errSchemaPath}/${t}`}:{schema:a[e],schemaPath:(0,Uu._)`${n.schemaPath}${(0,Uu.getProperty)(t)}${(0,Uu.getProperty)(e)}`,errSchemaPath:`${n.errSchemaPath}/${t}/${(0,K7.escapeFragment)(e)}`}}if(i!==void 0){if(r===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:r,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Rm.getSubschema=kbe;function Abe(n,t,{dataProp:e,dataPropType:i,data:r,dataTypes:o,propertyName:s}){if(r!==void 0&&e!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(e!==void 0){let{errorPath:u,dataPathArr:h,opts:p}=t,_=a.let("data",(0,Uu._)`${t.data}${(0,Uu.getProperty)(e)}`,!0);l(_),n.errorPath=(0,Uu.str)`${u}${(0,K7.getErrorPath)(e,i,p.jsPropertySyntax)}`,n.parentDataProperty=(0,Uu._)`${e}`,n.dataPathArr=[...h,n.parentDataProperty]}if(r!==void 0){let u=r instanceof Uu.Name?r:a.let("data",r,!0);l(u),s!==void 0&&(n.propertyName=s)}o&&(n.dataTypes=o);function l(u){n.data=u,n.dataLevel=t.dataLevel+1,n.dataTypes=[],t.definedProperties=new Set,n.parentData=t.data,n.dataNames=[...t.dataNames,u]}}Rm.extendSubschemaData=Abe;function Rbe(n,{jtdDiscriminator:t,jtdMetadata:e,compositeRule:i,createErrors:r,allErrors:o}){i!==void 0&&(n.compositeRule=i),r!==void 0&&(n.createErrors=r),o!==void 0&&(n.allErrors=o),n.jtdDiscriminator=t,n.jtdMetadata=e}Rm.extendSubschemaMode=Rbe});var O2=ot((qrt,W7)=>{"use strict";W7.exports=function n(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=e.length)return!1;for(r=i;r--!==0;)if(!n(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(e).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=i;r--!==0;){var s=o[r];if(!n(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}});var Q7=ot((Krt,G7)=>{"use strict";var Mm=G7.exports=function(n,t,e){typeof t=="function"&&(e=t,t={}),e=t.cb||e;var i=typeof e=="function"?e:e.pre||function(){},r=e.post||function(){};JT(t,i,r,n,"",n)};Mm.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Mm.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Mm.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Mm.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function JT(n,t,e,i,r,o,s,a,l,u){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,r,o,s,a,l,u);for(var h in i){var p=i[h];if(Array.isArray(p)){if(h in Mm.arrayKeywords)for(var _=0;_<p.length;_++)JT(n,t,e,p[_],r+"/"+h+"/"+_,o,r,h,i,_)}else if(h in Mm.propsKeywords){if(p&&typeof p=="object")for(var b in p)JT(n,t,e,p[b],r+"/"+h+"/"+Mbe(b),o,r,h,i,b)}else(h in Mm.keywords||n.allKeys&&!(h in Mm.skipKeywords))&&JT(n,t,e,p,r+"/"+h,o,r,h,i)}e(i,r,o,s,a,l,u)}}function Mbe(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}});var Bw=ot(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.getSchemaRefs=fa.resolveUrl=fa.normalizeId=fa._getFullPath=fa.getFullPath=fa.inlineRef=void 0;var Pbe=qn(),Obe=O2(),Nbe=Q7(),Fbe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Vbe(n,t=!0){return typeof n=="boolean"?!0:t===!0?!N2(n):t?Y7(n)<=t:!1}fa.inlineRef=Vbe;var Lbe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function N2(n){for(let t in n){if(Lbe.has(t))return!0;let e=n[t];if(Array.isArray(e)&&e.some(N2)||typeof e=="object"&&N2(e))return!0}return!1}function Y7(n){let t=0;for(let e in n){if(e==="$ref")return 1/0;if(t++,!Fbe.has(e)&&(typeof n[e]=="object"&&(0,Pbe.eachItem)(n[e],i=>t+=Y7(i)),t===1/0))return 1/0}return t}function X7(n,t="",e){e!==!1&&(t=Ly(t));let i=n.parse(t);return J7(n,i)}fa.getFullPath=X7;function J7(n,t){return n.serialize(t).split("#")[0]+"#"}fa._getFullPath=J7;var Bbe=/#\/?$/;function Ly(n){return n?n.replace(Bbe,""):""}fa.normalizeId=Ly;function $be(n,t,e){return e=Ly(e),n.resolve(t,e)}fa.resolveUrl=$be;var jbe=/^[a-z_][-a-z0-9._]*$/i;function Ube(n,t){if(typeof n=="boolean")return{};let{schemaId:e,uriResolver:i}=this.opts,r=Ly(n[e]||t),o={"":r},s=X7(i,r,!1),a={},l=new Set;return Nbe(n,{allKeys:!0},(p,_,b,C)=>{if(C===void 0)return;let T=s+_,k=o[C];typeof p[e]=="string"&&(k=U.call(this,p[e])),W.call(this,p.$anchor),W.call(this,p.$dynamicAnchor),o[_]=k;function U(K){let oe=this.opts.uriResolver.resolve;if(K=Ly(k?oe(k,K):K),l.has(K))throw h(K);l.add(K);let ae=this.refs[K];return typeof ae=="string"&&(ae=this.refs[ae]),typeof ae=="object"?u(p,ae.schema,K):K!==Ly(T)&&(K[0]==="#"?(u(p,a[K],K),a[K]=p):this.refs[K]=T),K}function W(K){if(typeof K=="string"){if(!jbe.test(K))throw new Error(`invalid anchor "${K}"`);U.call(this,`#${K}`)}}}),a;function u(p,_,b){if(_!==void 0&&!Obe(p,_))throw h(b)}function h(p){return new Error(`reference "${p}" resolves to more than one schema`)}}fa.getSchemaRefs=Ube});var Uw=ot(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.getData=Pm.KeywordCxt=Pm.validateFunctionCode=void 0;var iY=M7(),Z7=Lw(),V2=T2(),ZT=Lw(),zbe=B7(),jw=q7(),F2=H7(),Ct=_n(),zt=nh(),qbe=Bw(),ih=qn(),$w=Vw();function Kbe(n){if(sY(n)&&(aY(n),oY(n))){Gbe(n);return}rY(n,()=>(0,iY.topBoolOrEmptySchema)(n))}Pm.validateFunctionCode=Kbe;function rY({gen:n,validateName:t,schema:e,schemaEnv:i,opts:r},o){r.code.es5?n.func(t,(0,Ct._)`${zt.default.data}, ${zt.default.valCxt}`,i.$async,()=>{n.code((0,Ct._)`"use strict"; ${eY(e,r)}`),Wbe(n,r),n.code(o)}):n.func(t,(0,Ct._)`${zt.default.data}, ${Hbe(r)}`,i.$async,()=>n.code(eY(e,r)).code(o))}function Hbe(n){return(0,Ct._)`{${zt.default.instancePath}="", ${zt.default.parentData}, ${zt.default.parentDataProperty}, ${zt.default.rootData}=${zt.default.data}${n.dynamicRef?(0,Ct._)`, ${zt.default.dynamicAnchors}={}`:Ct.nil}}={}`}function Wbe(n,t){n.if(zt.default.valCxt,()=>{n.var(zt.default.instancePath,(0,Ct._)`${zt.default.valCxt}.${zt.default.instancePath}`),n.var(zt.default.parentData,(0,Ct._)`${zt.default.valCxt}.${zt.default.parentData}`),n.var(zt.default.parentDataProperty,(0,Ct._)`${zt.default.valCxt}.${zt.default.parentDataProperty}`),n.var(zt.default.rootData,(0,Ct._)`${zt.default.valCxt}.${zt.default.rootData}`),t.dynamicRef&&n.var(zt.default.dynamicAnchors,(0,Ct._)`${zt.default.valCxt}.${zt.default.dynamicAnchors}`)},()=>{n.var(zt.default.instancePath,(0,Ct._)`""`),n.var(zt.default.parentData,(0,Ct._)`undefined`),n.var(zt.default.parentDataProperty,(0,Ct._)`undefined`),n.var(zt.default.rootData,zt.default.data),t.dynamicRef&&n.var(zt.default.dynamicAnchors,(0,Ct._)`{}`)})}function Gbe(n){let{schema:t,opts:e,gen:i}=n;rY(n,()=>{e.$comment&&t.$comment&&lY(n),Zbe(n),i.let(zt.default.vErrors,null),i.let(zt.default.errors,0),e.unevaluated&&Qbe(n),cY(n),n0e(n)})}function Qbe(n){let{gen:t,validateName:e}=n;n.evaluated=t.const("evaluated",(0,Ct._)`${e}.evaluated`),t.if((0,Ct._)`${n.evaluated}.dynamicProps`,()=>t.assign((0,Ct._)`${n.evaluated}.props`,(0,Ct._)`undefined`)),t.if((0,Ct._)`${n.evaluated}.dynamicItems`,()=>t.assign((0,Ct._)`${n.evaluated}.items`,(0,Ct._)`undefined`))}function eY(n,t){let e=typeof n=="object"&&n[t.schemaId];return e&&(t.code.source||t.code.process)?(0,Ct._)`/*# sourceURL=${e} */`:Ct.nil}function Ybe(n,t){if(sY(n)&&(aY(n),oY(n))){Xbe(n,t);return}(0,iY.boolOrEmptySchema)(n,t)}function oY({schema:n,self:t}){if(typeof n=="boolean")return!n;for(let e in n)if(t.RULES.all[e])return!0;return!1}function sY(n){return typeof n.schema!="boolean"}function Xbe(n,t){let{schema:e,gen:i,opts:r}=n;r.$comment&&e.$comment&&lY(n),e0e(n),t0e(n);let o=i.const("_errs",zt.default.errors);cY(n,o),i.var(t,(0,Ct._)`${o} === ${zt.default.errors}`)}function aY(n){(0,ih.checkUnknownRules)(n),Jbe(n)}function cY(n,t){if(n.opts.jtd)return tY(n,[],!1,t);let e=(0,Z7.getSchemaTypes)(n.schema),i=(0,Z7.coerceAndCheckDataType)(n,e);tY(n,e,!i,t)}function Jbe(n){let{schema:t,errSchemaPath:e,opts:i,self:r}=n;t.$ref&&i.ignoreKeywordsWithRef&&(0,ih.schemaHasRulesButRef)(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${e}"`)}function Zbe(n){let{schema:t,opts:e}=n;t.default!==void 0&&e.useDefaults&&e.strictSchema&&(0,ih.checkStrictMode)(n,"default is ignored in the schema root")}function e0e(n){let t=n.schema[n.opts.schemaId];t&&(n.baseId=(0,qbe.resolveUrl)(n.opts.uriResolver,n.baseId,t))}function t0e(n){if(n.schema.$async&&!n.schemaEnv.$async)throw new Error("async schema in sync schema")}function lY({gen:n,schemaEnv:t,schema:e,errSchemaPath:i,opts:r}){let o=e.$comment;if(r.$comment===!0)n.code((0,Ct._)`${zt.default.self}.logger.log(${o})`);else if(typeof r.$comment=="function"){let s=(0,Ct.str)`${i}/$comment`,a=n.scopeValue("root",{ref:t.root});n.code((0,Ct._)`${zt.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function n0e(n){let{gen:t,schemaEnv:e,validateName:i,ValidationError:r,opts:o}=n;e.$async?t.if((0,Ct._)`${zt.default.errors} === 0`,()=>t.return(zt.default.data),()=>t.throw((0,Ct._)`new ${r}(${zt.default.vErrors})`)):(t.assign((0,Ct._)`${i}.errors`,zt.default.vErrors),o.unevaluated&&i0e(n),t.return((0,Ct._)`${zt.default.errors} === 0`))}function i0e({gen:n,evaluated:t,props:e,items:i}){e instanceof Ct.Name&&n.assign((0,Ct._)`${t}.props`,e),i instanceof Ct.Name&&n.assign((0,Ct._)`${t}.items`,i)}function tY(n,t,e,i){let{gen:r,schema:o,data:s,allErrors:a,opts:l,self:u}=n,{RULES:h}=u;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,ih.schemaHasRulesButRef)(o,h))){r.block(()=>dY(n,"$ref",h.all.$ref.definition));return}l.jtd||r0e(n,t),r.block(()=>{for(let _ of h.rules)p(_);p(h.post)});function p(_){(0,V2.shouldUseGroup)(o,_)&&(_.type?(r.if((0,ZT.checkDataType)(_.type,s,l.strictNumbers)),nY(n,_),t.length===1&&t[0]===_.type&&e&&(r.else(),(0,ZT.reportTypeError)(n)),r.endIf()):nY(n,_),a||r.if((0,Ct._)`${zt.default.errors} === ${i||0}`))}}function nY(n,t){let{gen:e,schema:i,opts:{useDefaults:r}}=n;r&&(0,zbe.assignDefaults)(n,t.type),e.block(()=>{for(let o of t.rules)(0,V2.shouldUseRule)(i,o)&&dY(n,o.keyword,o.definition,t.type)})}function r0e(n,t){n.schemaEnv.meta||!n.opts.strictTypes||(o0e(n,t),n.opts.allowUnionTypes||s0e(n,t),a0e(n,n.dataTypes))}function o0e(n,t){if(t.length){if(!n.dataTypes.length){n.dataTypes=t;return}t.forEach(e=>{uY(n.dataTypes,e)||L2(n,`type "${e}" not allowed by context "${n.dataTypes.join(",")}"`)}),l0e(n,t)}}function s0e(n,t){t.length>1&&!(t.length===2&&t.includes("null"))&&L2(n,"use allowUnionTypes to allow union type keyword")}function a0e(n,t){let e=n.self.RULES.all;for(let i in e){let r=e[i];if(typeof r=="object"&&(0,V2.shouldUseRule)(n.schema,r)){let{type:o}=r.definition;o.length&&!o.some(s=>c0e(t,s))&&L2(n,`missing type "${o.join(",")}" for keyword "${i}"`)}}}function c0e(n,t){return n.includes(t)||t==="number"&&n.includes("integer")}function uY(n,t){return n.includes(t)||t==="integer"&&n.includes("number")}function l0e(n,t){let e=[];for(let i of n.dataTypes)uY(t,i)?e.push(i):t.includes("integer")&&i==="number"&&e.push("integer");n.dataTypes=e}function L2(n,t){let e=n.schemaEnv.baseId+n.errSchemaPath;t+=` at "${e}" (strictTypes)`,(0,ih.checkStrictMode)(n,t,n.opts.strictTypes)}var eD=class{constructor(t,e,i){if((0,jw.validateKeywordUsage)(t,e,i),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=i,this.data=t.data,this.schema=t.schema[i],this.$data=e.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ih.schemaRefOrVal)(t,this.schema,i,this.$data),this.schemaType=e.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=e,this.$data)this.schemaCode=t.gen.const("vSchema",hY(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,jw.validSchemaType)(this.schema,e.schemaType,e.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(e.schemaType)}`);("code"in e?e.trackErrors:e.errors!==!1)&&(this.errsCount=t.gen.const("_errs",zt.default.errors))}result(t,e,i){this.failResult((0,Ct.not)(t),e,i)}failResult(t,e,i){this.gen.if(t),i?i():this.error(),e?(this.gen.else(),e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,e){this.failResult((0,Ct.not)(t),void 0,e)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:e}=this;this.fail((0,Ct._)`${e} !== undefined && (${(0,Ct.or)(this.invalid$data(),t)})`)}error(t,e,i){if(e){this.setParams(e),this._error(t,i),this.setParams({});return}this._error(t,i)}_error(t,e){(t?$w.reportExtraError:$w.reportError)(this,this.def.error,e)}$dataError(){(0,$w.reportError)(this,this.def.$dataError||$w.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$w.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,e){e?Object.assign(this.params,t):this.params=t}block$data(t,e,i=Ct.nil){this.gen.block(()=>{this.check$data(t,i),e()})}check$data(t=Ct.nil,e=Ct.nil){if(!this.$data)return;let{gen:i,schemaCode:r,schemaType:o,def:s}=this;i.if((0,Ct.or)((0,Ct._)`${r} === undefined`,e)),t!==Ct.nil&&i.assign(t,!0),(o.length||s.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),t!==Ct.nil&&i.assign(t,!1)),i.else()}invalid$data(){let{gen:t,schemaCode:e,schemaType:i,def:r,it:o}=this;return(0,Ct.or)(s(),a());function s(){if(i.length){if(!(e instanceof Ct.Name))throw new Error("ajv implementation error");let l=Array.isArray(i)?i:[i];return(0,Ct._)`${(0,ZT.checkDataTypes)(l,e,o.opts.strictNumbers,ZT.DataType.Wrong)}`}return Ct.nil}function a(){if(r.validateSchema){let l=t.scopeValue("validate$data",{ref:r.validateSchema});return(0,Ct._)`!${l}(${e})`}return Ct.nil}}subschema(t,e){let i=(0,F2.getSubschema)(this.it,t);(0,F2.extendSubschemaData)(i,this.it,t),(0,F2.extendSubschemaMode)(i,t);let r=Qe(ee(ee({},this.it),i),{items:void 0,props:void 0});return Ybe(r,e),r}mergeEvaluated(t,e){let{it:i,gen:r}=this;i.opts.unevaluated&&(i.props!==!0&&t.props!==void 0&&(i.props=ih.mergeEvaluated.props(r,t.props,i.props,e)),i.items!==!0&&t.items!==void 0&&(i.items=ih.mergeEvaluated.items(r,t.items,i.items,e)))}mergeValidEvaluated(t,e){let{it:i,gen:r}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return r.if(e,()=>this.mergeEvaluated(t,Ct.Name)),!0}};Pm.KeywordCxt=eD;function dY(n,t,e,i){let r=new eD(n,e,t);"code"in e?e.code(r,i):r.$data&&e.validate?(0,jw.funcKeywordCode)(r,e):"macro"in e?(0,jw.macroKeywordCode)(r,e):(e.compile||e.validate)&&(0,jw.funcKeywordCode)(r,e)}var u0e=/^\/(?:[^~]|~0|~1)*$/,d0e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function hY(n,{dataLevel:t,dataNames:e,dataPathArr:i}){let r,o;if(n==="")return zt.default.rootData;if(n[0]==="/"){if(!u0e.test(n))throw new Error(`Invalid JSON-pointer: ${n}`);r=n,o=zt.default.rootData}else{let u=d0e.exec(n);if(!u)throw new Error(`Invalid JSON-pointer: ${n}`);let h=+u[1];if(r=u[2],r==="#"){if(h>=t)throw new Error(l("property/index",h));return i[t-h]}if(h>t)throw new Error(l("data",h));if(o=e[t-h],!r)return o}let s=o,a=r.split("/");for(let u of a)u&&(o=(0,Ct._)`${o}${(0,Ct.getProperty)((0,ih.unescapeJsonPointer)(u))}`,s=(0,Ct._)`${s} && ${o}`);return s;function l(u,h){return`Cannot access ${u} ${h} levels up, current level is ${t}`}}Pm.getData=hY});var tD=ot($2=>{"use strict";Object.defineProperty($2,"__esModule",{value:!0});var B2=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};$2.default=B2});var zw=ot(z2=>{"use strict";Object.defineProperty(z2,"__esModule",{value:!0});var j2=Bw(),U2=class extends Error{constructor(t,e,i,r){super(r||`can't resolve reference ${i} from id ${e}`),this.missingRef=(0,j2.resolveUrl)(t,e,i),this.missingSchema=(0,j2.normalizeId)((0,j2.getFullPath)(t,this.missingRef))}};z2.default=U2});var iD=ot(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.resolveSchema=Wc.getCompilingSchema=Wc.resolveRef=Wc.compileSchema=Wc.SchemaEnv=void 0;var $l=_n(),h0e=tD(),Pp=nh(),jl=Bw(),mY=qn(),m0e=Uw(),By=class{constructor(t){var e;this.refs={},this.dynamicAnchors={};let i;typeof t.schema=="object"&&(i=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(e=t.baseId)!==null&&e!==void 0?e:(0,jl.normalizeId)(i?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=i?.$async,this.refs={}}};Wc.SchemaEnv=By;function K2(n){let t=fY.call(this,n);if(t)return t;let e=(0,jl.getFullPath)(this.opts.uriResolver,n.root.baseId),{es5:i,lines:r}=this.opts.code,{ownProperties:o}=this.opts,s=new $l.CodeGen(this.scope,{es5:i,lines:r,ownProperties:o}),a;n.$async&&(a=s.scopeValue("Error",{ref:h0e.default,code:(0,$l._)`require("ajv/dist/runtime/validation_error").default`}));let l=s.scopeName("validate");n.validateName=l;let u={gen:s,allErrors:this.opts.allErrors,data:Pp.default.data,parentData:Pp.default.parentData,parentDataProperty:Pp.default.parentDataProperty,dataNames:[Pp.default.data],dataPathArr:[$l.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:n.schema,code:(0,$l.stringify)(n.schema)}:{ref:n.schema}),validateName:l,ValidationError:a,schema:n.schema,schemaEnv:n,rootId:e,baseId:n.baseId||e,schemaPath:$l.nil,errSchemaPath:n.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,$l._)`""`,opts:this.opts,self:this},h;try{this._compilations.add(n),(0,m0e.validateFunctionCode)(u),s.optimize(this.opts.code.optimize);let p=s.toString();h=`${s.scopeRefs(Pp.default.scope)}return ${p}`,this.opts.code.process&&(h=this.opts.code.process(h,n));let b=new Function(`${Pp.default.self}`,`${Pp.default.scope}`,h)(this,this.scope.get());if(this.scope.value(l,{ref:b}),b.errors=null,b.schema=n.schema,b.schemaEnv=n,n.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:l,validateCode:p,scopeValues:s._values}),this.opts.unevaluated){let{props:C,items:T}=u;b.evaluated={props:C instanceof $l.Name?void 0:C,items:T instanceof $l.Name?void 0:T,dynamicProps:C instanceof $l.Name,dynamicItems:T instanceof $l.Name},b.source&&(b.source.evaluated=(0,$l.stringify)(b.evaluated))}return n.validate=b,n}catch(p){throw delete n.validate,delete n.validateName,h&&this.logger.error("Error compiling schema, function code:",h),p}finally{this._compilations.delete(n)}}Wc.compileSchema=K2;function f0e(n,t,e){var i;e=(0,jl.resolveUrl)(this.opts.uriResolver,t,e);let r=n.refs[e];if(r)return r;let o=_0e.call(this,n,e);if(o===void 0){let s=(i=n.localRefs)===null||i===void 0?void 0:i[e],{schemaId:a}=this.opts;s&&(o=new By({schema:s,schemaId:a,root:n,baseId:t}))}if(o!==void 0)return n.refs[e]=p0e.call(this,o)}Wc.resolveRef=f0e;function p0e(n){return(0,jl.inlineRef)(n.schema,this.opts.inlineRefs)?n.schema:n.validate?n:K2.call(this,n)}function fY(n){for(let t of this._compilations)if(g0e(t,n))return t}Wc.getCompilingSchema=fY;function g0e(n,t){return n.schema===t.schema&&n.root===t.root&&n.baseId===t.baseId}function _0e(n,t){let e;for(;typeof(e=this.refs[t])=="string";)t=e;return e||this.schemas[t]||nD.call(this,n,t)}function nD(n,t){let e=this.opts.uriResolver.parse(t),i=(0,jl._getFullPath)(this.opts.uriResolver,e),r=(0,jl.getFullPath)(this.opts.uriResolver,n.baseId,void 0);if(Object.keys(n.schema).length>0&&i===r)return q2.call(this,e,n);let o=(0,jl.normalizeId)(i),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){let a=nD.call(this,n,s);return typeof a?.schema!="object"?void 0:q2.call(this,e,a)}if(typeof s?.schema=="object"){if(s.validate||K2.call(this,s),o===(0,jl.normalizeId)(t)){let{schema:a}=s,{schemaId:l}=this.opts,u=a[l];return u&&(r=(0,jl.resolveUrl)(this.opts.uriResolver,r,u)),new By({schema:a,schemaId:l,root:n,baseId:r})}return q2.call(this,e,s)}}Wc.resolveSchema=nD;var y0e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function q2(n,{baseId:t,schema:e,root:i}){var r;if(((r=n.fragment)===null||r===void 0?void 0:r[0])!=="/")return;for(let a of n.fragment.slice(1).split("/")){if(typeof e=="boolean")return;let l=e[(0,mY.unescapeFragment)(a)];if(l===void 0)return;e=l;let u=typeof e=="object"&&e[this.opts.schemaId];!y0e.has(a)&&u&&(t=(0,jl.resolveUrl)(this.opts.uriResolver,t,u))}let o;if(typeof e!="boolean"&&e.$ref&&!(0,mY.schemaHasRulesButRef)(e,this.RULES)){let a=(0,jl.resolveUrl)(this.opts.uriResolver,t,e.$ref);o=nD.call(this,i,a)}let{schemaId:s}=this.opts;if(o=o||new By({schema:e,schemaId:s,root:i,baseId:t}),o.schema!==o.root.schema)return o}});var pY=ot((Jrt,v0e)=>{v0e.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var _Y=ot((Zrt,gY)=>{"use strict";var b0e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gY.exports={HEX:b0e}});var IY=ot((eot,xY)=>{"use strict";var{HEX:w0e}=_Y(),C0e=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function wY(n){if(EY(n,".")<3)return{host:n,isIPV4:!1};let t=n.match(C0e)||[],[e]=t;return e?{host:x0e(e,"."),isIPV4:!0}:{host:n,isIPV4:!1}}function H2(n,t=!1){let e="",i=!0;for(let r of n){if(w0e[r]===void 0)return;r!=="0"&&i===!0&&(i=!1),i||(e+=r)}return t&&e.length===0&&(e="0"),e}function E0e(n){let t=0,e={error:!1,address:"",zone:""},i=[],r=[],o=!1,s=!1,a=!1;function l(){if(r.length){if(o===!1){let u=H2(r);if(u!==void 0)i.push(u);else return e.error=!0,!1}r.length=0}return!0}for(let u=0;u<n.length;u++){let h=n[u];if(!(h==="["||h==="]"))if(h===":"){if(s===!0&&(a=!0),!l())break;if(t++,i.push(":"),t>7){e.error=!0;break}u-1>=0&&n[u-1]===":"&&(s=!0);continue}else if(h==="%"){if(!l())break;o=!0}else{r.push(h);continue}}return r.length&&(o?e.zone=r.join(""):a?i.push(r.join("")):i.push(H2(r))),e.address=i.join(""),e}function CY(n){if(EY(n,":")<2)return{host:n,isIPV6:!1};let t=E0e(n);if(t.error)return{host:n,isIPV6:!1};{let e=t.address,i=t.address;return t.zone&&(e+="%"+t.zone,i+="%25"+t.zone),{host:e,escapedHost:i,isIPV6:!0}}}function x0e(n,t){let e="",i=!0,r=n.length;for(let o=0;o<r;o++){let s=n[o];s==="0"&&i?(o+1<=r&&n[o+1]===t||o+1===r)&&(e+=s,i=!1):(s===t?i=!0:i=!1,e+=s)}return e}function EY(n,t){let e=0;for(let i=0;i<n.length;i++)n[i]===t&&e++;return e}var yY=/^\.\.?\//u,vY=/^\/\.(?:\/|$)/u,bY=/^\/\.\.(?:\/|$)/u,I0e=/^\/?(?:.|\n)*?(?=\/|$)/u;function S0e(n){let t=[];for(;n.length;)if(n.match(yY))n=n.replace(yY,"");else if(n.match(vY))n=n.replace(vY,"/");else if(n.match(bY))n=n.replace(bY,"/"),t.pop();else if(n==="."||n==="..")n="";else{let e=n.match(I0e);if(e){let i=e[0];n=n.slice(i.length),t.push(i)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function T0e(n,t){let e=t!==!0?escape:unescape;return n.scheme!==void 0&&(n.scheme=e(n.scheme)),n.userinfo!==void 0&&(n.userinfo=e(n.userinfo)),n.host!==void 0&&(n.host=e(n.host)),n.path!==void 0&&(n.path=e(n.path)),n.query!==void 0&&(n.query=e(n.query)),n.fragment!==void 0&&(n.fragment=e(n.fragment)),n}function D0e(n){let t=[];if(n.userinfo!==void 0&&(t.push(n.userinfo),t.push("@")),n.host!==void 0){let e=unescape(n.host),i=wY(e);if(i.isIPV4)e=i.host;else{let r=CY(i.host);r.isIPV6===!0?e=`[${r.escapedHost}]`:e=n.host}t.push(e)}return(typeof n.port=="number"||typeof n.port=="string")&&(t.push(":"),t.push(String(n.port))),t.length?t.join(""):void 0}xY.exports={recomposeAuthority:D0e,normalizeComponentEncoding:T0e,removeDotSegments:S0e,normalizeIPv4:wY,normalizeIPv6:CY,stringArrayToHexStripped:H2}});var RY=ot((tot,AY)=>{"use strict";var k0e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,A0e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function SY(n){return typeof n.secure=="boolean"?n.secure:String(n.scheme).toLowerCase()==="wss"}function TY(n){return n.host||(n.error=n.error||"HTTP URIs must have a host."),n}function DY(n){let t=String(n.scheme).toLowerCase()==="https";return(n.port===(t?443:80)||n.port==="")&&(n.port=void 0),n.path||(n.path="/"),n}function R0e(n){return n.secure=SY(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n}function M0e(n){if((n.port===(SY(n)?443:80)||n.port==="")&&(n.port=void 0),typeof n.secure=="boolean"&&(n.scheme=n.secure?"wss":"ws",n.secure=void 0),n.resourceName){let[t,e]=n.resourceName.split("?");n.path=t&&t!=="/"?t:void 0,n.query=e,n.resourceName=void 0}return n.fragment=void 0,n}function P0e(n,t){if(!n.path)return n.error="URN can not be parsed",n;let e=n.path.match(A0e);if(e){let i=t.scheme||n.scheme||"urn";n.nid=e[1].toLowerCase(),n.nss=e[2];let r=`${i}:${t.nid||n.nid}`,o=W2[r];n.path=void 0,o&&(n=o.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n}function O0e(n,t){let e=t.scheme||n.scheme||"urn",i=n.nid.toLowerCase(),r=`${e}:${t.nid||i}`,o=W2[r];o&&(n=o.serialize(n,t));let s=n,a=n.nss;return s.path=`${i||t.nid}:${a}`,t.skipEscape=!0,s}function N0e(n,t){let e=n;return e.uuid=e.nss,e.nss=void 0,!t.tolerant&&(!e.uuid||!k0e.test(e.uuid))&&(e.error=e.error||"UUID is not valid."),e}function F0e(n){let t=n;return t.nss=(n.uuid||"").toLowerCase(),t}var kY={scheme:"http",domainHost:!0,parse:TY,serialize:DY},V0e={scheme:"https",domainHost:kY.domainHost,parse:TY,serialize:DY},rD={scheme:"ws",domainHost:!0,parse:R0e,serialize:M0e},L0e={scheme:"wss",domainHost:rD.domainHost,parse:rD.parse,serialize:rD.serialize},B0e={scheme:"urn",parse:P0e,serialize:O0e,skipNormalize:!0},$0e={scheme:"urn:uuid",parse:N0e,serialize:F0e,skipNormalize:!0},W2={http:kY,https:V0e,ws:rD,wss:L0e,urn:B0e,"urn:uuid":$0e};AY.exports=W2});var PY=ot((not,sD)=>{"use strict";var{normalizeIPv6:j0e,normalizeIPv4:U0e,removeDotSegments:qw,recomposeAuthority:z0e,normalizeComponentEncoding:oD}=IY(),G2=RY();function q0e(n,t){return typeof n=="string"?n=zu(rh(n,t),t):typeof n=="object"&&(n=rh(zu(n,t),t)),n}function K0e(n,t,e){let i=Object.assign({scheme:"null"},e),r=MY(rh(n,i),rh(t,i),i,!0);return zu(r,Qe(ee({},i),{skipEscape:!0}))}function MY(n,t,e,i){let r={};return i||(n=rh(zu(n,e),e),t=rh(zu(t,e),e)),e=e||{},!e.tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=qw(t.path||""),r.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=qw(t.path||""),r.query=t.query):(t.path?(t.path.charAt(0)==="/"?r.path=qw(t.path):((n.userinfo!==void 0||n.host!==void 0||n.port!==void 0)&&!n.path?r.path="/"+t.path:n.path?r.path=n.path.slice(0,n.path.lastIndexOf("/")+1)+t.path:r.path=t.path,r.path=qw(r.path)),r.query=t.query):(r.path=n.path,t.query!==void 0?r.query=t.query:r.query=n.query),r.userinfo=n.userinfo,r.host=n.host,r.port=n.port),r.scheme=n.scheme),r.fragment=t.fragment,r}function H0e(n,t,e){return typeof n=="string"?(n=unescape(n),n=zu(oD(rh(n,e),!0),Qe(ee({},e),{skipEscape:!0}))):typeof n=="object"&&(n=zu(oD(n,!0),Qe(ee({},e),{skipEscape:!0}))),typeof t=="string"?(t=unescape(t),t=zu(oD(rh(t,e),!0),Qe(ee({},e),{skipEscape:!0}))):typeof t=="object"&&(t=zu(oD(t,!0),Qe(ee({},e),{skipEscape:!0}))),n.toLowerCase()===t.toLowerCase()}function zu(n,t){let e={host:n.host,scheme:n.scheme,userinfo:n.userinfo,port:n.port,path:n.path,query:n.query,nid:n.nid,nss:n.nss,uuid:n.uuid,fragment:n.fragment,reference:n.reference,resourceName:n.resourceName,secure:n.secure,error:""},i=Object.assign({},t),r=[],o=G2[(i.scheme||e.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(e,i),e.path!==void 0&&(i.skipEscape?e.path=unescape(e.path):(e.path=escape(e.path),e.scheme!==void 0&&(e.path=e.path.split("%3A").join(":")))),i.reference!=="suffix"&&e.scheme&&r.push(e.scheme,":");let s=z0e(e);if(s!==void 0&&(i.reference!=="suffix"&&r.push("//"),r.push(s),e.path&&e.path.charAt(0)!=="/"&&r.push("/")),e.path!==void 0){let a=e.path;!i.absolutePath&&(!o||!o.absolutePath)&&(a=qw(a)),s===void 0&&(a=a.replace(/^\/\//u,"/%2F")),r.push(a)}return e.query!==void 0&&r.push("?",e.query),e.fragment!==void 0&&r.push("#",e.fragment),r.join("")}var W0e=Array.from({length:127},(n,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function G0e(n){let t=0;for(let e=0,i=n.length;e<i;++e)if(t=n.charCodeAt(e),t>126||W0e[t])return!0;return!1}var Q0e=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function rh(n,t){let e=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},r=n.indexOf("%")!==-1,o=!1;e.reference==="suffix"&&(n=(e.scheme?e.scheme+":":"")+"//"+n);let s=n.match(Q0e);if(s){if(i.scheme=s[1],i.userinfo=s[3],i.host=s[4],i.port=parseInt(s[5],10),i.path=s[6]||"",i.query=s[7],i.fragment=s[8],isNaN(i.port)&&(i.port=s[5]),i.host){let l=U0e(i.host);if(l.isIPV4===!1){let u=j0e(l.host);i.host=u.host.toLowerCase(),o=u.isIPV6}else i.host=l.host,o=!0}i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&!i.path&&i.query===void 0?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",e.reference&&e.reference!=="suffix"&&e.reference!==i.reference&&(i.error=i.error||"URI is not a "+e.reference+" reference.");let a=G2[(e.scheme||i.scheme||"").toLowerCase()];if(!e.unicodeSupport&&(!a||!a.unicodeSupport)&&i.host&&(e.domainHost||a&&a.domainHost)&&o===!1&&G0e(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(l){i.error=i.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(r&&i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),r&&i.host!==void 0&&(i.host=unescape(i.host)),i.path&&i.path.length&&(i.path=escape(unescape(i.path))),i.fragment&&i.fragment.length&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),a&&a.parse&&a.parse(i,e)}else i.error=i.error||"URI can not be parsed.";return i}var Q2={SCHEMES:G2,normalize:q0e,resolve:K0e,resolveComponents:MY,equal:H0e,serialize:zu,parse:rh};sD.exports=Q2;sD.exports.default=Q2;sD.exports.fastUri=Q2});var NY=ot(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0});var OY=PY();OY.code='require("ajv/dist/runtime/uri").default';Y2.default=OY});var zY=ot(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.CodeGen=To.Name=To.nil=To.stringify=To.str=To._=To.KeywordCxt=void 0;var Y0e=Uw();Object.defineProperty(To,"KeywordCxt",{enumerable:!0,get:function(){return Y0e.KeywordCxt}});var $y=_n();Object.defineProperty(To,"_",{enumerable:!0,get:function(){return $y._}});Object.defineProperty(To,"str",{enumerable:!0,get:function(){return $y.str}});Object.defineProperty(To,"stringify",{enumerable:!0,get:function(){return $y.stringify}});Object.defineProperty(To,"nil",{enumerable:!0,get:function(){return $y.nil}});Object.defineProperty(To,"Name",{enumerable:!0,get:function(){return $y.Name}});Object.defineProperty(To,"CodeGen",{enumerable:!0,get:function(){return $y.CodeGen}});var X0e=tD(),$Y=zw(),J0e=S2(),Kw=iD(),Z0e=_n(),Hw=Bw(),aD=Lw(),J2=qn(),FY=pY(),ewe=NY(),jY=(n,t)=>new RegExp(n,t);jY.code="new RegExp";var twe=["removeAdditional","useDefaults","coerceTypes"],nwe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),iwe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},rwe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},VY=200;function owe(n){var t,e,i,r,o,s,a,l,u,h,p,_,b,C,T,k,U,W,K,oe,ae,we,M,E,I;let P=n.strict,N=(t=n.code)===null||t===void 0?void 0:t.optimize,V=N===!0||N===void 0?1:N||0,S=(i=(e=n.code)===null||e===void 0?void 0:e.regExp)!==null&&i!==void 0?i:jY,Ot=(r=n.uriResolver)!==null&&r!==void 0?r:ewe.default;return{strictSchema:(s=(o=n.strictSchema)!==null&&o!==void 0?o:P)!==null&&s!==void 0?s:!0,strictNumbers:(l=(a=n.strictNumbers)!==null&&a!==void 0?a:P)!==null&&l!==void 0?l:!0,strictTypes:(h=(u=n.strictTypes)!==null&&u!==void 0?u:P)!==null&&h!==void 0?h:"log",strictTuples:(_=(p=n.strictTuples)!==null&&p!==void 0?p:P)!==null&&_!==void 0?_:"log",strictRequired:(C=(b=n.strictRequired)!==null&&b!==void 0?b:P)!==null&&C!==void 0?C:!1,code:n.code?Qe(ee({},n.code),{optimize:V,regExp:S}):{optimize:V,regExp:S},loopRequired:(T=n.loopRequired)!==null&&T!==void 0?T:VY,loopEnum:(k=n.loopEnum)!==null&&k!==void 0?k:VY,meta:(U=n.meta)!==null&&U!==void 0?U:!0,messages:(W=n.messages)!==null&&W!==void 0?W:!0,inlineRefs:(K=n.inlineRefs)!==null&&K!==void 0?K:!0,schemaId:(oe=n.schemaId)!==null&&oe!==void 0?oe:"$id",addUsedSchema:(ae=n.addUsedSchema)!==null&&ae!==void 0?ae:!0,validateSchema:(we=n.validateSchema)!==null&&we!==void 0?we:!0,validateFormats:(M=n.validateFormats)!==null&&M!==void 0?M:!0,unicodeRegExp:(E=n.unicodeRegExp)!==null&&E!==void 0?E:!0,int32range:(I=n.int32range)!==null&&I!==void 0?I:!0,uriResolver:Ot}}var Ww=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=ee(ee({},t),owe(t));let{es5:e,lines:i}=this.opts.code;this.scope=new Z0e.ValueScope({scope:{},prefixes:nwe,es5:e,lines:i}),this.logger=dwe(t.logger);let r=t.validateFormats;t.validateFormats=!1,this.RULES=(0,J0e.getRules)(),LY.call(this,iwe,t,"NOT SUPPORTED"),LY.call(this,rwe,t,"DEPRECATED","warn"),this._metaOpts=lwe.call(this),t.formats&&awe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&cwe.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),swe.call(this),t.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:e,schemaId:i}=this.opts,r=FY;i==="id"&&(r=ee({},FY),r.id=r.$id,delete r.$id),e&&t&&this.addMetaSchema(r,r[i],!1)}defaultMeta(){let{meta:t,schemaId:e}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[e]||t:void 0}validate(t,e){let i;if(typeof t=="string"){if(i=this.getSchema(t),!i)throw new Error(`no schema with key or ref "${t}"`)}else i=this.compile(t);let r=i(e);return"$async"in i||(this.errors=i.errors),r}compile(t,e){let i=this._addSchema(t,e);return i.validate||this._compileSchemaEnv(i)}compileAsync(t,e){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:i}=this.opts;return r.call(this,t,e);function r(h,p){return O(this,null,function*(){yield o.call(this,h.$schema);let _=this._addSchema(h,p);return _.validate||s.call(this,_)})}function o(h){return O(this,null,function*(){h&&!this.getSchema(h)&&(yield r.call(this,{$ref:h},!0))})}function s(h){return O(this,null,function*(){try{return this._compileSchemaEnv(h)}catch(p){if(!(p instanceof $Y.default))throw p;return a.call(this,p),yield l.call(this,p.missingSchema),s.call(this,h)}})}function a({missingSchema:h,missingRef:p}){if(this.refs[h])throw new Error(`AnySchema ${h} is loaded but ${p} cannot be resolved`)}function l(h){return O(this,null,function*(){let p=yield u.call(this,h);this.refs[h]||(yield o.call(this,p.$schema)),this.refs[h]||this.addSchema(p,h,e)})}function u(h){return O(this,null,function*(){let p=this._loading[h];if(p)return p;try{return yield this._loading[h]=i(h)}finally{delete this._loading[h]}})}}addSchema(t,e,i,r=this.opts.validateSchema){if(Array.isArray(t)){for(let s of t)this.addSchema(s,void 0,i,r);return this}let o;if(typeof t=="object"){let{schemaId:s}=this.opts;if(o=t[s],o!==void 0&&typeof o!="string")throw new Error(`schema ${s} must be string`)}return e=(0,Hw.normalizeId)(e||o),this._checkUnique(e),this.schemas[e]=this._addSchema(t,i,e,r,!0),this}addMetaSchema(t,e,i=this.opts.validateSchema){return this.addSchema(t,e,!0,i),this}validateSchema(t,e){if(typeof t=="boolean")return!0;let i;if(i=t.$schema,i!==void 0&&typeof i!="string")throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let r=this.validate(i,t);if(!r&&e){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return r}getSchema(t){let e;for(;typeof(e=BY.call(this,t))=="string";)t=e;if(e===void 0){let{schemaId:i}=this.opts,r=new Kw.SchemaEnv({schema:{},schemaId:i});if(e=Kw.resolveSchema.call(this,r,t),!e)return;this.refs[t]=e}return e.validate||this._compileSchemaEnv(e)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let e=BY.call(this,t);return typeof e=="object"&&this._cache.delete(e.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let e=t;this._cache.delete(e);let i=t[this.opts.schemaId];return i&&(i=(0,Hw.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let e of t)this.addKeyword(e);return this}addKeyword(t,e){let i;if(typeof t=="string")i=t,typeof e=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),e.keyword=i);else if(typeof t=="object"&&e===void 0){if(e=t,i=e.keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(mwe.call(this,i,e),!e)return(0,J2.eachItem)(i,o=>X2.call(this,o)),this;pwe.call(this,e);let r=Qe(ee({},e),{type:(0,aD.getJSONTypes)(e.type),schemaType:(0,aD.getJSONTypes)(e.schemaType)});return(0,J2.eachItem)(i,r.type.length===0?o=>X2.call(this,o,r):o=>r.type.forEach(s=>X2.call(this,o,r,s))),this}getKeyword(t){let e=this.RULES.all[t];return typeof e=="object"?e.definition:!!e}removeKeyword(t){let{RULES:e}=this;delete e.keywords[t],delete e.all[t];for(let i of e.rules){let r=i.rules.findIndex(o=>o.keyword===t);r>=0&&i.rules.splice(r,1)}return this}addFormat(t,e){return typeof e=="string"&&(e=new RegExp(e)),this.formats[t]=e,this}errorsText(t=this.errors,{separator:e=", ",dataVar:i="data"}={}){return!t||t.length===0?"No errors":t.map(r=>`${i}${r.instancePath} ${r.message}`).reduce((r,o)=>r+e+o)}$dataMetaSchema(t,e){let i=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let r of e){let o=r.split("/").slice(1),s=t;for(let a of o)s=s[a];for(let a in i){let l=i[a];if(typeof l!="object")continue;let{$data:u}=l.definition,h=s[a];u&&h&&(s[a]=UY(h))}}return t}_removeAllSchemas(t,e){for(let i in t){let r=t[i];(!e||e.test(i))&&(typeof r=="string"?delete t[i]:r&&!r.meta&&(this._cache.delete(r.schema),delete t[i]))}}_addSchema(t,e,i,r=this.opts.validateSchema,o=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof t=="object")s=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;i=(0,Hw.normalizeId)(s||i);let u=Hw.getSchemaRefs.call(this,t,i);return l=new Kw.SchemaEnv({schema:t,schemaId:a,meta:e,baseId:i,localRefs:u}),this._cache.set(l.schema,l),o&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=l),r&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Kw.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let e=this.opts;this.opts=this._metaOpts;try{Kw.compileSchema.call(this,t)}finally{this.opts=e}}};Ww.ValidationError=X0e.default;Ww.MissingRefError=$Y.default;To.default=Ww;function LY(n,t,e,i="error"){for(let r in n){let o=r;o in t&&this.logger[i](`${e}: option ${r}. ${n[o]}`)}}function BY(n){return n=(0,Hw.normalizeId)(n),this.schemas[n]||this.refs[n]}function swe(){let n=this.opts.schemas;if(n)if(Array.isArray(n))this.addSchema(n);else for(let t in n)this.addSchema(n[t],t)}function awe(){for(let n in this.opts.formats){let t=this.opts.formats[n];t&&this.addFormat(n,t)}}function cwe(n){if(Array.isArray(n)){this.addVocabulary(n);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in n){let e=n[t];e.keyword||(e.keyword=t),this.addKeyword(e)}}function lwe(){let n=ee({},this.opts);for(let t of twe)delete n[t];return n}var uwe={log(){},warn(){},error(){}};function dwe(n){if(n===!1)return uwe;if(n===void 0)return console;if(n.log&&n.warn&&n.error)return n;throw new Error("logger must implement log, warn and error methods")}var hwe=/^[a-z_$][a-z0-9_$:-]*$/i;function mwe(n,t){let{RULES:e}=this;if((0,J2.eachItem)(n,i=>{if(e.keywords[i])throw new Error(`Keyword ${i} is already defined`);if(!hwe.test(i))throw new Error(`Keyword ${i} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function X2(n,t,e){var i;let r=t?.post;if(e&&r)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,s=r?o.post:o.rules.find(({type:l})=>l===e);if(s||(s={type:e,rules:[]},o.rules.push(s)),o.keywords[n]=!0,!t)return;let a={keyword:n,definition:Qe(ee({},t),{type:(0,aD.getJSONTypes)(t.type),schemaType:(0,aD.getJSONTypes)(t.schemaType)})};t.before?fwe.call(this,s,a,t.before):s.rules.push(a),o.all[n]=a,(i=t.implements)===null||i===void 0||i.forEach(l=>this.addKeyword(l))}function fwe(n,t,e){let i=n.rules.findIndex(r=>r.keyword===e);i>=0?n.rules.splice(i,0,t):(n.rules.push(t),this.logger.warn(`rule ${e} is not defined`))}function pwe(n){let{metaSchema:t}=n;t!==void 0&&(n.$data&&this.opts.$data&&(t=UY(t)),n.validateSchema=this.compile(t,!0))}var gwe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function UY(n){return{anyOf:[n,gwe]}}});var qY=ot(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});var _we={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Z2.default=_we});var GY=ot(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.callRef=Op.getValidate=void 0;var ywe=zw(),KY=Hc(),pa=_n(),jy=nh(),HY=iD(),cD=qn(),vwe={keyword:"$ref",schemaType:"string",code(n){let{gen:t,schema:e,it:i}=n,{baseId:r,schemaEnv:o,validateName:s,opts:a,self:l}=i,{root:u}=o;if((e==="#"||e==="#/")&&r===u.baseId)return p();let h=HY.resolveRef.call(l,u,r,e);if(h===void 0)throw new ywe.default(i.opts.uriResolver,r,e);if(h instanceof HY.SchemaEnv)return _(h);return b(h);function p(){if(o===u)return lD(n,s,o,o.$async);let C=t.scopeValue("root",{ref:u});return lD(n,(0,pa._)`${C}.validate`,u,u.$async)}function _(C){let T=WY(n,C);lD(n,T,C,C.$async)}function b(C){let T=t.scopeValue("schema",a.code.source===!0?{ref:C,code:(0,pa.stringify)(C)}:{ref:C}),k=t.name("valid"),U=n.subschema({schema:C,dataTypes:[],schemaPath:pa.nil,topSchemaRef:T,errSchemaPath:e},k);n.mergeEvaluated(U),n.ok(k)}}};function WY(n,t){let{gen:e}=n;return t.validate?e.scopeValue("validate",{ref:t.validate}):(0,pa._)`${e.scopeValue("wrapper",{ref:t})}.validate`}Op.getValidate=WY;function lD(n,t,e,i){let{gen:r,it:o}=n,{allErrors:s,schemaEnv:a,opts:l}=o,u=l.passContext?jy.default.this:pa.nil;i?h():p();function h(){if(!a.$async)throw new Error("async schema referenced by sync schema");let C=r.let("valid");r.try(()=>{r.code((0,pa._)`await ${(0,KY.callValidateCode)(n,t,u)}`),b(t),s||r.assign(C,!0)},T=>{r.if((0,pa._)`!(${T} instanceof ${o.ValidationError})`,()=>r.throw(T)),_(T),s||r.assign(C,!1)}),n.ok(C)}function p(){n.result((0,KY.callValidateCode)(n,t,u),()=>b(t),()=>_(t))}function _(C){let T=(0,pa._)`${C}.errors`;r.assign(jy.default.vErrors,(0,pa._)`${jy.default.vErrors} === null ? ${T} : ${jy.default.vErrors}.concat(${T})`),r.assign(jy.default.errors,(0,pa._)`${jy.default.vErrors}.length`)}function b(C){var T;if(!o.opts.unevaluated)return;let k=(T=e?.validate)===null||T===void 0?void 0:T.evaluated;if(o.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(o.props=cD.mergeEvaluated.props(r,k.props,o.props));else{let U=r.var("props",(0,pa._)`${C}.evaluated.props`);o.props=cD.mergeEvaluated.props(r,U,o.props,pa.Name)}if(o.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(o.items=cD.mergeEvaluated.items(r,k.items,o.items));else{let U=r.var("items",(0,pa._)`${C}.evaluated.items`);o.items=cD.mergeEvaluated.items(r,U,o.items,pa.Name)}}}Op.callRef=lD;Op.default=vwe});var QY=ot(eB=>{"use strict";Object.defineProperty(eB,"__esModule",{value:!0});var bwe=qY(),wwe=GY(),Cwe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",bwe.default,wwe.default];eB.default=Cwe});var YY=ot(tB=>{"use strict";Object.defineProperty(tB,"__esModule",{value:!0});var uD=_n(),Om=uD.operators,dD={maximum:{okStr:"<=",ok:Om.LTE,fail:Om.GT},minimum:{okStr:">=",ok:Om.GTE,fail:Om.LT},exclusiveMaximum:{okStr:"<",ok:Om.LT,fail:Om.GTE},exclusiveMinimum:{okStr:">",ok:Om.GT,fail:Om.LTE}},Ewe={message:({keyword:n,schemaCode:t})=>(0,uD.str)`must be ${dD[n].okStr} ${t}`,params:({keyword:n,schemaCode:t})=>(0,uD._)`{comparison: ${dD[n].okStr}, limit: ${t}}`},xwe={keyword:Object.keys(dD),type:"number",schemaType:"number",$data:!0,error:Ewe,code(n){let{keyword:t,data:e,schemaCode:i}=n;n.fail$data((0,uD._)`${e} ${dD[t].fail} ${i} || isNaN(${e})`)}};tB.default=xwe});var XY=ot(nB=>{"use strict";Object.defineProperty(nB,"__esModule",{value:!0});var Gw=_n(),Iwe={message:({schemaCode:n})=>(0,Gw.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,Gw._)`{multipleOf: ${n}}`},Swe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Iwe,code(n){let{gen:t,data:e,schemaCode:i,it:r}=n,o=r.opts.multipleOfPrecision,s=t.let("res"),a=o?(0,Gw._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,Gw._)`${s} !== parseInt(${s})`;n.fail$data((0,Gw._)`(${i} === 0 || (${s} = ${e}/${i}, ${a}))`)}};nB.default=Swe});var ZY=ot(iB=>{"use strict";Object.defineProperty(iB,"__esModule",{value:!0});function JY(n){let t=n.length,e=0,i=0,r;for(;i<t;)e++,r=n.charCodeAt(i++),r>=55296&&r<=56319&&i<t&&(r=n.charCodeAt(i),(r&64512)===56320&&i++);return e}iB.default=JY;JY.code='require("ajv/dist/runtime/ucs2length").default'});var eX=ot(rB=>{"use strict";Object.defineProperty(rB,"__esModule",{value:!0});var Np=_n(),Twe=qn(),Dwe=ZY(),kwe={message({keyword:n,schemaCode:t}){let e=n==="maxLength"?"more":"fewer";return(0,Np.str)`must NOT have ${e} than ${t} characters`},params:({schemaCode:n})=>(0,Np._)`{limit: ${n}}`},Awe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:kwe,code(n){let{keyword:t,data:e,schemaCode:i,it:r}=n,o=t==="maxLength"?Np.operators.GT:Np.operators.LT,s=r.opts.unicode===!1?(0,Np._)`${e}.length`:(0,Np._)`${(0,Twe.useFunc)(n.gen,Dwe.default)}(${e})`;n.fail$data((0,Np._)`${s} ${o} ${i}`)}};rB.default=Awe});var tX=ot(oB=>{"use strict";Object.defineProperty(oB,"__esModule",{value:!0});var Rwe=Hc(),hD=_n(),Mwe={message:({schemaCode:n})=>(0,hD.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,hD._)`{pattern: ${n}}`},Pwe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Mwe,code(n){let{data:t,$data:e,schema:i,schemaCode:r,it:o}=n,s=o.opts.unicodeRegExp?"u":"",a=e?(0,hD._)`(new RegExp(${r}, ${s}))`:(0,Rwe.usePattern)(n,i);n.fail$data((0,hD._)`!${a}.test(${t})`)}};oB.default=Pwe});var nX=ot(sB=>{"use strict";Object.defineProperty(sB,"__esModule",{value:!0});var Qw=_n(),Owe={message({keyword:n,schemaCode:t}){let e=n==="maxProperties"?"more":"fewer";return(0,Qw.str)`must NOT have ${e} than ${t} properties`},params:({schemaCode:n})=>(0,Qw._)`{limit: ${n}}`},Nwe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Owe,code(n){let{keyword:t,data:e,schemaCode:i}=n,r=t==="maxProperties"?Qw.operators.GT:Qw.operators.LT;n.fail$data((0,Qw._)`Object.keys(${e}).length ${r} ${i}`)}};sB.default=Nwe});var iX=ot(aB=>{"use strict";Object.defineProperty(aB,"__esModule",{value:!0});var Yw=Hc(),Xw=_n(),Fwe=qn(),Vwe={message:({params:{missingProperty:n}})=>(0,Xw.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,Xw._)`{missingProperty: ${n}}`},Lwe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Vwe,code(n){let{gen:t,schema:e,schemaCode:i,data:r,$data:o,it:s}=n,{opts:a}=s;if(!o&&e.length===0)return;let l=e.length>=a.loopRequired;if(s.allErrors?u():h(),a.strictRequired){let b=n.parentSchema.properties,{definedProperties:C}=n.it;for(let T of e)if(b?.[T]===void 0&&!C.has(T)){let k=s.schemaEnv.baseId+s.errSchemaPath,U=`required property "${T}" is not defined at "${k}" (strictRequired)`;(0,Fwe.checkStrictMode)(s,U,s.opts.strictRequired)}}function u(){if(l||o)n.block$data(Xw.nil,p);else for(let b of e)(0,Yw.checkReportMissingProp)(n,b)}function h(){let b=t.let("missing");if(l||o){let C=t.let("valid",!0);n.block$data(C,()=>_(b,C)),n.ok(C)}else t.if((0,Yw.checkMissingProp)(n,e,b)),(0,Yw.reportMissingProp)(n,b),t.else()}function p(){t.forOf("prop",i,b=>{n.setParams({missingProperty:b}),t.if((0,Yw.noPropertyInData)(t,r,b,a.ownProperties),()=>n.error())})}function _(b,C){n.setParams({missingProperty:b}),t.forOf(b,i,()=>{t.assign(C,(0,Yw.propertyInData)(t,r,b,a.ownProperties)),t.if((0,Xw.not)(C),()=>{n.error(),t.break()})},Xw.nil)}}};aB.default=Lwe});var rX=ot(cB=>{"use strict";Object.defineProperty(cB,"__esModule",{value:!0});var Jw=_n(),Bwe={message({keyword:n,schemaCode:t}){let e=n==="maxItems"?"more":"fewer";return(0,Jw.str)`must NOT have ${e} than ${t} items`},params:({schemaCode:n})=>(0,Jw._)`{limit: ${n}}`},$we={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Bwe,code(n){let{keyword:t,data:e,schemaCode:i}=n,r=t==="maxItems"?Jw.operators.GT:Jw.operators.LT;n.fail$data((0,Jw._)`${e}.length ${r} ${i}`)}};cB.default=$we});var mD=ot(lB=>{"use strict";Object.defineProperty(lB,"__esModule",{value:!0});var oX=O2();oX.code='require("ajv/dist/runtime/equal").default';lB.default=oX});var sX=ot(dB=>{"use strict";Object.defineProperty(dB,"__esModule",{value:!0});var uB=Lw(),Do=_n(),jwe=qn(),Uwe=mD(),zwe={message:({params:{i:n,j:t}})=>(0,Do.str)`must NOT have duplicate items (items ## ${t} and ${n} are identical)`,params:({params:{i:n,j:t}})=>(0,Do._)`{i: ${n}, j: ${t}}`},qwe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:zwe,code(n){let{gen:t,data:e,$data:i,schema:r,parentSchema:o,schemaCode:s,it:a}=n;if(!i&&!r)return;let l=t.let("valid"),u=o.items?(0,uB.getSchemaTypes)(o.items):[];n.block$data(l,h,(0,Do._)`${s} === false`),n.ok(l);function h(){let C=t.let("i",(0,Do._)`${e}.length`),T=t.let("j");n.setParams({i:C,j:T}),t.assign(l,!0),t.if((0,Do._)`${C} > 1`,()=>(p()?_:b)(C,T))}function p(){return u.length>0&&!u.some(C=>C==="object"||C==="array")}function _(C,T){let k=t.name("item"),U=(0,uB.checkDataTypes)(u,k,a.opts.strictNumbers,uB.DataType.Wrong),W=t.const("indices",(0,Do._)`{}`);t.for((0,Do._)`;${C}--;`,()=>{t.let(k,(0,Do._)`${e}[${C}]`),t.if(U,(0,Do._)`continue`),u.length>1&&t.if((0,Do._)`typeof ${k} == "string"`,(0,Do._)`${k} += "_"`),t.if((0,Do._)`typeof ${W}[${k}] == "number"`,()=>{t.assign(T,(0,Do._)`${W}[${k}]`),n.error(),t.assign(l,!1).break()}).code((0,Do._)`${W}[${k}] = ${C}`)})}function b(C,T){let k=(0,jwe.useFunc)(t,Uwe.default),U=t.name("outer");t.label(U).for((0,Do._)`;${C}--;`,()=>t.for((0,Do._)`${T} = ${C}; ${T}--;`,()=>t.if((0,Do._)`${k}(${e}[${C}], ${e}[${T}])`,()=>{n.error(),t.assign(l,!1).break(U)})))}}};dB.default=qwe});var aX=ot(mB=>{"use strict";Object.defineProperty(mB,"__esModule",{value:!0});var hB=_n(),Kwe=qn(),Hwe=mD(),Wwe={message:"must be equal to constant",params:({schemaCode:n})=>(0,hB._)`{allowedValue: ${n}}`},Gwe={keyword:"const",$data:!0,error:Wwe,code(n){let{gen:t,data:e,$data:i,schemaCode:r,schema:o}=n;i||o&&typeof o=="object"?n.fail$data((0,hB._)`!${(0,Kwe.useFunc)(t,Hwe.default)}(${e}, ${r})`):n.fail((0,hB._)`${o} !== ${e}`)}};mB.default=Gwe});var cX=ot(fB=>{"use strict";Object.defineProperty(fB,"__esModule",{value:!0});var Zw=_n(),Qwe=qn(),Ywe=mD(),Xwe={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,Zw._)`{allowedValues: ${n}}`},Jwe={keyword:"enum",schemaType:"array",$data:!0,error:Xwe,code(n){let{gen:t,data:e,$data:i,schema:r,schemaCode:o,it:s}=n;if(!i&&r.length===0)throw new Error("enum must have non-empty array");let a=r.length>=s.opts.loopEnum,l,u=()=>l??(l=(0,Qwe.useFunc)(t,Ywe.default)),h;if(a||i)h=t.let("valid"),n.block$data(h,p);else{if(!Array.isArray(r))throw new Error("ajv implementation error");let b=t.const("vSchema",o);h=(0,Zw.or)(...r.map((C,T)=>_(b,T)))}n.pass(h);function p(){t.assign(h,!1),t.forOf("v",o,b=>t.if((0,Zw._)`${u()}(${e}, ${b})`,()=>t.assign(h,!0).break()))}function _(b,C){let T=r[C];return typeof T=="object"&&T!==null?(0,Zw._)`${u()}(${e}, ${b}[${C}])`:(0,Zw._)`${e} === ${T}`}}};fB.default=Jwe});var lX=ot(pB=>{"use strict";Object.defineProperty(pB,"__esModule",{value:!0});var Zwe=YY(),eCe=XY(),tCe=eX(),nCe=tX(),iCe=nX(),rCe=iX(),oCe=rX(),sCe=sX(),aCe=aX(),cCe=cX(),lCe=[Zwe.default,eCe.default,tCe.default,nCe.default,iCe.default,rCe.default,oCe.default,sCe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},aCe.default,cCe.default];pB.default=lCe});var _B=ot(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0});eC.validateAdditionalItems=void 0;var Fp=_n(),gB=qn(),uCe={message:({params:{len:n}})=>(0,Fp.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,Fp._)`{limit: ${n}}`},dCe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:uCe,code(n){let{parentSchema:t,it:e}=n,{items:i}=t;if(!Array.isArray(i)){(0,gB.checkStrictMode)(e,'"additionalItems" is ignored when "items" is not an array of schemas');return}uX(n,i)}};function uX(n,t){let{gen:e,schema:i,data:r,keyword:o,it:s}=n;s.items=!0;let a=e.const("len",(0,Fp._)`${r}.length`);if(i===!1)n.setParams({len:t.length}),n.pass((0,Fp._)`${a} <= ${t.length}`);else if(typeof i=="object"&&!(0,gB.alwaysValidSchema)(s,i)){let u=e.var("valid",(0,Fp._)`${a} <= ${t.length}`);e.if((0,Fp.not)(u),()=>l(u)),n.ok(u)}function l(u){e.forRange("i",t.length,a,h=>{n.subschema({keyword:o,dataProp:h,dataPropType:gB.Type.Num},u),s.allErrors||e.if((0,Fp.not)(u),()=>e.break())})}}eC.validateAdditionalItems=uX;eC.default=dCe});var yB=ot(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});tC.validateTuple=void 0;var dX=_n(),fD=qn(),hCe=Hc(),mCe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){let{schema:t,it:e}=n;if(Array.isArray(t))return hX(n,"additionalItems",t);e.items=!0,!(0,fD.alwaysValidSchema)(e,t)&&n.ok((0,hCe.validateArray)(n))}};function hX(n,t,e=n.schema){let{gen:i,parentSchema:r,data:o,keyword:s,it:a}=n;h(r),a.opts.unevaluated&&e.length&&a.items!==!0&&(a.items=fD.mergeEvaluated.items(i,e.length,a.items));let l=i.name("valid"),u=i.const("len",(0,dX._)`${o}.length`);e.forEach((p,_)=>{(0,fD.alwaysValidSchema)(a,p)||(i.if((0,dX._)`${u} > ${_}`,()=>n.subschema({keyword:s,schemaProp:_,dataProp:_},l)),n.ok(l))});function h(p){let{opts:_,errSchemaPath:b}=a,C=e.length,T=C===p.minItems&&(C===p.maxItems||p[t]===!1);if(_.strictTuples&&!T){let k=`"${s}" is ${C}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,fD.checkStrictMode)(a,k,_.strictTuples)}}}tC.validateTuple=hX;tC.default=mCe});var mX=ot(vB=>{"use strict";Object.defineProperty(vB,"__esModule",{value:!0});var fCe=yB(),pCe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,fCe.validateTuple)(n,"items")};vB.default=pCe});var pX=ot(bB=>{"use strict";Object.defineProperty(bB,"__esModule",{value:!0});var fX=_n(),gCe=qn(),_Ce=Hc(),yCe=_B(),vCe={message:({params:{len:n}})=>(0,fX.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,fX._)`{limit: ${n}}`},bCe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:vCe,code(n){let{schema:t,parentSchema:e,it:i}=n,{prefixItems:r}=e;i.items=!0,!(0,gCe.alwaysValidSchema)(i,t)&&(r?(0,yCe.validateAdditionalItems)(n,r):n.ok((0,_Ce.validateArray)(n)))}};bB.default=bCe});var gX=ot(wB=>{"use strict";Object.defineProperty(wB,"__esModule",{value:!0});var Gc=_n(),pD=qn(),wCe={message:({params:{min:n,max:t}})=>t===void 0?(0,Gc.str)`must contain at least ${n} valid item(s)`:(0,Gc.str)`must contain at least ${n} and no more than ${t} valid item(s)`,params:({params:{min:n,max:t}})=>t===void 0?(0,Gc._)`{minContains: ${n}}`:(0,Gc._)`{minContains: ${n}, maxContains: ${t}}`},CCe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:wCe,code(n){let{gen:t,schema:e,parentSchema:i,data:r,it:o}=n,s,a,{minContains:l,maxContains:u}=i;o.opts.next?(s=l===void 0?1:l,a=u):s=1;let h=t.const("len",(0,Gc._)`${r}.length`);if(n.setParams({min:s,max:a}),a===void 0&&s===0){(0,pD.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,pD.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,pD.alwaysValidSchema)(o,e)){let T=(0,Gc._)`${h} >= ${s}`;a!==void 0&&(T=(0,Gc._)`${T} && ${h} <= ${a}`),n.pass(T);return}o.items=!0;let p=t.name("valid");a===void 0&&s===1?b(p,()=>t.if(p,()=>t.break())):s===0?(t.let(p,!0),a!==void 0&&t.if((0,Gc._)`${r}.length > 0`,_)):(t.let(p,!1),_()),n.result(p,()=>n.reset());function _(){let T=t.name("_valid"),k=t.let("count",0);b(T,()=>t.if(T,()=>C(k)))}function b(T,k){t.forRange("i",0,h,U=>{n.subschema({keyword:"contains",dataProp:U,dataPropType:pD.Type.Num,compositeRule:!0},T),k()})}function C(T){t.code((0,Gc._)`${T}++`),a===void 0?t.if((0,Gc._)`${T} >= ${s}`,()=>t.assign(p,!0).break()):(t.if((0,Gc._)`${T} > ${a}`,()=>t.assign(p,!1).break()),s===1?t.assign(p,!0):t.if((0,Gc._)`${T} >= ${s}`,()=>t.assign(p,!0)))}}};wB.default=CCe});var vX=ot(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.validateSchemaDeps=qu.validatePropertyDeps=qu.error=void 0;var CB=_n(),ECe=qn(),nC=Hc();qu.error={message:({params:{property:n,depsCount:t,deps:e}})=>{let i=t===1?"property":"properties";return(0,CB.str)`must have ${i} ${e} when property ${n} is present`},params:({params:{property:n,depsCount:t,deps:e,missingProperty:i}})=>(0,CB._)`{property: ${n},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${e}}`};var xCe={keyword:"dependencies",type:"object",schemaType:"object",error:qu.error,code(n){let[t,e]=ICe(n);_X(n,t),yX(n,e)}};function ICe({schema:n}){let t={},e={};for(let i in n){if(i==="__proto__")continue;let r=Array.isArray(n[i])?t:e;r[i]=n[i]}return[t,e]}function _X(n,t=n.schema){let{gen:e,data:i,it:r}=n;if(Object.keys(t).length===0)return;let o=e.let("missing");for(let s in t){let a=t[s];if(a.length===0)continue;let l=(0,nC.propertyInData)(e,i,s,r.opts.ownProperties);n.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),r.allErrors?e.if(l,()=>{for(let u of a)(0,nC.checkReportMissingProp)(n,u)}):(e.if((0,CB._)`${l} && (${(0,nC.checkMissingProp)(n,a,o)})`),(0,nC.reportMissingProp)(n,o),e.else())}}qu.validatePropertyDeps=_X;function yX(n,t=n.schema){let{gen:e,data:i,keyword:r,it:o}=n,s=e.name("valid");for(let a in t)(0,ECe.alwaysValidSchema)(o,t[a])||(e.if((0,nC.propertyInData)(e,i,a,o.opts.ownProperties),()=>{let l=n.subschema({keyword:r,schemaProp:a},s);n.mergeValidEvaluated(l,s)},()=>e.var(s,!0)),n.ok(s))}qu.validateSchemaDeps=yX;qu.default=xCe});var wX=ot(EB=>{"use strict";Object.defineProperty(EB,"__esModule",{value:!0});var bX=_n(),SCe=qn(),TCe={message:"property name must be valid",params:({params:n})=>(0,bX._)`{propertyName: ${n.propertyName}}`},DCe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:TCe,code(n){let{gen:t,schema:e,data:i,it:r}=n;if((0,SCe.alwaysValidSchema)(r,e))return;let o=t.name("valid");t.forIn("key",i,s=>{n.setParams({propertyName:s}),n.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,bX.not)(o),()=>{n.error(!0),r.allErrors||t.break()})}),n.ok(o)}};EB.default=DCe});var IB=ot(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});var gD=Hc(),Ul=_n(),kCe=nh(),_D=qn(),ACe={message:"must NOT have additional properties",params:({params:n})=>(0,Ul._)`{additionalProperty: ${n.additionalProperty}}`},RCe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ACe,code(n){let{gen:t,schema:e,parentSchema:i,data:r,errsCount:o,it:s}=n;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=s;if(s.props=!0,l.removeAdditional!=="all"&&(0,_D.alwaysValidSchema)(s,e))return;let u=(0,gD.allSchemaProperties)(i.properties),h=(0,gD.allSchemaProperties)(i.patternProperties);p(),n.ok((0,Ul._)`${o} === ${kCe.default.errors}`);function p(){t.forIn("key",r,k=>{!u.length&&!h.length?C(k):t.if(_(k),()=>C(k))})}function _(k){let U;if(u.length>8){let W=(0,_D.schemaRefOrVal)(s,i.properties,"properties");U=(0,gD.isOwnProperty)(t,W,k)}else u.length?U=(0,Ul.or)(...u.map(W=>(0,Ul._)`${k} === ${W}`)):U=Ul.nil;return h.length&&(U=(0,Ul.or)(U,...h.map(W=>(0,Ul._)`${(0,gD.usePattern)(n,W)}.test(${k})`))),(0,Ul.not)(U)}function b(k){t.code((0,Ul._)`delete ${r}[${k}]`)}function C(k){if(l.removeAdditional==="all"||l.removeAdditional&&e===!1){b(k);return}if(e===!1){n.setParams({additionalProperty:k}),n.error(),a||t.break();return}if(typeof e=="object"&&!(0,_D.alwaysValidSchema)(s,e)){let U=t.name("valid");l.removeAdditional==="failing"?(T(k,U,!1),t.if((0,Ul.not)(U),()=>{n.reset(),b(k)})):(T(k,U),a||t.if((0,Ul.not)(U),()=>t.break()))}}function T(k,U,W){let K={keyword:"additionalProperties",dataProp:k,dataPropType:_D.Type.Str};W===!1&&Object.assign(K,{compositeRule:!0,createErrors:!1,allErrors:!1}),n.subschema(K,U)}}};xB.default=RCe});var xX=ot(TB=>{"use strict";Object.defineProperty(TB,"__esModule",{value:!0});var MCe=Uw(),CX=Hc(),SB=qn(),EX=IB(),PCe={keyword:"properties",type:"object",schemaType:"object",code(n){let{gen:t,schema:e,parentSchema:i,data:r,it:o}=n;o.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&EX.default.code(new MCe.KeywordCxt(o,EX.default,"additionalProperties"));let s=(0,CX.allSchemaProperties)(e);for(let p of s)o.definedProperties.add(p);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=SB.mergeEvaluated.props(t,(0,SB.toHash)(s),o.props));let a=s.filter(p=>!(0,SB.alwaysValidSchema)(o,e[p]));if(a.length===0)return;let l=t.name("valid");for(let p of a)u(p)?h(p):(t.if((0,CX.propertyInData)(t,r,p,o.opts.ownProperties)),h(p),o.allErrors||t.else().var(l,!0),t.endIf()),n.it.definedProperties.add(p),n.ok(l);function u(p){return o.opts.useDefaults&&!o.compositeRule&&e[p].default!==void 0}function h(p){n.subschema({keyword:"properties",schemaProp:p,dataProp:p},l)}}};TB.default=PCe});var DX=ot(DB=>{"use strict";Object.defineProperty(DB,"__esModule",{value:!0});var IX=Hc(),yD=_n(),SX=qn(),TX=qn(),OCe={keyword:"patternProperties",type:"object",schemaType:"object",code(n){let{gen:t,schema:e,data:i,parentSchema:r,it:o}=n,{opts:s}=o,a=(0,IX.allSchemaProperties)(e),l=a.filter(T=>(0,SX.alwaysValidSchema)(o,e[T]));if(a.length===0||l.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let u=s.strictSchema&&!s.allowMatchingProperties&&r.properties,h=t.name("valid");o.props!==!0&&!(o.props instanceof yD.Name)&&(o.props=(0,TX.evaluatedPropsToName)(t,o.props));let{props:p}=o;_();function _(){for(let T of a)u&&b(T),o.allErrors?C(T):(t.var(h,!0),C(T),t.if(h))}function b(T){for(let k in u)new RegExp(T).test(k)&&(0,SX.checkStrictMode)(o,`property ${k} matches pattern ${T} (use allowMatchingProperties)`)}function C(T){t.forIn("key",i,k=>{t.if((0,yD._)`${(0,IX.usePattern)(n,T)}.test(${k})`,()=>{let U=l.includes(T);U||n.subschema({keyword:"patternProperties",schemaProp:T,dataProp:k,dataPropType:TX.Type.Str},h),o.opts.unevaluated&&p!==!0?t.assign((0,yD._)`${p}[${k}]`,!0):!U&&!o.allErrors&&t.if((0,yD.not)(h),()=>t.break())})})}}};DB.default=OCe});var kX=ot(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});var NCe=qn(),FCe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){let{gen:t,schema:e,it:i}=n;if((0,NCe.alwaysValidSchema)(i,e)){n.fail();return}let r=t.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},r),n.failResult(r,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};kB.default=FCe});var AX=ot(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0});var VCe=Hc(),LCe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:VCe.validateUnion,error:{message:"must match a schema in anyOf"}};AB.default=LCe});var RX=ot(RB=>{"use strict";Object.defineProperty(RB,"__esModule",{value:!0});var vD=_n(),BCe=qn(),$Ce={message:"must match exactly one schema in oneOf",params:({params:n})=>(0,vD._)`{passingSchemas: ${n.passing}}`},jCe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:$Ce,code(n){let{gen:t,schema:e,parentSchema:i,it:r}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");if(r.opts.discriminator&&i.discriminator)return;let o=e,s=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");n.setParams({passing:a}),t.block(u),n.result(s,()=>n.reset(),()=>n.error(!0));function u(){o.forEach((h,p)=>{let _;(0,BCe.alwaysValidSchema)(r,h)?t.var(l,!0):_=n.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},l),p>0&&t.if((0,vD._)`${l} && ${s}`).assign(s,!1).assign(a,(0,vD._)`[${a}, ${p}]`).else(),t.if(l,()=>{t.assign(s,!0),t.assign(a,p),_&&n.mergeEvaluated(_,vD.Name)})})}}};RB.default=jCe});var MX=ot(MB=>{"use strict";Object.defineProperty(MB,"__esModule",{value:!0});var UCe=qn(),zCe={keyword:"allOf",schemaType:"array",code(n){let{gen:t,schema:e,it:i}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");let r=t.name("valid");e.forEach((o,s)=>{if((0,UCe.alwaysValidSchema)(i,o))return;let a=n.subschema({keyword:"allOf",schemaProp:s},r);n.ok(r),n.mergeEvaluated(a)})}};MB.default=zCe});var NX=ot(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0});var bD=_n(),OX=qn(),qCe={message:({params:n})=>(0,bD.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,bD._)`{failingKeyword: ${n.ifClause}}`},KCe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:qCe,code(n){let{gen:t,parentSchema:e,it:i}=n;e.then===void 0&&e.else===void 0&&(0,OX.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let r=PX(i,"then"),o=PX(i,"else");if(!r&&!o)return;let s=t.let("valid",!0),a=t.name("_valid");if(l(),n.reset(),r&&o){let h=t.let("ifClause");n.setParams({ifClause:h}),t.if(a,u("then",h),u("else",h))}else r?t.if(a,u("then")):t.if((0,bD.not)(a),u("else"));n.pass(s,()=>n.error(!0));function l(){let h=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);n.mergeEvaluated(h)}function u(h,p){return()=>{let _=n.subschema({keyword:h},a);t.assign(s,a),n.mergeValidEvaluated(_,s),p?t.assign(p,(0,bD._)`${h}`):n.setParams({ifClause:h})}}}};function PX(n,t){let e=n.schema[t];return e!==void 0&&!(0,OX.alwaysValidSchema)(n,e)}PB.default=KCe});var FX=ot(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});var HCe=qn(),WCe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:t,it:e}){t.if===void 0&&(0,HCe.checkStrictMode)(e,`"${n}" without "if" is ignored`)}};OB.default=WCe});var VX=ot(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});var GCe=_B(),QCe=mX(),YCe=yB(),XCe=pX(),JCe=gX(),ZCe=vX(),eEe=wX(),tEe=IB(),nEe=xX(),iEe=DX(),rEe=kX(),oEe=AX(),sEe=RX(),aEe=MX(),cEe=NX(),lEe=FX();function uEe(n=!1){let t=[rEe.default,oEe.default,sEe.default,aEe.default,cEe.default,lEe.default,eEe.default,tEe.default,ZCe.default,nEe.default,iEe.default];return n?t.push(QCe.default,XCe.default):t.push(GCe.default,YCe.default),t.push(JCe.default),t}NB.default=uEe});var LX=ot(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0});var Cr=_n(),dEe={message:({schemaCode:n})=>(0,Cr.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,Cr._)`{format: ${n}}`},hEe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:dEe,code(n,t){let{gen:e,data:i,$data:r,schema:o,schemaCode:s,it:a}=n,{opts:l,errSchemaPath:u,schemaEnv:h,self:p}=a;if(!l.validateFormats)return;r?_():b();function _(){let C=e.scopeValue("formats",{ref:p.formats,code:l.code.formats}),T=e.const("fDef",(0,Cr._)`${C}[${s}]`),k=e.let("fType"),U=e.let("format");e.if((0,Cr._)`typeof ${T} == "object" && !(${T} instanceof RegExp)`,()=>e.assign(k,(0,Cr._)`${T}.type || "string"`).assign(U,(0,Cr._)`${T}.validate`),()=>e.assign(k,(0,Cr._)`"string"`).assign(U,T)),n.fail$data((0,Cr.or)(W(),K()));function W(){return l.strictSchema===!1?Cr.nil:(0,Cr._)`${s} && !${U}`}function K(){let oe=h.$async?(0,Cr._)`(${T}.async ? await ${U}(${i}) : ${U}(${i}))`:(0,Cr._)`${U}(${i})`,ae=(0,Cr._)`(typeof ${U} == "function" ? ${oe} : ${U}.test(${i}))`;return(0,Cr._)`${U} && ${U} !== true && ${k} === ${t} && !${ae}`}}function b(){let C=p.formats[o];if(!C){W();return}if(C===!0)return;let[T,k,U]=K(C);T===t&&n.pass(oe());function W(){if(l.strictSchema===!1){p.logger.warn(ae());return}throw new Error(ae());function ae(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function K(ae){let we=ae instanceof RegExp?(0,Cr.regexpCode)(ae):l.code.formats?(0,Cr._)`${l.code.formats}${(0,Cr.getProperty)(o)}`:void 0,M=e.scopeValue("formats",{key:o,ref:ae,code:we});return typeof ae=="object"&&!(ae instanceof RegExp)?[ae.type||"string",ae.validate,(0,Cr._)`${M}.validate`]:["string",ae,M]}function oe(){if(typeof C=="object"&&!(C instanceof RegExp)&&C.async){if(!h.$async)throw new Error("async format in sync schema");return(0,Cr._)`await ${U}(${i})`}return typeof k=="function"?(0,Cr._)`${U}(${i})`:(0,Cr._)`${U}.test(${i})`}}}};FB.default=hEe});var BX=ot(VB=>{"use strict";Object.defineProperty(VB,"__esModule",{value:!0});var mEe=LX(),fEe=[mEe.default];VB.default=fEe});var $X=ot(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.contentVocabulary=Uy.metadataVocabulary=void 0;Uy.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Uy.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var UX=ot(LB=>{"use strict";Object.defineProperty(LB,"__esModule",{value:!0});var pEe=QY(),gEe=lX(),_Ee=VX(),yEe=BX(),jX=$X(),vEe=[pEe.default,gEe.default,(0,_Ee.default)(),yEe.default,jX.metadataVocabulary,jX.contentVocabulary];LB.default=vEe});var qX=ot(wD=>{"use strict";Object.defineProperty(wD,"__esModule",{value:!0});wD.DiscrError=void 0;var zX=function(n){return n.Tag="tag",n.Mapping="mapping",n}(zX||(wD.DiscrError=zX={}))});var HX=ot($B=>{"use strict";Object.defineProperty($B,"__esModule",{value:!0});var zy=_n(),BB=qX(),KX=iD(),bEe=zw(),wEe=qn(),CEe={message:({params:{discrError:n,tagName:t}})=>n===BB.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:n,tag:t,tagName:e}})=>(0,zy._)`{error: ${n}, tag: ${e}, tagValue: ${t}}`},EEe={keyword:"discriminator",type:"object",schemaType:"object",error:CEe,code(n){let{gen:t,data:e,schema:i,parentSchema:r,it:o}=n,{oneOf:s}=r;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=i.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),u=t.const("tag",(0,zy._)`${e}${(0,zy.getProperty)(a)}`);t.if((0,zy._)`typeof ${u} == "string"`,()=>h(),()=>n.error(!1,{discrError:BB.DiscrError.Tag,tag:u,tagName:a})),n.ok(l);function h(){let b=_();t.if(!1);for(let C in b)t.elseIf((0,zy._)`${u} === ${C}`),t.assign(l,p(b[C]));t.else(),n.error(!1,{discrError:BB.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function p(b){let C=t.name("valid"),T=n.subschema({keyword:"oneOf",schemaProp:b},C);return n.mergeEvaluated(T,zy.Name),C}function _(){var b;let C={},T=U(r),k=!0;for(let oe=0;oe<s.length;oe++){let ae=s[oe];if(ae?.$ref&&!(0,wEe.schemaHasRulesButRef)(ae,o.self.RULES)){let M=ae.$ref;if(ae=KX.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,M),ae instanceof KX.SchemaEnv&&(ae=ae.schema),ae===void 0)throw new bEe.default(o.opts.uriResolver,o.baseId,M)}let we=(b=ae?.properties)===null||b===void 0?void 0:b[a];if(typeof we!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(T||U(ae)),W(we,oe)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return C;function U({required:oe}){return Array.isArray(oe)&&oe.includes(a)}function W(oe,ae){if(oe.const)K(oe.const,ae);else if(oe.enum)for(let we of oe.enum)K(we,ae);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function K(oe,ae){if(typeof oe!="string"||oe in C)throw new Error(`discriminator: "${a}" values must be unique strings`);C[oe]=ae}}}};$B.default=EEe});var WX=ot((Hot,xEe)=>{xEe.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var QX=ot((Li,jB)=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.MissingRefError=Li.ValidationError=Li.CodeGen=Li.Name=Li.nil=Li.stringify=Li.str=Li._=Li.KeywordCxt=Li.Ajv=void 0;var IEe=zY(),SEe=UX(),TEe=HX(),GX=WX(),DEe=["/properties"],CD="http://json-schema.org/draft-07/schema",qy=class extends IEe.default{_addVocabularies(){super._addVocabularies(),SEe.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(TEe.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(GX,DEe):GX;this.addMetaSchema(t,CD,!1),this.refs["http://json-schema.org/schema"]=CD}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(CD)?CD:void 0)}};Li.Ajv=qy;jB.exports=Li=qy;jB.exports.Ajv=qy;Object.defineProperty(Li,"__esModule",{value:!0});Li.default=qy;var kEe=Uw();Object.defineProperty(Li,"KeywordCxt",{enumerable:!0,get:function(){return kEe.KeywordCxt}});var Ky=_n();Object.defineProperty(Li,"_",{enumerable:!0,get:function(){return Ky._}});Object.defineProperty(Li,"str",{enumerable:!0,get:function(){return Ky.str}});Object.defineProperty(Li,"stringify",{enumerable:!0,get:function(){return Ky.stringify}});Object.defineProperty(Li,"nil",{enumerable:!0,get:function(){return Ky.nil}});Object.defineProperty(Li,"Name",{enumerable:!0,get:function(){return Ky.Name}});Object.defineProperty(Li,"CodeGen",{enumerable:!0,get:function(){return Ky.CodeGen}});var AEe=tD();Object.defineProperty(Li,"ValidationError",{enumerable:!0,get:function(){return AEe.default}});var REe=zw();Object.defineProperty(Li,"MissingRefError",{enumerable:!0,get:function(){return REe.default}})});var bv=class{},wv=class{},uu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Ok=class{encodeKey(t){return wj(t)}encodeValue(t){return wj(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function nZ(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var iZ=/%(\d[a-f0-9])/gi,rZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wj(n){return encodeURIComponent(n).replace(iZ,(t,e)=>rZ[e]??t)}function FC(n){return`${n}`}var Oh=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Ok,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(FC):[FC(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(FC(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(FC(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Nk=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function oZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Cj(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ej(n){return typeof Blob<"u"&&n instanceof Blob}function xj(n){return typeof FormData<"u"&&n instanceof FormData}function sZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vv=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let o;if(oZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new uu,this.context??=new Nk,!this.params)this.params=new Oh,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Cj(this.body)||Ej(this.body)||xj(this.body)||sZ(this.body)?this.body:this.body instanceof Oh?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xj(this.body)?null:Ej(this.body)?this.body.type||null:Cj(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Oh?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,h=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((_,b)=>_.set(b,t.setHeaders[b]),u)),t.setParams&&(h=Object.keys(t.setParams).reduce((_,b)=>_.set(b,t.setParams[b]),h)),new n(e,i,s,{params:h,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Nh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Nh||{}),Cv=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new uu,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},LC=class n extends Cv{constructor(t={}){super(t)}type=Nh.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Cf=class n extends Cv{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Nh.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Ph=class extends Cv{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Nj=200,aZ=204;function Pk(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ef=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof vv)o=e;else{let l;r.headers instanceof uu?l=r.headers:l=new uu(r.headers);let u;r.params&&(r.params instanceof Oh?u=r.params:u=new Oh({fromObject:r.params})),o=new vv(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Ye(o).pipe(Dh(l=>this.handler.handle(l)));if(e instanceof vv||r.observe==="events")return s;let a=s.pipe(st(l=>l instanceof Cf));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ht(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ht(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ht(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ht(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Oh().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Pk(r,i))}post(e,i,r={}){return this.request("POST",e,Pk(r,i))}put(e,i,r={}){return this.request("PUT",e,Pk(r,i))}static \u0275fac=function(i){return new(i||n)(Ve(bv))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),cZ=/^\)\]\}',?\n/,lZ="X-Request-URL";function Ij(n){if(n.url)return n.url;let t=lZ.toLocaleLowerCase();return n.headers.get(t)}var Fk=(()=>{class n{fetchImpl=w(Vk,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=w(Ke);handle(e){return new kr(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(Lk,o=>i.error(new Ph({error:o}))),()=>r.abort()})}doRequest(e,i,r){return O(this,null,function*(){let o=this.createRequestInit(e),s;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,ee({signal:i},o)));uZ(b),r.next({type:Nh.Sent}),s=yield b}catch(b){r.error(new Ph({error:b,status:b.status??0,statusText:b.statusText,url:e.urlWithParams,headers:b.headers}));return}let a=new uu(s.headers),l=s.statusText,u=Ij(s)??e.urlWithParams,h=s.status,p=null;if(e.reportProgress&&r.next(new LC({headers:a,status:h,statusText:l,url:u})),s.body){let b=s.headers.get("content-length"),C=[],T=s.body.getReader(),k=0,U,W,K=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>O(this,null,function*(){for(;;){let{done:ae,value:we}=yield T.read();if(ae)break;if(C.push(we),k+=we.length,e.reportProgress){W=e.responseType==="text"?(W??"")+(U??=new TextDecoder).decode(we,{stream:!0}):void 0;let M=()=>r.next({type:Nh.DownloadProgress,total:b?+b:void 0,loaded:k,partialText:W});K?K.run(M):M()}}}));let oe=this.concatChunks(C,k);try{let ae=s.headers.get("Content-Type")??"";p=this.parseBody(e,oe,ae)}catch(ae){r.error(new Ph({error:ae,headers:new uu(s.headers),status:s.status,statusText:s.statusText,url:Ij(s)??e.urlWithParams}));return}}h===0&&(h=p?Nj:0),h>=200&&h<300?(r.next(new Cf({body:p,headers:a,status:h,statusText:l,url:u})),r.complete()):r.error(new Ph({error:p,headers:a,status:h,statusText:l,url:u}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(cZ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Vk=class{};function Lk(){}function uZ(n){n.then(Lk,Lk)}function dZ(n,t){return t(n)}function hZ(n,t,e){return(i,r)=>wc(e,()=>t(i,o=>n(o,r)))}var Fj=new ce(""),Vj=new ce(""),mZ=new ce("",{providedIn:"root",factory:()=>!0});var Sj=(()=>{class n extends bv{backend;injector;chain=null;pendingTasks=w(yC);contributeToStability=w(mZ);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Fj),...this.injector.get(Vj,[])]));this.chain=i.reduceRight((r,o)=>hZ(r,o,this.injector),dZ)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(kh(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Ve(wv),Ve(cl))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();var fZ=/^\)\]\}',?\n/;function pZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Tj=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new oi(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ar(i.\u0275loadImpl()):Ye(null)).pipe(di(()=>new kr(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((T,k)=>s.setRequestHeader(T,k.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let T=e.detectContentTypeHeader();T!==null&&s.setRequestHeader("Content-Type",T)}if(e.responseType){let T=e.responseType.toLowerCase();s.responseType=T!=="json"?T:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let T=s.statusText||"OK",k=new uu(s.getAllResponseHeaders()),U=pZ(s)||e.url;return l=new LC({headers:k,status:s.status,statusText:T,url:U}),l},h=()=>{let{headers:T,status:k,statusText:U,url:W}=u(),K=null;k!==aZ&&(K=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=K?Nj:0);let oe=k>=200&&k<300;if(e.responseType==="json"&&typeof K=="string"){let ae=K;K=K.replace(fZ,"");try{K=K!==""?JSON.parse(K):null}catch(we){K=ae,oe&&(oe=!1,K={error:we,text:K})}}oe?(o.next(new Cf({body:K,headers:T,status:k,statusText:U,url:W||void 0})),o.complete()):o.error(new Ph({error:K,headers:T,status:k,statusText:U,url:W||void 0}))},p=T=>{let{url:k}=u(),U=new Ph({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(U)},_=!1,b=T=>{_||(o.next(u()),_=!0);let k={type:Nh.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),e.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)},C=T=>{let k={type:Nh.UploadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),o.next(k)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),e.reportProgress&&(s.addEventListener("progress",b),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:Nh.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),e.reportProgress&&(s.removeEventListener("progress",b),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Ve(RC))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Lj=new ce(""),gZ="XSRF-TOKEN",_Z=new ce("",{providedIn:"root",factory:()=>gZ}),yZ="X-XSRF-TOKEN",vZ=new ce("",{providedIn:"root",factory:()=>yZ}),BC=class{},bZ=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=TC(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(Ve(xt),Ve(hs),Ve(_Z))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function wZ(n,t){let e=n.url.toLowerCase();if(!w(Lj)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=w(BC).getToken(),r=w(vZ);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Bj=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Bj||{});function CZ(n,t){return{\u0275kind:n,\u0275providers:t}}function $j(...n){let t=[Ef,Tj,Sj,{provide:bv,useExisting:Sj},{provide:wv,useFactory:()=>w(Fk,{optional:!0})??w(Tj)},{provide:Fj,useValue:wZ,multi:!0},{provide:Lj,useValue:!0},{provide:BC,useClass:bZ}];for(let e of n)t.push(...e.\u0275providers);return Rr(t)}function jj(){return CZ(Bj.Fetch,[Fk,{provide:wv,useExisting:Fk}])}var EZ=new ce(""),Dj="b",kj="h",Aj="s",Rj="st",Mj="u",Pj="rt",VC=new ce(""),xZ=["GET","HEAD"];function IZ(n,t){let b=w(VC),{isCacheActive:e}=b,i=p$(b,["isCacheActive"]),{transferCache:r,method:o}=n;if(!e||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!xZ.includes(o)||!i.includeRequestsWithAuthHeaders&&SZ(n)||i.filter?.(n)===!1)return t(n);let s=w(vk),a=w(EZ,{optional:!0}),l=yf(w(hs));if(a&&!l)throw new oi(2803,!1);let u=l&&a?AZ(n.url,a):n.url,h=DZ(n,u),p=s.get(h,null),_=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(_=r.includeHeaders),p){let{[Dj]:C,[Pj]:T,[kj]:k,[Aj]:U,[Rj]:W,[Mj]:K}=p,oe=C;switch(T){case"arraybuffer":oe=new TextEncoder().encode(C).buffer;break;case"blob":oe=new Blob([C]);break}let ae=new uu(k);return Ye(new Cf({body:oe,headers:ae,status:U,statusText:W,url:K}))}return t(n).pipe(Di(C=>{C instanceof Cf&&l&&s.set(h,{[Dj]:C.body,[kj]:TZ(C.headers,_),[Aj]:C.status,[Rj]:C.statusText,[Mj]:u,[Pj]:n.responseType})}))}function SZ(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function TZ(n,t){if(!t)return{};let e={};for(let i of t){let r=n.getAll(i);r!==null&&(e[i]=r)}return e}function Oj(n){return[...n.keys()].sort().map(t=>`${t}=${n.getAll(t)}`).join("&")}function DZ(n,t){let{params:e,method:i,responseType:r}=n,o=Oj(e),s=n.serializeBody();s instanceof URLSearchParams?s=Oj(s):typeof s!="string"&&(s="");let a=[i,r,t,s,o].join("|"),l=kZ(a);return l}function kZ(n){let t=0;for(let e of n)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Uj(n){return[{provide:VC,useFactory:()=>(vC("NgHttpTransferCache"),ee({isCacheActive:!0},n))},{provide:Vj,useValue:IZ,multi:!0,deps:[vk,VC]},{provide:uv,multi:!0,useFactory:()=>{let t=w(ll),e=w(VC);return()=>{t.whenStable().then(()=>{e.isCacheActive=!1})}}}]}function AZ(n,t){let e=new URL(n,"resolve://").origin,i=t[e];return i?n.replace(e,i):n}var Uk=class extends tj{supportsDOMEvents=!0},zk=class n extends Uk{static makeCurrent(){ej(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=MZ();return e==null?null:PZ(e)}resetBaseElement(){Ev=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return TC(document.cookie,t)}},Ev=null;function MZ(){return Ev=Ev||document.querySelector("base"),Ev?Ev.getAttribute("href"):null}function PZ(n){return new URL(n,document.baseURI).pathname}var OZ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),qk=new ce(""),Wj=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new oi(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(Ve(qk),Ve(Ke))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),jC=class{_doc;constructor(t){this._doc=t}manager},$C="ng-app-id";function zj(n){for(let t of n)t.remove()}function qj(n,t){let e=t.createElement("style");return e.textContent=n,e}function NZ(n,t,e,i){let r=n.head?.querySelectorAll(`style[${$C}="${t}"],link[${$C}="${t}"]`);if(r)for(let o of r)o.removeAttribute($C),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Kk(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Gj=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=yf(o),NZ(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,qj);i?.forEach(r=>this.addUsage(r,this.external,Kk))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(zj(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])zj(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,qj(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Kk(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute($C,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ve(xt),Ve(sv),Ve(av,8),Ve(hs))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),jk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gk=/%COMP%/g,Qj="%COMP%",FZ=`_nghost-${Qj}`,VZ=`_ngcontent-${Qj}`,LZ=!0,BZ=new ce("",{providedIn:"root",factory:()=>LZ});function $Z(n){return VZ.replace(Gk,n)}function jZ(n){return FZ.replace(Gk,n)}function Yj(n,t){return t.map(e=>e.replace(Gk,n))}var UC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.platformIsServer=yf(a),this.defaultRenderer=new xv(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===cv.ShadowDom&&(i=Qe(ee({},i),{encapsulation:cv.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof zC?r.applyToHost(e):r instanceof Iv&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case cv.Emulated:o=new zC(l,u,i,this.appId,h,s,a,p);break;case cv.ShadowDom:return new Hk(l,u,e,i,s,a,this.nonce,p);default:o=new Iv(l,u,i,h,s,a,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(i){return new(i||n)(Ve(Wj),Ve(Gj),Ve(sv),Ve(BZ),Ve(xt),Ve(hs),Ve(Ke),Ve(av))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),xv=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(jk[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Kj(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Kj(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new oi(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=jk[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=jk[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(lv.DashCase|lv.Important)?t.style.setProperty(e,i,r&lv.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&lv.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=ig().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Kj(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Hk=class extends xv{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Yj(r.id,r.styles);for(let p of u){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=p,this.shadowRoot.appendChild(_)}let h=r.getExternalStyles?.();if(h)for(let p of h){let _=Kk(p,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Iv=class extends xv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?Yj(l,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zC=class extends Iv{contentAttr;hostAttr;constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=$Z(u),this.hostAttr=jZ(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},UZ=(()=>{class n extends jC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static \u0275fac=function(i){return new(i||n)(Ve(xt))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Hj=["alt","control","meta","shift"],zZ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KZ=(()=>{class n extends jC{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ig().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),Hj.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=zZ[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Hj.forEach(s=>{if(s!==r){let a=qZ[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(Ve(xt))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function Xj(n,t){return X$(ee({rootComponent:n},HZ(t)))}function HZ(n){return{appProviders:[...XZ,...n?.providers??[]],platformProviders:YZ}}function WZ(){zk.makeCurrent()}function GZ(){return new ff}function QZ(){return R$(document),document}var YZ=[{provide:hs,useValue:oj},{provide:M$,useValue:WZ,multi:!0},{provide:xt,useFactory:QZ,deps:[]}];var XZ=[{provide:D$,useValue:"root"},{provide:ff,useFactory:GZ,deps:[]},{provide:qk,useClass:UZ,multi:!0,deps:[xt,Ke,hs]},{provide:qk,useClass:KZ,multi:!0,deps:[xt]},UC,Gj,Wj,{provide:pd,useExisting:UC},{provide:RC,useClass:OZ,deps:[]},[]];var Jj=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(Ve(xt))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Ve(JZ),r},providedIn:"root"})}return n})(),JZ=(()=>{class n extends Qk{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case Pa.NONE:return i;case Pa.HTML:return Qp(i,"HTML")?Gp(i):B$(this._doc,String(i)).toString();case Pa.STYLE:return Qp(i,"Style")?Gp(i):i;case Pa.SCRIPT:if(Qp(i,"Script"))return Gp(i);throw new oi(5200,!1);case Pa.URL:return Qp(i,"URL")?Gp(i):L$(String(i));case Pa.RESOURCE_URL:if(Qp(i,"ResourceURL"))return Gp(i);throw new oi(5201,!1);default:throw new oi(5202,!1)}}bypassSecurityTrustHtml(e){return P$(e)}bypassSecurityTrustStyle(e){return O$(e)}bypassSecurityTrustScript(e){return N$(e)}bypassSecurityTrustUrl(e){return F$(e)}bypassSecurityTrustResourceUrl(e){return V$(e)}static \u0275fac=function(i){return new(i||n)(Ve(xt))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wk=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(Wk||{});function Zj(...n){let t=[],e=new Set,i=e.has(Wk.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)e.add(o),r.length&&t.push(r);return Rr([[],J$(),e.has(Wk.NoHttpTransferCache)||i?[]:Uj({}),t])}var du={production:!1,GOOGLEapikEY:"AIzaSyATOf9HX67HaKlMQU0V7qUvrCe0McNSo40",firebaseConfig:{apiKey:"AIzaSyATOf9HX67HaKlMQU0V7qUvrCe0McNSo40",authDomain:"fir-6062c.firebaseapp.com",databaseURL:"https://fir-6062c.firebaseio.com",projectId:"fir-6062c",storageBucket:"fir-6062c.appspot.com",messagingSenderId:"84418489236",appId:"1:84418489236:web:7842bdbbd3fbac26"},backendUrl:"http://localhost:4200"};var nn="primary",$v=Symbol("RouteTitle"),eA=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function mg(n){return new eA(n)}function ZZ(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function eee(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!hu(n[e],t[e]))return!1;return!0}function hu(n,t){let e=n?tA(n):void 0,i=t?tA(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!dU(n[r],t[r]))return!1;return!0}function tA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dU(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function hU(n){return n.length>0?n[n.length-1]:null}function Lh(n){return hf(n)?n:CC(n)?Ar(Promise.resolve(n)):Ye(n)}var tee={exact:fU,subset:pU},mU={exact:nee,subset:iee,ignored:()=>!0};function tU(n,t,e){return tee[e.paths](n.root,t.root,e.matrixParams)&&mU[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function nee(n,t){return hu(n,t)}function fU(n,t,e){if(!If(n.segments,t.segments)||!HC(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!fU(n.children[i],t.children[i],e))return!1;return!0}function iee(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>dU(n[e],t[e]))}function pU(n,t,e){return gU(n,t,t.segments,e)}function gU(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!If(r,e)||t.hasChildren()||!HC(r,e,i))}else if(n.segments.length===e.length){if(!If(n.segments,e)||!HC(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!pU(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!If(n.segments,r)||!HC(n.segments,r,i)||!n.children[nn]?!1:gU(n.children[nn],t,o,i)}}function HC(n,t,e){return t.every((i,r)=>mU[e](n[r].parameters,i.parameters))}var yd=class{root;queryParams;fragment;_queryParamMap;constructor(t=new si([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=mg(this.queryParams),this._queryParamMap}toString(){return see.serialize(this)}},si=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WC(this)}},xf=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=mg(this.parameters),this._parameterMap}toString(){return yU(this)}};function ree(n,t){return If(n,t)&&n.every((e,i)=>hu(e.parameters,t[i].parameters))}function If(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function oee(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===nn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==nn&&(e=e.concat(t(r,i)))}),e}var jv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:()=>new fg,providedIn:"root"})}return n})(),fg=class{parse(t){let e=new iA(t);return new yd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Sv(t.root,!0)}`,i=lee(t.queryParams),r=typeof t.fragment=="string"?`#${aee(t.fragment)}`:"";return`${e}${i}${r}`}},see=new fg;function WC(n){return n.segments.map(t=>yU(t)).join("/")}function Sv(n,t){if(!n.hasChildren())return WC(n);if(t){let e=n.children[nn]?Sv(n.children[nn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==nn&&i.push(`${r}:${Sv(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=oee(n,(i,r)=>r===nn?[Sv(n.children[nn],!1)]:[`${r}:${Sv(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[nn]!=null?`${WC(n)}/${e[0]}`:`${WC(n)}/(${e.join("//")})`}}function _U(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qC(n){return _U(n).replace(/%3B/gi,";")}function aee(n){return encodeURI(n)}function nA(n){return _U(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GC(n){return decodeURIComponent(n)}function nU(n){return GC(n.replace(/\+/g,"%20"))}function yU(n){return`${nA(n.path)}${cee(n.parameters)}`}function cee(n){return Object.entries(n).map(([t,e])=>`;${nA(t)}=${nA(e)}`).join("")}function lee(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${qC(e)}=${qC(r)}`).join("&"):`${qC(e)}=${qC(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var uee=/^[^\/()?;#]+/;function Yk(n){let t=n.match(uee);return t?t[0]:""}var dee=/^[^\/()?;=#]+/;function hee(n){let t=n.match(dee);return t?t[0]:""}var mee=/^[^=?&#]+/;function fee(n){let t=n.match(mee);return t?t[0]:""}var pee=/^[^&#]+/;function gee(n){let t=n.match(pee);return t?t[0]:""}var iA=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new si([],{}):new si([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[nn]=new si(t,e)),i}parseSegment(){let t=Yk(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new oi(4009,!1);return this.capture(t),new xf(GC(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=hee(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Yk(this.remaining);r&&(i=r,this.capture(i))}t[GC(e)]=GC(i)}parseQueryParam(t){let e=fee(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=gee(this.remaining);s&&(i=s,this.capture(i))}let r=nU(e),o=nU(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Yk(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new oi(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=nn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[nn]:new si([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new oi(4011,!1)}};function vU(n){return n.segments.length>0?new si([],{[nn]:n}):n}function bU(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=bU(r);if(i===nn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new si(n.segments,t);return _ee(e)}function _ee(n){if(n.numberOfChildren===1&&n.children[nn]){let t=n.children[nn];return new si(n.segments.concat(t.segments),t.children)}return n}function Sf(n){return n instanceof yd}function yee(n,t,e=null,i=null){let r=wU(n);return CU(r,t,e,i)}function wU(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new si(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=vU(i);return t??r}function CU(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return Xk(r,r,r,e,i);let o=vee(t);if(o.toRoot())return Xk(r,r,new si([],{}),e,i);let s=bee(o,r,n),a=s.processChildren?kv(s.segmentGroup,s.index,o.commands):xU(s.segmentGroup,s.index,o.commands);return Xk(r,s.segmentGroup,a,e,i)}function QC(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Mv(n){return typeof n=="object"&&n!=null&&n.outlets}function Xk(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===t?s=e:s=EU(n,t,e);let a=vU(bU(s));return new yd(a,o,r)}function EU(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=EU(o,t,e)}),new si(n.segments,i)}var YC=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&QC(i[0]))throw new oi(4003,!1);let r=i.find(Mv);if(r&&r!==hU(i))throw new oi(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vee(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new YC(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new YC(e,t,i)}var ug=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function bee(n,t,e){if(n.isAbsolute)return new ug(t,!0,0);if(!e)return new ug(t,!1,NaN);if(e.parent===null)return new ug(e,!0,0);let i=QC(n.commands[0])?0:1,r=e.segments.length-1+i;return wee(e,r,n.numberOfDoubleDots)}function wee(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new oi(4005,!1);r=i.segments.length}return new ug(i,!1,r-o)}function Cee(n){return Mv(n[0])?n[0].outlets:{[nn]:n}}function xU(n,t,e){if(n??=new si([],{}),n.segments.length===0&&n.hasChildren())return kv(n,t,e);let i=Eee(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new si(n.segments.slice(0,i.pathIndex),{});return o.children[nn]=new si(n.segments.slice(i.pathIndex),n.children),kv(o,0,r)}else return i.match&&r.length===0?new si(n.segments,{}):i.match&&!n.hasChildren()?rA(n,t,e):i.match?kv(n,0,r):rA(n,t,e)}function kv(n,t,e){if(e.length===0)return new si(n.segments,{});{let i=Cee(e),r={};if(Object.keys(i).some(o=>o!==nn)&&n.children[nn]&&n.numberOfChildren===1&&n.children[nn].segments.length===0){let o=kv(n.children[nn],t,e);return new si(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=xU(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new si(n.segments,r)}}function Eee(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Mv(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!rU(l,u,s))return o;i+=2}else{if(!rU(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function rA(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Mv(o)){let l=xee(o.outlets);return new si(i,l)}if(r===0&&QC(e[0])){let l=n.segments[t];i.push(new xf(l.path,iU(e[0]))),r++;continue}let s=Mv(o)?o.outlets[nn]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&QC(a)?(i.push(new xf(s,iU(a))),r+=2):(i.push(new xf(s,{})),r++)}return new si(i,{})}function xee(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=rA(new si([],{}),0,i))}),t}function iU(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function rU(n,t,e){return n==e.path&&hu(t,e.parameters)}var Av="imperative",eo=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(eo||{}),Ec=class{id;url;constructor(t,e){this.id=t,this.url=e}},pg=class extends Ec{type=eo.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mu=class extends Ec{urlAfterRedirects;type=eo.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Na=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Na||{}),XC=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(XC||{}),_d=class extends Ec{reason;code;type=eo.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fh=class extends Ec{reason;code;type=eo.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Pv=class extends Ec{error;target;type=eo.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},JC=class extends Ec{urlAfterRedirects;state;type=eo.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oA=class extends Ec{urlAfterRedirects;state;type=eo.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sA=class extends Ec{urlAfterRedirects;state;shouldActivate;type=eo.GuardsCheckEnd;constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},aA=class extends Ec{urlAfterRedirects;state;type=eo.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cA=class extends Ec{urlAfterRedirects;state;type=eo.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lA=class{route;type=eo.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uA=class{route;type=eo.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dA=class{snapshot;type=eo.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hA=class{snapshot;type=eo.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mA=class{snapshot;type=eo.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fA=class{snapshot;type=eo.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ZC=class{routerEvent;position;anchor;type=eo.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ov=class{},gg=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function Iee(n,t){return n.providers&&!n._injector&&(n._injector=wk(n.providers,t,`Route: ${n.path}`)),n._injector??t}function pl(n){return n.outlet||nn}function See(n,t){let e=n.filter(i=>pl(i)===t);return e.push(...n.filter(i=>pl(i)!==t)),e}function Uv(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var pA=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Uv(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new zv(this.rootInjector)}},zv=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new pA(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(Ve(cl))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eE=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=gA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=gA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=_A(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return _A(t,this._root).map(e=>e.value)}};function gA(n,t){if(n===t.value)return t;for(let e of t.children){let i=gA(n,e);if(i)return i}return null}function _A(n,t){if(n===t.value)return[t];for(let e of t.children){let i=_A(n,e);if(i.length)return i.unshift(t),i}return[]}var Oa=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function lg(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var tE=class extends eE{snapshot;constructor(t,e){super(t),this.snapshot=e,SA(this,t)}toString(){return this.snapshot.toString()}};function IU(n){let t=Tee(n),e=new gi([new xf("",{})]),i=new gi({}),r=new gi({}),o=new gi({}),s=new gi(""),a=new Vh(e,i,o,s,r,nn,n,t.root);return a.snapshot=t.root,new tE(new Oa(a,[]),t)}function Tee(n){let t={},e={},i={},r="",o=new dg([],t,i,r,e,nn,n,null,{});return new iE("",new Oa(o,[]))}var Vh=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ht(u=>u[$v]))??Ye(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ht(t=>mg(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ht(t=>mg(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nE(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:ee(ee({},t.params),n.params),data:ee(ee({},t.data),n.data),resolve:ee(ee(ee(ee({},n.data),t.data),r?.data),n._resolvedData)}:i={params:ee({},n.params),data:ee({},n.data),resolve:ee(ee({},n.data),n._resolvedData??{})},r&&TU(r)&&(i.resolve[$v]=r.title),i}var dg=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$v]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mg(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},iE=class extends eE{url;constructor(t,e){super(e),this.url=t,SA(this,e)}toString(){return SU(this._root)}};function SA(n,t){t.value._routerState=n,t.children.forEach(e=>SA(n,e))}function SU(n){let t=n.children.length>0?` { ${n.children.map(SU).join(", ")} } `:"";return`${n.value}${t}`}function Jk(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,hu(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),hu(t.params,e.params)||n.paramsSubject.next(e.params),eee(t.url,e.url)||n.urlSubject.next(e.url),hu(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yA(n,t){let e=hu(n.params,t.params)&&ree(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||yA(n.parent,t.parent))}function TU(n){return typeof n.title=="string"||n.title===null}var Dee=new ce(""),TA=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=nn;activateEvents=new ke;deactivateEvents=new ke;attachEvents=new ke;detachEvents=new ke;routerOutletData=au(void 0);parentContexts=w(zv);location=w(Mr);changeDetector=w(qt);inputBinder=w(aE,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oi(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oi(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oi(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new oi(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new vA(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tt]})}return n})(),vA=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Vh?this.route:t===zv?this.childContexts:t===Dee?this.outletData:this.parent.get(t,e)}},aE=new ce(""),oU=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=iu([i.queryParams,i.params,i.data]).pipe(di(([o,s,a],l)=>(a=ee(ee(ee({},o),s),a),l===0?Ye(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=Z$(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function kee(n,t,e){let i=Nv(n,t._root,e?e._root:void 0);return new tE(i,t)}function Nv(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=Aee(n,t,e);return new Oa(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Nv(n,a)),s}}let i=Ree(t.value),r=t.children.map(o=>Nv(n,o));return new Oa(i,r)}}function Aee(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Nv(n,i,r);return Nv(n,i)})}function Ree(n){return new Vh(new gi(n.url),new gi(n.params),new gi(n.queryParams),new gi(n.fragment),new gi(n.data),n.outlet,n.component,n)}var Fv=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},DU="ngNavigationCancelingError";function rE(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Sf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=kU(!1,Na.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function kU(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[DU]=!0,e.cancellationCode=t,e}function Mee(n){return AU(n)&&Sf(n.url)}function AU(n){return!!n&&n[DU]}var Pee=(n,t,e,i)=>ht(r=>(new bA(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),bA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Jk(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=lg(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=lg(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=lg(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=lg(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new fA(o.value.snapshot))}),t.children.length&&this.forwardEvent(new hA(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(Jk(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jk(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},oE=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},hg=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Oee(n,t,e){let i=n._root,r=t?t._root:null;return Tv(i,r,e,[i.value])}function Nee(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function yg(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!T$(n)?n:t.get(n):i}function Tv(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=lg(t);return n.children.forEach(s=>{Fee(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Rv(a,e.getContext(s),r)),r}function Fee(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Vee(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new oE(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Tv(n,t,a?a.children:null,i,r):Tv(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new hg(a.outlet.component,s))}else s&&Rv(t,a,r),r.canActivateChecks.push(new oE(i)),o.component?Tv(n,null,a?a.children:null,i,r):Tv(n,null,e,i,r);return r}function Vee(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!If(n.url,t.url);case"pathParamsOrQueryParamsChange":return!If(n.url,t.url)||!hu(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yA(n,t)||!hu(n.queryParams,t.queryParams);case"paramsChange":default:return!yA(n,t)}}function Rv(n,t,e){let i=lg(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Rv(s,t.children.getContext(o),e):Rv(s,null,e):Rv(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new hg(t.outlet.component,r)):e.canDeactivateChecks.push(new hg(null,r)):e.canDeactivateChecks.push(new hg(null,r))}function qv(n){return typeof n=="function"}function Lee(n){return typeof n=="boolean"}function Bee(n){return n&&qv(n.canLoad)}function $ee(n){return n&&qv(n.canActivate)}function jee(n){return n&&qv(n.canActivateChild)}function Uee(n){return n&&qv(n.canDeactivate)}function zee(n){return n&&qv(n.canMatch)}function RU(n){return n instanceof b$||n?.name==="EmptyError"}var KC=Symbol("INITIAL_VALUE");function _g(){return di(n=>iu(n.map(t=>t.pipe(xi(1),Kn(KC)))).pipe(ht(t=>{for(let e of t)if(e!==!0){if(e===KC)return KC;if(e===!1||qee(e))return e}return!0}),st(t=>t!==KC),xi(1)))}function qee(n){return Sf(n)||n instanceof Fv}function Kee(n,t){return ji(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Ye(Qe(ee({},e),{guardsResult:!0})):Hee(s,i,r,n).pipe(ji(a=>a&&Lee(a)?Wee(i,o,n,t):Ye(a)),ht(a=>Qe(ee({},e),{guardsResult:a})))})}function Hee(n,t,e,i){return Ar(n).pipe(ji(r=>Jee(r.component,r.route,e,t,i)),ou(r=>r!==!0,!0))}function Wee(n,t,e,i){return Ar(t).pipe(Dh(r=>fC(Qee(r.route.parent,i),Gee(r.route,i),Xee(n,r.path,e),Yee(n,r.route,e))),ou(r=>r!==!0,!0))}function Gee(n,t){return n!==null&&t&&t(new mA(n)),Ye(!0)}function Qee(n,t){return n!==null&&t&&t(new dA(n)),Ye(!0)}function Yee(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Ye(!0);let r=i.map(o=>md(()=>{let s=Uv(t)??e,a=yg(o,s),l=$ee(a)?a.canActivate(t,n):wc(s,()=>a(t,n));return Lh(l).pipe(ou())}));return Ye(r).pipe(_g())}function Xee(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Nee(s)).filter(s=>s!==null).map(s=>md(()=>{let a=s.guards.map(l=>{let u=Uv(s.node)??e,h=yg(l,u),p=jee(h)?h.canActivateChild(i,n):wc(u,()=>h(i,n));return Lh(p).pipe(ou())});return Ye(a).pipe(_g())}));return Ye(o).pipe(_g())}function Jee(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ye(!0);let s=o.map(a=>{let l=Uv(t)??r,u=yg(a,l),h=Uee(u)?u.canDeactivate(n,t,e,i):wc(l,()=>u(n,t,e,i));return Lh(h).pipe(ou())});return Ye(s).pipe(_g())}function Zee(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Ye(!0);let o=r.map(s=>{let a=yg(s,n),l=Bee(a)?a.canLoad(t,e):wc(n,()=>a(t,e));return Lh(l)});return Ye(o).pipe(_g(),MU(i))}function MU(n){return _$(Di(t=>{if(typeof t!="boolean")throw rE(n,t)}),ht(t=>t===!0))}function ete(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Ye(!0);let o=r.map(s=>{let a=yg(s,n),l=zee(a)?a.canMatch(t,e):wc(n,()=>a(t,e));return Lh(l)});return Ye(o).pipe(_g(),MU(i))}var Vv=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Lv=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function cg(n){return df(new Vv(n))}function tte(n){return df(new oi(4e3,!1))}function nte(n){return df(kU(!1,Na.GuardRejected))}var wA=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Ye(i);if(r.numberOfChildren>1||!r.children[nn])return tte(`${t.redirectTo}`);r=r.children[nn]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,params:b,data:C,title:T}=r,k=wc(o,()=>a({params:b,data:C,queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,title:T}));if(k instanceof yd)throw new Lv(k);e=k}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Lv(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new yd(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new si(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new oi(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},CA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ite(n,t,e,i,r){let o=PU(n,t,e);return o.matched?(i=Iee(t,i),ete(i,t,e,r).pipe(ht(s=>s===!0?o:ee({},CA)))):Ye(o)}function PU(n,t,e){if(t.path==="**")return rte(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?ee({},CA):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||ZZ)(e,n,t);if(!r)return ee({},CA);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?ee(ee({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function rte(n){return{matched:!0,parameters:n.length>0?hU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sU(n,t,e,i){return e.length>0&&ate(n,e,i)?{segmentGroup:new si(t,ste(i,new si(e,n.children))),slicedSegments:[]}:e.length===0&&cte(n,e,i)?{segmentGroup:new si(n.segments,ote(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new si(n.segments,n.children),slicedSegments:e}}function ote(n,t,e,i){let r={};for(let o of e)if(cE(n,t,o)&&!i[pl(o)]){let s=new si([],{});r[pl(o)]=s}return ee(ee({},i),r)}function ste(n,t){let e={};e[nn]=t;for(let i of n)if(i.path===""&&pl(i)!==nn){let r=new si([],{});e[pl(i)]=r}return e}function ate(n,t,e){return e.some(i=>cE(n,t,i)&&pl(i)!==nn)}function cte(n,t,e){return e.some(i=>cE(n,t,i))}function cE(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function lte(n,t,e){return t.length===0&&!n.children[e]}var EA=class{};function ute(n,t,e,i,r,o,s="emptyOnly"){return new xA(n,t,e,i,r,s,o).recognize()}var dte=31,xA=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wA(this.urlSerializer,this.urlTree)}noMatchError(t){return new oi(4002,`'${t.segmentGroup}'`)}recognize(){let t=sU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ht(({children:e,rootSnapshot:i})=>{let r=new Oa(i,e),o=new iE("",r),s=yee(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new dg([],Object.freeze({}),Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),nn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,nn,e).pipe(ht(i=>({children:i,rootSnapshot:e})),fd(i=>{if(i instanceof Lv)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Vv?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(ht(s=>s instanceof Oa?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Ar(o).pipe(Dh(s=>{let a=i.children[s],l=See(e,s);return this.processSegmentGroup(t,l,a,s,r)}),x$((s,a)=>(s.push(...a),s)),fk(null),C$(),ji(s=>{if(s===null)return cg(i);let a=OU(s);return hte(a),Ye(a)}))}processSegment(t,e,i,r,o,s,a){return Ar(e).pipe(Dh(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,o,s,a).pipe(fd(u=>{if(u instanceof Vv)return Ye(null);throw u}))),ou(l=>!!l),fd(l=>{if(RU(l))return lte(i,r,o)?Ye(new EA):cg(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,l){return pl(i)!==s&&(s===nn||!cE(r,o,i))?cg(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,l):cg(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=PU(e,r,o);if(!l)return cg(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dte&&(this.allowRedirects=!1));let b=new dg(o,u,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,aU(r),pl(r),r.component??r._loadedComponent??null,r,cU(r)),C=nE(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(C.params),b.data=Object.freeze(C.data);let T=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,p,b,t);return this.applyRedirects.lineralizeSegments(r,T).pipe(ji(k=>this.processSegment(t,i,e,k.concat(_),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=ite(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(di(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(di(({routes:u})=>{let h=i._loadedInjector??t,{parameters:p,consumedSegments:_,remainingSegments:b}=l,C=new dg(_,p,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,aU(i),pl(i),i.component??i._loadedComponent??null,i,cU(i)),T=nE(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(T.params),C.data=Object.freeze(T.data);let{segmentGroup:k,slicedSegments:U}=sU(e,_,b,u);if(U.length===0&&k.hasChildren())return this.processChildren(h,u,k,C).pipe(ht(K=>new Oa(C,K)));if(u.length===0&&U.length===0)return Ye(new Oa(C,[]));let W=pl(i)===o;return this.processSegment(h,u,k,U,W?nn:o,!0,C).pipe(ht(K=>new Oa(C,K instanceof Oa?[K]:[])))}))):cg(e)))}getChildConfig(t,e,i){return e.children?Ye({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Ye({routes:e._loadedRoutes,injector:e._loadedInjector}):Zee(t,e,i,this.urlSerializer).pipe(ji(r=>r?this.configLoader.loadChildren(t,e).pipe(Di(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):nte(e))):Ye({routes:[],injector:t})}};function hte(n){n.sort((t,e)=>t.value.outlet===nn?-1:e.value.outlet===nn?1:t.value.outlet.localeCompare(e.value.outlet))}function mte(n){let t=n.value.routeConfig;return t&&t.path===""}function OU(n){let t=[],e=new Set;for(let i of n){if(!mte(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=OU(i.children);t.push(new Oa(i.value,r))}return t.filter(i=>!e.has(i))}function aU(n){return n.data||{}}function cU(n){return n.resolve||{}}function fte(n,t,e,i,r,o){return ji(s=>ute(n,t,e,i,s.extractedUrl,r,o).pipe(ht(({state:a,tree:l})=>Qe(ee({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function pte(n,t){return ji(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ye(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of NU(l))s.add(u);let a=0;return Ar(s).pipe(Dh(l=>o.has(l)?gte(l,i,n,t):(l.data=nE(l,l.parent,n).resolve,Ye(void 0))),Di(()=>a++),pk(1),ji(l=>a===s.size?Ye(e):al))})}function NU(n){let t=n.children.map(e=>NU(e)).flat();return[n,...t]}function gte(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!TU(r)&&(o[$v]=r.title),_te(o,n,t,i).pipe(ht(s=>(n._resolvedData=s,n.data=nE(n,n.parent,e).resolve,null)))}function _te(n,t,e,i){let r=tA(n);if(r.length===0)return Ye({});let o={};return Ar(r).pipe(ji(s=>yte(n[s],t,e,i).pipe(ou(),Di(a=>{if(a instanceof Fv)throw rE(new fg,a);o[s]=a}))),pk(1),w$(o),fd(s=>RU(s)?al:df(s)))}function yte(n,t,e,i){let r=Uv(t)??i,o=yg(n,r),s=o.resolve?o.resolve(t,e):wc(r,()=>o(t,e));return Lh(s)}function Zk(n){return di(t=>{let e=n(t);return e?Ar(e).pipe(ht(()=>t)):Ye(t)})}var FU=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===nn);return i}getResolvedTitleForRoute(e){return e.data[$v]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:()=>w(vte),providedIn:"root"})}return n})(),vte=(()=>{class n extends FU{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ve(Jj))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kv=new ce("",{providedIn:"root",factory:()=>({})}),bte=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,r){i&1&&be(0,"router-outlet")},dependencies:[TA],encapsulation:2})}return n})();function DA(n){let t=n.children&&n.children.map(DA),e=t?Qe(ee({},n),{children:t}):ee({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==nn&&(e.component=bte),e}var Bv=new ce(""),kA=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(xC);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ye(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Lh(e.loadComponent()).pipe(ht(VU),Di(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),kh(()=>{this.componentLoaders.delete(e)})),r=new rv(i,()=>new ye).pipe(dk());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ye({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=wte(i,this.compiler,e,this.onLoadEndListener).pipe(kh(()=>{this.childrenLoaders.delete(i)})),s=new rv(o,()=>new ye).pipe(dk());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wte(n,t,e,i){return Lh(n.loadChildren()).pipe(ht(VU),ji(r=>r instanceof U$||Array.isArray(r)?Ye(r):Ar(t.compileModuleAsync(r))),ht(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Bv,[],{optional:!0,self:!0}).flat()),{routes:s.map(DA),injector:o}}))}function Cte(n){return n&&typeof n=="object"&&"default"in n}function VU(n){return Cte(n)?n.default:n}var AA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:()=>w(Ete),providedIn:"root"})}return n})(),Ete=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LU=new ce(""),BU=new ce("");function xte(n,t,e){let i=n.get(BU),r=n.get(xt);return n.get(Ke).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=r.startViewTransition(()=>(o(),Ite(n))),{onViewTransitionCreated:l}=i;return l&&wc(n,()=>l({transition:a,from:t,to:e})),s})}function Ite(n){return new Promise(t=>{Xr({read:()=>setTimeout(t)},{injector:n})})}var $U=new ce(""),RA=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ye;transitionAbortSubject=new ye;configLoader=w(kA);environmentInjector=w(cl);urlSerializer=w(jv);rootContexts=w(zv);location=w(_f);inputBindingEnabled=w(aE,{optional:!0})!==null;titleStrategy=w(FU);options=w(Kv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(AA);createViewTransition=w(LU,{optional:!0});navigationErrorHandler=w($U,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ye(void 0);rootComponentType=null;constructor(){let e=r=>this.events.next(new lA(r)),i=r=>this.events.next(new uA(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Qe(ee(ee({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new gi({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Av,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(st(o=>o.id!==0),ht(o=>Qe(ee({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),di(o=>{let s=!1,a=!1;return Ye(o).pipe(di(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Na.SupersededByNewNavigation),al;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Qe(ee({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&h!=="reload"){let p="";return this.events.next(new Fh(l.id,this.urlSerializer.serialize(l.rawUrl),p,XC.IgnoredSameUrlNavigation)),l.resolve(!1),al}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ye(l).pipe(di(p=>{let _=this.transitions?.getValue();return this.events.next(new pg(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?al:Promise.resolve(p)}),fte(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Di(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Qe(ee({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new JC(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:_,source:b,restoredState:C,extras:T}=l,k=new pg(p,this.urlSerializer.serialize(_),b,C);this.events.next(k);let U=IU(this.rootComponentType).snapshot;return this.currentTransition=o=Qe(ee({},l),{targetSnapshot:U,urlAfterRedirects:_,extras:Qe(ee({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,Ye(o)}else{let p="";return this.events.next(new Fh(l.id,this.urlSerializer.serialize(l.extractedUrl),p,XC.IgnoredByUrlHandlingStrategy)),l.resolve(!1),al}}),Di(l=>{let u=new oA(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ht(l=>(this.currentTransition=o=Qe(ee({},l),{guards:Oee(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Kee(this.environmentInjector,l=>this.events.next(l)),Di(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw rE(this.urlSerializer,l.guardsResult);let u=new sA(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),st(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Na.GuardRejected),!1)),Zk(l=>{if(l.guards.canActivateChecks.length)return Ye(l).pipe(Di(u=>{let h=new aA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),di(u=>{let h=!1;return Ye(u).pipe(pte(this.paramsInheritanceStrategy,this.environmentInjector),Di({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",Na.NoDataFromResolver)}}))}),Di(u=>{let h=new cA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Zk(l=>{let u=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Di(_=>{h.component=_}),ht(()=>{})));for(let _ of h.children)p.push(...u(_));return p};return iu(u(l.targetSnapshot.root)).pipe(fk(null),xi(1))}),Zk(()=>this.afterPreactivation()),di(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?Ar(h).pipe(ht(()=>o)):Ye(o)}),ht(l=>{let u=kee(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Qe(ee({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Di(()=>{this.events.next(new Ov)}),Pee(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),xi(1),Di({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),An(this.transitionAbortSubject.pipe(Di(l=>{throw l}))),kh(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Na.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),fd(l=>{if(a=!0,AU(l))this.events.next(new _d(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Mee(l)?this.events.next(new gg(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Pv(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=wc(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(h instanceof Fv){let{message:p,cancellationCode:_}=rE(this.urlSerializer,h);this.events.next(new _d(o.id,this.urlSerializer.serialize(o.extractedUrl),p,_)),this.events.next(new gg(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(u),l}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return al}))}))}cancelNavigationTransition(e,i,r){let o=new _d(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ste(n){return n!==Av}var Tte=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:()=>w(Dte),providedIn:"root"})}return n})(),IA=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Dte=(()=>{class n extends IA{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jU=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:()=>w(kte),providedIn:"root"})}return n})(),kte=(()=>{class n extends jU{location=w(_f);urlSerializer=w(jv);options=w(Kv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=w(AA);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yd;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=IU(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof pg)this.stateMemento=this.createStateMemento();else if(e instanceof Fh)this.rawUrlTree=i.initialUrl;else if(e instanceof JC){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof Ov?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof _d&&(e.code===Na.GuardRejected||e.code===Na.NoDataFromResolver)?this.restoreHistory(i):e instanceof Pv?this.restoreHistory(i,!0):e instanceof mu&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof yd?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=ee(ee({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=ee(ee({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dv||{});function UU(n,t){n.events.pipe(st(e=>e instanceof mu||e instanceof _d||e instanceof Pv||e instanceof Fh),ht(e=>e instanceof mu||e instanceof Fh?Dv.COMPLETE:(e instanceof _d?e.code===Na.Redirect||e.code===Na.SupersededByNewNavigation:!1)?Dv.REDIRECTING:Dv.FAILED),st(e=>e!==Dv.REDIRECTING),xi(1)).subscribe(()=>{t()})}var Ate={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(wC);stateManager=w(jU);options=w(Kv,{optional:!0})||{};pendingTasks=w(yC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(RA);urlSerializer=w(jv);location=w(_f);urlHandlingStrategy=w(AA);_events=new ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(Tte);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Bv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(aE,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new It;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof _d&&i.code!==Na.Redirect&&i.code!==Na.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof mu)this.navigated=!0;else if(i instanceof gg){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=ee({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ste(r.source)},s);this.scheduleNavigation(a,Av,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Pte(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Av,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=ee({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(DA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=ee(ee({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let _=r?r.snapshot:this.routerState.snapshot.root;p=wU(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return CU(p,e,h,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Sf(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Av,null,i)}navigate(e,i={skipLocationChange:!1}){return Mte(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=ee({},Ate):i===!1?r=ee({},Rte):r=i,Sf(e))return tU(this.currentUrlTree,e,r);let o=this.parseUrl(e);return tU(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,_)=>{a=p,l=_});let h=this.pendingTasks.add();return UU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mte(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new oi(4008,!1)}function Pte(n){return!(n instanceof Ov)&&!(n instanceof gg)}var zU=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ye;constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof mu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Sf(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:$$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Sf(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(pe(gs),pe(Vh),k$("tabindex"),pe(Jr),pe(He),pe(hv))};static \u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&he("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&tt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",We],skipLocationChange:[2,"skipLocationChange","skipLocationChange",We],replaceUrl:[2,"replaceUrl","replaceUrl",We],routerLink:"routerLink"},features:[Ft,Tt]})}return n})();var sE=class{},qU=(()=>{class n{preload(e,i){return i().pipe(fd(()=>Ye(null)))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ote=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(st(e=>e instanceof mu),Dh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=wk(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ar(r).pipe(hk())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Ye(null);let o=r.pipe(ji(s=>s===null?Ye(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Ar([o,s]).pipe(hk())}else return o})}static \u0275fac=function(i){return new(i||n)(Ve(gs),Ve(xC),Ve(cl),Ve(sE),Ve(kA))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KU=new ce(""),Nte=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof pg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof mu?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Fh&&e.code===XC.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ZC&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ZC(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Yp()};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function HU(n,...t){return Rr([{provide:Bv,multi:!0,useValue:n},[],{provide:Vh,useFactory:WU,deps:[gs]},{provide:uv,multi:!0,useFactory:GU},t.map(e=>e.\u0275providers)])}function WU(n){return n.routerState.root}function Hv(n,t){return{\u0275kind:n,\u0275providers:t}}function GU(){let n=w(Mt);return t=>{let e=n.get(ll);if(t!==e.components[0])return;let i=n.get(gs),r=n.get(QU);n.get(MA)===1&&i.initialNavigation(),n.get(YU,null,yk.Optional)?.setUpPreloading(),n.get(KU,null,yk.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var QU=new ce("",{factory:()=>new ye}),MA=new ce("",{providedIn:"root",factory:()=>1});function Fte(){return Hv(2,[{provide:MA,useValue:0},{provide:Ck,multi:!0,deps:[Mt],useFactory:t=>{let e=t.get(nj,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(gs),o=t.get(QU);UU(r,()=>{i(!0)}),t.get(RA).afterPreactivation=()=>(i(!0),o.closed?Ye(void 0):o),r.initialNavigation()}))}}])}function Vte(){return Hv(3,[{provide:Ck,multi:!0,useFactory:()=>{let t=w(gs);return()=>{t.setUpLocationChangeListener()}}},{provide:MA,useValue:2}])}var YU=new ce("");function PA(n){return Hv(0,[{provide:YU,useExisting:Ote},{provide:sE,useExisting:n}])}function Lte(){return Hv(8,[oU,{provide:aE,useExisting:oU}])}function Bte(n){let t=[{provide:LU,useValue:xte},{provide:BU,useValue:ee({skipNextTransition:!!n?.skipInitialTransition},n)}];return Hv(9,t)}var lU=new ce("ROUTER_FORROOT_GUARD"),$te=[_f,{provide:jv,useClass:fg},gs,zv,{provide:Vh,useFactory:WU,deps:[gs]},kA,[]],Wv=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[$te,[],{provide:Bv,multi:!0,useValue:e},{provide:lU,useFactory:qte,deps:[[gs,new Rn,new ov]]},i?.errorHandler?{provide:$U,useValue:i.errorHandler}:[],{provide:Kv,useValue:i||{}},i?.useHash?Ute():zte(),jte(),i?.preloadingStrategy?PA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Kte(i):[],i?.bindToComponentInputs?Lte().\u0275providers:[],i?.enableViewTransitions?Bte().\u0275providers:[],Hte()]}}static forChild(e){return{ngModule:n,providers:[{provide:Bv,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)(Ve(lU,8))};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})();function jte(){return{provide:KU,useFactory:()=>{let n=w(aj),t=w(Ke),e=w(Kv),i=w(RA),r=w(jv);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Nte(r,i,n,t,e)}}}function Ute(){return{provide:hv,useClass:rj}}function zte(){return{provide:hv,useClass:ij}}function qte(n){return"guarded"}function Kte(n){return[n.initialNavigation==="disabled"?Vte().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Fte().\u0275providers:[]]}var uU=new ce("");function Hte(){return[{provide:uU,useFactory:GU},{provide:uv,multi:!0,useExisting:uU}]}var Wte="firebase",Gte="10.14.1";ei(Wte,Gte,"app");var js=new ng("ANGULARFIRE2_VERSION");function fu(n,t,e){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===e);if(o.length===1)return o[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var gl=(n,t)=>{let e=t?[t]:NC(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},_s=class{constructor(){return gl(Qte)}},Qte="app-check";function vg(){}var lE=class{zone;delegate;constructor(t,e=v$){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,e,i)}},NA=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vg,{},vg,vg)),e.pipe(Di({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Us=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new lE(Zone.current)),this.insideAngular=e.run(()=>new lE(Zone.current,y$)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(Ve(Ke))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uE(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Yte(n){return uE().ngZone.runOutsideAngular(()=>n())}function Tf(n){return uE().ngZone.run(()=>n())}function FA(n){return Xte(uE())(n)}function Xte(n){return function(e){return e=e.lift(new NA(n.ngZone)),e.pipe(uf(n.outsideAngular),Th(n.insideAngular))}}var Jte=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Tf(()=>n.apply(void 0,i))},ki=(n,t)=>function(){let e,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(t&&(e||=Tf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vg,{},vg,vg))),i[o]=Jte(i[o],e));let r=Yte(()=>n.apply(this,i));if(!t)if(r instanceof kr){let o=uE();return r.pipe(uf(o.outsideAngular),Th(o.insideAngular))}else return Tf(()=>r);return r instanceof kr?r.pipe(FA):r instanceof Promise?Tf(()=>new Promise((o,s)=>r.then(a=>Tf(()=>o(a)),a=>Tf(()=>s(a))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:Tf(()=>r)};var ene="firebase",tne="10.14.1";wf.registerVersion(ene,tne,"app-compat");var nne=["ngOnDestroy"],JU=(n,t,e,i={})=>new Proxy(n,{get:(r,o)=>e.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(nne.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>e.run(()=>u)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(h=>{let p=h?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,p),p})})})});var VA=class{constructor(t){return t}},dE=new ce("angularfire2.app.options"),ZU=new ce("angularfire2.app.name");function ez(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let s=wf.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>wf.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;ine("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new VA(s)}var ine=(n,...t)=>{Ik()&&typeof console<"u"&&console[n](...t)};function tz(n,t,e,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return rne(r,s)||(XU("error",`${t} was already initialized on the ${e} Firebase App with different settings.${one?" You may need to reload as Firebase is not HMR aware.":""}`),XU("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function rne(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var one=typeof module<"u"&&!!module.hot,XU=(n,...t)=>{Ik()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var BA;try{BA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{BA=!1}var mn=(()=>{class n{_platformId=w(hs);isBrowser=this._platformId?sj(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||BA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bg,nz=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function $A(){if(bg)return bg;if(typeof document!="object"||!document)return bg=new Set(nz),bg;let n=document.createElement("input");return bg=new Set(nz.filter(t=>(n.setAttribute("type",t),n.type===t))),bg}var Gv;function sne(){if(Gv==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gv=!0}))}finally{Gv=Gv||!1}return Gv}function zs(n){return sne()?n:!!n.capture}var _l=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(_l||{}),hE,Df;function mE(){if(Df==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Df=!1,Df;if("scrollBehavior"in document.documentElement.style)Df=!0;else{let n=Element.prototype.scrollTo;n?Df=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Df=!1}}return Df}function wg(){if(typeof document!="object"||!document)return _l.NORMAL;if(hE==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),hE=_l.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,hE=n.scrollLeft===0?_l.NEGATED:_l.INVERTED),n.remove()}return hE}var LA;function ane(){if(LA==null){let n=typeof document<"u"?document.head:null;LA=!!(n&&(n.createShadowRoot||n.attachShadow))}return LA}function iz(n){if(ane()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function vd(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Fa(n){return n.composedPath?n.composedPath()[0]:n.target}function jA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var fE=new WeakMap,vi=(()=>{class n{_appRef;_injector=w(Mt);_environmentInjector=w(cl);load(e){let i=this._appRef=this._appRef||this._injector.get(ll),r=fE.get(i);r||(r={loaders:new Set,refs:[]},fE.set(i,r),i.onDestroy(()=>{fE.get(i)?.refs.forEach(o=>o.destroy()),fE.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(SC(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function Ui(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ys(n){return n!=null&&`${n}`!="false"}function Va(n,t=0){return cne(n)?Number(n):arguments.length===2?t:0}function cne(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Cg(n){return Array.isArray(n)?n:[n]}function br(n){return n==null?"":typeof n=="string"?n:`${n}px`}function qs(n){return n instanceof He?n.nativeElement:n}function rz(n,t=/\s+/){let e=[];if(n!=null){let i=Array.isArray(n)?n:`${n}`.split(t);for(let r of i){let o=`${r}`.trim();o&&e.push(o)}}return e}function lne(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let t=0;t<n.addedNodes.length;t++)if(!(n.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<n.removedNodes.length;t++)if(!(n.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var oz=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sz=(()=>{class n{_mutationObserverFactory=w(oz);_observedElements=new Map;_ngZone=w(Ke);constructor(){}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){let i=qs(e);return new kr(r=>{let s=this._observeElement(i).pipe(ht(a=>a.filter(l=>!lne(l))),st(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let i=new ye,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),az=(()=>{class n{_contentObserver=w(sz);_elementRef=w(He);event=new ke;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(e){this._debounce=Va(e),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(Hp(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",We],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],features:[Ft]})}return n})(),Eg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[oz]})}return n})();var cz=new Set,kf,une=(()=>{class n{_platform=w(mn);_nonce=w(av,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hne}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&dne(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dne(n,t){if(!cz.has(n))try{kf||(kf=document.createElement("style"),t&&kf.setAttribute("nonce",t),kf.setAttribute("type","text/css"),document.head.appendChild(kf)),kf.sheet&&(kf.sheet.insertRule(`@media ${n} {body{ }}`,0),cz.add(n))}catch(e){console.error(e)}}function hne(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var xg=(()=>{class n{_mediaMatcher=w(une);_zone=w(Ke);_queries=new Map;_destroySubject=new ye;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return lz(Cg(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=lz(Cg(e)).map(s=>this._registerQuery(s).observable),o=iu(r);return o=fC(o.pipe(xi(1)),o.pipe(_C(1),Hp(0))),o.pipe(ht(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{a.matches=a.matches||l,a.breakpoints[u]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new kr(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Kn(i),ht(({matches:s})=>({query:e,matches:s})),An(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lz(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var bd={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var mz=" ";function fz(n,t,e){let i=pz(n,t);e=e.trim(),!i.some(r=>r.trim()===e)&&(i.push(e),n.setAttribute(t,i.join(mz)))}function WA(n,t,e){let i=pz(n,t);e=e.trim();let r=i.filter(o=>o!==e);r.length?n.setAttribute(t,r.join(mz)):n.removeAttribute(t)}function pz(n,t){return n.getAttribute(t)?.match(/\S+/g)??[]}var Cne=200,qA=class{_letterKeyStream=new ye;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ye;selectedItem=this._selectedItem;constructor(t,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:Cne;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Di(e=>this._pressedLetters.push(e)),Hp(t),st(()=>this._pressedLetters.length>0),ht(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},_E=class{_items;_activeItemIndex=-1;_activeItem=Le(null);_wrap=!1;_typeaheadSubscription=It.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof Ah?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):pf(t)&&(this._effectRef=IC(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new ye;change=new ye;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new qA(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Ui(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),r=e[i];this._activeItem.set(r??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex+t*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return pf(this._items)?this._items():this._items instanceof Ah?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let i=t.indexOf(e);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}},yE=class extends _E{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}},Rf=class extends _E{_origin="program";setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var GA=(()=>{class n{_platform=w(mn);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return xne(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=Ene(Mne(e));if(i&&(uz(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=uz(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Ane(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return Rne(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ene(n){try{return n.frameElement}catch{return null}}function xne(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function Ine(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function Sne(n){return Dne(n)&&n.type=="hidden"}function Tne(n){return kne(n)&&n.hasAttribute("href")}function Dne(n){return n.nodeName.toLowerCase()=="input"}function kne(n){return n.nodeName.toLowerCase()=="a"}function gz(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function uz(n){if(!gz(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function Ane(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function Rne(n){return Sne(n)?!1:Ine(n)||Tne(n)||n.hasAttribute("contenteditable")||gz(n)}function Mne(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var KA=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,e,i,r,o=!1,s){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Xr(t,{injector:this._injector}):setTimeout(t)}},QA=(()=>{class n{_checker=w(GA);_ngZone=w(Ke);_document=w(xt);_injector=w(Mt);constructor(){w(vi).load(pu)}create(e,i=!1){return new KA(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_z=(()=>{class n{_elementRef=w(He);_focusTrapFactory=w(QA);focusTrap;_previouslyFocusedElement=null;get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}autoCapture;constructor(){w(mn).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=vd(),this.focusTrap?.focusInitialElementWhenReady()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",We],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",We]},exportAs:["cdkTrapFocus"],features:[Ft,Tt]})}return n})();function Xv(n){return n.buttons===0||n.detail===0}function Jv(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Pne=new ce("cdk-input-modality-detector-options"),One={ignoreKeys:[18,17,224,91,16]},yz=650,Ig=zs({passive:!0,capture:!0}),Nne=(()=>{class n{_platform=w(mn);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new gi(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Fa(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<yz||(this._modality.next(Xv(e)?"keyboard":"mouse"),this._mostRecentTarget=Fa(e))};_onTouchstart=e=>{if(Jv(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Fa(e)};constructor(){let e=w(Ke),i=w(xt),r=w(Pne,{optional:!0});this._options=ee(ee({},One),r),this.modalityDetected=this._modality.pipe(_C(1)),this.modalityChanged=this.modalityDetected.pipe(ru()),this._platform.isBrowser&&e.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ig),i.addEventListener("mousedown",this._onMousedown,Ig),i.addEventListener("touchstart",this._onTouchstart,Ig)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ig),document.removeEventListener("mousedown",this._onMousedown,Ig),document.removeEventListener("touchstart",this._onTouchstart,Ig))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fne=new ce("liveAnnouncerElement",{providedIn:"root",factory:Vne});function Vne(){return null}var Lne=new ce("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Bne=0,vE=(()=>{class n{_ngZone=w(Ke);_defaultOptions=w(Lne,{optional:!0});_liveElement;_document=w(xt);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=w(Fne,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${Bne++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gE=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(gE||{}),$ne=new ce("cdk-focus-monitor-default-options"),pE=zs({passive:!0,capture:!0}),La=(()=>{class n{_ngZone=w(Ke);_platform=w(mn);_inputModalityDetector=w(Nne);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=w(xt,{optional:!0});_stopInputModalityDetector=new ye;constructor(){let e=w($ne,{optional:!0});this._detectionMode=e?.detectionMode||gE.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=Fa(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=qs(e);if(!this._platform.isBrowser||r.nodeType!==1)return Ye();let o=iz(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new ye,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=qs(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=qs(e),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===gE.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===gE.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?yz:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=Fa(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,pE),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,pE)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(An(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pE),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pE),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vz=(()=>{class n{_elementRef=w(He);_focusMonitor=w(La);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new ke;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return n})(),Af=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Af||{}),dz="cdk-high-contrast-black-on-white",hz="cdk-high-contrast-white-on-black",UA="cdk-high-contrast-active",YA=(()=>{class n{_platform=w(mn);_hasCheckedHighContrastMode;_document=w(xt);_breakpointSubscription;constructor(){this._breakpointSubscription=w(xg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Af.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Af.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Af.BLACK_ON_WHITE}return Af.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(UA,dz,hz),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Af.BLACK_ON_WHITE?e.add(UA,dz):i===Af.WHITE_ON_BLACK&&e.add(UA,hz)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bE=(()=>{class n{constructor(){w(YA)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Eg]})}return n})(),zA={},Hn=(()=>{class n{_appId=w(sv);getId(e){return this._appId!=="ng"&&(e+=this._appId),zA.hasOwnProperty(e)||(zA[e]=0),`${e}${zA[e]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jne=new ce("cdk-dir-doc",{providedIn:"root",factory:Une});function Une(){return w(xt)}var zne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function qne(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?zne.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Ni=(()=>{class n{value="ltr";change=new ke;constructor(){let e=w(jne,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=qne(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})();var Kne=["text"],Hne=[[["mat-icon"]],"*"],Wne=["mat-icon","*"];function Gne(n,t){if(n&1&&be(0,"mat-pseudo-checkbox",1),n&2){let e=Se();re("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function Qne(n,t){if(n&1&&be(0,"mat-pseudo-checkbox",3),n&2){let e=Se();re("disabled",e.disabled)}}function Yne(n,t){if(n&1&&(D(0,"span",4),z(1),R()),n&2){let e=Se();B(),Ut("(",e.group.label,")")}}var Xne=["mat-internal-form-field",""],Jne=["*"];var rR=(()=>{class n{static STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)";static DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)";static ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)";static SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}return n})(),oR=(()=>{class n{static COMPLEX="375ms";static ENTERING="225ms";static EXITING="195ms"}return n})();var gt=(()=>{class n{constructor(){w(YA)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Bh,Bh]})}return n})(),$h=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,e,i,r,o){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,e)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}},bz=new ce("MAT_DATE_LOCALE",{providedIn:"root",factory:Zne});function Zne(){return w(Y$)}var Dg="Method not implemented",to=class{locale;_localeChanges=new ye;localeChanges=this._localeChanges;setTime(t,e,i,r){throw new Error(Dg)}getHours(t){throw new Error(Dg)}getMinutes(t){throw new Error(Dg)}getSeconds(t){throw new Error(Dg)}parseTime(t,e){throw new Error(Dg)}addSeconds(t,e){throw new Error(Dg)}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}compareTime(t,e){return this.getHours(t)-this.getHours(e)||this.getMinutes(t)-this.getMinutes(e)||this.getSeconds(t)-this.getSeconds(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}sameTime(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareTime(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}},wd=new ce("mat-date-formats"),eie=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,tie=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function XA(n,t){let e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}var sR=(()=>{class n extends to{useUtcForDisplay=!1;_matDateLocale=w(bz,{optional:!0});constructor(){super();let e=w(bz,{optional:!0});e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return XA(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return XA(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){let i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return XA(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),i=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return i===7?0:i}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let o=this._createDateWithOverflow(e,i,r);return o.getMonth()!=i,o}today(){return new Date}parse(e,i){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let r=new Intl.DateTimeFormat(this.locale,Qe(ee({},i),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,i*12)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(eie.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}setTime(e,i,r,o){let s=this.clone(e);return s.setHours(i,r,o,0),s}getHours(e){return e.getHours()}getMinutes(e){return e.getMinutes()}getSeconds(e){return e.getSeconds()}parseTime(e,i){if(typeof e!="string")return e instanceof Date?new Date(e.getTime()):null;let r=e.trim();if(r.length===0)return null;let o=this._parseTimeString(r);if(o===null){let s=r.replace(/[^0-9:(AM|PM)]/gi,"").trim();s.length>0&&(o=this._parseTimeString(s))}return o||this.invalid()}addSeconds(e,i){return new Date(e.getTime()+i*1e3)}_createDateWithOverflow(e,i,r){let o=new Date;return o.setFullYear(e,i,r),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,i){let r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}_parseTimeString(e){let i=e.toUpperCase().match(tie);if(i){let r=parseInt(i[1]),o=parseInt(i[2]),s=i[3]==null?void 0:parseInt(i[3]),a=i[4];if(r===12?r=a==="AM"?0:r:a==="PM"&&(r+=12),JA(r,0,23)&&JA(o,0,59)&&(s==null||JA(s,0,59)))return this.setTime(this.today(),r,o,s||0)}return null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function JA(n,t,e){return!isNaN(n)&&n>=t&&n<=e}var aR={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};var Dz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[cR()]})}return n})();function cR(n=aR){return[{provide:to,useClass:sR},{provide:wd,useValue:n}]}var Mf=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var lR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})(),Sc=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Sc||{}),tR=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Sc.HIDDEN;constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},wz=zs({passive:!0,capture:!0}),nR=class{_events=new Map;addHandler(t,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,wz)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,wz)))}_delegateEventHandler=t=>{let e=Fa(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}},CE={enterDuration:225,exitDuration:150},nie=800,Cz=zs({passive:!0,capture:!0}),Ez=["mousedown","touchstart"],xz=["mouseup","mouseleave","touchend","touchcancel"],iie=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})(),kg=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new nR;constructor(t,e,i,r,o){this._target=t,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=qs(i)),o&&o.get(vi).load(iie)}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ee(ee({},CE),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||rie(t,e,r),a=t-r.left,l=e-r.top,u=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${a-s}px`,h.style.top=`${l-s}px`,h.style.height=`${s*2}px`,h.style.width=`${s*2}px`,i.color!=null&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(h);let p=window.getComputedStyle(h),_=p.transitionProperty,b=p.transitionDuration,C=_==="none"||b==="0s"||b==="0s, 0s"||r.width===0&&r.height===0,T=new tR(this,h,i,C);h.style.transform="scale3d(1, 1, 1)",T.state=Sc.FADING_IN,i.persistent||(this._mostRecentTransientRipple=T);let k=null;return!C&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let U=()=>{k&&(k.fallbackTimer=null),clearTimeout(K),this._finishRippleTransition(T)},W=()=>this._destroyRipple(T),K=setTimeout(W,u+100);h.addEventListener("transitionend",U),h.addEventListener("transitioncancel",W),k={onTransitionEnd:U,onTransitionCancel:W,fallbackTimer:K}}),this._activeRipples.set(T,k),(C||!u)&&this._finishRippleTransition(T),T}fadeOutRipple(t){if(t.state===Sc.FADING_OUT||t.state===Sc.HIDDEN)return;let e=t.element,i=ee(ee({},CE),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Sc.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=qs(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Ez.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{xz.forEach(e=>{this._triggerElement.addEventListener(e,this,Cz)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Sc.FADING_IN?this._startFadeOutTransition(t):t.state===Sc.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Sc.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Sc.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Xv(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+nie;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Jv(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Sc.VISIBLE||t.config.terminateOnPointerUp&&t.state===Sc.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(Ez.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(xz.forEach(e=>t.removeEventListener(e,this,Cz)),this._pointerUpEventsRegistered=!1))}};function rie(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var Ag=new ce("mat-ripple-global-options"),Zv=(()=>{class n{_elementRef=w(He);_animationMode=w(_i,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=w(Ke),i=w(mn),r=w(Ag,{optional:!0}),o=w(Mt);this._globalOptions=r||{},this._rippleRenderer=new kg(this,e,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ee(ee(ee({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,ee(ee({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ee(ee({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&ut("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Cd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})(),oie=(()=>{class n{_animationMode=w(_i,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&ut("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),uR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt]})}return n})(),dR=new ce("MAT_OPTION_PARENT_COMPONENT"),hR=new ce("MatOptgroup");var iR=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},jh=(()=>{class n{_element=w(He);_changeDetectorRef=w(qt);_parent=w(dR,{optional:!0});group=w(hR,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=w(Hn).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new ke;_text;_stateChanges=new ye;constructor(){w(vi).load(vs),w(vi).load(pu),this._signalDisableRipple=!!this._parent&&pf(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Ui(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new iR(this,e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&Vt(Kne,7),i&2){let o;Pe(o=Oe())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&he("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(ms("id",r.id),tt("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),ut("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",We]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[Ft],ngContentSelectors:Wne,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Xt(Hne),Ee(0,Gne,1,2,"mat-pseudo-checkbox",1),nt(1),D(2,"span",2,0),nt(4,1),R(),Ee(5,Qne,1,1,"mat-pseudo-checkbox",3)(6,Yne,2,1,"span",4),be(7,"div",5)),i&2&&(kt(r.multiple?0:-1),B(5),kt(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),B(),kt(r.group&&r.group._inert?6:-1),B(),re("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[oie,Zv],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();function kz(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),o=0;for(let s=0;s<n+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function Az(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}var mR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Cd,gt,uR]})}return n})(),Iz={capture:!0},Sz=["focus","mousedown","mouseenter","touchstart"],ZA="mat-ripple-loader-uninitialized",eR="mat-ripple-loader-class-name",Tz="mat-ripple-loader-centered",wE="mat-ripple-loader-disabled",EE=(()=>{class n{_document=w(xt,{optional:!0});_animationMode=w(_i,{optional:!0});_globalRippleOptions=w(Ag,{optional:!0});_platform=w(mn);_ngZone=w(Ke);_injector=w(Mt);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let e of Sz)this._document?.addEventListener(e,this._onInteraction,Iz)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of Sz)this._document?.removeEventListener(i,this._onInteraction,Iz)}configureRipple(e,i){e.setAttribute(ZA,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(eR))&&e.setAttribute(eR,i.className||""),i.centered&&e.setAttribute(Tz,""),i.disabled&&e.setAttribute(wE,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(wE,""):e.removeAttribute(wE)}_onInteraction=e=>{let i=Fa(e);if(i instanceof HTMLElement){let r=i.closest(`[${ZA}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(eR)),e.append(i);let r=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,s=r?0:o?.animation?.enterDuration??CE.enterDuration,a=r?0:o?.animation?.exitDuration??CE.exitDuration,l={rippleDisabled:r||o?.disabled||e.hasAttribute(wE),rippleConfig:{centered:e.hasAttribute(Tz),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:a}}},u=new kg(l,this._ngZone,i,this._platform,this._injector),h=!l.rippleDisabled;h&&u.setupTriggerEvents(e),this._hosts.set(e,{target:l,renderer:u,hasSetUpEvents:h}),e.removeAttribute(ZA)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rz=(()=>{class n{labelPosition;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){i&2&&ut("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:Xne,ngContentSelectors:Jne,decls:1,vars:0,template:function(i,r){i&1&&(Xt(),nt(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return n})();var sie=["*"];var aie=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],cie=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],lie=new ce("MAT_CARD_CONFIG"),Rg=(()=>{class n{appearance;constructor(){let e=w(lie,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&ut("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:sie,decls:1,vars:0,template:function(i,r){i&1&&(Xt(),nt(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),Mz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return n})();var IE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})();var Mg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:cie,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(Xt(aie),nt(0),D(1,"div",0),nt(2,1),R(),nt(3,2))},encapsulation:2,changeDetection:0})}return n})();var Pz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"]})}return n})();var Pg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})();var uie=["mat-button",""],Nz=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Fz=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var die="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}",hie=["mat-fab",""];var mie=["mat-icon-button",""],fie=["*"];var pie=new ce("MAT_BUTTON_CONFIG");var gie=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],pR=(()=>{class n{_elementRef=w(He);_platform=w(mn);_ngZone=w(Ke);_animationMode=w(_i,{optional:!0});_focusMonitor=w(La);_rippleLoader=w(EE);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){w(vi).load(vs);let e=w(pie,{optional:!0}),i=this._elementRef.nativeElement,r=i.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:s}of gie)i.hasAttribute(o)&&r.add(...s)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",We],disabled:[2,"disabled","disabled",We],ariaDisabled:[2,"aria-disabled","ariaDisabled",We],disabledInteractive:[2,"disabledInteractive","disabledInteractive",We]},features:[Ft]})}return n})();var rn=(()=>{class n extends pR{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(tt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),_r(r.color?"mat-"+r.color:""),ut("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Et],attrs:uie,ngContentSelectors:Fz,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Xt(Nz),be(0,"span",0),nt(1),D(2,"span",1),nt(3,1),R(),nt(4,2),be(5,"span",2)(6,"span",3)),i&2&&ut("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})();var _ie=new ce("mat-mdc-fab-default-options",{providedIn:"root",factory:Vz});function Vz(){return{color:"accent"}}var Oz=Vz(),Og=(()=>{class n extends pR{_options=w(_ie,{optional:!0});_isFab=!0;extended;constructor(){super(),this._options=this._options||Oz,this.color=this._options.color||Oz.color}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(i,r){i&2&&(tt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),_r(r.color?"mat-"+r.color:""),ut("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{extended:[2,"extended","extended",We]},exportAs:["matButton"],features:[Ft,Et],attrs:hie,ngContentSelectors:Fz,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Xt(Nz),be(0,"span",0),nt(1),D(2,"span",1),nt(3,1),R(),nt(4,2),be(5,"span",2)(6,"span",3)),i&2&&ut("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-fab-base{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus .mat-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-container-shape, var(--mat-sys-corner-large));color:var(--mat-fab-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display, block)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-small-container-shape, var(--mat-sys-corner-medium));color:var(--mat-fab-small-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-small-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-small-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;height:var(--mdc-extended-fab-container-height, 56px);border-radius:var(--mdc-extended-fab-container-shape, var(--mat-sys-corner-large));font-family:var(--mdc-extended-fab-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-extended-fab-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-extended-fab-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-extended-fab-label-text-tracking, var(--mat-sys-label-large-tracking));box-shadow:var(--mdc-extended-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0})}return n})();var Ed=(()=>{class n extends pR{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(tt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),_r(r.color?"mat-"+r.color:""),ut("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Et],attrs:mie,ngContentSelectors:fie,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Xt(),be(0,"span",0),nt(1),be(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',die],encapsulation:2,changeDetection:0})}return n})();var Ht=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,Cd,gt]})}return n})();var SE=class n{constructor(t){this.router=t}go2Section(){console.log("going to",this.url),this.router.navigateByUrl(this.url)}matkeUrl(){throw new Error("Method not implemented.")}title="";url="";picture="";ngOnInit(){console.log("url",this.url),console.log("picture",this.picture),console.log("title",this.title)}static \u0275fac=function(e){return new(e||n)(pe(gs))};static \u0275cmp=le({type:n,selectors:[["app-section-card"]],inputs:{title:"title",url:"url",picture:"picture"},decls:7,vars:3,consts:[[1,"main-app-container"],[1,"card-container","background","provider-background"],["mat-card-image","","src","'url(' +'/assets/pictures/'+ picture + ')'"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(D(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),z(4),R()(),be(5,"mat-card-image",2),D(6,"button",3),he("click",function(){return i.go2Section()}),R()()()),e&2&&(B(),Co("background-image","url(/assets/pictures/"+i.picture+")"),B(3),Zt(i.title))},dependencies:[Pg,Rg,Mg,Pz,Mz,Ht,rn],encapsulation:2})};var Lz=["*"];var yie=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}",gR=class{tracker;columnIndex=0;rowIndex=0;get rowCount(){return this.rowIndex+1}get rowspan(){let t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}positions;update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(i=>this._trackTile(i))}_trackTile(t){let e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new _R(this.rowIndex,e)}_findMatchingGap(t){t>this.tracker.length;let e=-1,i=-1;do{if(this.columnIndex+t>this.tracker.length){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(e);continue}if(e=this.tracker.indexOf(0,this.columnIndex),e==-1){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(e);continue}i=this._findGapEndIndex(e),this.columnIndex=e+1}while(i-e<t||i==0);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(this.tracker[e]!=0)return e;return this.tracker.length}_markTilePosition(t,e){for(let i=0;i<e.colspan;i++)this.tracker[t+i]=e.rowspan}},_R=class{row;col;constructor(t,e){this.row=t,this.col=e}},Bz=new ce("MAT_GRID_LIST"),wR=(()=>{class n{_element=w(He);_gridList=w(Bz,{optional:!0});_rowspan=1;_colspan=1;constructor(){}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(Va(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(Va(e))}_setStyle(e,i){this._element.nativeElement.style[e]=i}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(i,r){i&2&&tt("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:Lz,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(i,r){i&1&&(Xt(),D(0,"div",0),nt(1),R())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}return n})();var vie=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,eb=class{_gutterSize;_rows=0;_rowspan=0;_cols;_direction;init(t,e,i,r){this._gutterSize=$z(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=i,this._direction=r}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return e===0?"0":Pf(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,i){let r=100/this._cols,o=(this._cols-1)/this._cols;this.setColStyles(t,i,r,o),this.setRowStyles(t,e,r,o)}setColStyles(t,e,i,r){let o=this.getBaseTileSize(i,r),s=this._direction==="rtl"?"right":"left";t._setStyle(s,this.getTilePosition(o,e)),t._setStyle("width",Pf(this.getTileSize(o,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}},yR=class extends eb{fixedRowHeight;constructor(t){super(),this.fixedRowHeight=t}init(t,e,i,r){super.init(t,e,i,r),this.fixedRowHeight=$z(this.fixedRowHeight),vie.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Pf(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Pf(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}},vR=class extends eb{rowHeightRatio;baseTileHeight;constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,i,r){let o=i/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(o,r),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Pf(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Pf(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){let e=t.split(":");e.length,this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}},bR=class extends eb{setRowStyles(t,e){let i=100/this._rowspan,r=(this._rows-1)/this._rows,o=this.getBaseTileSize(i,r);t._setStyle("top",this.getTilePosition(o,e)),t._setStyle("height",Pf(this.getTileSize(o,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}};function Pf(n){return`calc(${n})`}function $z(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}var bie="fit",jz=(()=>{class n{_element=w(He);_dir=w(Ni,{optional:!0});_cols;_tileCoordinator;_rowHeight;_gutter="1px";_tileStyler;_tiles;constructor(){}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(Va(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){let i=`${e??""}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),e===bie?this._tileStyler=new bR:e&&e.indexOf(":")>-1?this._tileStyler=new vR(e):this._tileStyler=new yR(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new gR);let e=this._tileCoordinator,i=this._tiles.filter(o=>!o._gridList||o._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,e,this.cols,r),i.forEach((o,s)=>{let a=e.positions[s];this._tileStyler.setStyle(o,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-grid-list"]],contentQueries:function(i,r,o){if(i&1&&jt(o,wR,5),i&2){let s;Pe(s=Oe())&&(r._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(i,r){i&2&&tt("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[St([{provide:Bz,useExisting:n}])],ngContentSelectors:Lz,decls:2,vars:0,template:function(i,r){i&1&&(Xt(),D(0,"div"),nt(1),R())},styles:[yie],encapsulation:2,changeDetection:0})}return n})(),Uz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[lR,gt,lR,gt]})}return n})();var TE=class n{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-home"]],decls:9,vars:12,consts:[["cols","4","rowHeight","800px"],[3,"picture","title","url"]],template:function(e,i){e&1&&(D(0,"mat-grid-list",0)(1,"mat-grid-tile"),be(2,"app-section-card",1),R(),D(3,"mat-grid-tile"),be(4,"app-section-card",1),R(),D(5,"mat-grid-tile"),be(6,"app-section-card",1),R(),D(7,"mat-grid-tile"),be(8,"app-section-card",1),R()()),e&2&&(B(2),re("picture","categories.png")("title","Categorie")("url","categories-list"),B(2),re("picture","seller.png")("title","fornitori")("url","suppliers-list"),B(2),re("picture","seller.png")("title","pagamenti")("url","payments-list"),B(2),re("picture","seller.png")("title","carrelli")("url","shoppingCart-list"))},dependencies:[SE,Uz,jz,wR],encapsulation:2})};var bs=class{constructor(t){return t}},Ba=class{constructor(){return NC()}};function Cie(n){return n&&n.length===1?n[0]:new bs(fl())}var CR=new ce("angularfire2._apps"),Eie={provide:bs,useFactory:Cie,deps:[[new Rn,CR]]},xie={provide:Ba,deps:[[new Rn,CR]]};function Iie(n){return(t,e)=>{let i=e.get(hs);ei("angularfire",js.full,"core"),ei("angularfire",js.full,"app"),ei("angular",xk.full,i.toString());let r=t.runOutsideAngular(()=>n(e));return new bs(r)}}function zz(n,...t){return Rr([Eie,xie,{provide:CR,useFactory:Iie(n),multi:!0,deps:[Ke,Mt,Us,...t]}])}var qz=ki(bj,!0);var Sie=new Map,Tie={activated:!1,tokenObservers:[]},Die={initialized:!1,enabled:!1};function bl(n){return Sie.get(n)||Object.assign({},Tie)}function Qz(){return Die}var kie="https://content-firebaseappcheck.googleapis.com/v1";var Aie="exchangeDebugToken",Kz={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},GAe=24*60*60*1e3;var xR=class{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return O(this,null,function*(){this.stop();try{this.pending=new vf,this.pending.promise.catch(e=>{}),yield Rie(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new vf,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function Rie(n){return new Promise(t=>{setTimeout(t,n)})}var Mie={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Uh=new mj("appCheck","AppCheck",Mie);function Yz(n){if(!bl(n).activated)throw Uh.create("use-before-activation",{appName:n.name})}function Xz(i,r){return O(this,arguments,function*({url:n,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let b=yield s.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(n,a)}catch(b){throw Uh.create("fetch-network-error",{originalErrorMessage:b?.message})}if(l.status!==200)throw Uh.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(b){throw Uh.create("fetch-parse-error",{originalErrorMessage:b?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Uh.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+p,issuedAtTimeMillis:_}})}function Jz(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${kie}/projects/${e}/apps/${i}:${Aie}?key=${r}`,body:{debug_token:t}}}var Pie="firebase-app-check-database",Oie=1,IR="firebase-app-check-store";var DE=null;function Nie(){return DE||(DE=new Promise((n,t)=>{try{let e=indexedDB.open(Pie,Oie);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Uh.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(IR,{keyPath:"compositeKey"})}}}catch(e){t(Uh.create("storage-open",{originalErrorMessage:e?.message}))}}),DE)}function Fie(n,t){return Vie(Lie(n),t)}function Vie(n,t){return O(this,null,function*(){let i=(yield Nie()).transaction(IR,"readwrite"),o=i.objectStore(IR).put({compositeKey:n,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;a(Uh.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function Lie(n){return`${n.options.appId}-${n.name}`}var SR=new sg("@firebase/app-check");function ER(n,t){return Tk()?Fie(n,t).catch(e=>{SR.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Zz(){return Qz().enabled}function e4(){return O(this,null,function*(){let n=Qz();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Bie={error:"UNKNOWN_ERROR"};function $ie(n){return MC.encodeString(JSON.stringify(n),!1)}function TR(n,t=!1){return O(this,null,function*(){let e=n.app;Yz(e);let i=bl(e),r=i.token,o;if(r&&!tb(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(tb(l)?r=l:yield ER(e,void 0))}if(!t&&r&&tb(r))return{token:r.token};let s=!1;if(Zz()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Xz(Jz(e,yield e4()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield ER(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield bl(e).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?SR.warn(l.message):SR.error(l),o=l}let a;return r?o?tb(r)?a={token:r.token,internalError:o}:a=Wz(o):(a={token:r.token},i.token=r,yield ER(e,r)):a=Wz(o),s&&qie(e,a),a})}function jie(n){return O(this,null,function*(){let t=n.app;Yz(t);let{provider:e}=bl(t);if(Zz()){let i=yield e4(),{token:r}=yield Xz(Jz(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function Uie(n,t,e,i){let{app:r}=n,o=bl(r),s={next:e,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&tb(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),Hz(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Hz(n))}function t4(n,t){let e=bl(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function Hz(n){let{app:t}=n,e=bl(t),i=e.tokenRefresher;i||(i=zie(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function zie(n){let{app:t}=n;return new xR(()=>O(this,null,function*(){let e=bl(t),i;if(e.token?i=yield TR(n,!0):i=yield TR(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=bl(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Kz.RETRIAL_MIN_WAIT,Kz.RETRIAL_MAX_WAIT)}function qie(n,t){let e=bl(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function tb(n){return n.expireTimeMillis-Date.now()>0}function Wz(n){return{token:$ie(Bie),error:n}}var DR=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=bl(this.app);for(let e of t)t4(this.app,e.next);return Promise.resolve()}};function Kie(n,t){return new DR(n,t)}function Hie(n){return{getToken:t=>TR(n,t),getLimitedUseToken:()=>jie(n),addTokenListener:t=>Uie(n,"INTERNAL",t),removeTokenListener:t=>t4(n.app,t)}}var Wie="@firebase/app-check",Gie="0.8.8";var Qie="app-check",Gz="app-check-internal";function Yie(){ml(new dl(Qie,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return Kie(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Gz).initialize()})),ml(new dl(Gz,n=>{let t=n.getProvider("app-check").getImmediate();return Hie(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ei(Wie,Gie)}Yie();var Xie=["localhost","0.0.0.0","127.0.0.1"],sRe=typeof window<"u"&&Xie.includes(window.location.hostname);var Zie=new ce("angularfire2.auth.use-emulator"),ere=new ce("angularfire2.auth.settings"),tre=new ce("angularfire2.auth.tenant-id"),nre=new ce("angularfire2.auth.langugage-code"),ire=new ce("angularfire2.auth.use-device-language"),rre=new ce("angularfire.auth.persistence"),ore=(n,t,e,i,r,o,s,a)=>tz(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,h]of Object.entries(s))l.settings[u]=h;return a&&l.setPersistence(a),l},[e,i,r,o,s,a]),kE=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,o,s,a,l,u,h,p,_,b){let C=new ye,T=Ye(void 0).pipe(Th(s.outsideAngular),di(()=>o.runOutsideAngular(()=>import("./chunk-JAUTJ6EO.js"))),ht(()=>ez(e,o,i)),ht(k=>ore(k,o,a,u,h,p,l,_)),su({bufferSize:1,refCount:!1}));if(yf(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ye(null);else{T.pipe(ou()).subscribe();let k=T.pipe(di(K=>K.getRedirectResult().then(oe=>oe,()=>null)),FA,su({bufferSize:1,refCount:!1})),U=T.pipe(di(K=>new kr(oe=>({unsubscribe:o.runOutsideAngular(()=>K.onAuthStateChanged(ae=>oe.next(ae),ae=>oe.error(ae),()=>oe.complete()))})))),W=T.pipe(di(K=>new kr(oe=>({unsubscribe:o.runOutsideAngular(()=>K.onIdTokenChanged(ae=>oe.next(ae),ae=>oe.error(ae),()=>oe.complete()))}))));this.authState=k.pipe(_k(U),uf(s.outsideAngular),Th(s.insideAngular)),this.user=k.pipe(_k(W),uf(s.outsideAngular),Th(s.insideAngular)),this.idToken=this.user.pipe(di(K=>K?Ar(K.getIdToken()):Ye(null))),this.idTokenResult=this.user.pipe(di(K=>K?Ar(K.getIdTokenResult()):Ye(null))),this.credential=ri(k,C,this.authState.pipe(st(K=>!K))).pipe(ht(K=>K?.user?K:null),uf(s.outsideAngular),Th(s.insideAngular))}return JU(this,T,o,{spy:{apply:(k,U,W)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&W.then(K=>C.next(K))}}})}static \u0275fac=function(i){return new(i||n)(Ve(dE),Ve(ZU,8),Ve(hs),Ve(Ke),Ve(Us),Ve(Zie,8),Ve(ere,8),Ve(tre,8),Ve(nre,8),Ve(ire,8),Ve(rre,8),Ve(_s,8))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Ng=class n{constructor(t){this.afAuth=t}logout(){return O(this,null,function*(){yield this.afAuth.signOut()})}getUser(){return console.log("getting user"),this.afAuth.authState}isUserLogged(){return new Promise((t,e)=>{this.getUser().subscribe(i=>{i?(console.log("user is logged",i),t(!0)):t(!1)})})}sendPasswordResetEmail(t){return this.afAuth.sendPasswordResetEmail(t)}static \u0275fac=function(e){return new(e||n)(Ve(kE))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var i4=(n,t)=>O(void 0,null,function*(){let e=w(Ng),i=w(gs);return(yield e.isUserLogged())?!0:(i.navigate(["login"]),!1)});function RE(n){return n&&typeof n.connect=="function"&&!(n instanceof rv)}var Fg=function(n){return n[n.REPLACED=0]="REPLACED",n[n.INSERTED=1]="INSERTED",n[n.MOVED=2]="MOVED",n[n.REMOVED=3]="REMOVED",n}(Fg||{}),nb=new ce("_ViewRepeater"),Vg=class{applyChanges(t,e,i,r,o){t.forEachOperation((s,a,l)=>{let u,h;if(s.previousIndex==null){let p=i(s,a,l);u=e.createEmbeddedView(p.templateRef,p.context,p.index),h=Fg.INSERTED}else l==null?(e.remove(a),h=Fg.REMOVED):(u=e.get(a),e.move(u,l),h=Fg.MOVED);o&&o({context:u?.context,operation:h,record:s})})}detach(){}};var AE=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new ye;constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t);t.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};var ME=(()=>{class n{_listeners=[];notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var are=20,kR=(()=>{class n{_ngZone=w(Ke);_platform=w(mn);_document=w(xt,{optional:!0});constructor(){}_scrolled=new ye;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=are){return this._platform.isBrowser?new kr(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(mk(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(st(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=qs(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return gC(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r4=(()=>{class n{elementRef=w(He);scrollDispatcher=w(kR);ngZone=w(Ke);dir=w(Ni,{optional:!0});_destroyed=new ye;_elementScrolled=new kr(e=>this.ngZone.runOutsideAngular(()=>gC(this.elementRef.nativeElement,"scroll").pipe(An(this._destroyed)).subscribe(e)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&wg()!=_l.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),wg()==_l.INVERTED?e.left=e.right:wg()==_l.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;mE()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:i:e=="end"&&(e=s?i:r),s&&wg()==_l.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&wg()==_l.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),cre=20,Of=(()=>{class n{_platform=w(mn);_listeners;_viewportSize;_change=new ye;_document=w(xt,{optional:!0});constructor(){let e=w(Ke),i=w(pd).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=cre){return e>0?this._change.pipe(mk(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})(),ib=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Bh,zh,Bh,zh]})}return n})();var rb=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Tc=class extends rb{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,i,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=o}},ws=class extends rb{templateRef;viewContainerRef;context;injector;constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},AR=class extends rb{element;constructor(t){super(),this.element=t instanceof He?t.nativeElement:t}},qh=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Tc)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof ws)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof AR)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Lg=class extends qh{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,i,r,o){super(),this.outletElement=t,this._appRef=i,this._defaultInjector=r,this._document=o}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,r=i.get(bk,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=SC(t.component,{elementInjector:t.injector||this._defaultInjector||Mt.NULL,environmentInjector:this._appRef.injector,projectableNodes:t.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Cs=(()=>{class n extends qh{_moduleRef=w(bk,{optional:!0});_document=w(xt);_viewContainerRef=w(Mr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new ke;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,r=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let r=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Et]})}return n})();var Es=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})();var o4=mE(),RR=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=br(-this._previousScrollPosition.left),t.style.top=br(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),o4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),o4&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var MR=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(st(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},PE=class{enable(){}disable(){}attach(){}};function PR(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,o=n.right<e.left,s=n.left>e.right;return i||r||o||s})}function s4(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,o=n.left<e.left,s=n.right>e.right;return i||r||o||s})}var OR=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();PR(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ure=(()=>{class n{_scrollDispatcher=w(kR);_viewportRuler=w(Of);_ngZone=w(Ke);_document=w(xt);constructor(){}noop=()=>new PE;close=e=>new MR(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new RR(this._viewportRuler,this._document);reposition=e=>new OR(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dc=class{positionStrategy;scrollStrategy=new PE;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var NR=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var h4=(()=>{class n{_attachedOverlays=[];_document=w(xt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dre=(()=>{class n extends h4{_ngZone=w(Ke);_renderer=w(pd).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hre=(()=>{class n extends h4{_platform=w(mn);_ngZone=w(Ke,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=Fa(e)};_clickListener=e=>{let i=Fa(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(a4(a.overlayElement,i)||a4(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a4(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var m4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),OE=(()=>{class n{_platform=w(mn);_containerElement;_document=w(xt);_styleLoader=w(vi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||jA()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),jA()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(m4)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bg=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new ye;_attachments=new ye;_detachments=new ye;_positionStrategy;_scrollStrategy;_locationChanges=It.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new ye;_outsidePointerEvents=new ye;_renders=new ye;_afterRenderRef;_afterNextRenderRef;constructor(t,e,i,r,o,s,a,l,u,h=!1,p,_){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=h,this._injector=p,this._renderer=_,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=ul(()=>bC(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Xr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ee(ee({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Qe(ee({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=br(this._config.width),t.height=br(this._config.height),t.minWidth=br(this._config.minWidth),t.minHeight=br(this._config.minHeight),t.maxWidth=br(this._config.maxWidth),t.maxHeight=br(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",e=>this._backdropClick.next(e)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(t,"transitionend",e=>{this._disposeBackdrop(e.target)})}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=Cg(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(An(ri(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},c4="cdk-overlay-connected-position-bounding-box",mre=/([A-Za-z%]+)$/,ob=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ye;_resizeSubscription=It.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(c4),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),u=this._getOverlayPoint(l,e,a),h=this._getOverlayFit(u,e,i,a);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(h,u,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:u,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let u of o){let h=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);h>l&&(l=h,a=u)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Nf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(c4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){let o=u4(e),{x:s,y:a}=t,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(s+=l),u&&(a+=u);let h=0-s,p=s+o.width-i.width,_=0-a,b=a+o.height-i.height,C=this._subtractOverflows(o.width,h,p),T=this._subtractOverflows(o.height,_,b),k=C*T;return{visibleArea:k,isCompletelyWithinViewport:o.width*o.height===k,fitsInViewportVertically:T===o.height,fitsInViewportHorizontally:C==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=l4(this._overlayRef.getConfig().minHeight),a=l4(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||s!=null&&s<=r,u=t.fitsInViewportHorizontally||a!=null&&a<=o;return l&&u}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=u4(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),u=Math.max(o.left-i.left-t.x,0),h=0,p=0;return r.width<=o.width?h=u||-s:h=t.x<this._viewportMargin?o.left-i.left-t.x:0,r.height<=o.height?p=l||-a:p=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:h,y:p},{x:t.x+h,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!fre(this._lastScrollVisibility,i)){let r=new NR(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=t.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let b=Math.min(i.bottom-t.y+i.top,t.y),C=this._lastBoundingBoxSize.height;o=b*2,s=t.y-b,o>C&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-C/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,u=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,h,p,_;if(u)_=i.width-t.x+this._viewportMargin*2,h=t.x-this._viewportMargin;else if(l)p=t.x,h=i.right-t.x;else{let b=Math.min(i.right-t.x+i.left,t.x),C=this._lastBoundingBoxSize.width;h=b*2,p=t.x-b,h>C&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-C/2)}return{top:s,left:p,bottom:a,right:_,width:h,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=br(i.height),r.top=br(i.top),r.bottom=br(i.bottom),r.width=br(i.width),r.left=br(i.left),r.right=br(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=br(o)),s&&(r.maxWidth=br(s))}this._lastBoundingBoxSize=i,Nf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Nf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Nf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Nf(i,this._getExactOverlayY(e,t,h)),Nf(i,this._getExactOverlayX(e,t,h))}else i.position="static";let a="",l=this._getOffset(e,"x"),u=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),u&&(a+=`translateY(${u}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=br(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=br(s.maxWidth):o&&(i.maxWidth="")),Nf(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=br(o.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=br(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:s4(t,i),isOriginOutsideView:PR(t,i),isOverlayClipped:s4(e,i),isOverlayOutsideView:PR(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Cg(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof He)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Nf(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function l4(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(mre);return!e||e==="px"?parseFloat(t):null}return n||null}function u4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function fre(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var d4="cdk-global-overlay-wrapper",FR=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(d4),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),u=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),h=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",b="",C="",T="";l?T="flex-start":h==="center"?(T="center",_?C=p:b=p):_?h==="left"||h==="end"?(T="flex-end",b=p):(h==="right"||h==="start")&&(T="flex-start",C=p):h==="left"||h==="start"?(T="flex-start",b=p):(h==="right"||h==="end")&&(T="flex-end",C=p),t.position=this._cssPosition,t.marginLeft=l?"0":b,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":C,e.justifyContent=T,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(d4),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},pre=(()=>{class n{_viewportRuler=w(Of);_document=w(xt);_platform=w(mn);_overlayContainer=w(OE);constructor(){}global(){return new FR}flexibleConnectedTo(e){return new ob(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fi=(()=>{class n{scrollStrategies=w(ure);_overlayContainer=w(OE);_positionBuilder=w(pre);_keyboardDispatcher=w(dre);_injector=w(Mt);_ngZone=w(Ke);_document=w(xt);_directionality=w(Ni);_location=w(_f);_outsideClickDispatcher=w(hre);_animationsModuleType=w(_i,{optional:!0});_idGenerator=w(Hn);_renderer=w(pd).createRenderer(null,null);_appRef;_styleLoader=w(vi);constructor(){}create(e){this._styleLoader.load(m4);let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new Dc(e);return s.direction=s.direction||this._directionality.value,new Bg(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(cl),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ll)),new Lg(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gre=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],f4=new ce("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.reposition()}}),sb=(()=>{class n{elementRef=w(He);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return n})(),VR=(()=>{class n{_overlay=w(Fi);_dir=w(Ni,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=It.EMPTY;_attachSubscription=It.EMPTY;_detachSubscription=It.EMPTY;_positionSubscription=It.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=w(f4);_disposeOnNavigation=!1;_ngZone=w(Ke);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new ke;positionChange=new ke;attach=new ke;detach=new ke;overlayKeydown=new ke;overlayOutsideClick=new ke;constructor(){let e=w(tr),i=w(Mr);this._templatePortal=new ws(e,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=gre);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!Ui(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=Fa(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Dc({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof sb?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof sb?this.origin.elementRef.nativeElement:this.origin instanceof He?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(S$(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",We],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",We],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",We],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",We],push:[2,"cdkConnectedOverlayPush","push",We],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",We]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Ft,Tt]})}return n})();function _re(n){return()=>n.scrollStrategies.reposition()}var yre={provide:f4,deps:[Fi],useFactory:_re},Ac=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Fi,yre],imports:[Bh,Es,ib,ib]})}return n})();var LR=class{_box;_destroyed=new ye;_resizeSubject=new ye;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new kr(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(st(e=>e.some(i=>i.target===t)),su({bufferSize:1,refCount:!0}),An(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},p4=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=w(Ke);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new LR(r)),this._observers.get(r).observe(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vre=["notch"],bre=["matFormFieldNotchedOutline",""],wre=["*"],Cre=["textField"],Ere=["iconPrefixContainer"],xre=["textPrefixContainer"],Ire=["iconSuffixContainer"],Sre=["textSuffixContainer"],Tre=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Dre=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function kre(n,t){n&1&&be(0,"span",21)}function Are(n,t){if(n&1&&(D(0,"label",20),nt(1,1),Ee(2,kre,1,0,"span",21),R()),n&2){let e=Se(2);re("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),tt("for",e._control.disableAutomaticLabeling?null:e._control.id),B(2),kt(!e.hideRequiredMarker&&e._control.required?2:-1)}}function Rre(n,t){if(n&1&&Ee(0,Are,3,5,"label",20),n&2){let e=Se();kt(e._hasFloatingLabel()?0:-1)}}function Mre(n,t){n&1&&be(0,"div",7)}function Pre(n,t){}function Ore(n,t){if(n&1&&Ee(0,Pre,0,0,"ng-template",13),n&2){Se(2);let e=hi(1);re("ngTemplateOutlet",e)}}function Nre(n,t){if(n&1&&(D(0,"div",9),Ee(1,Ore,1,1,null,13),R()),n&2){let e=Se();re("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),B(),kt(e._forceDisplayInfixLabel()?-1:1)}}function Fre(n,t){n&1&&(D(0,"div",10,2),nt(2,2),R())}function Vre(n,t){n&1&&(D(0,"div",11,3),nt(2,3),R())}function Lre(n,t){}function Bre(n,t){if(n&1&&Ee(0,Lre,0,0,"ng-template",13),n&2){Se();let e=hi(1);re("ngTemplateOutlet",e)}}function $re(n,t){n&1&&(D(0,"div",14,4),nt(2,4),R())}function jre(n,t){n&1&&(D(0,"div",15,5),nt(2,5),R())}function Ure(n,t){n&1&&be(0,"div",16)}function zre(n,t){if(n&1&&(D(0,"div",18),nt(1,6),R()),n&2){let e=Se();re("@transitionMessages",e._subscriptAnimationState)}}function qre(n,t){if(n&1&&(D(0,"mat-hint",22),z(1),R()),n&2){let e=Se(2);re("id",e._hintLabelId),B(),Zt(e.hintLabel)}}function Kre(n,t){if(n&1&&(D(0,"div",19),Ee(1,qre,2,2,"mat-hint",22),nt(2,7),be(3,"div",23),nt(4,8),R()),n&2){let e=Se();re("@transitionMessages",e._subscriptAnimationState),B(),kt(e.hintLabel?1:-1)}}var zi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["mat-label"]]})}return n})(),Hre=new ce("MatError");var Kh=(()=>{class n{align="start";id=w(Hn).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(ms("id",r.id),tt("align",null),ut("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),C4=new ce("MatPrefix"),$g=(()=>{class n{set _isTextSelector(e){this._isText=!0}_isText=!1;static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[0,"matTextPrefix","_isTextSelector"]},features:[St([{provide:C4,useExisting:n}])]})}return n})(),E4=new ce("MatSuffix"),jg=(()=>{class n{set _isTextSelector(e){this._isText=!0}_isText=!1;static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[St([{provide:E4,useExisting:n}])]})}return n})(),x4=new ce("FloatingLabelParent"),g4=(()=>{class n{_elementRef=w(He);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=w(p4);_ngZone=w(Ke);_parent=w(x4);_resizeSubscription=new It;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Wre(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&ut("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Wre(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var _4="mdc-line-ripple--active",NE="mdc-line-ripple--deactivating",y4=(()=>{class n{_elementRef=w(He);_cleanupTransitionEnd;constructor(){let e=w(Ke),i=w(Jr);e.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(NE),e.add(_4)}deactivate(){this._elementRef.nativeElement.classList.add(NE)}_handleTransitionEnd=e=>{let i=this._elementRef.nativeElement.classList,r=i.contains(NE);e.propertyName==="opacity"&&r&&i.remove(_4,NE)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),v4=(()=>{class n{_elementRef=w(He);_ngZone=w(Ke);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&Vt(vre,5),i&2){let o;Pe(o=Oe())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&ut("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:bre,ngContentSelectors:wre,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Xt(),be(0,"div",1),D(1,"div",2,0),nt(3),R(),be(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),Gre={transitionMessages:ps("transitionMessages",[Vo("enter",yi({opacity:1,transform:"translateY(0%)"})),vr("void => enter",[yi({opacity:0,transform:"translateY(-5px)"}),Or("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Ug=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n})}return n})();var Ff=new ce("MatFormField"),Qre=new ce("MAT_FORM_FIELD_DEFAULT_OPTIONS"),b4="fill",Yre="auto",w4="fixed",Xre="translateY(-50%)",Fr=(()=>{class n{_elementRef=w(He);_changeDetectorRef=w(qt);_dir=w(Ni);_platform=w(mn);_idGenerator=w(Hn);_defaults=w(Qre,{optional:!0});_animationMode=w(_i,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=j$(zi);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ys(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Yre}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let i=this._appearance,r=e||this._defaults?.appearance||b4;this._appearance=r,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=b4;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||w4}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||w4}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new ye;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=w(Mt);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=nr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let i=this._control,r="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(r+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(Kn([void 0,void 0]),ht(()=>[i.errorState,i.userAriaDescribedBy]),gk(),st(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(An(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),ri(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),bC(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(An(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=nr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,r=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,u=o?.getBoundingClientRect().width??0,h=s?.getBoundingClientRect().width??0,p=this._dir.value==="rtl"?"-1":"1",_=`${a+l}px`,C=`calc(${p} * (${_} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Xre} translateX(${C})
    )`;let T=a+l+u+h;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${T}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(K$(o,r._labelChild,zi,5),jt(o,Ug,5),jt(o,C4,5),jt(o,E4,5),jt(o,Hre,5),jt(o,Kh,5)),i&2){H$();let s;Pe(s=Oe())&&(r._formFieldControl=s.first),Pe(s=Oe())&&(r._prefixChildren=s),Pe(s=Oe())&&(r._suffixChildren=s),Pe(s=Oe())&&(r._errorChildren=s),Pe(s=Oe())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(Vt(Cre,5),Vt(Ere,5),Vt(xre,5),Vt(Ire,5),Vt(Sre,5),Vt(g4,5),Vt(v4,5),Vt(y4,5)),i&2){let o;Pe(o=Oe())&&(r._textField=o.first),Pe(o=Oe())&&(r._iconPrefixContainer=o.first),Pe(o=Oe())&&(r._textPrefixContainer=o.first),Pe(o=Oe())&&(r._iconSuffixContainer=o.first),Pe(o=Oe())&&(r._textSuffixContainer=o.first),Pe(o=Oe())&&(r._floatingLabel=o.first),Pe(o=Oe())&&(r._notchedOutline=o.first),Pe(o=Oe())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){i&2&&ut("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[St([{provide:Ff,useExisting:n},{provide:x4,useExisting:n}])],ngContentSelectors:Dre,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=Pt();Xt(Tre),Ee(0,Rre,1,1,"ng-template",null,0,dv),D(2,"div",6,1),he("click",function(a){return xe(o),Ie(r._control.onContainerClick(a))}),Ee(4,Mre,1,0,"div",7),D(5,"div",8),Ee(6,Nre,2,2,"div",9)(7,Fre,3,0,"div",10)(8,Vre,3,0,"div",11),D(9,"div",12),Ee(10,Bre,1,1,null,13),nt(11),R(),Ee(12,$re,3,0,"div",14)(13,jre,3,0,"div",15),R(),Ee(14,Ure,1,0,"div",16),R(),D(15,"div",17),Ee(16,zre,2,1,"div",18)(17,Kre,5,2,"div",19),R()}if(i&2){let o;B(2),ut("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),B(2),kt(!r._hasOutline()&&!r._control.disabled?4:-1),B(2),kt(r._hasOutline()?6:-1),B(),kt(r._hasIconPrefix?7:-1),B(),kt(r._hasTextPrefix?8:-1),B(2),kt(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),B(2),kt(r._hasTextSuffix?12:-1),B(),kt(r._hasIconSuffix?13:-1),B(),kt(r._hasOutline()?-1:14),B(),ut("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),B(),kt((o=r._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[g4,v4,AC,y4,Kh],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Gre.transitionMessages]},changeDetection:0})}return n})(),Ii=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,Eg,gt]})}return n})();var P4=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(pe(Jr),pe(He))};static \u0275dir=ve({type:n})}return n})(),O4=(()=>{class n extends P4{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,features:[Et]})}return n})(),Qh=new ce("");var Jre={provide:Qh,useExisting:Oo(()=>Ki),multi:!0};function Zre(){let n=ig()?ig().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var eoe=new ce(""),Ki=(()=>{class n extends P4{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Zre())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(pe(Jr),pe(He),pe(eoe,8))};static \u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&he("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[St([Jre]),Et]})}return n})();function Hh(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function N4(n){return n!=null&&typeof n.length=="number"}var xd=new ce(""),KE=new ce(""),toe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Wh=class{static min(t){return noe(t)}static max(t){return ioe(t)}static required(t){return F4(t)}static requiredTrue(t){return roe(t)}static email(t){return ooe(t)}static minLength(t){return soe(t)}static maxLength(t){return aoe(t)}static pattern(t){return coe(t)}static nullValidator(t){return VE(t)}static compose(t){return U4(t)}static composeAsync(t){return z4(t)}};function noe(n){return t=>{if(Hh(t.value)||Hh(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function ioe(n){return t=>{if(Hh(t.value)||Hh(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function F4(n){return Hh(n.value)?{required:!0}:null}function roe(n){return n.value===!0?null:{required:!0}}function ooe(n){return Hh(n.value)||toe.test(n.value)?null:{email:!0}}function soe(n){return t=>Hh(t.value)||!N4(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function aoe(n){return t=>N4(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function coe(n){if(!n)return VE;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Hh(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function VE(n){return null}function V4(n){return n!=null}function L4(n){return CC(n)?Ar(n):n}function B4(n){let t={};return n.forEach(e=>{t=e!=null?ee(ee({},t),e):t}),Object.keys(t).length===0?null:t}function $4(n,t){return t.map(e=>e(n))}function loe(n){return!n.validate}function j4(n){return n.map(t=>loe(t)?t:e=>t.validate(e))}function U4(n){if(!n)return null;let t=n.filter(V4);return t.length==0?null:function(e){return B4($4(e,t))}}function qR(n){return n!=null?U4(j4(n)):null}function z4(n){if(!n)return null;let t=n.filter(V4);return t.length==0?null:function(e){let i=$4(e,t).map(L4);return pC(i).pipe(ht(B4))}}function KR(n){return n!=null?z4(j4(n)):null}function I4(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function q4(n){return n._rawValidators}function K4(n){return n._rawAsyncValidators}function BR(n){return n?Array.isArray(n)?n:[n]:[]}function LE(n,t){return Array.isArray(n)?n.includes(t):n===t}function S4(n,t){let e=BR(t);return BR(n).forEach(r=>{LE(e,r)||e.push(r)}),e}function T4(n,t){return BR(t).filter(e=>!LE(n,e))}var BE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=KR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},gu=class extends BE{name;get formDirective(){return null}get path(){return null}},Rc=class extends BE{_parent=null;name=null;valueAccessor=null},$E=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uoe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gMe=Qe(ee({},uoe),{"[class.ng-submitted]":"isSubmitted"}),Hi=(()=>{class n extends $E{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(pe(Rc,2))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ut("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Et]})}return n})(),no=(()=>{class n extends $E{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(pe(gu,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ut("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Et]})}return n})();var ab="VALID",FE="INVALID",zg="PENDING",cb="DISABLED",Gh=class{},jE=class extends Gh{value;source;constructor(t,e){super(),this.value=t,this.source=e}},ub=class extends Gh{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},db=class extends Gh{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},qg=class extends Gh{status;source;constructor(t,e){super(),this.status=t,this.source=e}},$R=class extends Gh{source;constructor(t){super(),this.source=t}},jR=class extends Gh{source;constructor(t){super(),this.source=t}};function HR(n){return(HE(n)?n.validators:n)||null}function doe(n){return Array.isArray(n)?qR(n):n||null}function WR(n,t){return(HE(t)?t.asyncValidators:n)||null}function hoe(n){return Array.isArray(n)?KR(n):n||null}function HE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function H4(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new oi(1e3,"");if(!i[e])throw new oi(1001,"")}function W4(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new oi(1002,"")})}var Kg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ul(this.statusReactive)}set status(t){ul(()=>this.statusReactive.set(t))}_status=nr(()=>this.statusReactive());statusReactive=Le(void 0);get valid(){return this.status===ab}get invalid(){return this.status===FE}get pending(){return this.status==zg}get disabled(){return this.status===cb}get enabled(){return this.status!==cb}errors;get pristine(){return ul(this.pristineReactive)}set pristine(t){ul(()=>this.pristineReactive.set(t))}_pristine=nr(()=>this.pristineReactive());pristineReactive=Le(!0);get dirty(){return!this.pristine}get touched(){return ul(this.touchedReactive)}set touched(t){ul(()=>this.touchedReactive.set(t))}_touched=nr(()=>this.touchedReactive());touchedReactive=Le(!1);get untouched(){return!this.touched}_events=new ye;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(S4(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(S4(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(T4(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(T4(t,this._rawAsyncValidators))}hasValidator(t){return LE(this._rawValidators,t)}hasAsyncValidator(t){return LE(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Qe(ee({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new db(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new db(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Qe(ee({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ub(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new ub(!0,i))}markAsPending(t={}){this.status=zg;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new qg(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Qe(ee({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=cb,this.errors=null,this._forEachChild(r=>{r.disable(Qe(ee({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new jE(this.value,i)),this._events.next(new qg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Qe(ee({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ab,this._forEachChild(i=>{i.enable(Qe(ee({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Qe(ee({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ab||this.status===zg)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new jE(this.value,e)),this._events.next(new qg(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Qe(ee({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cb:ab}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=zg,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=L4(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new qg(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?cb:this.errors?FE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zg)?zg:this._anyControlsHaveStatus(FE)?FE:ab}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new ub(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new db(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){HE(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=doe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=hoe(this._rawAsyncValidators)}},bi=class extends Kg{constructor(t,e,i){super(HR(e),WR(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){W4(this,!0,t),Object.keys(t).forEach(i=>{H4(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var UR=class extends bi{};var hb=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>WE}),WE="always";function G4(n,t){return[...t.path,n]}function UE(n,t,e=WE){GR(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),foe(n,t),goe(n,t),poe(n,t),moe(n,t)}function D4(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),qE(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function zE(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function moe(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function GR(n,t){let e=q4(n);t.validator!==null?n.setValidators(I4(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=K4(n);t.asyncValidator!==null?n.setAsyncValidators(I4(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();zE(t._rawValidators,r),zE(t._rawAsyncValidators,r)}function qE(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=q4(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=K4(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return zE(t._rawValidators,i),zE(t._rawAsyncValidators,i),e}function foe(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Q4(n,t)})}function poe(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Q4(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Q4(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function goe(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Y4(n,t){n==null,GR(n,t)}function _oe(n,t){return qE(n,t)}function X4(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function yoe(n){return Object.getPrototypeOf(n.constructor)===O4}function J4(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Z4(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Ki?e=o:yoe(o)?i=o:r=o}),r||i||e||null}function voe(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var boe={provide:gu,useExisting:Oo(()=>Hg)},lb=Promise.resolve(),Hg=(()=>{class n extends gu{callSetDisabledState;get submitted(){return ul(this.submittedReactive)}_submitted=nr(()=>this.submittedReactive());submittedReactive=Le(!1);_directives=new Set;form;ngSubmit=new ke;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new bi({},qR(e),KR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){lb.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),UE(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){lb.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){lb.then(()=>{let i=this._findContainer(e.path),r=new bi({});Y4(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){lb.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){lb.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),J4(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(pe(xd,10),pe(KE,10),pe(hb,8))};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&he("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[St([boe]),Et]})}return n})();function k4(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function A4(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qi=class extends Kg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(HR(e),WR(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),HE(e)&&(e.nonNullable||e.initialValueIsDefault)&&(A4(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){k4(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){k4(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){A4(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var woe=n=>n instanceof qi;var Coe={provide:Rc,useExisting:Oo(()=>Vf)},R4=Promise.resolve(),Vf=(()=>{class n extends Rc{_changeDetectorRef;callSetDisabledState;control=new qi;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ke;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Z4(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),X4(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){UE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){R4.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&We(i);R4.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?G4(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(pe(gu,9),pe(xd,10),pe(KE,10),pe(Qh,10),pe(qt,8),pe(hb,8))};static \u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[St([Coe]),Et,Tt]})}return n})(),io=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Eoe={provide:Qh,useExisting:Oo(()=>QR),multi:!0},QR=(()=>{class n extends O4{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&he("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[St([Eoe]),Et]})}return n})();var eq=new ce("");var xoe={provide:gu,useExisting:Oo(()=>Wi)},Wi=(()=>{class n extends gu{callSetDisabledState;get submitted(){return ul(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=nr(()=>this._submittedReactive());_submittedReactive=Le(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ke;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return UE(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){D4(e.control||null,e,!1),voe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),J4(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new $R(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new jR(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(D4(i||null,e),woe(r)&&(UE(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Y4(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&_oe(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GR(this.form,this),this._oldForm&&qE(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(pe(xd,10),pe(KE,10),pe(hb,8))};static \u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&he("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[St([xoe]),Et,Tt]})}return n})();var Ioe={provide:Rc,useExisting:Oo(()=>Hr)},Hr=(()=>{class n extends Rc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new ke;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Z4(this,o)}ngOnChanges(e){this._added||this._setUpControl(),X4(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return G4(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(pe(gu,13),pe(xd,10),pe(KE,10),pe(Qh,10),pe(eq,8))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[St([Ioe]),Et,Tt]})}return n})();var Soe=(()=>{class n{_validator=VE;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):VE,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,features:[Tt]})}return n})();var Toe={provide:xd,useExisting:Oo(()=>YR),multi:!0};var YR=(()=>{class n extends Soe{required;inputName="required";normalizeInput=We;createValidator=e=>F4;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&tt("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[St([Toe]),Et]})}return n})();var tq=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})(),zR=class extends Kg{constructor(t,e,i){super(HR(e),WR(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){W4(this,!1,t),t.forEach((i,r)=>{H4(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function M4(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var cr=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return M4(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new bi(r,o)}record(e,i=null){let r=this._reduceControls(e);return new UR(r,i)}control(e,i,r){let o={};return this.useNonNullable?(M4(i)?o=i:(o.validators=i,o.asyncValidators=r),new qi(e,Qe(ee({},o),{nonNullable:!0}))):new qi(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new zR(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof qi)return e;if(e instanceof Kg)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ai=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:hb,useValue:e.callSetDisabledState??WE}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[tq]})}return n})(),Gi=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:eq,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:hb,useValue:e.callSetDisabledState??WE}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[tq]})}return n})();var Doe=["trigger"],koe=["panel"],Aoe=[[["mat-select-trigger"]],"*"],Roe=["mat-select-trigger","*"];function Moe(n,t){if(n&1&&(D(0,"span",4),z(1),R()),n&2){let e=Se();B(),Zt(e.placeholder)}}function Poe(n,t){n&1&&nt(0)}function Ooe(n,t){if(n&1&&(D(0,"span",11),z(1),R()),n&2){let e=Se(2);B(),Zt(e.triggerValue)}}function Noe(n,t){if(n&1&&(D(0,"span",5),Ee(1,Poe,1,0)(2,Ooe,2,1,"span",11),R()),n&2){let e=Se();B(),kt(e.customTrigger?1:2)}}function Foe(n,t){if(n&1){let e=Pt();D(0,"div",12,1),he("@transformPanel.done",function(r){xe(e);let o=Se();return Ie(o._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){xe(e);let o=Se();return Ie(o._handleKeydown(r))}),nt(2,1),R()}if(n&2){let e=Se();q$("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),re("ngClass",e.panelClass)("@transformPanel","showing"),tt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var Voe={transformPanelWrap:ps("transformPanelWrap",[vr("* => void",yv("@transformPanel",[_v()],{optional:!0}))]),transformPanel:ps("transformPanel",[Vo("void",yi({opacity:0,transform:"scale(1, 0.8)"})),vr("void => showing",Or("120ms cubic-bezier(0, 0, 0.2, 1)",yi({opacity:1,transform:"scale(1, 1)"}))),vr("* => void",Or("100ms linear",yi({opacity:0})))])};var nq=new ce("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.reposition()}});function Loe(n){return()=>n.scrollStrategies.reposition()}var Boe=new ce("MAT_SELECT_CONFIG"),$oe={provide:nq,deps:[Fi],useFactory:Loe},joe=new ce("MatSelectTrigger"),XR=class{source;value;constructor(t,e){this.source=t,this.value=e}},Wg=(()=>{class n{_viewportRuler=w(Of);_changeDetectorRef=w(qt);_elementRef=w(He);_dir=w(Ni,{optional:!0});_idGenerator=w(Hn);_parentFormField=w(Ff,{optional:!0});ngControl=w(Rc,{self:!0,optional:!0});_liveAnnouncer=w(vE);_defaultOptions=w(Boe,{optional:!0});_initialized=new ye;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let r=this.panel.nativeElement,o=kz(e,this.options,this.optionGroups),s=i._getHostElement();e===0&&o===1?r.scrollTop=0:r.scrollTop=Az(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new XR(this,e)}_scrollStrategyFactory=w(nq);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new ye;_errorStateTracker;stateChanges=new ye;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new ye;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Wh.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=md(()=>{let e=this.options;return e?e.changes.pipe(Kn(e),di(()=>ri(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(di(()=>this.optionSelectionChanges))});openedChange=new ke;_openedStream=this.openedChange.pipe(st(e=>e),ht(()=>{}));_closedStream=this.openedChange.pipe(st(e=>!e),ht(()=>{}));selectionChange=new ke;valueChange=new ke;constructor(){let e=w(Mf),i=w(Hg,{optional:!0}),r=w(Wi,{optional:!0}),o=w(new Cc("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new $h(e,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new AE(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ru(),An(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(An(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(An(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Kn(null),An(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&WA(this._trackedModal,"aria-owns",i),fz(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;WA(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!Ui(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,r=e.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!Ui(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(e),this._multiple&&o&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(xi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof sb?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new yE(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=ri(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(An(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),ri(...this.options.map(i=>i._stateChanges)).pipe(An(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let r=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&(jt(o,joe,5),jt(o,jh,5),jt(o,hR,5)),i&2){let s;Pe(s=Oe())&&(r.customTrigger=s.first),Pe(s=Oe())&&(r.options=s),Pe(s=Oe())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(Vt(Doe,5),Vt(koe,5),Vt(VR,5)),i&2){let o;Pe(o=Oe())&&(r.trigger=o.first),Pe(o=Oe())&&(r.panel=o.first),Pe(o=Oe())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){i&1&&he("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&(tt("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),ut("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",We],disableRipple:[2,"disableRipple","disableRipple",We],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Eo(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",We],placeholder:"placeholder",required:[2,"required","required",We],multiple:[2,"multiple","multiple",We],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",We],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Eo],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",We]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[St([{provide:Ug,useExisting:n},{provide:dR,useExisting:n}]),Ft,Tt],ngContentSelectors:Roe,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=Pt();Xt(Aoe),D(0,"div",2,0),he("click",function(){return xe(o),Ie(r.open())}),D(3,"div",3),Ee(4,Moe,2,1,"span",4)(5,Noe,3,1,"span",5),R(),D(6,"div",6)(7,"div",7),bo(),D(8,"svg",8),be(9,"path",9),R()()()(),Ee(10,Foe,3,9,"ng-template",10),he("backdropClick",function(){return xe(o),Ie(r.close())})("attach",function(){return xe(o),Ie(r._onAttached())})("detach",function(){return xe(o),Ie(r.close())})}if(i&2){let o=hi(1);B(3),tt("id",r._valueId),B(),kt(r.empty?4:5),B(6),re("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[sb,VR,DC],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[Voe.transformPanel]},changeDetection:0})}return n})();var ro=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[$oe],imports:[Ac,mR,gt,zh,Ii,mR,gt]})}return n})();var Uoe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return n})(),iq=zs({passive:!0}),rq=(()=>{class n{_platform=w(mn);_ngZone=w(Ke);_styleLoader=w(vi);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return al;this._styleLoader.load(Uoe);let i=qs(e),r=this._monitoredElements.get(i);if(r)return r.subject;let o=new ye,s="cdk-text-field-autofilled",a=l=>{l.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,iq),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",a,iq)}}),o}stopMonitoring(e){let i=qs(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oq=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})();var ZR=new ce("MAT_INPUT_VALUE_ACCESSOR"),zoe=["button","checkbox","file","hidden","image","radio","range","reset","submit"],qoe=new ce("MAT_INPUT_CONFIG"),lr=(()=>{class n{_elementRef=w(He);_platform=w(mn);ngControl=w(Rc,{optional:!0,self:!0});_autofillMonitor=w(rq);_ngZone=w(Ke);_formField=w(Ff,{optional:!0});_renderer=w(Jr);_uid=w(Hn).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=w(qoe,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ye;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=ys(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Wh.required)??!1}set required(e){this._required=ys(e)}_required;get type(){return this._type}set type(e){let i=this._type;this._type=e||"text",this._validateType(),!this._isTextarea&&$A().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._type!==i&&this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=ys(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>$A().has(e));constructor(){let e=w(Hg,{optional:!0}),i=w(Wi,{optional:!0}),r=w(Mf),o=w(ZR,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();o?pf(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new $h(r,this.ngControl,i,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&IC(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){zoe.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(e){let i=this._elementRef.nativeElement,r=i.getAttribute("aria-describedby"),o;if(r){let s=this._formFieldDescribedBy||e;o=e.concat(r.split(" ").filter(a=>a&&!s.includes(a)))}else o=e;this._formFieldDescribedBy=e,o.length?i.setAttribute("aria-describedby",o.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let i=e.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){this._cleanupWebkitWheel?.(),this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._cleanupWebkitWheel=this._renderer.listen(this._elementRef.nativeElement,"wheel",this._webkitBlinkWheelListener))}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,r){i&1&&he("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(ms("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),tt("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),ut("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",We]},exportAs:["matInput"],features:[St([{provide:Ug,useExisting:n}]),Ft,Tt]})}return n})(),Ai=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,Ii,Ii,oq,gt]})}return n})();var Koe=["*"],GE;function Hoe(){if(GE===void 0&&(GE=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(GE=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return GE}function mb(n){return Hoe()?.createHTML(n)||n}function sq(n){return Error(`Unable to find icon with the name "${n}"`)}function Woe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function aq(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function cq(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Id=class{url;svgText;options;svgElement;constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},Goe=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new Id(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){let s=this._sanitizer.sanitize(Pa.HTML,r);if(!s)throw cq(r);let a=mb(s);return this._addSvgIconConfig(e,i,new Id("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Id(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let o=this._sanitizer.sanitize(Pa.HTML,i);if(!o)throw cq(i);let s=mb(o);return this._addSvgIconSetConfig(e,new Id("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(Pa.RESOURCE_URL,e);if(!i)throw aq(e);let r=this._cachedIconsByUrl.get(i);return r?Ye(QE(r)):this._loadSvgIconFromConfig(new Id(e,null)).pipe(Di(o=>this._cachedIconsByUrl.set(i,o)),ht(o=>QE(o)))}getNamedSvgIcon(e,i=""){let r=lq(i,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):df(sq(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Ye(QE(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ht(i=>QE(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return Ye(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(fd(a=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Pa.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(u)),Ye(null)})));return pC(o).pipe(ht(()=>{let s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw sq(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Di(i=>e.svgText=i),ht(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Ye(null):this._fetchIcon(e).pipe(Di(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(mb("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(mb("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw Woe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(Pa.RESOURCE_URL,i);if(!s)throw aq(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(ht(u=>mb(u)),kh(()=>this._inProgressUrlFetches.delete(s)),I$());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(lq(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,e);if(o)return Qoe(o)?new Id(o.url,null,o.options):new Id(o,null)}}static \u0275fac=function(i){return new(i||n)(Ve(Ef,8),Ve(Qk),Ve(xt,8),Ve(ff))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QE(n){return n.cloneNode(!0)}function lq(n,t){return n+":"+t}function Qoe(n){return!!(n.url&&n.options)}var Yoe=new ce("MAT_ICON_DEFAULT_OPTIONS"),Xoe=new ce("mat-icon-location",{providedIn:"root",factory:Joe});function Joe(){let n=w(xt),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var uq=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Zoe=uq.map(n=>`[${n}]`).join(", "),ese=/^url\(['"]?#(.*?)['"]?\)$/,ci=(()=>{class n{_elementRef=w(He);_iconRegistry=w(Goe);_location=w(Xoe);_errorHandler=w(ff);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=It.EMPTY;constructor(){let e=w(new Cc("aria-hidden"),{optional:!0}),i=w(Yoe,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(Zoe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)uq.forEach(s=>{let a=i[o],l=a.getAttribute(s),u=l?l.match(ese):null;if(u){let h=r.get(a);h||(h=[],r.set(a,h)),h.push({name:s,value:u[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(xi(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(tt("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),_r(r.color?"mat-"+r.color:""),ut("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",We],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ft],ngContentSelectors:Koe,decls:1,vars:0,template:function(i,r){i&1&&(Xt(),nt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),Ri=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})();var dq=(()=>{class n{get vertical(){return this._vertical}set vertical(e){this._vertical=ys(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=ys(e)}_inset=!1;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){i&2&&(tt("aria-orientation",r.vertical?"vertical":"horizontal"),ut("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,r){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),Pc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})();function nse(n,t){if(n&1&&(D(0,"div",9),z(1),R()),n&2){let e=Se();B(),Zt(e.errorMessage)}}var YE=class n{constructor(t,e,i){this.afAuth=t;this.cdr=e;this.router=i;this.afAuth.authState.subscribe(r=>{this.user=r,r&&(console.log(this.user.email),console.log(this.user.displayName),console.log(this.user.photoURL),console.log(this.user.emailVerified),console.log(this.user.isAnonymous),console.log(this.user.uid),console.log(this.user.providerData),console.log(this.user.stsTokenManager),console.log(this.user.multiFactor),console.log(this.user.tenantId))})}signup(){console.log("signup"),this.router.navigate(["signup"])}user;email="";password="";error=!1;errorMessage="";login(){console.log("login"),console.log(this.afAuth),this.afAuth.signInWithEmailAndPassword(this.email,this.password).catch(t=>{console.log(t.message),this.error=!0,this.errorMessage=t.message,this.cdr.detectChanges()}).then(t=>{console.log(t),t?(this.error=!1,this.errorMessage="",window.location.reload()):console.log("login failed")})}logout(){this.afAuth.signOut().catch(t=>console.error(t))}ngOnInit(){}onSubmit(){}static \u0275fac=function(e){return new(e||n)(pe(kE),pe(qt),pe(gs))};static \u0275cmp=le({type:n,selectors:[["app-login"]],decls:24,vars:3,consts:[[1,"login-wrapper"],[1,"login-header"],["appearance","fill"],["type","email","matInput","","placeholder","Your email",3,"ngModelChange","ngModel"],["matPrefix",""],["type","password","matInput","","placeholder","Your password",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"action-container"],["mat-raised-button","",3,"click"],[1,"error"]],template:function(e,i){e&1&&(D(0,"section")(1,"mat-card",0)(2,"mat-card-header")(3,"h2",1),z(4," Login "),R()(),D(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),z(8,"Enter email"),R(),D(9,"input",3),bt("ngModelChange",function(o){return vt(i.email,o)||(i.email=o),o}),R(),D(10,"mat-icon",4),z(11,"email"),R()(),D(12,"mat-form-field",2)(13,"mat-label"),z(14,"Enter password"),R(),D(15,"input",5),bt("ngModelChange",function(o){return vt(i.password,o)||(i.password=o),o}),R(),D(16,"mat-icon",4),z(17,"password"),R()(),Ee(18,nse,2,1,"div",6),R(),D(19,"div",7)(20,"button",8),he("click",function(){return i.login()}),z(21,"Login"),R(),D(22,"button",8),he("click",function(){return i.signup()}),z(23,"SignUp"),R()()()()),e&2&&(B(9),yt("ngModel",i.email),B(6),yt("ngModel",i.password),B(3),re("ngIf",i.error))},dependencies:[Ii,Fr,zi,$g,Ai,lr,ro,Ri,ci,Pg,Rg,IE,Mg,Pc,Ht,rn,mv,kC,ai,Ki,Hi,Vf],styles:[".login-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:column;max-width:320px;padding:20px;margin:0 auto}.action-container[_ngcontent-%COMP%]{margin-top:10px;display:flex;align-self:center}.error[_ngcontent-%COMP%]{background:pink;padding:10px;font-size:14px;border:1px solid red}.mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;padding:0;margin-bottom:10px;text-align:center;align-self:center}.mat-mdc-card-header[_ngcontent-%COMP%]{background:transparent!important}h2.login-header[_ngcontent-%COMP%], .login-header[_ngcontent-%COMP%]{color:#546e7a!important}"],changeDetection:0})};var XE=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-test"]],decls:2,vars:0,template:function(e,i){e&1&&(D(0,"p"),z(1,"test works!"),R())},encapsulation:2})};var rse=["mat-calendar-body",""];function ose(n,t){return this._trackRow(t)}var vq=(n,t)=>t.id;function sse(n,t){if(n&1&&(D(0,"tr",0)(1,"td",3),z(2),R()()),n&2){let e=Se();B(),Co("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),tt("colspan",e.numCols),B(),Ut(" ",e.label," ")}}function ase(n,t){if(n&1&&(D(0,"td",3),z(1),R()),n&2){let e=Se(2);Co("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),tt("colspan",e._firstRowOffset),B(),Ut(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function cse(n,t){if(n&1){let e=Pt();D(0,"td",6)(1,"button",7),he("click",function(r){let o=xe(e).$implicit,s=Se(2);return Ie(s._cellClicked(o,r))})("focus",function(r){let o=xe(e).$implicit,s=Se(2);return Ie(s._emitActiveDateChange(o,r))}),D(2,"span",8),z(3),R(),be(4,"span",9),R()()}if(n&2){let e=t.$implicit,i=t.$index,r=Se().$index,o=Se();Co("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),tt("data-mat-row",r)("data-mat-col",i),B(),ut("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(r,i))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),re("ngClass",e.cssClasses)("tabindex",o._isActiveCell(r,i)?0:-1),tt("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null)("aria-describedby",o._getDescribedby(e.compareValue)),B(),ut("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),B(),Ut(" ",e.displayValue," ")}}function lse(n,t){if(n&1&&(D(0,"tr",1),Ee(1,ase,2,6,"td",4),No(2,cse,5,48,"td",5,vq),R()),n&2){let e=t.$implicit,i=t.$index,r=Se();B(),kt(i===0&&r._firstRowOffset?1:-1),B(),Fo(e)}}function use(n,t){if(n&1&&(D(0,"th",2)(1,"span",6),z(2),R(),D(3,"span",3),z(4),R()()),n&2){let e=t.$implicit;B(2),Zt(e.long),B(2),Zt(e.narrow)}}var dse=["*"];function hse(n,t){}function mse(n,t){if(n&1){let e=Pt();D(0,"mat-month-view",4),bt("activeDateChange",function(r){xe(e);let o=Se();return vt(o.activeDate,r)||(o.activeDate=r),Ie(r)}),he("_userSelection",function(r){xe(e);let o=Se();return Ie(o._dateSelected(r))})("dragStarted",function(r){xe(e);let o=Se();return Ie(o._dragStarted(r))})("dragEnded",function(r){xe(e);let o=Se();return Ie(o._dragEnded(r))}),R()}if(n&2){let e=Se();yt("activeDate",e.activeDate),re("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function fse(n,t){if(n&1){let e=Pt();D(0,"mat-year-view",5),bt("activeDateChange",function(r){xe(e);let o=Se();return vt(o.activeDate,r)||(o.activeDate=r),Ie(r)}),he("monthSelected",function(r){xe(e);let o=Se();return Ie(o._monthSelectedInYearView(r))})("selectedChange",function(r){xe(e);let o=Se();return Ie(o._goToDateInView(r,"month"))}),R()}if(n&2){let e=Se();yt("activeDate",e.activeDate),re("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function pse(n,t){if(n&1){let e=Pt();D(0,"mat-multi-year-view",6),bt("activeDateChange",function(r){xe(e);let o=Se();return vt(o.activeDate,r)||(o.activeDate=r),Ie(r)}),he("yearSelected",function(r){xe(e);let o=Se();return Ie(o._yearSelectedInMultiYearView(r))})("selectedChange",function(r){xe(e);let o=Se();return Ie(o._goToDateInView(r,"year"))}),R()}if(n&2){let e=Se();yt("activeDate",e.activeDate),re("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function gse(n,t){}var _se=["button"],yse=[[["","matDatepickerToggleIcon",""]]],vse=["[matDatepickerToggleIcon]"];function bse(n,t){n&1&&(bo(),D(0,"svg",2),be(1,"path",3),R())}var Yg=(()=>{class n{changes=new ye;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wse=0,pb=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=wse++;constructor(t,e,i,r,o={},s=t,a){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=o,this.compareValue=s,this.rawValue=a}},hq=zs({passive:!1,capture:!0}),Yh=zs({passive:!0,capture:!0}),JE=zs({passive:!0}),Qg=(()=>{class n{_elementRef=w(He);_ngZone=w(Ke);_platform=w(mn);_intl=w(Yg);_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new ke;previewChange=new ke;activeDateChange=new ke;dragStarted=new ke;dragEnded=new ke;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=w(Mt);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=w(Hn);this._startDateLabelId=e.getId("mat-calendar-body-start-"),this._endDateLabelId=e.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=e.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=e.getId("mat-calendar-body-comparison-end-"),w(vi).load(vs),this._ngZone.runOutsideAngular(()=>{let i=this._elementRef.nativeElement;i.addEventListener("touchmove",this._touchmoveHandler,hq),i.addEventListener("mouseenter",this._enterHandler,Yh),i.addEventListener("focus",this._enterHandler,Yh),i.addEventListener("mouseleave",this._leaveHandler,Yh),i.addEventListener("blur",this._leaveHandler,Yh),i.addEventListener("mousedown",this._mousedownHandler,JE),i.addEventListener("touchstart",this._mousedownHandler,JE),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let i=e.numCols,{rows:r,numCols:o}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?o-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/o}%`),(i||!this._cellWidth)&&(this._cellWidth=`${100/o}%`)}ngOnDestroy(){let e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,hq),e.removeEventListener("mouseenter",this._enterHandler,Yh),e.removeEventListener("focus",this._enterHandler,Yh),e.removeEventListener("mouseleave",this._leaveHandler,Yh),e.removeEventListener("blur",this._leaveHandler,Yh),e.removeEventListener("mousedown",this._mousedownHandler,JE),e.removeEventListener("touchstart",this._mousedownHandler,JE),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){Xr(()=>{setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return n1(e,this.startValue,this.endValue)}_isRangeEnd(e){return i1(e,this.startValue,this.endValue)}_isInRange(e){return r1(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return n1(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[i][r-1];if(!o){let s=this.rows[i-1];o=s&&s[s.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[i][r+1];if(!o){let s=this.rows[i+1];o=s&&s[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return i1(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return r1(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return n1(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return i1(e,this.previewStart,this.previewEnd)}_isInPreview(e){return r1(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let i=this._getCellFromElement(e.target);i&&this._ngZone.run(()=>this.previewChange.emit({value:i.enabled?i:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let i=mq(e),r=i?this._getCellFromElement(i):null;i!==e.target&&(this._didDragSinceMouseDown=!0),t1(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:r?.enabled?r:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let i=e.target&&this._getCellFromElement(e.target);!i||!this._isInRange(i.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:i.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let i=t1(e.target);if(!i){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}i.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let r=this._getCellFromElement(i);this.dragEnded.emit({value:r?.rawValue??null,event:e})})};_touchendHandler=e=>{let i=mq(e);i&&this._mouseupHandler({target:i})};_getCellFromElement(e){let i=t1(e);if(i){let r=i.getAttribute("data-mat-row"),o=i.getAttribute("data-mat-col");if(r&&o)return this.rows[parseInt(r)][parseInt(o)]}return null}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[Tt],attrs:rse,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,r){i&1&&(Ee(0,sse,3,6,"tr",0),No(1,lse,4,1,"tr",1,ose,!0),D(3,"span",2),z(4),R(),D(5,"span",2),z(6),R(),D(7,"span",2),z(8),R(),D(9,"span",2),z(10),R()),i&2&&(kt(r._firstRowOffset<r.labelMinRequiredCells?0:-1),B(),Fo(r.rows),B(2),re("id",r._startDateLabelId),B(),Ut(" ",r.startDateAccessibleName,`
`),B(),re("id",r._endDateLabelId),B(),Ut(" ",r.endDateAccessibleName,`
`),B(),re("id",r._comparisonStartDateLabelId),B(),Ek(" ",r.comparisonDateAccessibleName," ",r.startDateAccessibleName,`
`),B(),re("id",r._comparisonEndDateLabelId),B(),Ek(" ",r.comparisonDateAccessibleName," ",r.endDateAccessibleName,`
`))},dependencies:[DC],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}'],encapsulation:2,changeDetection:0})}return n})();function e1(n){return n?.nodeName==="TD"}function t1(n){let t;return e1(n)?t=n:e1(n.parentNode)?t=n.parentNode:e1(n.parentNode?.parentNode)&&(t=n.parentNode.parentNode),t?.getAttribute("data-mat-row")!=null?t:null}function n1(n,t,e){return e!==null&&t!==e&&n<e&&n===t}function i1(n,t,e){return t!==null&&t!==e&&n>=t&&n===e}function r1(n,t,e,i){return i&&t!==null&&e!==null&&t!==e&&n>=t&&n<=e}function mq(n){let t=n.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}var Oc=class{start;end;_disableStructuralEquivalency;constructor(t,e){this.start=t,this.end=e}},gb=(()=>{class n{selection;_adapter;_selectionChanged=new ye;selectionChanged=this._selectionChanged;constructor(e,i){this.selection=e,this._adapter=i,this.selection=e}updateSelection(e,i){let r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(i){Yp()};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Cse=(()=>{class n extends gb{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new n(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(i){return new(i||n)(Ve(to))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function Ese(n,t){return n||new Cse(t)}var bq={provide:gb,deps:[[new Rn,new ov,gb],to],useFactory:Ese};var wq=new ce("MAT_DATE_RANGE_SELECTION_STRATEGY");var o1=7,xse=0,fq=(()=>{class n{_changeDetectorRef=w(qt);_dateFormats=w(wd,{optional:!0});_dateAdapter=w(to,{optional:!0});_dir=w(Ni,{optional:!0});_rangeStrategy=w(wq,{optional:!0});_rerenderSubscription=It.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Oc?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new ke;_userSelection=new ke;dragStarted=new ke;dragEnded=new ke;activeDateChange=new ke;_matCalendarBody;_monthLabel;_weeks;_firstWeekOffset;_rangeStart;_rangeEnd;_comparisonRangeStart;_comparisonRangeEnd;_previewStart;_previewEnd;_isRange;_todayDate;_weekdays;constructor(){w(vi).load(pu),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Kn(null)).subscribe(()=>this._init())}ngOnChanges(e){let i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let i=e.value,r=this._getDateFromDayOfMonth(i),o,s;this._selected instanceof Oc?(o=this._getDateInCurrentMonth(this._selected.start),s=this._getDateInCurrentMonth(this._selected.end)):o=s=this._getDateInCurrentMonth(this._selected),(o!==i||s!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!Ui(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(o1+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%o1,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){let r=i?i.rawValue:null,o=this._rangeStrategy.createPreview(r,this.selected,e);if(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end),this.activeDrag&&r){let s=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,e);s&&(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow"),o=this._dateAdapter.getDayOfWeekNames("long").map((s,a)=>({long:s,narrow:i[a],id:xse++}));this._weekdays=o.slice(e).concat(o.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,o=this._firstWeekOffset;r<e;r++,o++){o==o1&&(this._weeks.push([]),o=0);let s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),a=this._shouldEnableDate(s),l=this._dateAdapter.format(s,this._dateFormats.display.dateA11yLabel),u=this.dateClass?this.dateClass(s,"month"):void 0;this._weeks[this._weeks.length-1].push(new pb(r+1,i[r],l,a,u,this._getCellCompareValue(s),s))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!!(e&&i&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){let i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(i,r,o).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof Oc?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-month-view"]],viewQuery:function(i,r){if(i&1&&Vt(Qg,5),i&2){let o;Pe(o=Oe())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[Tt],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,r){i&1&&(D(0,"table",0)(1,"thead",1)(2,"tr"),No(3,use,5,2,"th",2,vq),R(),D(5,"tr",3),be(6,"th",4),R()(),D(7,"tbody",5),he("selectedValueChange",function(s){return r._dateSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("previewChange",function(s){return r._previewChanged(s)})("dragStarted",function(s){return r.dragStarted.emit(s)})("dragEnded",function(s){return r._dragEnded(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),R()()),i&2&&(B(3),Fo(r._weekdays),B(4),re("label",r._monthLabel)("rows",r._weeks)("todayValue",r._todayDate)("startValue",r._rangeStart)("endValue",r._rangeEnd)("comparisonStart",r._comparisonRangeStart)("comparisonEnd",r._comparisonRangeEnd)("previewStart",r._previewStart)("previewEnd",r._previewEnd)("isRange",r._isRange)("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName))},dependencies:[Qg],encapsulation:2,changeDetection:0})}return n})(),$a=24,s1=4,pq=(()=>{class n{_changeDetectorRef=w(qt);_dateAdapter=w(to,{optional:!0});_dir=w(Ni,{optional:!0});_rerenderSubscription=It.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),Cq(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Oc?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new ke;yearSelected=new ke;activeDateChange=new ke;_matCalendarBody;_years;_todayYear;_selectedYear;constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Kn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let i=this._dateAdapter.getYear(this._activeDate)-fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,o=[];r<$a;r++)o.push(i+r),o.length==s1&&(this._years.push(o.map(s=>this._createCellForYear(s))),o=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let i=e.value,r=this._dateAdapter.createDate(i,0,1),o=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(o)}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromYear(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-s1);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s1);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,$a-fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-$a*10:-$a);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?$a*10:$a);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){let i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),o=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new pb(e,r,r,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(e,0,1);for(let r=i;this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Oc){let i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(i,r){if(i&1&&Vt(Qg,5),i&2){let o;Pe(o=Oe())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(D(0,"table",0)(1,"thead",1)(2,"tr"),be(3,"th",2),R()(),D(4,"tbody",3),he("selectedValueChange",function(s){return r._yearSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),R()()),i&2&&(B(4),re("rows",r._years)("todayValue",r._todayYear)("startValue",r._selectedYear)("endValue",r._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},dependencies:[Qg],encapsulation:2,changeDetection:0})}return n})();function Cq(n,t,e,i,r){let o=n.getYear(t),s=n.getYear(e),a=Eq(n,i,r);return Math.floor((o-a)/$a)===Math.floor((s-a)/$a)}function fb(n,t,e,i){let r=n.getYear(t);return Ise(r-Eq(n,e,i),$a)}function Eq(n,t,e){let i=0;return e?i=n.getYear(e)-$a+1:t&&(i=n.getYear(t)),i}function Ise(n,t){return(n%t+t)%t}var gq=(()=>{class n{_changeDetectorRef=w(qt);_dateFormats=w(wd,{optional:!0});_dateAdapter=w(to,{optional:!0});_dir=w(Ni,{optional:!0});_rerenderSubscription=It.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Oc?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new ke;monthSelected=new ke;activeDateChange=new ke;_matCalendarBody;_months;_yearLabel;_todayMonth;_selectedMonth;constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Kn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);let o=this._getDateFromMonth(i);this.selectedChange.emit(o)}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,i){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),s=this.dateClass?this.dateClass(r,"year"):void 0;return new pb(e,i.toLocaleUpperCase(),o,this._shouldEnableMonth(e),s)}_shouldEnableMonth(e){let i=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(i,e,1);for(let o=r;this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){let r=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>o}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){let r=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<o}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof Oc?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-year-view"]],viewQuery:function(i,r){if(i&1&&Vt(Qg,5),i&2){let o;Pe(o=Oe())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(D(0,"table",0)(1,"thead",1)(2,"tr"),be(3,"th",2),R()(),D(4,"tbody",3),he("selectedValueChange",function(s){return r._monthSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),R()()),i&2&&(B(4),re("label",r._yearLabel)("rows",r._months)("todayValue",r._todayMonth)("startValue",r._selectedMonth)("endValue",r._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},dependencies:[Qg],encapsulation:2,changeDetection:0})}return n})(),xq=(()=>{class n{_intl=w(Yg);calendar=w(a1);_dateAdapter=w(to,{optional:!0});_dateFormats=w(wd,{optional:!0});constructor(){w(vi).load(pu);let e=w(qt);this.calendar.stateChanges.subscribe(()=>e.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-$a)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:$a)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):Cq(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let i=this._dateAdapter.getYear(this.calendar.activeDate)-fb(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+$a-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),s=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return[o,s]}_periodButtonLabelId=w(Hn).getId("mat-calendar-period-label-");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:dse,decls:17,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(i,r){i&1&&(Xt(),D(0,"div",0)(1,"div",1)(2,"span",2),z(3),R(),D(4,"button",3),he("click",function(){return r.currentPeriodClicked()}),D(5,"span",4),z(6),R(),bo(),D(7,"svg",5),be(8,"polygon",6),R()(),Wp(),be(9,"div",7),nt(10),D(11,"button",8),he("click",function(){return r.previousClicked()}),bo(),D(12,"svg",9),be(13,"path",10),R()(),Wp(),D(14,"button",11),he("click",function(){return r.nextClicked()}),bo(),D(15,"svg",9),be(16,"path",12),R()()()()),i&2&&(B(2),re("id",r._periodButtonLabelId),B(),Zt(r.periodButtonDescription),B(),tt("aria-label",r.periodButtonLabel)("aria-describedby",r._periodButtonLabelId),B(2),Zt(r.periodButtonText),B(),ut("mat-calendar-invert",r.calendar.currentView!=="month"),B(4),re("disabled",!r.previousEnabled()),tt("aria-label",r.prevButtonLabel),B(3),re("disabled",!r.nextEnabled()),tt("aria-label",r.nextButtonLabel))},dependencies:[rn,Ed],encapsulation:2,changeDetection:0})}return n})(),a1=(()=>{class n{_dateAdapter=w(to,{optional:!0});_dateFormats=w(wd,{optional:!0});_changeDetectorRef=w(qt);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get selected(){return this._selected}set selected(e){e instanceof Oc?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new ke;yearSelected=new ke;monthSelected=new ke;viewChanged=new ke(!0);_userSelection=new ke;_userDragDrop=new ke;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}_currentView;_activeDrag=null;stateChanges=new ye;constructor(){this._intlChanges=w(Yg).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Tc(this.headerComponent||xq),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=i||r||e.dateFilter;if(o&&!o.firstChange){let s=this._getCurrentViewComponent();s&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),s._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let i=e.value;(this.selected instanceof Oc||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-calendar"]],viewQuery:function(i,r){if(i&1&&(Vt(fq,5),Vt(gq,5),Vt(pq,5)),i&2){let o;Pe(o=Oe())&&(r.monthView=o.first),Pe(o=Oe())&&(r.yearView=o.first),Pe(o=Oe())&&(r.multiYearView=o.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[St([bq]),Tt],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,r){if(i&1&&(Ee(0,hse,0,0,"ng-template",0),D(1,"div",1),Ee(2,mse,1,11,"mat-month-view",2)(3,fse,1,6,"mat-year-view",3)(4,pse,1,6,"mat-multi-year-view",3),R()),i&2){let o;re("cdkPortalOutlet",r._calendarHeaderPortal),B(2),kt((o=r.currentView)==="month"?2:o==="year"?3:o==="multi-year"?4:-1)}},dependencies:[Cs,vz,fq,gq,pq],styles:['.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),_q={transformPanel:ps("transformPanel",[vr("void => enter-dropdown",Or("120ms cubic-bezier(0, 0, 0.2, 1)",Mk([yi({opacity:0,transform:"scale(1, 0.8)"}),yi({opacity:1,transform:"scale(1, 1)"})]))),vr("void => enter-dialog",Or("150ms cubic-bezier(0, 0, 0.2, 1)",Mk([yi({opacity:0,transform:"scale(0.7)"}),yi({transform:"none",opacity:1})]))),vr("* => void",Or("100ms linear",yi({opacity:0})))]),fadeInCalendar:ps("fadeInCalendar",[Vo("void",yi({opacity:0})),Vo("enter",yi({opacity:1})),vr("void => *",Or("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},Iq=new ce("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.reposition()}});function Sse(n){return()=>n.scrollStrategies.reposition()}var Tse={provide:Iq,deps:[Fi],useFactory:Sse},Sq=(()=>{class n{_elementRef=w(He);_changeDetectorRef=w(qt);_globalModel=w(gb);_dateAdapter=w(to);_rangeSelectionStrategy=w(wq,{optional:!0});_subscriptions=new It;_model;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationState;_animationDone=new ye;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){w(vi).load(pu);let e=w(Yg);this._closeButtonText=e.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let i=this._model.selection,r=e.value,o=i instanceof Oc;if(o&&this._rangeSelectionStrategy){let s=this._rangeSelectionStrategy.selectionFinished(r,i,e.event);this._model.updateSelection(s,this)}else r&&(o||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating=e.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(i,r){if(i&1&&Vt(a1,5),i&2){let o;Pe(o=Oe())&&(r._calendar=o.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(i,r){i&1&&eg("@transformPanel.start",function(s){return r._handleAnimationEvent(s)})("@transformPanel.done",function(s){return r._handleAnimationEvent(s)}),i&2&&(Zp("@transformPanel",r._animationState),_r(r.color?"mat-"+r.color:""),ut("mat-datepicker-content-touch",r.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,r){if(i&1&&(D(0,"div",0)(1,"mat-calendar",1),he("yearSelected",function(s){return r.datepicker._selectYear(s)})("monthSelected",function(s){return r.datepicker._selectMonth(s)})("viewChanged",function(s){return r.datepicker._viewChanged(s)})("_userSelection",function(s){return r._handleUserSelection(s)})("_userDragDrop",function(s){return r._handleUserDragDrop(s)}),R(),Ee(2,gse,0,0,"ng-template",2),D(3,"button",3),he("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),z(4),R()()),i&2){let o;ut("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),tt("aria-modal",!0)("aria-labelledby",(o=r._dialogLabelId)!==null&&o!==void 0?o:void 0),B(),_r(r.datepicker.panelClass),re("id",r.datepicker.id)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName),B(),re("cdkPortalOutlet",r._actionsPortal),B(),ut("cdk-visually-hidden",!r._closeButtonFocused),re("color",r.color||"primary"),B(),Zt(r._closeButtonText)}},dependencies:[_z,a1,Cs,rn],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[_q.transformPanel,_q.fadeInCalendar]},changeDetection:0})}return n})(),yq=(()=>{class n{_overlay=w(Fi);_viewContainerRef=w(Mr);_dateAdapter=w(to,{optional:!0});_dir=w(Ni,{optional:!0});_model=w(gb);_scrollStrategy=w(Iq);_inputStateChanges=It.EMPTY;_document=w(xt);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new ke;monthSelected=new ke;viewChanged=new ke(!0);dateClass;openedStream=new ke;closedStream=new ke;get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=rz(e)}_panelClass;get opened(){return this._opened}set opened(e){e?this.open():this.close()}_opened=!1;id=w(Hn).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef;_componentRef;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal;datepickerInput;stateChanges=new ye;_injector=w(Mt);_changeDetectorRef=w(qt);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){let r=this._overlayRef.getConfig().positionStrategy;r instanceof ob&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=vd(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",i=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:r,location:o}=this._componentRef;r._startExitAnimation(),r._animationDone.pipe(xi(1)).subscribe(()=>{let s=this._document.activeElement;e&&(!s||s===this._document.activeElement||o.nativeElement.contains(s))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(i):i()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,i=new Tc(Sq,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new Dc({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(r).subscribe(o=>{o&&o.preventDefault(),this.close()}),r.keydownEvents().subscribe(o=>{let s=o.keyCode;(s===38||s===40||s===37||s===39||s===33||s===34)&&o.preventDefault()}),this._componentRef=r.attach(i),this._forwardContentValues(this._componentRef.instance),e||Xr(()=>{r.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let i=this.xPosition==="end"?"end":"start",r=i==="start"?"end":"start",o=this.yPosition==="above"?"bottom":"top",s=o==="top"?"bottom":"top";return e.withPositions([{originX:i,originY:s,overlayX:i,overlayY:o},{originX:i,originY:o,overlayX:i,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s}])}_getCloseStream(e){let i=["ctrlKey","shiftKey","metaKey"];return ri(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(st(r=>r.keyCode===27&&!Ui(r)||this.datepickerInput&&Ui(r,"altKey")&&r.keyCode===38&&i.every(o=>!Ui(r,o)))))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",We],disabled:[2,"disabled","disabled",We],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",We],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",We]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[Ft,Tt]})}return n})(),Xg=(()=>{class n extends yq{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[St([bq,{provide:yq,useExisting:n}]),Et],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}return n})(),Gg=class{target;targetElement;value;constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}},Dse=(()=>{class n{_elementRef=w(He);_dateAdapter=w(to,{optional:!0});_dateFormats=w(wd,{optional:!0});_isInitialized;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let i=e,r=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&r.blur&&r.blur()}_disabled;dateChange=new ke;dateInput=new ke;stateChanges=new ye;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=It.EMPTY;_localeSubscription=It.EMPTY;_pendingValue;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!i||this._matchesFilter(i)?null:{matDatepickerFilter:!0}};_minValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),r=this._getMinDate();return!r||!i||this._dateAdapter.compareDate(r,i)<=0?null:{matDatepickerMin:{min:r,actual:i}}};_maxValidator=e=>{let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),r=this._getMaxDate();return!r||!i||this._dateAdapter.compareDate(r,i)>=0?null:{matDatepickerMax:{max:r,actual:i}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){let r=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new Gg(this,this._elementRef.nativeElement)),this.dateChange.emit(new Gg(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){kse(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let i=["ctrlKey","shiftKey","metaKey"];Ui(e,"altKey")&&e.keyCode===40&&i.every(o=>!Ui(e,o))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let i=this._lastValueValid,r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);let o=!this._dateAdapter.sameDate(r,this.value);!r||o?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),i!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(r),this.dateInput.emit(new Gg(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Gg(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let i=this._getDateFilter();return!i||i(e)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,inputs:{value:"value",disabled:[2,"disabled","disabled",We]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Ft,Tt]})}return n})();function kse(n,t){let e=Object.keys(n);for(let i of e){let{previousValue:r,currentValue:o}=n[i];if(t.isDateInstance(r)&&t.isDateInstance(o)){if(!t.sameDate(r,o))return!0}else return!0}return!1}var Ase={provide:Qh,useExisting:Oo(()=>Xh),multi:!0},Rse={provide:xd,useExisting:Oo(()=>Xh),multi:!0},Xh=(()=>{class n extends Dse{_formField=w(Ff,{optional:!0});_closedSubscription=It.EMPTY;_openedSubscription=It.EMPTY;set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}_datepicker;_ariaOwns=Le(null);get min(){return this._min}set min(e){let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}_min;get max(){return this._max}set max(e){let i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}_max;get dateFilter(){return this._dateFilter}set dateFilter(e){let i=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}_dateFilter;_validator;constructor(){super(),this._validator=Wh.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(i,r){i&1&&he("input",function(s){return r._onInput(s.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(s){return r._onKeydown(s)}),i&2&&(ms("disabled",r.disabled),tt("aria-haspopup",r._datepicker?"dialog":null)("aria-owns",r._ariaOwns())("min",r.min?r._dateAdapter.toIso8601(r.min):null)("max",r.max?r._dateAdapter.toIso8601(r.max):null)("data-mat-calendar",r._datepicker?r._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[St([Ase,Rse,{provide:ZR,useExisting:n}]),Et]})}return n})(),Mse=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matDatepickerToggleIcon",""]]})}return n})(),Lf=(()=>{class n{_intl=w(Yg);_changeDetectorRef=w(qt);_stateChanges=It.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple;_customIcon;_button;constructor(){let e=w(new Cc("tabindex"),{optional:!0}),i=Number(e);this.tabIndex=i||i===0?i:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:Ye(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Ye(),r=this.datepicker?ri(this.datepicker.openedStream,this.datepicker.closedStream):Ye();this._stateChanges.unsubscribe(),this._stateChanges=ri(this._intl.changes,e,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,r,o){if(i&1&&jt(o,Mse,5),i&2){let s;Pe(s=Oe())&&(r._customIcon=s.first)}},viewQuery:function(i,r){if(i&1&&Vt(_se,5),i&2){let o;Pe(o=Oe())&&(r._button=o.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,r){i&1&&he("click",function(s){return r._open(s)}),i&2&&(tt("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),ut("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&r.datepicker.color==="accent")("mat-warn",r.datepicker&&r.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",We],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[Ft,Tt],ngContentSelectors:vse,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,r){i&1&&(Xt(yse),D(0,"button",1,0),Ee(2,bse,2,0,":svg:svg",2),nt(3),R()),i&2&&(re("disabled",r.disabled)("disableRipple",r.disableRipple),tt("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("tabindex",r.disabled?-1:r.tabIndex),B(2),kt(r._customIcon?-1:2))},dependencies:[Ed],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,changeDetection:0})}return n})();var Nc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Yg,Tse],imports:[Ht,Ac,bE,Es,gt,Sq,Lf,xq,zh]})}return n})();var Jh=class{setKey(t){return this.key=t,this}key="";birthDate="";email="";firstName="";lastName="";password="";phoneNumber="";role="";userName="";constructor(t){this.build(t)}build(t){return Object.assign(this,t),this}serialize(){return{key:this.key,birthDate:this.birthDate,email:this.email,firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNumber,role:this.role,userName:this.userName}}};var Tq="auth",Bf=class{constructor(t){return t}},El=class{constructor(){return gl(Tq)}};var l1=new ce("angularfire2.auth-instances");function Rae(n,t){let e=fu(Tq,n,t);return e&&new Bf(e)}function Mae(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Bf(i)}}var Pae={provide:El,deps:[[new Rn,l1]]},Oae={provide:Bf,useFactory:Rae,deps:[[new Rn,l1],bs]};function Dq(n,...t){return ei("angularfire",js.full,"auth"),Rr([Oae,Pae,{provide:l1,useFactory:Mae(n),multi:!0,deps:[Ke,Mt,Us,Ba,[new Rn,_s],...t]}])}var kq=ki(kk,!0);var _b=ki(Ak,!0);var Aq="@firebase/database",Rq="1.0.8";var uM="";function Fae(n){uM=n}var _1=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Pr(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:PC(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var y1=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return lu(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var l3=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new _1(t)}}catch{}return new y1},jf=l3("localStorage"),v1=l3("sessionStorage");var e_=new sg("@firebase/database"),Vae=function(){let n=1;return function(){return n++}}(),u3=function(n){let t=yj(n),e=new _j;e.update(t);let i=e.digest();return MC.encodeByteArray(i)},Fb=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Fb.apply(null,i):typeof i=="object"?t+=Pr(i):t+=i,t+=" "}return t},zf=null,Mq=!0,Lae=function(n,t){Be(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(e_.logLevel=hl.VERBOSE,zf=e_.log.bind(e_),t&&v1.set("logging_enabled",!0)):typeof n=="function"?zf=n:(zf=null,v1.remove("logging_enabled"))},Bo=function(...n){if(Mq===!0&&(Mq=!1,zf===null&&v1.get("logging_enabled")===!0&&Lae(!0)),zf){let t=Fb.apply(null,n);zf(t)}},Vb=function(n){return function(...t){Bo(n,...t)}},b1=function(...n){let t="FIREBASE INTERNAL ERROR: "+Fb(...n);e_.error(t)},Sd=function(...n){let t=`FIREBASE FATAL ERROR: ${Fb(...n)}`;throw e_.error(t),new Error(t)},Ws=function(...n){let t="FIREBASE WARNING: "+Fb(...n);e_.warn(t)},Bae=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ws("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},d3=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$ae=function(n){if(cu()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},n_="[MIN_NAME]",qf="[MAX_NAME]",l_=function(n,t){if(n===t)return 0;if(n===n_||t===qf)return-1;if(t===n_||n===qf)return 1;{let e=Pq(n),i=Pq(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},jae=function(n,t){return n===t?0:n<t?-1:1},yb=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+Pr(t))},dM=function(n){if(typeof n!="object"||n===null)return Pr(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=Pr(t[i]),e+=":",e+=dM(n[t[i]]);return e+="}",e},h3=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function Gs(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var m3=function(n){Be(!d3(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,o,s,a,l;n===0?(o=0,s=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=a+i,s=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(o=0,s=Math.round(n/Math.pow(2,1-i-e))));let u=[];for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(r?1:0),u.reverse();let h=u.join(""),p="";for(l=0;l<64;l+=8){let _=parseInt(h.substr(l,8),2).toString(16);_.length===1&&(_="0"+_),p=p+_}return p.toLowerCase()},Uae=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zae=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function qae(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");let i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}var Kae=new RegExp("^-?(0*)\\d{1,10}$"),Hae=-2147483648,Wae=2147483647,Pq=function(n){if(Kae.test(n)){let t=Number(n);if(t>=Hae&&t<=Wae)return t}return null},u_=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw Ws("Exception was thrown by user callback.",e),t},Math.floor(0))}},Gae=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Eb=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var w1=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Ws(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var C1=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Bo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ws(t)}},xb=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ex="5",f3="v",p3="s",g3="r",_3="f",y3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,v3="ls",b3="p",E1="ac",w3="websocket",C3="long_polling";var tx=class{constructor(t,e,i,r,o=!1,s="",a=!1,l=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jf.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&jf.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function Qae(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function E3(n,t,e){Be(typeof t=="string","typeof type must == string"),Be(typeof e=="object","typeof params must == object");let i;if(t===w3)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===C3)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Qae(n)&&(e.ns=n.namespace);let r=[];return Gs(e,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var x1=class{constructor(){this.counters_={}}incrementCounter(t,e=1){lu(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return lj(this.counters_)}};var u1={},d1={};function hM(n){let t=n.toString();return u1[t]||(u1[t]=new x1),u1[t]}function Yae(n,t){let e=n.toString();return d1[e]||(d1[e]=t()),d1[e]}var I1=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&u_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Oq="start",Xae="close",Jae="pLPCommand",Zae="pRTLPCB",x3="id",I3="pw",S3="ser",ece="cb",tce="seg",nce="ts",ice="d",rce="dframe",T3=1870,D3=30,oce=T3-D3,sce=25e3,ace=3e4,S1=class n{constructor(t,e,i,r,o,s,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vb(t),this.stats_=hM(e),this.urlFn=l=>(this.appCheckToken&&(l[E1]=this.appCheckToken),E3(e,C3,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new I1(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ace)),$ae(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T1((...o)=>{let[s,a,l,u,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Oq)this.id=a,this.password=l;else if(s===Xae)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Oq]="t",i[S3]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[ece]=this.scriptTagHolder.uniqueCallbackIdentifier),i[f3]=ex,this.transportSessionId&&(i[p3]=this.transportSessionId),this.lastSessionId&&(i[v3]=this.lastSessionId),this.applicationId&&(i[b3]=this.applicationId),this.appCheckToken&&(i[E1]=this.appCheckToken),typeof location<"u"&&location.hostname&&y3.test(location.hostname)&&(i[g3]=_3);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return cu()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Uae()&&!zae()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=Pr(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=cj(e),r=h3(i,oce);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(cu())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[rce]="t",i[x3]=t,i[I3]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=Pr(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},T1=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,cu())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Vae(),window[Jae+this.uniqueCallbackIdentifier]=t,window[Zae+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Bo("frame writing exception"),a.stack&&Bo(a.stack),Bo(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Bo("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[x3]=this.myID,t[I3]=this.myPW,t[S3]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+D3+i.length<=T3;){let s=this.pendingSegs.shift();i=i+"&"+tce+r+"="+s.seg+"&"+nce+r+"="+s.ts+"&"+ice+r+"="+s.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(sce)),o=()=>{clearTimeout(r),i()};this.addTag(t,o)}addTag(t,e){cu()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Bo("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var cce=16384,lce=45e3,nx=null;typeof MozWebSocket<"u"?nx=MozWebSocket:typeof WebSocket<"u"&&(nx=WebSocket);var vb=(()=>{class n{constructor(e,i,r,o,s,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vb(this.connId),this.stats_=hM(i),this.connURL=n.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o,s){let a={};return a[f3]=ex,!cu()&&typeof location<"u"&&location.hostname&&y3.test(location.hostname)&&(a[g3]=_3),i&&(a[p3]=i),r&&(a[v3]=r),o&&(a[E1]=o),s&&(a[b3]=s),E3(e,w3,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jf.set("previous_websocket_failure",!0);try{let r;if(cu()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${ex}/${uM}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new nx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&nx!==null&&!n.forceDisallow_}static previouslyFailed(){return jf.isInMemoryStorage||jf.get("previous_websocket_failure")===!0}markConnectionHealthy(){jf.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=PC(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Be(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=Pr(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=h3(i,cce);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lce))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),uce=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[S1,vb]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=vb&&vb.isAvailable(),r=i&&!vb.previouslyFailed();if(e.webSocketOnly&&(i||Ws("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vb];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),dce=6e4,hce=5e3,mce=10*1024,fce=100*1024,h1="t",Nq="d",pce="s",Fq="r",gce="e",Vq="o",Lq="a",Bq="n",$q="p",_ce="h",D1=class{constructor(t,e,i,r,o,s,a,l,u,h){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vb("c:"+this.id+":"),this.transportManager_=new uce(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Eb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fce?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mce?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(h1 in t){let e=t[h1];e===Lq?this.upgradeIfSecondaryHealthy_():e===Fq?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===Vq&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=yb("t",t),i=yb("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$q,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Lq,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Bq,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=yb("t",t),i=yb("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=yb(h1,t);if(Nq in t){let i=t[Nq];if(e===_ce){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===Bq){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===pce?this.onConnectionShutdown_(i):e===Fq?this.onReset_(i):e===gce?b1("Server Error: "+i):e===Vq?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):b1("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),ex!==i&&Ws("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Eb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dce))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Eb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hce))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$q,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ix=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var rx=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Be(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===e&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(t){Be(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var ox=class n extends rx{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Sk()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return Be(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var jq=32,Uq=768,mi=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Gn(){return new mi("")}function fn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function tm(n){return n.pieces_.length-n.pieceNum_}function Mi(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new mi(n.pieces_,t)}function k3(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function yce(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function A3(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function R3(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new mi(t,0)}function Wr(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof mi)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new mi(e,0)}function bn(n){return n.pieceNum_>=n.pieces_.length}function xs(n,t){let e=fn(n),i=fn(t);if(e===null)return t;if(e===i)return xs(Mi(n),Mi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function mM(n,t){if(tm(n)!==tm(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Il(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(tm(n)>tm(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var k1=class{constructor(t,e){this.errorPrefix_=e,this.parts_=A3(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=gv(this.parts_[i]);M3(this)}};function vce(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=gv(t),M3(n)}function bce(n){let t=n.parts_.pop();n.byteLength_-=gv(t),n.parts_.length>0&&(n.byteLength_-=1)}function M3(n){if(n.byteLength_>Uq)throw new Error(n.errorPrefix_+"has a key path longer than "+Uq+" bytes ("+n.byteLength_+").");if(n.parts_.length>jq)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jq+") or object contains a cycle "+$f(n))}function $f(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var A1=class n extends rx{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return Be(t==="visible","Unknown event type: "+t),[this.visible_]}};var bb=1e3,wce=60*5*1e3,zq=30*1e3,Cce=1.3,Ece=3e4,xce="server_kill",qq=3,fM=(()=>{class n extends ix{constructor(e,i,r,o,s,a,l,u){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Vb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bb,this.maxReconnectDelay_=wce,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!cu())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");A1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ox.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let o=++this.requestNumber_,s={r:o,a:e,b:i};this.log_(Pr(s)),Be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();let i=new vf,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(e,i,r,o){this.initConnection_();let s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Be(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";e.tag&&(s.q=i._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,l=>{let u=l.d,h=l.s;n.warnOnListenWarnings_(u,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(h,u))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&lu(e,"w")){let r=bf(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Ws(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||pj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zq)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=fj(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);let s={p:e},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pr(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):b1("Unrecognized action received from server: "+Pr(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ece&&(this.reconnectDelay_=bb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Cce)}this.onConnectStatus_(!1)}establishConnection_(){return O(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,u=function(){l?l.close():(a=!0,r())},h=function(_){Be(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(_)};this.realtime_={close:u,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[_,b]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Bo("getToken() completed but was canceled"):(Bo("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=b&&b.token,l=new D1(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,C=>{Ws(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(xce)},s))}catch(_){this.log_("Failed to get token: "+_),a||(this.repoInfo_.nodeAdmin&&Ws(_),u())}}})}interrupt(e){Bo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dk(this.interruptReasons_)&&(this.reconnectDelay_=bb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(s=>dM(s)).join("$"):r="default";let o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){let r=new mi(e).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){Bo("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qq&&(this.reconnectDelay_=zq,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Bo("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qq&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";cu()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+uM.replace(/\./g,"-")]=1,Sk()?e["framework.cordova"]=1:dj()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=ox.getInstance().currentlyOnline();return Dk(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),pn=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var i_=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new pn(n_,t),r=new pn(n_,e);return this.compare(i,r)!==0}minPost(){return pn.MIN}};var ZE,sx=class extends i_{static get __EMPTY_NODE(){return ZE}static set __EMPTY_NODE(t){ZE=t}compare(t,e){return l_(t.name,e.name)}isDefinedOn(t){throw rg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return pn.MIN}maxPost(){return new pn(qf,ZE)}makePost(t,e){return Be(typeof t=="string","KeyIndex indexValue must always be a string."),new pn(t,ZE)}toString(){return".key"}},t_=new sx;var Zg=class{constructor(t,e,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=e?i(t.key,e):1,r&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},xl=(()=>{class n{constructor(e,i,r,o,s){this.key=e,this.value=i,this.color=r??n.RED,this.left=o??Fc.EMPTY_NODE,this.right=s??Fc.EMPTY_NODE}copy(e,i,r,o,s){return new n(e??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this,s=r(e,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(e,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Fc.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),R1=class{copy(t,e,i,r,o){return this}insert(t,e,i){return new xl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Fc=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,xl.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Zg(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Zg(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Zg(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Zg(this.root_,null,this.comparator_,!0,t)}};Fc.EMPTY_NODE=new R1;function Ice(n,t){return l_(n.name,t.name)}function pM(n,t){return l_(n,t)}var M1;function Sce(n){M1=n}var P3=function(n){return typeof n=="number"?"number:"+m3(n):"string:"+n},O3=function(n){if(n.isLeafNode()){let t=n.val();Be(typeof t=="string"||typeof t=="number"||typeof t=="object"&&lu(t,".sv"),"Priority must be a string or number.")}else Be(n===M1||n.isEmpty(),"priority of unexpected type.");Be(n===M1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Kq,r_=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Be(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),O3(this.priorityNode_)}static set __childrenNodeConstructor(e){Kq=e}static get __childrenNodeConstructor(){return Kq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return bn(e)?this:fn(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=fn(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(Be(r!==".priority"||tm(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+P3(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=m3(this.value_):e+=this.value_,this.lazyHash_=u3(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(Be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),s=n.VALUE_TYPE_ORDER.indexOf(r);return Be(o>=0,"Unknown leaf type: "+i),Be(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),N3,F3;function Tce(n){N3=n}function Dce(n){F3=n}var P1=class extends i_{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),o=i.compareTo(r);return o===0?l_(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return pn.MIN}maxPost(){return new pn(qf,new r_("[PRIORITY-POST]",F3))}makePost(t,e){let i=N3(t);return new pn(e,new r_("[PRIORITY-POST]",i))}toString(){return".priority"}},ur=new P1;var kce=Math.log(2),O1=class{constructor(t){let e=o=>parseInt(Math.log(o)/kce,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},ax=function(n,t,e,i){n.sort(t);let r=function(l,u){let h=u-l,p,_;if(h===0)return null;if(h===1)return p=n[l],_=e?e(p):p,new xl(_,p.node,xl.BLACK,null,null);{let b=parseInt(h/2,10)+l,C=r(l,b),T=r(b+1,u);return p=n[b],_=e?e(p):p,new xl(_,p.node,xl.BLACK,C,T)}},o=function(l){let u=null,h=null,p=n.length,_=function(C,T){let k=p-C,U=p;p-=C;let W=r(k+1,U),K=n[k],oe=e?e(K):K;b(new xl(oe,K.node,T,null,W))},b=function(C){u?(u.left=C,u=C):(h=C,u=C)};for(let C=0;C<l.count;++C){let T=l.nextBitIsOne(),k=Math.pow(2,l.count-(C+1));T?_(k,xl.BLACK):(_(k,xl.BLACK),_(k,xl.RED))}return h},s=new O1(n.length),a=o(s);return new Fc(i||t,a)};var m1,Jg={},o_=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return Be(Jg&&ur,"ChildrenNode.ts has not been loaded"),m1=m1||new n({".priority":Jg},{".priority":ur}),m1}get(t){let e=bf(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Fc?e:null}hasIndex(t){return lu(this.indexSet_,t.toString())}addIndex(t,e){Be(t!==t_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=e.getIterator(pn.Wrap),s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=ax(i,t.getCompare()):a=Jg;let l=t.toString(),u=Object.assign({},this.indexSet_);u[l]=t;let h=Object.assign({},this.indexes_);return h[l]=a,new n(h,u)}addToIndexes(t,e){let i=pv(this.indexes_,(r,o)=>{let s=bf(this.indexSet_,o);if(Be(s,"Missing index implementation for "+o),r===Jg)if(s.isDefinedOn(t.node)){let a=[],l=e.getIterator(pn.Wrap),u=l.getNext();for(;u;)u.name!==t.name&&a.push(u),u=l.getNext();return a.push(t),ax(a,s.getCompare())}else return Jg;else{let a=e.get(t.name),l=r;return a&&(l=l.remove(new pn(t.name,a))),l.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=pv(this.indexes_,r=>{if(r===Jg)return r;{let o=e.get(t.name);return o?r.remove(new pn(t.name,o)):r}});return new n(i,this.indexSet_)}};var wb,en=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&O3(this.priorityNode_),this.children_.isEmpty()&&Be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return wb||(wb=new n(new Fc(pM),null,o_.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wb}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?wb:i}}getChild(e){let i=fn(e);return i===null?this:this.getImmediateChild(i).getChild(Mi(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Be(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new pn(e,i),o,s;i.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?wb:this.priorityNode_;return new n(o,a,s)}}updateChild(e,i){let r=fn(e);if(r===null)return i;{Be(fn(e)!==".priority"||tm(e)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(Mi(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(ur,(a,l)=>{i[a]=l.val(e),r++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!e&&s&&o<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+P3(this.getPriority().val())+":"),this.forEachChild(ur,(i,r)=>{let o=r.hash();o!==""&&(e+=":"+i+":"+o)}),this.lazyHash_=e===""?"":u3(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new pn(e,i));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new pn(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new pn(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{let o=this.children_.getIteratorFrom(e.name,pn.Wrap),s=o.peek();for(;s!=null&&i.compare(s,e)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{let o=this.children_.getReverseIteratorFrom(e.name,pn.Wrap),s=o.peek();for(;s!=null&&i.compare(s,e)>0;)o.getNext(),s=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lb?-1:0}withIndex(e){if(e===t_||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===t_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(ur),o=i.getIterator(ur),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===t_?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),N1=class extends en{constructor(){super(new Fc(pM),en.EMPTY_NODE,o_.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return en.EMPTY_NODE}isEmpty(){return!1}},Lb=new N1;Object.defineProperties(pn,{MIN:{value:new pn(n_,en.EMPTY_NODE)},MAX:{value:new pn(qf,Lb)}});sx.__EMPTY_NODE=en.EMPTY_NODE;r_.__childrenNodeConstructor=en;Sce(Lb);Dce(Lb);var Ace=!0;function oo(n,t=null){if(n===null)return en.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),Be(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new r_(e,oo(t))}if(!(n instanceof Array)&&Ace){let e=[],i=!1;if(Gs(n,(s,a)=>{if(s.substring(0,1)!=="."){let l=oo(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),e.push(new pn(s,l)))}}),e.length===0)return en.EMPTY_NODE;let o=ax(e,Ice,s=>s.name,pM);if(i){let s=ax(e,ur.getCompare());return new en(o,oo(t),new o_({".priority":s},{".priority":ur}))}else return new en(o,oo(t),o_.Default)}else{let e=en.EMPTY_NODE;return Gs(n,(i,r)=>{if(lu(n,i)&&i.substring(0,1)!=="."){let o=oo(r);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(oo(t))}}Tce(oo);var F1=class extends i_{constructor(t){super(),this.indexPath_=t,Be(!bn(t)&&fn(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),o=i.compareTo(r);return o===0?l_(t.name,e.name):o}makePost(t,e){let i=oo(t),r=en.EMPTY_NODE.updateChild(this.indexPath_,i);return new pn(e,r)}maxPost(){let t=en.EMPTY_NODE.updateChild(this.indexPath_,Lb);return new pn(qf,t)}toString(){return A3(this.indexPath_,0).join("/")}};var V1=class extends i_{compare(t,e){let i=t.node.compareTo(e.node);return i===0?l_(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return pn.MIN}maxPost(){return pn.MAX}makePost(t,e){let i=oo(t);return new pn(e,i)}toString(){return".value"}},Rce=new V1;function V3(n){return{type:"value",snapshotNode:n}}function s_(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Db(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function kb(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function Mce(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Ab=class{constructor(t){this.index_=t}updateChild(t,e,i,r,o,s){Be(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?t.hasChild(e)?s.trackChildChange(Db(e,a)):Be(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(s_(e,i)):s.trackChildChange(kb(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(ur,(r,o)=>{e.hasChild(r)||i.trackChildChange(Db(r,o))}),e.isLeafNode()||e.forEachChild(ur,(r,o)=>{if(t.hasChild(r)){let s=t.getImmediateChild(r);s.equals(o)||i.trackChildChange(kb(r,o,s))}else i.trackChildChange(s_(r,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?en.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var cx=class n{constructor(t){this.indexedFilter_=new Ab(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n.getStartPost_(t),this.endPost_=n.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,o,s){return this.matches(new pn(e,i))||(i=en.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,o,s)}updateFullNode(t,e,i){e.isLeafNode()&&(e=en.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(en.EMPTY_NODE);let o=this;return e.forEachChild(ur,(s,a)=>{o.matches(new pn(s,a))||(r=r.updateImmediateChild(s,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var L1=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{let i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new cx(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,o,s){return this.rangedFilter_.matches(new pn(e,i))||(i=en.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,o,s):this.fullLimitUpdateChild_(t,e,i,o,s)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=en.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=en.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(en.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,o){let s;if(this.reverse_){let p=this.index_.getCompare();s=(_,b)=>p(b,_)}else s=this.index_.getCompare();let a=t;Be(a.numChildren()===this.limit_,"");let l=new pn(e,i),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(e)){let p=a.getImmediateChild(e),_=r.getChildAfterChild(this.index_,u,this.reverse_);for(;_!=null&&(_.name===e||a.hasChild(_.name));)_=r.getChildAfterChild(this.index_,_,this.reverse_);let b=_==null?1:s(_,l);if(h&&!i.isEmpty()&&b>=0)return o?.trackChildChange(kb(e,i,p)),a.updateImmediateChild(e,i);{o?.trackChildChange(Db(e,p));let T=a.updateImmediateChild(e,en.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(o?.trackChildChange(s_(_.name,_.node)),T.updateImmediateChild(_.name,_.node)):T}}else return i.isEmpty()?t:h&&s(u,l)>=0?(o!=null&&(o.trackChildChange(Db(u.name,u.node)),o.trackChildChange(s_(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(u.name,en.EMPTY_NODE)):t}};var B1=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:n_}hasEnd(){return this.endSet_}getIndexEndValue(){return Be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Pce(n){return n.loadsAllData()?new Ab(n.getIndex()):n.hasLimit()?new L1(n):new cx(n)}function Hq(n){let t={};if(n.isDefault())return t;let e;if(n.index_===ur?e="$priority":n.index_===Rce?e="$value":n.index_===t_?e="$key":(Be(n.index_ instanceof F1,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=Pr(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=Pr(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+Pr(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=Pr(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+Pr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Wq(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==ur&&(t.i=n.index_.toString()),t}var $1=class n extends ix{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Vb("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(Be(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=n.getListenId_(t,i),a={};this.listens_[s]=a;let l=Hq(t._queryParams);this.restRequest_(o+".json",l,(u,h)=>{let p=h;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(o,p,!1,i),bf(this.listens_,s)===a){let _;u?u===401?_="permission_denied":_="rest_error:"+u:_="ok",r(_,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=Hq(t._queryParams),i=t._path.toString(),r=new vf;return this.restRequest_(i+".json",e,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(e.auth=r.accessToken),o&&o.token&&(e.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+gj(e);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=PC(a.responseText)}catch{Ws("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Ws("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var j1=class{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function lx(){return{value:null,children:new Map}}function L3(n,t,e){if(bn(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=fn(t);n.children.has(i)||n.children.set(i,lx());let r=n.children.get(i);t=Mi(t),L3(r,t,e)}}function U1(n,t,e){n.value!==null?e(t,n.value):Oce(n,(i,r)=>{let o=new mi(t.toString()+"/"+i);U1(r,o,e)})}function Oce(n,t){n.children.forEach((e,i)=>{t(i,e)})}var z1=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Gs(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var Gq=10*1e3,Nce=30*1e3,Fce=5*60*1e3,q1=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new z1(t);let i=Gq+(Nce-Gq)*Math.random();Eb(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;Gs(t,(r,o)=>{o>0&&lu(this.statsToReport_,r)&&(e[r]=o,i=!0)}),i&&this.server_.reportStats(e),Eb(this.reportStats_.bind(this),Math.floor(Math.random()*2*Fce))}};var _u=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(_u||{});function B3(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _M(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var K1=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=_u.ACK_USER_WRITE,this.source=B3()}operationForChild(t){if(bn(this.path)){if(this.affectedTree.value!=null)return Be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new mi(t));return new n(Gn(),e,this.revert)}}else return Be(fn(this.path)===t,"operationForChild called for unrelated child."),new n(Mi(this.path),this.affectedTree,this.revert)}};var ux=class n{constructor(t,e){this.source=t,this.path=e,this.type=_u.LISTEN_COMPLETE}operationForChild(t){return bn(this.path)?new n(this.source,Gn()):new n(this.source,Mi(this.path))}};var a_=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=_u.OVERWRITE}operationForChild(t){return bn(this.path)?new n(this.source,Gn(),this.snap.getImmediateChild(t)):new n(this.source,Mi(this.path),this.snap)}};var dx=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=_u.MERGE}operationForChild(t){if(bn(this.path)){let e=this.children.subtree(new mi(t));return e.isEmpty()?null:e.value?new a_(this.source,Gn(),e.value):new n(this.source,Gn(),e)}else return Be(fn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Mi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var yu=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(bn(t))return this.isFullyInitialized()&&!this.filtered_;let e=fn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var H1=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Vce(n,t,e,i){let r=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Mce(s.childName,s.snapshotNode))}),Cb(n,r,"child_removed",t,i,e),Cb(n,r,"child_added",t,i,e),Cb(n,r,"child_moved",o,i,e),Cb(n,r,"child_changed",t,i,e),Cb(n,r,"value",t,i,e),r}function Cb(n,t,e,i,r,o){let s=i.filter(a=>a.type===e);s.sort((a,l)=>Bce(n,a,l)),s.forEach(a=>{let l=Lce(n,a,o);r.forEach(u=>{u.respondsTo(a.type)&&t.push(u.createEvent(l,n.query_))})})}function Lce(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function Bce(n,t,e){if(t.childName==null||e.childName==null)throw rg("Should only compare child_ events.");let i=new pn(t.childName,t.snapshotNode),r=new pn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function Ix(n,t){return{eventCache:n,serverCache:t}}function Ib(n,t,e,i){return Ix(new yu(t,e,i),n.serverCache)}function $3(n,t,e,i){return Ix(n.eventCache,new yu(t,e,i))}function hx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var f1,$ce=()=>(f1||(f1=new Fc(jae)),f1),Qs=class n{constructor(t,e=$ce()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return Gs(t,(i,r)=>{e=e.set(new mi(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Gn(),value:this.value};if(bn(t))return null;{let i=fn(t),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(Mi(t),e);return o!=null?{path:Wr(new mi(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(bn(t))return this;{let e=fn(t),i=this.children.get(e);return i!==null?i.subtree(Mi(t)):new n(null)}}set(t,e){if(bn(t))return new n(e,this.children);{let i=fn(t),o=(this.children.get(i)||new n(null)).set(Mi(t),e),s=this.children.insert(i,o);return new n(this.value,s)}}remove(t){if(bn(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=fn(t),i=this.children.get(e);if(i){let r=i.remove(Mi(t)),o;return r.isEmpty()?o=this.children.remove(e):o=this.children.insert(e,r),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(t){if(bn(t))return this.value;{let e=fn(t),i=this.children.get(e);return i?i.get(Mi(t)):null}}setTree(t,e){if(bn(t))return e;{let i=fn(t),o=(this.children.get(i)||new n(null)).setTree(Mi(t),e),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new n(this.value,s)}}fold(t){return this.fold_(Gn(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Wr(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Gn(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(bn(t))return null;{let o=fn(t),s=this.children.get(o);return s?s.findOnPath_(Mi(t),Wr(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Gn(),e)}foreachOnPath_(t,e,i){if(bn(t))return this;{this.value&&i(e,this.value);let r=fn(t),o=this.children.get(r);return o?o.foreachOnPath_(Mi(t),Wr(e,r),i):new n(null)}}foreach(t){this.foreach_(Gn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Wr(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var Sl=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new Qs(null))}};function Sb(n,t,e){if(bn(t))return new Sl(new Qs(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,o=i.value,s=xs(r,t);return o=o.updateChild(s,e),new Sl(n.writeTree_.set(r,o))}else{let r=new Qs(e),o=n.writeTree_.setTree(t,r);return new Sl(o)}}}function Qq(n,t,e){let i=n;return Gs(e,(r,o)=>{i=Sb(i,Wr(t,r),o)}),i}function Yq(n,t){if(bn(t))return Sl.empty();{let e=n.writeTree_.setTree(t,new Qs(null));return new Sl(e)}}function W1(n,t){return Hf(n,t)!=null}function Hf(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(xs(e.path,t)):null}function Xq(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(ur,(i,r)=>{t.push(new pn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new pn(i,r.value))}),t}function Zh(n,t){if(bn(t))return n;{let e=Hf(n,t);return e!=null?new Sl(new Qs(e)):new Sl(n.writeTree_.subtree(t))}}function G1(n){return n.writeTree_.isEmpty()}function c_(n,t){return j3(Gn(),n.writeTree_,t)}function j3(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{r===".priority"?(Be(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):e=j3(Wr(n,r),o,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Wr(n,".priority"),i)),e}}function Sx(n,t){return K3(t,n)}function jce(n,t,e,i,r){Be(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Sb(n.visibleWrites,t,e)),n.lastWriteId=i}function Uce(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function zce(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);Be(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,o=!1,s=n.allWrites.length-1;for(;r&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=e&&qce(a,i.path)?r=!1:Il(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return Kce(n),!0;if(i.snap)n.visibleWrites=Yq(n.visibleWrites,i.path);else{let a=i.children;Gs(a,l=>{n.visibleWrites=Yq(n.visibleWrites,Wr(i.path,l))})}return!0}else return!1}function qce(n,t){if(n.snap)return Il(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&Il(Wr(n.path,e),t))return!0;return!1}function Kce(n){n.visibleWrites=U3(n.allWrites,Hce,Gn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Hce(n){return n.visible}function U3(n,t,e){let i=Sl.empty();for(let r=0;r<n.length;++r){let o=n[r];if(t(o)){let s=o.path,a;if(o.snap)Il(e,s)?(a=xs(e,s),i=Sb(i,a,o.snap)):Il(s,e)&&(a=xs(s,e),i=Sb(i,Gn(),o.snap.getChild(a)));else if(o.children){if(Il(e,s))a=xs(e,s),i=Qq(i,a,o.children);else if(Il(s,e))if(a=xs(s,e),bn(a))i=Qq(i,Gn(),o.children);else{let l=bf(o.children,fn(a));if(l){let u=l.getChild(Mi(a));i=Sb(i,Gn(),u)}}}else throw rg("WriteRecord should have .snap or .children")}}return i}function z3(n,t,e,i,r){if(!i&&!r){let o=Hf(n.visibleWrites,t);if(o!=null)return o;{let s=Zh(n.visibleWrites,t);if(G1(s))return e;if(e==null&&!W1(s,Gn()))return null;{let a=e||en.EMPTY_NODE;return c_(s,a)}}}else{let o=Zh(n.visibleWrites,t);if(!r&&G1(o))return e;if(!r&&e==null&&!W1(o,Gn()))return null;{let s=function(u){return(u.visible||r)&&(!i||!~i.indexOf(u.writeId))&&(Il(u.path,t)||Il(t,u.path))},a=U3(n.allWrites,s,t),l=e||en.EMPTY_NODE;return c_(a,l)}}}function Wce(n,t,e){let i=en.EMPTY_NODE,r=Hf(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ur,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(e){let o=Zh(n.visibleWrites,t);return e.forEachChild(ur,(s,a)=>{let l=c_(Zh(o,new mi(s)),a);i=i.updateImmediateChild(s,l)}),Xq(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=Zh(n.visibleWrites,t);return Xq(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function Gce(n,t,e,i,r){Be(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=Wr(t,e);if(W1(n.visibleWrites,o))return null;{let s=Zh(n.visibleWrites,o);return G1(s)?r.getChild(e):c_(s,r.getChild(e))}}function Qce(n,t,e,i){let r=Wr(t,e),o=Hf(n.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(e)){let s=Zh(n.visibleWrites,r);return c_(s,i.getNode().getImmediateChild(e))}else return null}function Yce(n,t){return Hf(n.visibleWrites,t)}function Xce(n,t,e,i,r,o,s){let a,l=Zh(n.visibleWrites,t),u=Hf(l,Gn());if(u!=null)a=u;else if(e!=null)a=c_(l,e);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=s.getCompare(),_=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),b=_.getNext();for(;b&&h.length<r;)p(b,i)!==0&&h.push(b),b=_.getNext();return h}else return[]}function Jce(){return{visibleWrites:Sl.empty(),allWrites:[],lastWriteId:-1}}function mx(n,t,e,i){return z3(n.writeTree,n.treePath,t,e,i)}function yM(n,t){return Wce(n.writeTree,n.treePath,t)}function Jq(n,t,e,i){return Gce(n.writeTree,n.treePath,t,e,i)}function fx(n,t){return Yce(n.writeTree,Wr(n.treePath,t))}function Zce(n,t,e,i,r,o){return Xce(n.writeTree,n.treePath,t,e,i,r,o)}function vM(n,t,e){return Qce(n.writeTree,n.treePath,t,e)}function q3(n,t){return K3(Wr(n.treePath,t),n.writeTree)}function K3(n,t){return{treePath:n,writeTree:t}}var Q1=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;Be(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),Be(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(e==="child_added"&&o==="child_removed")this.changeMap.set(i,kb(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&o==="child_changed")this.changeMap.set(i,Db(i,r.oldSnap));else if(e==="child_changed"&&o==="child_added")this.changeMap.set(i,s_(i,t.snapshotNode));else if(e==="child_changed"&&o==="child_changed")this.changeMap.set(i,kb(i,t.snapshotNode,r.oldSnap));else throw rg("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var Y1=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},H3=new Y1,Rb=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new yu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vM(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kf(this.viewCache_),o=Zce(this.writes_,r,e,1,i,t);return o.length===0?null:o[0]}};function ele(n){return{filter:n}}function tle(n,t){Be(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Be(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function nle(n,t,e,i,r){let o=new Q1,s,a;if(e.type===_u.OVERWRITE){let u=e;u.source.fromUser?s=X1(n,t,u.path,u.snap,i,r,o):(Be(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!bn(u.path),s=px(n,t,u.path,u.snap,i,r,a,o))}else if(e.type===_u.MERGE){let u=e;u.source.fromUser?s=rle(n,t,u.path,u.children,i,r,o):(Be(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered(),s=J1(n,t,u.path,u.children,i,r,a,o))}else if(e.type===_u.ACK_USER_WRITE){let u=e;u.revert?s=ale(n,t,u.path,i,r,o):s=ole(n,t,u.path,u.affectedTree,i,r,o)}else if(e.type===_u.LISTEN_COMPLETE)s=sle(n,t,e.path,i,o);else throw rg("Unknown operation type: "+e.type);let l=o.getChanges();return ile(t,s,l),{viewCache:s,changes:l}}function ile(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=hx(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(V3(hx(t)))}}function W3(n,t,e,i,r,o){let s=t.eventCache;if(fx(i,e)!=null)return t;{let a,l;if(bn(e))if(Be(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let u=Kf(t),h=u instanceof en?u:en.EMPTY_NODE,p=yM(i,h);a=n.filter.updateFullNode(t.eventCache.getNode(),p,o)}else{let u=mx(i,Kf(t));a=n.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{let u=fn(e);if(u===".priority"){Be(tm(e)===1,"Can't have a priority with additional path components");let h=s.getNode();l=t.serverCache.getNode();let p=Jq(i,e,h,l);p!=null?a=n.filter.updatePriority(h,p):a=s.getNode()}else{let h=Mi(e),p;if(s.isCompleteForChild(u)){l=t.serverCache.getNode();let _=Jq(i,e,s.getNode(),l);_!=null?p=s.getNode().getImmediateChild(u).updateChild(h,_):p=s.getNode().getImmediateChild(u)}else p=vM(i,u,t.serverCache);p!=null?a=n.filter.updateChild(s.getNode(),u,p,h,r,o):a=s.getNode()}}return Ib(t,a,s.isFullyInitialized()||bn(e),n.filter.filtersNodes())}}function px(n,t,e,i,r,o,s,a){let l=t.serverCache,u,h=s?n.filter:n.filter.getIndexedFilter();if(bn(e))u=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){let b=l.getNode().updateChild(e,i);u=h.updateFullNode(l.getNode(),b,null)}else{let b=fn(e);if(!l.isCompleteForPath(e)&&tm(e)>1)return t;let C=Mi(e),k=l.getNode().getImmediateChild(b).updateChild(C,i);b===".priority"?u=h.updatePriority(l.getNode(),k):u=h.updateChild(l.getNode(),b,k,C,H3,null)}let p=$3(t,u,l.isFullyInitialized()||bn(e),h.filtersNodes()),_=new Rb(r,p,o);return W3(n,p,e,r,_,a)}function X1(n,t,e,i,r,o,s){let a=t.eventCache,l,u,h=new Rb(r,t,o);if(bn(e))u=n.filter.updateFullNode(t.eventCache.getNode(),i,s),l=Ib(t,u,!0,n.filter.filtersNodes());else{let p=fn(e);if(p===".priority")u=n.filter.updatePriority(t.eventCache.getNode(),i),l=Ib(t,u,a.isFullyInitialized(),a.isFiltered());else{let _=Mi(e),b=a.getNode().getImmediateChild(p),C;if(bn(_))C=i;else{let T=h.getCompleteChild(p);T!=null?k3(_)===".priority"&&T.getChild(R3(_)).isEmpty()?C=T:C=T.updateChild(_,i):C=en.EMPTY_NODE}if(b.equals(C))l=t;else{let T=n.filter.updateChild(a.getNode(),p,C,_,h,s);l=Ib(t,T,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function Zq(n,t){return n.eventCache.isCompleteForChild(t)}function rle(n,t,e,i,r,o,s){let a=t;return i.foreach((l,u)=>{let h=Wr(e,l);Zq(t,fn(h))&&(a=X1(n,a,h,u,r,o,s))}),i.foreach((l,u)=>{let h=Wr(e,l);Zq(t,fn(h))||(a=X1(n,a,h,u,r,o,s))}),a}function e3(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function J1(n,t,e,i,r,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,u;bn(e)?u=i:u=new Qs(null).setTree(e,i);let h=t.serverCache.getNode();return u.children.inorderTraversal((p,_)=>{if(h.hasChild(p)){let b=t.serverCache.getNode().getImmediateChild(p),C=e3(n,b,_);l=px(n,l,new mi(p),C,r,o,s,a)}}),u.children.inorderTraversal((p,_)=>{let b=!t.serverCache.isCompleteForChild(p)&&_.value===null;if(!h.hasChild(p)&&!b){let C=t.serverCache.getNode().getImmediateChild(p),T=e3(n,C,_);l=px(n,l,new mi(p),T,r,o,s,a)}}),l}function ole(n,t,e,i,r,o,s){if(fx(r,e)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(bn(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return px(n,t,e,l.getNode().getChild(e),r,o,a,s);if(bn(e)){let u=new Qs(null);return l.getNode().forEachChild(t_,(h,p)=>{u=u.set(new mi(h),p)}),J1(n,t,e,u,r,o,a,s)}else return t}else{let u=new Qs(null);return i.foreach((h,p)=>{let _=Wr(e,h);l.isCompleteForPath(_)&&(u=u.set(h,l.getNode().getChild(_)))}),J1(n,t,e,u,r,o,a,s)}}function sle(n,t,e,i,r){let o=t.serverCache,s=$3(t,o.getNode(),o.isFullyInitialized()||bn(e),o.isFiltered());return W3(n,s,e,i,H3,r)}function ale(n,t,e,i,r,o){let s;if(fx(i,e)!=null)return t;{let a=new Rb(i,t,r),l=t.eventCache.getNode(),u;if(bn(e)||fn(e)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=mx(i,Kf(t));else{let p=t.serverCache.getNode();Be(p instanceof en,"serverChildren would be complete if leaf node"),h=yM(i,p)}h=h,u=n.filter.updateFullNode(l,h,o)}else{let h=fn(e),p=vM(i,h,t.serverCache);p==null&&t.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),p!=null?u=n.filter.updateChild(l,h,p,Mi(e),a,o):t.eventCache.getNode().hasChild(h)?u=n.filter.updateChild(l,h,en.EMPTY_NODE,Mi(e),a,o):u=l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=mx(i,Kf(t)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=t.serverCache.isFullyInitialized()||fx(i,Gn())!=null,Ib(t,u,s,n.filter.filtersNodes())}}var Z1=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Ab(i.getIndex()),o=Pce(i);this.processor_=ele(o);let s=e.serverCache,a=e.eventCache,l=r.updateFullNode(en.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(en.EMPTY_NODE,a.getNode(),null),h=new yu(l,s.isFullyInitialized(),r.filtersNodes()),p=new yu(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ix(p,h),this.eventGenerator_=new H1(this.query_)}get query(){return this.query_}};function cle(n){return n.viewCache_.serverCache.getNode()}function lle(n){return hx(n.viewCache_)}function ule(n,t){let e=Kf(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!bn(t)&&!e.getImmediateChild(fn(t)).isEmpty())?e.getChild(t):null}function t3(n){return n.eventRegistrations_.length===0}function dle(n,t){n.eventRegistrations_.push(t)}function n3(n,t,e){let i=[];if(e){Be(t==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(e,r);s&&i.push(s)})}if(t){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(t))r.push(s);else if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function i3(n,t,e,i){t.type===_u.MERGE&&t.source.queryId!==null&&(Be(Kf(n.viewCache_),"We should always have a full cache before handling merges"),Be(hx(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,o=nle(n.processor_,r,t,e,i);return tle(n.processor_,o.viewCache),Be(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,G3(n,o.changes,o.viewCache.eventCache.getNode(),null)}function hle(n,t){let e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ur,(o,s)=>{i.push(s_(o,s))}),e.isFullyInitialized()&&i.push(V3(e.getNode())),G3(n,i,e.getNode(),t)}function G3(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return Vce(n.eventGenerator_,t,e,r)}var gx,_x=class{constructor(){this.views=new Map}};function mle(n){Be(!gx,"__referenceConstructor has already been defined"),gx=n}function fle(){return Be(gx,"Reference.ts has not been loaded"),gx}function ple(n){return n.views.size===0}function bM(n,t,e,i){let r=t.source.queryId;if(r!==null){let o=n.views.get(r);return Be(o!=null,"SyncTree gave us an op for an invalid query."),i3(o,t,e,i)}else{let o=[];for(let s of n.views.values())o=o.concat(i3(s,t,e,i));return o}}function Q3(n,t,e,i,r){let o=t._queryIdentifier,s=n.views.get(o);if(!s){let a=mx(e,r?i:null),l=!1;a?l=!0:i instanceof en?(a=yM(e,i),l=!1):(a=en.EMPTY_NODE,l=!1);let u=Ix(new yu(a,l,!1),new yu(i,r,!1));return new Z1(t,u)}return s}function gle(n,t,e,i,r,o){let s=Q3(n,t,i,r,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,s),dle(s,e),hle(s,e)}function _le(n,t,e,i){let r=t._queryIdentifier,o=[],s=[],a=nm(n);if(r==="default")for(let[l,u]of n.views.entries())s=s.concat(n3(u,e,i)),t3(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||o.push(u.query));else{let l=n.views.get(r);l&&(s=s.concat(n3(l,e,i)),t3(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!nm(n)&&o.push(new(fle())(t._repo,t._path)),{removed:o,events:s}}function Y3(n){let t=[];for(let e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function em(n,t){let e=null;for(let i of n.views.values())e=e||ule(i,t);return e}function X3(n,t){if(t._queryParams.loadsAllData())return Tx(n);{let i=t._queryIdentifier;return n.views.get(i)}}function J3(n,t){return X3(n,t)!=null}function nm(n){return Tx(n)!=null}function Tx(n){for(let t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var yx;function yle(n){Be(!yx,"__referenceConstructor has already been defined"),yx=n}function vle(){return Be(yx,"Reference.ts has not been loaded"),yx}var ble=1,vx=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Qs(null),this.pendingWriteTree_=Jce(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Z3(n,t,e,i,r){return jce(n.pendingWriteTree_,t,e,i,r),r?$b(n,new a_(B3(),t,e)):[]}function Uf(n,t,e=!1){let i=Uce(n.pendingWriteTree_,t);if(zce(n.pendingWriteTree_,t)){let o=new Qs(null);return i.snap!=null?o=o.set(Gn(),!0):Gs(i.children,s=>{o=o.set(new mi(s),!0)}),$b(n,new K1(i.path,o,e))}else return[]}function Bb(n,t,e){return $b(n,new a_(gM(),t,e))}function wle(n,t,e){let i=Qs.fromObject(e);return $b(n,new dx(gM(),t,i))}function Cle(n,t){return $b(n,new ux(gM(),t))}function Ele(n,t,e){let i=CM(n,e);if(i){let r=EM(i),o=r.path,s=r.queryId,a=xs(o,t),l=new ux(_M(s),a);return xM(n,o,l)}else return[]}function bx(n,t,e,i,r=!1){let o=t._path,s=n.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||J3(s,t))){let l=_le(s,t,e,i);ple(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let u=l.removed;if(a=l.events,!r){let h=u.findIndex(_=>_._queryParams.loadsAllData())!==-1,p=n.syncPointTree_.findOnPath(o,(_,b)=>nm(b));if(h&&!p){let _=n.syncPointTree_.subtree(o);if(!_.isEmpty()){let b=Sle(_);for(let C=0;C<b.length;++C){let T=b[C],k=T.query,U=i5(n,T);n.listenProvider_.startListening(Tb(k),Mb(n,k),U.hashFn,U.onComplete)}}}!p&&u.length>0&&!i&&(h?n.listenProvider_.stopListening(Tb(t),null):u.forEach(_=>{let b=n.queryToTagMap.get(Dx(_));n.listenProvider_.stopListening(Tb(_),b)}))}Tle(n,u)}return a}function e5(n,t,e,i){let r=CM(n,i);if(r!=null){let o=EM(r),s=o.path,a=o.queryId,l=xs(s,t),u=new a_(_M(a),l,e);return xM(n,s,u)}else return[]}function xle(n,t,e,i){let r=CM(n,i);if(r){let o=EM(r),s=o.path,a=o.queryId,l=xs(s,t),u=Qs.fromObject(e),h=new dx(_M(a),l,u);return xM(n,s,h)}else return[]}function eM(n,t,e,i=!1){let r=t._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(r,(_,b)=>{let C=xs(_,r);o=o||em(b,C),s=s||nm(b)});let a=n.syncPointTree_.get(r);a?(s=s||nm(a),o=o||em(a,Gn())):(a=new _x,n.syncPointTree_=n.syncPointTree_.set(r,a));let l;o!=null?l=!0:(l=!1,o=en.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((b,C)=>{let T=em(C,Gn());T&&(o=o.updateImmediateChild(b,T))}));let u=J3(a,t);if(!u&&!t._queryParams.loadsAllData()){let _=Dx(t);Be(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");let b=Dle();n.queryToTagMap.set(_,b),n.tagToQueryMap.set(b,_)}let h=Sx(n.pendingWriteTree_,r),p=gle(a,t,e,h,o,l);if(!u&&!s&&!i){let _=X3(a,t);p=p.concat(kle(n,t,_))}return p}function wM(n,t,e){let r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(s,a)=>{let l=xs(s,t),u=em(a,l);if(u)return u});return z3(r,t,o,e,!0)}function Ile(n,t){let e=t._path,i=null;n.syncPointTree_.foreachOnPath(e,(u,h)=>{let p=xs(u,e);i=i||em(h,p)});let r=n.syncPointTree_.get(e);r?i=i||em(r,Gn()):(r=new _x,n.syncPointTree_=n.syncPointTree_.set(e,r));let o=i!=null,s=o?new yu(i,!0,!1):null,a=Sx(n.pendingWriteTree_,t._path),l=Q3(r,t,a,o?s.getNode():en.EMPTY_NODE,o);return lle(l)}function $b(n,t){return t5(t,n.syncPointTree_,null,Sx(n.pendingWriteTree_,Gn()))}function t5(n,t,e,i){if(bn(n.path))return n5(n,t,e,i);{let r=t.get(Gn());e==null&&r!=null&&(e=em(r,Gn()));let o=[],s=fn(n.path),a=n.operationForChild(s),l=t.children.get(s);if(l&&a){let u=e?e.getImmediateChild(s):null,h=q3(i,s);o=o.concat(t5(a,l,u,h))}return r&&(o=o.concat(bM(r,n,i,e))),o}}function n5(n,t,e,i){let r=t.get(Gn());e==null&&r!=null&&(e=em(r,Gn()));let o=[];return t.children.inorderTraversal((s,a)=>{let l=e?e.getImmediateChild(s):null,u=q3(i,s),h=n.operationForChild(s);h&&(o=o.concat(n5(h,a,l,u)))}),r&&(o=o.concat(bM(r,n,i,e))),o}function i5(n,t){let e=t.query,i=Mb(n,e);return{hashFn:()=>(cle(t)||en.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?Ele(n,e._path,i):Cle(n,e._path);{let o=qae(r,e);return bx(n,e,null,o)}}}}function Mb(n,t){let e=Dx(t);return n.queryToTagMap.get(e)}function Dx(n){return n._path.toString()+"$"+n._queryIdentifier}function CM(n,t){return n.tagToQueryMap.get(t)}function EM(n){let t=n.indexOf("$");return Be(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new mi(n.substr(0,t))}}function xM(n,t,e){let i=n.syncPointTree_.get(t);Be(i,"Missing sync point for query tag that we're tracking");let r=Sx(n.pendingWriteTree_,t);return bM(i,e,r,null)}function Sle(n){return n.fold((t,e,i)=>{if(e&&nm(e))return[Tx(e)];{let r=[];return e&&(r=Y3(e)),Gs(i,(o,s)=>{r=r.concat(s)}),r}})}function Tb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(vle())(n._repo,n._path):n}function Tle(n,t){for(let e=0;e<t.length;++e){let i=t[e];if(!i._queryParams.loadsAllData()){let r=Dx(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}function Dle(){return ble++}function kle(n,t,e){let i=t._path,r=Mb(n,t),o=i5(n,e),s=n.listenProvider_.startListening(Tb(t),r,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(i);if(r)Be(!nm(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((u,h,p)=>{if(!bn(u)&&h&&nm(h))return[Tx(h).query];{let _=[];return h&&(_=_.concat(Y3(h).map(b=>b.query))),Gs(p,(b,C)=>{_=_.concat(C)}),_}});for(let u=0;u<l.length;++u){let h=l[u];n.listenProvider_.stopListening(Tb(h),Mb(n,h))}}return s}var tM=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},nM=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Wr(this.path_,t);return new n(this.syncTree_,e)}node(){return wM(this.syncTree_,this.path_)}},Ale=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},r3=function(n,t,e){if(!n||typeof n!="object")return n;if(Be(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Rle(n[".sv"],t,e);if(typeof n[".sv"]=="object")return Mle(n[".sv"],t);Be(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Rle=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:Be(!1,"Unexpected server value: "+n)}},Mle=function(n,t,e){n.hasOwnProperty("increment")||Be(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&Be(!1,"Unexpected increment value: "+i);let r=t.node();if(Be(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},Ple=function(n,t,e,i){return IM(t,new nM(e,n),i)},r5=function(n,t,e){return IM(n,new tM(t),e)};function IM(n,t,e){let i=n.getPriority().val(),r=r3(i,t.getImmediateChild(".priority"),e),o;if(n.isLeafNode()){let s=n,a=r3(s.getValue(),t,e);return a!==s.getValue()||r!==s.getPriority().val()?new r_(a,oo(r)):n}else{let s=n;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new r_(r))),s.forEachChild(ur,(a,l)=>{let u=IM(l,t.getImmediateChild(a),e);u!==l&&(o=o.updateImmediateChild(a,u))}),o}}var Pb=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function SM(n,t){let e=t instanceof mi?t:new mi(t),i=n,r=fn(e);for(;r!==null;){let o=bf(i.node.children,r)||{children:{},childCount:0};i=new Pb(r,i,o),e=Mi(e),r=fn(e)}return i}function d_(n){return n.node.value}function o5(n,t){n.node.value=t,iM(n)}function s5(n){return n.node.childCount>0}function Ole(n){return d_(n)===void 0&&!s5(n)}function kx(n,t){Gs(n.node.children,(e,i)=>{t(new Pb(e,n,i))})}function a5(n,t,e,i){e&&!i&&t(n),kx(n,r=>{a5(r,t,!0,i)}),e&&i&&t(n)}function Nle(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function jb(n){return new mi(n.parent===null?n.name:jb(n.parent)+"/"+n.name)}function iM(n){n.parent!==null&&Fle(n.parent,n.name,n)}function Fle(n,t,e){let i=Ole(e),r=lu(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,iM(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,iM(n))}var Vle=/[\[\].#$\/\u0000-\u001F\u007F]/,Lle=/[\[\].#$\u0000-\u001F\u007F]/,p1=10*1024*1024,c5=function(n){return typeof n=="string"&&n.length!==0&&!Vle.test(n)},l5=function(n){return typeof n=="string"&&n.length!==0&&!Lle.test(n)},Ble=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),l5(n)};var $le=function(n,t,e,i){i&&t===void 0||TM(OC(n,"value"),t,e)},TM=function(n,t,e){let i=e instanceof mi?new k1(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+$f(i));if(typeof t=="function")throw new Error(n+"contains a function "+$f(i)+" with contents = "+t.toString());if(d3(t))throw new Error(n+"contains "+t.toString()+" "+$f(i));if(typeof t=="string"&&t.length>p1/3&&gv(t)>p1)throw new Error(n+"contains a string greater than "+p1+" utf8 bytes "+$f(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,o=!1;if(Gs(t,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!c5(s)))throw new Error(n+" contains an invalid key ("+s+") "+$f(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vce(i,s),TM(n,a,i),bce(i)}),r&&o)throw new Error(n+' contains ".value" child '+$f(i)+" in addition to actual children.")}};var u5=function(n,t,e,i){if(!(i&&e===void 0)&&!l5(e))throw new Error(OC(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jle=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),u5(n,t,e,i)},Ule=function(n,t){if(fn(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},zle=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!c5(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Ble(e))throw new Error(OC(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var rM=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function DM(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],o=r.getPath();e!==null&&!mM(o,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:o}),e.events.push(r)}e&&n.eventLists_.push(e)}function d5(n,t,e){DM(n,e),h5(n,i=>mM(i,t))}function vu(n,t,e){DM(n,e),h5(n,i=>Il(i,t)||Il(t,i))}function h5(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let o=r.path;t(o)?(qle(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function qle(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();zf&&Bo("event: "+e.toString()),u_(i)}}}var Kle="repo_interrupt",Hle=25,oM=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lx(),this.transactionQueueTree_=new Pb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Wle(n,t,e){if(n.stats_=hM(n.repoInfo_),n.forceRestClient_||Gae())n.server_=new $1(n.repoInfo_,(i,r,o,s)=>{o3(n,i,r,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>s3(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pr(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new fM(n.repoInfo_,t,(i,r,o,s)=>{o3(n,i,r,o,s)},i=>{s3(n,i)},i=>{Qle(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Yae(n.repoInfo_,()=>new q1(n.stats_,n.server_)),n.infoData_=new j1,n.infoSyncTree_=new vx({startListening:(i,r,o,s)=>{let a=[],l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=Bb(n.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),AM(n,"connected",!1),n.serverSyncTree_=new vx({startListening:(i,r,o,s)=>(n.server_.listen(i,o,r,(a,l)=>{let u=s(a,l);vu(n.eventQueue_,i._path,u)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function Gle(n){let e=n.infoData_.getNode(new mi(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function kM(n){return Ale({timestamp:Gle(n)})}function o3(n,t,e,i,r){n.dataUpdateCount++;let o=new mi(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let s=[];if(r)if(i){let l=pv(e,u=>oo(u));s=xle(n.serverSyncTree_,o,l,r)}else{let l=oo(e);s=e5(n.serverSyncTree_,o,l,r)}else if(i){let l=pv(e,u=>oo(u));s=wle(n.serverSyncTree_,o,l)}else{let l=oo(e);s=Bb(n.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Rx(n,o)),vu(n.eventQueue_,a,s)}function s3(n,t){AM(n,"connected",t),t===!1&&Jle(n)}function Qle(n,t){Gs(t,(e,i)=>{AM(n,e,i)})}function AM(n,t,e){let i=new mi("/.info/"+t),r=oo(e);n.infoData_.updateSnapshot(i,r);let o=Bb(n.infoSyncTree_,i,r);vu(n.eventQueue_,i,o)}function m5(n){return n.nextWriteId_++}function Yle(n,t,e){let i=Ile(n.serverSyncTree_,t);return i!=null?Promise.resolve(i):n.server_.get(t).then(r=>{let o=oo(r).withIndex(t._queryParams.getIndex());eM(n.serverSyncTree_,t,e,!0);let s;if(t._queryParams.loadsAllData())s=Bb(n.serverSyncTree_,t._path,o);else{let a=Mb(n.serverSyncTree_,t);s=e5(n.serverSyncTree_,t._path,o,a)}return vu(n.eventQueue_,t._path,s),bx(n.serverSyncTree_,t,e,null,!0),o},r=>(Ax(n,"get for query "+Pr(t)+" failed: "+r),Promise.reject(new Error(r))))}function Xle(n,t,e,i,r){Ax(n,"set",{path:t.toString(),value:e,priority:i});let o=kM(n),s=oo(e,i),a=wM(n.serverSyncTree_,t),l=r5(s,a,o),u=m5(n),h=Z3(n.serverSyncTree_,t,l,u,!0);DM(n.eventQueue_,h),n.server_.put(t.toString(),s.val(!0),(_,b)=>{let C=_==="ok";C||Ws("set at "+t+" failed: "+_);let T=Uf(n.serverSyncTree_,u,!C);vu(n.eventQueue_,t,T),tue(n,r,_,b)});let p=y5(n,t);Rx(n,p),vu(n.eventQueue_,p,[])}function Jle(n){Ax(n,"onDisconnectEvents");let t=kM(n),e=lx();U1(n.onDisconnect_,Gn(),(r,o)=>{let s=Ple(r,o,n.serverSyncTree_,t);L3(e,r,s)});let i=[];U1(e,Gn(),(r,o)=>{i=i.concat(Bb(n.serverSyncTree_,r,o));let s=y5(n,r);Rx(n,s)}),n.onDisconnect_=lx(),vu(n.eventQueue_,Gn(),i)}function Zle(n,t,e){let i;fn(t._path)===".info"?i=eM(n.infoSyncTree_,t,e):i=eM(n.serverSyncTree_,t,e),d5(n.eventQueue_,t._path,i)}function a3(n,t,e){let i;fn(t._path)===".info"?i=bx(n.infoSyncTree_,t,e):i=bx(n.serverSyncTree_,t,e),d5(n.eventQueue_,t._path,i)}function eue(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Kle)}function Ax(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Bo(e,...t)}function tue(n,t,e,i){t&&u_(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),o=r;i&&(o+=": "+i);let s=new Error(o);s.code=r,t(s)}})}function f5(n,t,e){return wM(n.serverSyncTree_,t,e)||en.EMPTY_NODE}function RM(n,t=n.transactionQueueTree_){if(t||Mx(n,t),d_(t)){let e=g5(n,t);Be(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&nue(n,jb(t),e)}else s5(t)&&kx(t,e=>{RM(n,e)})}function nue(n,t,e){let i=e.map(u=>u.currentWriteId),r=f5(n,t,i),o=r,s=r.hash();for(let u=0;u<e.length;u++){let h=e[u];Be(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=xs(t,h.path);o=o.updateChild(p,h.currentOutputSnapshotRaw)}let a=o.val(!0),l=t;n.server_.put(l.toString(),a,u=>{Ax(n,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){let p=[];for(let _=0;_<e.length;_++)e[_].status=2,h=h.concat(Uf(n.serverSyncTree_,e[_].currentWriteId)),e[_].onComplete&&p.push(()=>e[_].onComplete(null,!0,e[_].currentOutputSnapshotResolved)),e[_].unwatcher();Mx(n,SM(n.transactionQueueTree_,t)),RM(n,n.transactionQueueTree_),vu(n.eventQueue_,t,h);for(let _=0;_<p.length;_++)u_(p[_])}else{if(u==="datastale")for(let p=0;p<e.length;p++)e[p].status===3?e[p].status=4:e[p].status=0;else{Ws("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<e.length;p++)e[p].status=4,e[p].abortReason=u}Rx(n,t)}},s)}function Rx(n,t){let e=p5(n,t),i=jb(e),r=g5(n,e);return iue(n,r,i),i}function iue(n,t,e){if(t.length===0)return;let i=[],r=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],u=xs(e,l.path),h=!1,p;if(Be(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,p=l.abortReason,r=r.concat(Uf(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Hle)h=!0,p="maxretry",r=r.concat(Uf(n.serverSyncTree_,l.currentWriteId,!0));else{let _=f5(n,l.path,s);l.currentInputSnapshot=_;let b=t[a].update(_.val());if(b!==void 0){TM("transaction failed: Data returned ",b,l.path);let C=oo(b);typeof b=="object"&&b!=null&&lu(b,".priority")||(C=C.updatePriority(_.getPriority()));let k=l.currentWriteId,U=kM(n),W=r5(C,_,U);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=W,l.currentWriteId=m5(n),s.splice(s.indexOf(k),1),r=r.concat(Z3(n.serverSyncTree_,l.path,W,l.currentWriteId,l.applyLocally)),r=r.concat(Uf(n.serverSyncTree_,k,!0))}else h=!0,p="nodata",r=r.concat(Uf(n.serverSyncTree_,l.currentWriteId,!0))}vu(n.eventQueue_,e,r),r=[],h&&(t[a].status=2,function(_){setTimeout(_,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(p==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(p),!1,null))))}Mx(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)u_(i[a]);RM(n,n.transactionQueueTree_)}function p5(n,t){let e,i=n.transactionQueueTree_;for(e=fn(t);e!==null&&d_(i)===void 0;)i=SM(i,e),t=Mi(t),e=fn(t);return i}function g5(n,t){let e=[];return _5(n,t,e),e.sort((i,r)=>i.order-r.order),e}function _5(n,t,e){let i=d_(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);kx(t,r=>{_5(n,r,e)})}function Mx(n,t){let e=d_(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,o5(t,e.length>0?e:void 0)}kx(t,i=>{Mx(n,i)})}function y5(n,t){let e=jb(p5(n,t)),i=SM(n.transactionQueueTree_,t);return Nle(i,r=>{g1(n,r)}),g1(n,i),a5(i,r=>{g1(n,r)}),e}function g1(n,t){let e=d_(t);if(e){let i=[],r=[],o=-1;for(let s=0;s<e.length;s++)e[s].status===3||(e[s].status===1?(Be(o===s-1,"All SENT items should be at beginning of queue."),o=s,e[s].status=3,e[s].abortReason="set"):(Be(e[s].status===0,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(Uf(n.serverSyncTree_,e[s].currentWriteId,!0)),e[s].onComplete&&i.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?o5(t,void 0):e.length=o+1,vu(n.eventQueue_,jb(t),r);for(let s=0;s<i.length;s++)u_(i[s])}}function rue(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function oue(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ws(`Invalid query segment '${e}' in query '${n}'`)}return t}var c3=function(n,t){let e=sue(n),i=e.namespace;e.domain==="firebase.com"&&Sd(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&Sd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||Bae();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new tx(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new mi(e.pathString)}},sue=function(n){let t="",e="",i="",r="",o="",s=!0,a="https",l=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");h===-1&&(h=n.length);let p=n.indexOf("?");p===-1&&(p=n.length),t=n.substring(0,Math.min(h,p)),h<p&&(r=rue(n.substring(h,p)));let _=oue(n.substring(Math.min(n.length,p)));u=t.indexOf(":"),u>=0?(s=a==="https"||a==="wss",l=parseInt(t.substring(u+1),10)):u=t.length;let b=t.slice(0,u);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{let C=t.indexOf(".");i=t.substring(0,C).toLowerCase(),e=t.substring(C+1),o=i}"ns"in _&&(o=_.ns)}return{host:t,port:l,domain:e,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var wx=class{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Pr(this.snapshot.exportVal())}},Cx=class{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Ex=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return Be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var sM=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return bn(this._path)?null:k3(this._path)}get ref(){return new bu(this._repo,this._path)}get _queryIdentifier(){let t=Wq(this._queryParams),e=dM(t);return e==="{}"?"default":e}get _queryObject(){return Wq(this._queryParams)}isEqual(t){if(t=yr(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=mM(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+yce(this._path)}};var bu=class n extends sM{constructor(t,e){super(t,e,new B1,!1)}get parent(){let t=R3(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Ob=class n{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new mi(t),i=Nb(this.ref,t);return new n(this._node.getChild(e),i,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new n(r,Nb(this.ref,i),ur)))}hasChild(t){let e=new mi(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ub(n,t){return n=yr(n),n._checkNotDeleted("ref"),t!==void 0?Nb(n._root,t):n._root}function Nb(n,t){return n=yr(n),fn(n._path)===null?jle("child","path",t,!1):u5("child","path",t,!1),new bu(n._repo,Wr(n._path,t))}function MM(n,t){n=yr(n),Ule("set",n._path),$le("set",t,n._path,!1);let e=new vf;return Xle(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function v5(n){n=yr(n);let t=new Ex(()=>{}),e=new xx(t);return Yle(n._repo,n,e).then(i=>new Ob(i,new bu(n._repo,n._path),n._queryParams.getIndex()))}var xx=class n{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let i=e._queryParams.getIndex();return new wx("value",this,new Ob(t.snapshotNode,new bu(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Cx(this,t,e):null}matches(t){return t instanceof n?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},aM=class n{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Cx(this,t,e):null}createEvent(t,e){Be(t.childName!=null,"Child events should have a childName.");let i=Nb(new bu(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new wx(t.type,this,new Ob(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof n?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function aue(n,t,e,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){let l=e,u=(h,p)=>{a3(n._repo,n,a),l(h,p)};u.userCallback=e.userCallback,u.context=e.context,e=u}let s=new Ex(e,o||void 0),a=t==="value"?new xx(s):new aM(t,s);return Zle(n._repo,n,a),()=>a3(n._repo,n,a)}function PM(n,t,e,i){return aue(n,"value",t,e,i)}mle(bu);yle(bu);var cue="FIREBASE_DATABASE_EMULATOR_HOST",cM={},lue=!1;function uue(n,t,e,i){n.repoInfo_=new tx(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function due(n,t,e,i,r){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Sd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bo("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=c3(o,r),a=s.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[cue]),u?(l=!0,o=`http://${u}?ns=${a.namespace}`,s=c3(o,r),a=s.repoInfo):l=!s.repoInfo.secure;let h=r&&l?new xb(xb.OWNER):new C1(n.name,n.options,t);zle("Invalid Firebase Database URL",s),bn(s.path)||Sd("Database URL must point to the root of a Firebase Database (not including a child path).");let p=mue(a,n,h,new w1(n.name,e));return new lM(p,n)}function hue(n,t){let e=cM[t];(!e||e[n.key]!==n)&&Sd(`Database ${t}(${n.repoInfo_}) has already been deleted.`),eue(n),delete e[n.key]}function mue(n,t,e,i){let r=cM[t.name];r||(r={},cM[t.name]=r);let o=r[n.toURLString()];return o&&Sd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new oM(n,lue,e,i),r[n.toURLString()]=o,o}var lM=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Wle(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bu(this._repo,Gn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hue(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Sd("Cannot call "+t+" on a deleted database.")}};function Px(n=fl(),t){let e=gd(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){let i=Mh("database");i&&b5(e,...i)}return e}function b5(n,t,e,i={}){n=yr(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Sd("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Sd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xb(xb.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:og(i.mockUserToken,n.app.options.projectId);o=new xb(s)}uue(r,t,e,o)}function fue(n){Fae(ag),ml(new dl("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return due(i,r,o,e)},"PUBLIC").setMultipleInstances(!0)),ei(Aq,Rq,n),ei(Aq,Rq,"esm2017")}var pue={".sv":"timestamp"};function w5(){return pue}fM.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};fM.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};fue();var gn=class n{constructor(t,e){this.auth=t;this.MyAuth=e}db=Px();collection="userProfile";isUserAuthenticated(){return new Promise((t,e)=>{this.auth.onAuthStateChanged(i=>{t(!!i)})})}getLoggedUser(){return console.log("ciao user seervice"),new Promise((t,e)=>{this.MyAuth.getUser().subscribe(i=>O(this,null,function*(){if(i){let r=yield this.getUserByUid(i.uid);t(r)}}))})}signupUser(t){return O(this,null,function*(){let e=_b(),i=yield kq(e,t.email,t.password);t.setKey(i.user.uid);let r=Ub(this.db,`${this.collection}/${t.key}`);return MM(r,t.serialize())})}logout(){let t=_b();console.log("auth",t),t.signOut()}getUserByUid(t){let e=Ub(this.db,`userProfile/${t}`);return new Promise((i,r)=>{PM(e,o=>{if(o.exists()){let s=o.val(),a=new Jh(s).setKey(t);i(a)}else console.log("No user found"),r("no data found")})})}static \u0275fac=function(e){return new(e||n)(Ve(Bf),Ve(Ng))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};function gue(n,t){if(n&1){let e=Pt();D(0,"div",1)(1,"button",2),he("click",function(){xe(e);let r=Se();return Ie(r.action())}),z(2),R()()}if(n&2){let e=Se();B(2),Ut(" ",e.data.action," ")}}var _ue=["label"];function yue(n,t){}var vue=Math.pow(2,31)-1,zb=class{_overlayRef;instance;containerInstance;_afterDismissed=new ye;_afterOpened=new ye;_onAction=new ye;_durationTimeoutId;_dismissedByAction=!1;constructor(t,e){this._overlayRef=e,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,vue))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},C5=new ce("MatSnackBarData"),h_=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},bue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),wue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),Cue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),E5=(()=>{class n{snackBarRef=w(zb);data=w(C5);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,r){i&1&&(D(0,"div",0),z(1),R(),Ee(2,gue,3,1,"div",1)),i&2&&(B(),Ut(" ",r.data.message,`
`),B(),kt(r.hasAction?2:-1))},dependencies:[rn,bue,wue,Cue],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return n})(),Eue={snackBarState:ps("state",[Vo("void, hidden",yi({transform:"scale(0.8)",opacity:0})),Vo("visible",yi({transform:"scale(1)",opacity:1})),vr("* => visible",Or("150ms cubic-bezier(0, 0, 0.2, 1)")),vr("* => void, * => hidden",Or("75ms cubic-bezier(0.4, 0.0, 1, 1)",yi({opacity:0})))])},xue=(()=>{class n extends qh{_ngZone=w(Ke);_elementRef=w(He);_changeDetectorRef=w(qt);_platform=w(mn);snackBarConfig=w(h_);_document=w(xt);_trackedModals=new Set;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new ye;_onExit=new ye;_onEnter=new ye;_animationState="void";_live;_label;_role;_liveElementId=w(Hn).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}attachDomPortal=e=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),i};onAnimationEnd(e){let{fromState:i,toState:r}=e;if((r==="void"&&i!=="void"||r==="hidden")&&this._completeExit(),r==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(s=>e.classList.add(s)):e.classList.add(i)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let i=e.getAttribute("aria-owns");if(i){let r=i.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(i&1&&(Vt(Cs,7),Vt(_ue,7)),i&2){let o;Pe(o=Oe())&&(r._portalOutlet=o.first),Pe(o=Oe())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(i,r){i&1&&eg("@state.done",function(s){return r.onAnimationEnd(s)}),i&2&&Zp("@state",r._animationState)},features:[Et],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(D(0,"div",1)(1,"div",2,0)(3,"div",3),Ee(4,yue,0,0,"ng-template",4),R(),be(5,"div"),R()()),i&2&&(B(5),tt("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Cs],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[Eue.snackBarState]}})}return n})();function Iue(){return new h_}var Sue=new ce("mat-snack-bar-default-options",{providedIn:"root",factory:Iue}),Tl=(()=>{class n{_overlay=w(Fi);_live=w(vE);_injector=w(Mt);_breakpointObserver=w(xg);_parentSnackBar=w(n,{optional:!0,skipSelf:!0});_defaultConfig=w(Sue);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=E5;snackBarContainerComponent=xue;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){let o=ee(ee({},this._defaultConfig),r);return o.data={message:e,action:i},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){let r=i&&i.viewContainerRef&&i.viewContainerRef.injector,o=Mt.create({parent:r||this._injector,providers:[{provide:h_,useValue:i}]}),s=new Tc(this.snackBarContainerComponent,i.viewContainerRef,o),a=e.attach(s);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){let r=ee(ee(ee({},new h_),this._defaultConfig),i),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new zb(s,o);if(e instanceof tr){let l=new ws(e,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(l)}else{let l=this._createInjector(r,a),u=new Tc(e,void 0,l),h=s.attachComponentPortal(u);a.instance=h.instance}return this._breakpointObserver.observe(bd.HandsetPortrait).pipe(An(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){let i=new Dc;i.direction=e.direction;let r=this._overlay.position().global(),o=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,a=!s&&e.horizontalPosition!=="center";return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Mt.create({parent:r||this._injector,providers:[{provide:zb,useValue:i},{provide:C5,useValue:e.data}]})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ox=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Tl],imports:[Ac,Es,Ht,gt,E5,gt]})}return n})();function Tue(n,t){if(n&1&&(D(0,"div",15),z(1),R()),n&2){let e=Se();B(),Zt(e.errorMessage)}}var Nx=class n{constructor(t,e){this.Userservice=t;this.$snackBar=e}birthDate=new Date().toISOString().slice(0,10);email="";password="";error=!1;errorMessage="";firstName="";lastName="";confirmPassword="";userName="";submit(){let t=new Jh({email:this.email,password:this.password,firstName:this.firstName,lastName:this.lastName,userName:this.userName,birthDate:new Date(this.birthDate).toISOString().slice(0,10)});console.log("user",t),gn,this.Userservice.signupUser(t).then(()=>{this.$snackBar.open("User created successfully","Close",{duration:3e3})}).catch(e=>{this.$snackBar.open("Error creating user","Close",{duration:3e3}),console.error(e)})}static \u0275fac=function(e){return new(e||n)(pe(gn),pe(Tl))};static \u0275cmp=le({type:n,selectors:[["app-signup"]],features:[St([cR()])],decls:55,vars:10,consts:[["picker",""],[1,"login-wrapper"],[1,"login-header"],["appearance","fill"],["type","text","matInput","","placeholder","nome","required","",3,"ngModelChange","ngModel"],["matPrefix",""],["type","text","matInput","","placeholder","cognome",3,"ngModelChange","ngModel"],["type","text","matInput","","placeholder","nome utente",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["type","email","matInput","","placeholder","Your email","required","",3,"ngModelChange","ngModel"],["type","password","matInput","","placeholder","Your password",3,"ngModelChange","ngModel"],[1,"action-container"],["mat-raised-button","",3,"click"],[1,"error"]],template:function(e,i){if(e&1){let r=Pt();D(0,"section")(1,"mat-card",1)(2,"mat-card-header")(3,"h2",2),z(4," Login "),R()(),D(5,"mat-card-content")(6,"mat-form-field",3)(7,"mat-label"),z(8,"Nome"),R(),D(9,"input",4),bt("ngModelChange",function(s){return xe(r),vt(i.firstName,s)||(i.firstName=s),Ie(s)}),R(),D(10,"mat-icon",5),z(11,"person"),R()(),D(12,"mat-form-field",3)(13,"mat-label"),z(14,"Cognome"),R(),D(15,"input",6),bt("ngModelChange",function(s){return xe(r),vt(i.lastName,s)||(i.lastName=s),Ie(s)}),R(),D(16,"mat-icon",5),z(17,"person_pin"),R()(),D(18,"mat-form-field",3)(19,"mat-label"),z(20,"User Name"),R(),D(21,"input",7),bt("ngModelChange",function(s){return xe(r),vt(i.userName,s)||(i.userName=s),Ie(s)}),R(),D(22,"mat-icon",5),z(23,"person_pin"),R()(),Ee(24,Tue,2,1,"div",8),R(),D(25,"mat-form-field")(26,"mat-label"),z(27,"Choose a date"),R(),D(28,"input",9),bt("ngModelChange",function(s){return xe(r),vt(i.birthDate,s)||(i.birthDate=s),Ie(s)}),R(),D(29,"mat-hint"),z(30,"YYYY-MM-DD"),R(),be(31,"mat-datepicker-toggle",10)(32,"mat-datepicker",null,0),R(),D(34,"mat-form-field",3)(35,"mat-label"),z(36,"Enter email"),R(),D(37,"input",11),bt("ngModelChange",function(s){return xe(r),vt(i.email,s)||(i.email=s),Ie(s)}),R(),D(38,"mat-icon",5),z(39,"email"),R()(),D(40,"mat-form-field",3)(41,"mat-label"),z(42,"Enter password"),R(),D(43,"input",12),bt("ngModelChange",function(s){return xe(r),vt(i.password,s)||(i.password=s),Ie(s)}),R(),D(44,"mat-icon",5),z(45,"password"),R()(),D(46,"mat-form-field",3)(47,"mat-label"),z(48,"Retype password"),R(),D(49,"input",12),bt("ngModelChange",function(s){return xe(r),vt(i.confirmPassword,s)||(i.confirmPassword=s),Ie(s)}),R(),D(50,"mat-icon",5),z(51,"password"),R()(),D(52,"div",13)(53,"button",14),he("click",function(){return xe(r),Ie(i.submit())}),z(54,"Register"),R()()()()}if(e&2){let r=hi(33);B(9),yt("ngModel",i.firstName),B(6),yt("ngModel",i.lastName),B(6),yt("ngModel",i.userName),B(3),re("ngIf",i.error),B(4),re("matDatepicker",r),yt("ngModel",i.birthDate),B(3),re("for",r),B(6),yt("ngModel",i.email),B(6),yt("ngModel",i.password),B(6),yt("ngModel",i.confirmPassword)}},dependencies:[Ii,Fr,zi,Kh,$g,jg,Ai,lr,ro,Ri,ci,Pg,Rg,IE,Mg,Pc,Ht,rn,Nc,Xg,Xh,Lf,mv,kC,ai,Ki,Hi,YR,Vf],styles:["mat-card-content.mat-mdc-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.action-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})};var kue=[[["caption"]],[["colgroup"],["col"]],"*"],Aue=["caption","colgroup, col","*"];function Rue(n,t){n&1&&nt(0,2)}function Mue(n,t){n&1&&(D(0,"thead",0),Zr(1,1),R(),D(2,"tbody",0),Zr(3,2)(4,3),R(),D(5,"tfoot",0),Zr(6,4),R())}function Pue(n,t){n&1&&Zr(0,1)(1,2)(2,3)(3,4)}var Dl=new ce("CDK_TABLE");var jx=(()=>{class n{template=w(tr);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkCellDef",""]]})}return n})(),Ux=(()=>{class n{template=w(tr);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkHeaderCellDef",""]]})}return n})(),S5=(()=>{class n{template=w(tr);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkFooterCellDef",""]]})}return n})(),m_=(()=>{class n{_table=w(Dl,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(i,r,o){if(i&1&&(jt(o,jx,5),jt(o,Ux,5),jt(o,S5,5)),i&2){let s;Pe(s=Oe())&&(r.cell=s.first),Pe(s=Oe())&&(r.headerCell=s.first),Pe(s=Oe())&&(r.footerCell=s.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",We],stickyEnd:[2,"stickyEnd","stickyEnd",We]},features:[St([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Ft]})}return n})(),Vx=class{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}},T5=(()=>{class n extends Vx{constructor(){super(w(m_),w(He))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Et]})}return n})();var D5=(()=>{class n extends Vx{constructor(){let e=w(m_),i=w(He);super(e,i);let r=e._table?._getCellRole();r&&i.nativeElement.setAttribute("role",r)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Et]})}return n})(),Lx=class{tasks=[];endTasks=[]},Bx=new ce("_COALESCED_STYLE_SCHEDULER"),NM=(()=>{class n{_currentSchedule=null;_ngZone=w(Ke);constructor(){}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Lx,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new Lx;for(let i of e.tasks)i();for(let i of e.endTasks)i()}this._currentSchedule=null})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();var FM=(()=>{class n{template=w(tr);_differs=w(gf);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof Kb?e.headerCell.template:this instanceof VM?e.footerCell.template:e.cell.template}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,features:[Tt]})}return n})(),Kb=(()=>{class n extends FM{_table=w(Dl,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(w(tr),w(gf))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",We]},features:[Ft,Et,Tt]})}return n})(),VM=(()=>{class n extends FM{_table=w(Dl,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(w(tr),w(gf))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",We]},features:[Ft,Et,Tt]})}return n})(),zx=(()=>{class n extends FM{_table=w(Dl,{optional:!0});when;constructor(){super(w(tr),w(gf))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Et]})}return n})(),Wf=(()=>{class n{_viewContainer=w(Mr);cells;context;static mostRecentCellOutlet=null;constructor(){n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkCellOutlet",""]]})}return n})(),LM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&Zr(0,0)},dependencies:[Wf],encapsulation:2})}return n})();var BM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&Zr(0,0)},dependencies:[Wf],encapsulation:2})}return n})(),k5=(()=>{class n{templateRef=w(tr);_contentClassName="cdk-no-data-row";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["ng-template","cdkNoDataRow",""]]})}return n})(),x5=["top","bottom","left","right"],OM=class{_isNativeHtmlTable;_stickCellCss;direction;_coalescedStyleScheduler;_isBrowser;_needsPositionStickyOnElement;_positionListener;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(t=>this._updateCachedSizes(t)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;constructor(t,e,i,r,o=!0,s=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=o,this._needsPositionStickyOnElement=s,this._positionListener=a,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(t);let i=[];for(let r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let o=0;o<r.children.length;o++)i.push(r.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(let r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0,o=!0){if(o&&this._updateStickyColumnReplayQueue({rows:[...t],stickyStartStates:[...e],stickyEndStates:[...i]}),!t.length||!this._isBrowser||!(e.some(s=>s)||i.some(s=>s))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let s=t[0],a=s.children.length,l=this._getCellWidths(s,r),u=this._getStickyStartColumnPositions(l,e),h=this._getStickyEndColumnPositions(l,i),p=e.lastIndexOf(!0),_=i.indexOf(!0),b=this.direction==="rtl",C=b?"right":"left",T=b?"left":"right";for(let k of t)for(let U=0;U<a;U++){let W=k.children[U];e[U]&&this._addStickyStyle(W,C,u[U],U===p),i[U]&&this._addStickyStyle(W,T,h[U],U===_)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:p===-1?[]:l.slice(0,p+1).map((k,U)=>e[U]?k:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:_===-1?[]:l.slice(_).map((k,U)=>i[U+_]?k:null).reverse()}))})}stickRows(t,e,i){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let r=i==="bottom"?t.slice().reverse():t,o=i==="bottom"?e.slice().reverse():e,s=[],a=[],l=[];for(let h=0,p=0;h<r.length;h++){if(!o[h])continue;s[h]=p;let _=r[h];l[h]=this._isNativeHtmlTable?Array.from(_.children):[_];let b=this._retrieveElementSize(_).height;p+=b,a[h]=b}let u=o.lastIndexOf(!0);for(let h=0;h<r.length;h++){if(!o[h])continue;let p=s[h],_=h===u;for(let b of l[h])this._addStickyStyle(b,i,p,_)}i==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:l})})}updateStickyFooterContainer(t,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let i=t.querySelector("tfoot");i&&(e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1))})}_removeStickyStyle(t,e){for(let r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);x5.some(r=>e.indexOf(r)===-1&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let e={top:100,bottom:10,left:1,right:1},i=0;for(let r of x5)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let i=[],r=t.children;for(let o=0;o<r.length;o++){let s=r[o];i.push(this._retrieveElementSize(s).width)}return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){let i=[],r=0;for(let o=0;o<t.length;o++)e[o]&&(i[o]=r,r+=t[o]);return i}_getStickyEndColumnPositions(t,e){let i=[],r=0;for(let o=t.length;o>0;o--)e[o]&&(i[o]=r,r+=t[o]);return i}_retrieveElementSize(t){let e=this._elemSizeCache.get(t);if(e)return e;let i=t.getBoundingClientRect(),r={width:i.width,height:i.height};return this._resizeObserver&&(this._elemSizeCache.set(t,r),this._resizeObserver.observe(t,{box:"border-box"})),r}_updateStickyColumnReplayQueue(t){this._removeFromStickyColumnReplayQueue(t.rows),!this._stickyColumnsReplayTimeout&&this._updatedStickyColumnsParamsToReplay.push(t)}_removeFromStickyColumnReplayQueue(t){let e=new Set(t);for(let i of this._updatedStickyColumnsParamsToReplay)i.rows=i.rows.filter(r=>!e.has(r));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(i=>!!i.rows.length)}_updateCachedSizes(t){let e=!1;for(let i of t){let r=i.borderBoxSize?.length?{width:i.borderBoxSize[0].inlineSize,height:i.borderBoxSize[0].blockSize}:{width:i.contentRect.width,height:i.contentRect.height};r.width!==this._elemSizeCache.get(i.target)?.width&&Oue(i.target)&&(e=!0),this._elemSizeCache.set(i.target,r)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{for(let i of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(i.rows,i.stickyStartStates,i.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null},0))}};function Oue(n){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(t=>n.classList.contains(t))}var $x=new ce("CDK_SPL");var $M=(()=>{class n{viewContainer=w(Mr);elementRef=w(He);constructor(){let e=w(Dl);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","rowOutlet",""]]})}return n})(),jM=(()=>{class n{viewContainer=w(Mr);elementRef=w(He);constructor(){let e=w(Dl);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","headerRowOutlet",""]]})}return n})(),UM=(()=>{class n{viewContainer=w(Mr);elementRef=w(He);constructor(){let e=w(Dl);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","footerRowOutlet",""]]})}return n})(),zM=(()=>{class n{viewContainer=w(Mr);elementRef=w(He);constructor(){let e=w(Dl);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","noDataRowOutlet",""]]})}return n})();var qM=(()=>{class n{_differs=w(gf);_changeDetectorRef=w(qt);_elementRef=w(He);_dir=w(Ni,{optional:!0});_platform=w(mn);_viewRepeater=w(nb);_coalescedStyleScheduler=w(Bx);_viewportRuler=w(Of);_stickyPositioningListener=w($x,{optional:!0,skipSelf:!0});_document=w(xt);_data;_onDestroy=new ye;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new ke;viewChange=new gi({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=w(Mt);constructor(){w(new Cc("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(An(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),RE(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,o,s)=>this._getEmbeddedViewArgs(r.item,s),r=>r.item.data,r=>{r.operation===Fg.INSERTED&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);o.context.$implicit=r.item.data}),this._updateNoDataRow(),Xr(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let r=I5(this._headerRowOutlet,"thead");r&&(r.style.display=e.length?"":"none")}let i=this._headerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,i,"top"),this._headerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let r=I5(this._footerRowOutlet,"tfoot");r&&(r.style.display=e.length?"":"none")}let i=this._footerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,i,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,s)=>{this._addStickyColumnStyles([o],this._headerRowDefs[s])}),this._rowDefs.forEach(o=>{let s=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===o&&s.push(i[a]);this._addStickyColumnStyles(s,o)}),r.forEach((o,s)=>{this._addStickyColumnStyles([o],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let o=this._data[r],s=this._getRenderRowsForData(o,r,i.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let a=0;a<s.length;a++){let l=s[a],u=this._cachedRenderRowsMap.get(l.data);u.has(l.rowDef)?u.get(l.rowDef).push(l):u.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(s=>{let a=r&&r.has(s)?r.get(s):[];if(a.length){let l=a.shift();return l.dataIndex=i,l}else return{data:e,rowDef:s,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Fx(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Fx(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Fx(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Fx(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(i=>!i.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(s,a)=>{let l=!!a.getColumnsDiff();return s||l},i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();let r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();let o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),i||r||o}_switchDataSource(e){this._data=[],RE(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;RE(this.dataSource)?e=this.dataSource.connect(this):hf(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Ye(this.dataSource)),this._renderChangeSubscription=e.pipe(An(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){let r=Array.from(i.columns||[]).map(a=>{let l=this._columnDefsByName.get(a);return l}),o=r.map(a=>a.sticky),s=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let i=[];for(let r=0;r<e.viewContainer.length;r++){let o=e.viewContainer.get(r);i.push(o.rootNodes[0])}return i}_getRowDefs(e,i){if(this._rowDefs.length==1)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(o=>!o.when||o.when(i,e));else{let o=this._rowDefs.find(s=>s.when&&s.when(i,e))||this._defaultRowDef;o&&r.push(o)}return r.length,r}_getEmbeddedViewArgs(e,i){let r=e.rowDef,o={$implicit:e.data};return{templateRef:r.template,context:o,index:i}}_renderRow(e,i,r,o={}){let s=e.viewContainer.createEmbeddedView(i.template,o,r);return this._renderCellTemplateForItem(i,o),s}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Wf.mostRecentCellOutlet&&Wf.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){let s=e.get(i).context;s.count=r,s.first=i===0,s.last=i===r-1,s.even=i%2===0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[i].dataIndex,s.renderIndex=i):s.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,i=>{let r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new OM(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Ye()).pipe(An(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let i=this._rowOutlet.viewContainer.length===0;if(i===this._isShowingNoDataRow)return;let r=this._noDataRowOutlet.viewContainer;if(i){let o=r.createEmbeddedView(e.templateRef),s=o.rootNodes[0];o.rootNodes.length===1&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i,this._changeDetectorRef.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(i,r,o){if(i&1&&(jt(o,k5,5),jt(o,m_,5),jt(o,zx,5),jt(o,Kb,5),jt(o,VM,5)),i&2){let s;Pe(s=Oe())&&(r._noDataRow=s.first),Pe(s=Oe())&&(r._contentColumnDefs=s),Pe(s=Oe())&&(r._contentRowDefs=s),Pe(s=Oe())&&(r._contentHeaderRowDefs=s),Pe(s=Oe())&&(r._contentFooterRowDefs=s)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(i,r){i&2&&ut("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",We],fixedLayout:[2,"fixedLayout","fixedLayout",We]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[St([{provide:Dl,useExisting:n},{provide:nb,useClass:Vg},{provide:Bx,useClass:NM},{provide:$x,useValue:null}]),Ft],ngContentSelectors:Aue,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,r){i&1&&(Xt(kue),nt(0),nt(1,1),Ee(2,Rue,1,0)(3,Mue,7,0)(4,Pue,4,0)),i&2&&(B(2),kt(r._isServer?2:-1),B(),kt(r._isNativeHtmlTable?3:4))},dependencies:[jM,$M,zM,UM],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return n})();function Fx(n,t){return n.concat(Array.from(t))}function I5(n,t){let e=t.toUpperCase(),i=n.viewContainer.element.nativeElement;for(;i;){let r=i.nodeType===1?i.nodeName:null;if(r===e)return i;if(r==="TABLE")break;i=i.parentNode}return null}var A5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[ib]})}return n})();var Nue=[[["caption"]],[["colgroup"],["col"]],"*"],Fue=["caption","colgroup, col","*"];function Vue(n,t){n&1&&nt(0,2)}function Lue(n,t){n&1&&(D(0,"thead",0),Zr(1,1),R(),D(2,"tbody",2),Zr(3,3)(4,4),R(),D(5,"tfoot",0),Zr(6,5),R())}function Bue(n,t){n&1&&Zr(0,1)(1,3)(2,4)(3,5)}var Ys=(()=>{class n extends qM{stickyCssClass="mat-mdc-table-sticky";needsPositionStickyOnElement=!1;static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(i,r){i&2&&ut("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[St([{provide:qM,useExisting:n},{provide:Dl,useExisting:n},{provide:Bx,useClass:NM},{provide:nb,useClass:Vg},{provide:$x,useValue:null}]),Et],ngContentSelectors:Fue,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,r){i&1&&(Xt(Nue),nt(0),nt(1,1),Ee(2,Vue,1,0)(3,Lue,7,0)(4,Bue,4,0)),i&2&&(B(2),kt(r._isServer?2:-1),B(),kt(r._isNativeHtmlTable?3:4))},dependencies:[jM,$M,zM,UM],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-sys-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-sys-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-sys-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-sys-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-sys-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mdc-data-table__row:last-child>.mat-mdc-header-cell{border-bottom:none}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return n})(),Xs=(()=>{class n extends jx{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matCellDef",""]],features:[St([{provide:jx,useExisting:n}]),Et]})}return n})(),Js=(()=>{class n extends Ux{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matHeaderCellDef",""]],features:[St([{provide:Ux,useExisting:n}]),Et]})}return n})();var Zs=(()=>{class n extends m_{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},features:[St([{provide:m_,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Et]})}return n})(),ea=(()=>{class n extends T5{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[Et]})}return n})();var ta=(()=>{class n extends D5{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[Et]})}return n})();var na=(()=>{class n extends Kb{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",We]},features:[St([{provide:Kb,useExisting:n}]),Ft,Et]})}return n})();var ia=(()=>{class n extends zx{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},features:[St([{provide:zx,useExisting:n}]),Et]})}return n})(),ra=(()=>{class n extends LM{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[St([{provide:LM,useExisting:n}]),Et],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&Zr(0,0)},dependencies:[Wf],encapsulation:2})}return n})();var oa=(()=>{class n extends BM{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[St([{provide:BM,useExisting:n}]),Et],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&Zr(0,0)},dependencies:[Wf],encapsulation:2})}return n})();var sa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,A5,gt]})}return n})();var R5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M5={};var im,KM;(function(){var n;function t(M,E){function I(){}I.prototype=E.prototype,M.D=E.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(P,N,V){for(var S=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)S[Ot-2]=arguments[Ot];return E.prototype[N].apply(P,S)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,E,I){I||(I=0);var P=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)P[N]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(N=0;16>N;++N)P[N]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=M.g[0],I=M.g[1],N=M.g[2];var V=M.g[3],S=E+(V^I&(N^V))+P[0]+3614090360&4294967295;E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[1]+3905402710&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[2]+606105819&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[3]+3250441966&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[4]+4118548399&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[5]+1200080426&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[6]+2821735955&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[7]+4249261313&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[8]+1770035416&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[9]+2336552879&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[10]+4294925233&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[11]+2304563134&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[12]+1804603682&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[13]+4254626195&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[14]+2792965006&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[15]+1236535329&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(N^V&(I^N))+P[1]+4129170786&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[6]+3225465664&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[11]+643717713&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[0]+3921069994&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[5]+3593408605&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[10]+38016083&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[15]+3634488961&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[4]+3889429448&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[9]+568446438&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[14]+3275163606&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[3]+4107603335&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[8]+1163531501&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[13]+2850285829&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[2]+4243563512&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[7]+1735328473&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[12]+2368359562&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(I^N^V)+P[5]+4294588738&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[8]+2272392833&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[11]+1839030562&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[14]+4259657740&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[1]+2763975236&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[4]+1272893353&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[7]+4139469664&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[10]+3200236656&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[13]+681279174&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[0]+3936430074&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[3]+3572445317&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[6]+76029189&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[9]+3654602809&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[12]+3873151461&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[15]+530742520&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[2]+3299628645&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(N^(I|~V))+P[0]+4096336452&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[7]+1126891415&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[14]+2878612391&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[5]+4237533241&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[12]+1700485571&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[3]+2399980690&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[10]+4293915773&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[1]+2240044497&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[8]+1873313359&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[15]+4264355552&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[6]+2734768916&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[13]+1309151649&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[4]+4149444226&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[11]+3174756917&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[2]+718787259&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+V&4294967295}i.prototype.u=function(M,E){E===void 0&&(E=M.length);for(var I=E-this.blockSize,P=this.B,N=this.h,V=0;V<E;){if(N==0)for(;V<=I;)r(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<E;)if(P[N++]=M.charCodeAt(V++),N==this.blockSize){r(this,P),N=0;break}}else for(;V<E;)if(P[N++]=M[V++],N==this.blockSize){r(this,P),N=0;break}}this.h=N,this.o+=E},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;var I=8*this.o;for(E=M.length-8;E<M.length;++E)M[E]=I&255,I/=256;for(this.u(M),M=Array(16),E=I=0;4>E;++E)for(var P=0;32>P;P+=8)M[I++]=this.g[E]>>>P&255;return M};function o(M,E){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=E(M)}function s(M,E){this.h=E;for(var I=[],P=!0,N=M.length-1;0<=N;N--){var V=M[N]|0;P&&V==E||(I[N]=V,P=!1)}this.g=I}var a={};function l(M){return-128<=M&&128>M?o(M,function(E){return new s([E|0],0>E?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return k(u(-M));for(var E=[],I=1,P=0;M>=I;P++)E[P]=M/I|0,I*=4294967296;return new s(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return k(h(M.substring(1),E));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),P=p,N=0;N<M.length;N+=8){var V=Math.min(8,M.length-N),S=parseInt(M.substring(N,N+V),E);8>V?(V=u(Math.pow(E,V)),P=P.j(V).add(u(S))):(P=P.j(I),P=P.add(u(S)))}return P}var p=l(0),_=l(1),b=l(16777216);n=s.prototype,n.m=function(){if(T(this))return-k(this).m();for(var M=0,E=1,I=0;I<this.g.length;I++){var P=this.i(I);M+=(0<=P?P:4294967296+P)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(T(this))return"-"+k(this).toString(M);for(var E=u(Math.pow(M,6)),I=this,P="";;){var N=oe(I,E).g;I=U(I,N.j(E));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=N,C(I))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(var E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function T(M){return M.h==-1}n.l=function(M){return M=U(this,M),T(M)?-1:C(M)?0:1};function k(M){for(var E=M.g.length,I=[],P=0;P<E;P++)I[P]=~M.g[P];return new s(I,~M.h).add(_)}n.abs=function(){return T(this)?k(this):this},n.add=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0,N=0;N<=E;N++){var V=P+(this.i(N)&65535)+(M.i(N)&65535),S=(V>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);P=S>>>16,V&=65535,S&=65535,I[N]=S<<16|V}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(M,E){return M.add(k(E))}n.j=function(M){if(C(this)||C(M))return p;if(T(this))return T(M)?k(this).j(k(M)):k(k(this).j(M));if(T(M))return k(this.j(k(M)));if(0>this.l(b)&&0>M.l(b))return u(this.m()*M.m());for(var E=this.g.length+M.g.length,I=[],P=0;P<2*E;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<M.g.length;N++){var V=this.i(P)>>>16,S=this.i(P)&65535,Ot=M.i(N)>>>16,On=M.i(N)&65535;I[2*P+2*N]+=S*On,W(I,2*P+2*N),I[2*P+2*N+1]+=V*On,W(I,2*P+2*N+1),I[2*P+2*N+1]+=S*Ot,W(I,2*P+2*N+1),I[2*P+2*N+2]+=V*Ot,W(I,2*P+2*N+2)}for(P=0;P<E;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=E;P<2*E;P++)I[P]=0;return new s(I,0)};function W(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function K(M,E){this.g=M,this.h=E}function oe(M,E){if(C(E))throw Error("division by zero");if(C(M))return new K(p,p);if(T(M))return E=oe(k(M),E),new K(k(E.g),k(E.h));if(T(E))return E=oe(M,k(E)),new K(k(E.g),E.h);if(30<M.g.length){if(T(M)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var I=_,P=E;0>=P.l(M);)I=ae(I),P=ae(P);var N=we(I,1),V=we(P,1);for(P=we(P,2),I=we(I,2);!C(P);){var S=V.add(P);0>=S.l(M)&&(N=N.add(I),V=S),P=we(P,1),I=we(I,1)}return E=U(M,N.j(E)),new K(N,E)}for(N=p;0<=M.l(E);){for(I=Math.max(1,Math.floor(M.m()/E.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=u(I),S=V.j(E);T(S)||0<S.l(M);)I-=P,V=u(I),S=V.j(E);C(V)&&(V=_),N=N.add(V),M=U(M,S)}return new K(N,M)}n.A=function(M){return oe(this,M).h},n.and=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)&M.i(P);return new s(I,this.h&M.h)},n.or=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)|M.i(P);return new s(I,this.h|M.h)},n.xor=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)^M.i(P);return new s(I,this.h^M.h)};function ae(M){for(var E=M.g.length+1,I=[],P=0;P<E;P++)I[P]=M.i(P)<<1|M.i(P-1)>>>31;return new s(I,M.h)}function we(M,E){var I=E>>5;E%=32;for(var P=M.g.length-I,N=[],V=0;V<P;V++)N[V]=0<E?M.i(V+I)>>>E|M.i(V+I+1)<<32-E:M.i(V+I);return new s(N,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,KM=M5.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,im=M5.Integer=s}).apply(typeof R5<"u"?R5:typeof self<"u"?self:typeof window<"u"?window:{});var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Td={};var HM,$ue,f_,WM,Hb,Kx,GM,QM,YM;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qx=="object"&&qx];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=e(this);function r(c,d){if(d)e:{var f=i;c=c.split(".");for(var y=0;y<c.length-1;y++){var L=c[y];if(!(L in f))break e;f=f[L]}c=c[c.length-1],y=f[c],d=d(y),d!=y&&d!=null&&t(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,y=!1,L={next:function(){if(!y&&f<c.length){var $=f++;return{value:d($,c[$]),done:!1}}return y=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,y),c.apply(d,L)}}return function(){return c.apply(d,arguments)}}function _(c,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function b(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(y,L,$){for(var ie=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)ie[wt-2]=arguments[wt];return d.prototype[L].apply(y,ie)}}function T(c){let d=c.length;if(0<d){let f=Array(d);for(let y=0;y<d;y++)f[y]=c[y];return f}return[]}function k(c,d){for(let f=1;f<arguments.length;f++){let y=arguments[f];if(l(y)){let L=c.length||0,$=y.length||0;c.length=L+$;for(let ie=0;ie<$;ie++)c[L+ie]=y[ie]}else c.push(y)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var ae=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function we(c,d,f){for(let y in c)d.call(f,c[y],y,c)}function M(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function E(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,d){let f,y;for(let L=1;L<arguments.length;L++){y=arguments[L];for(f in y)c[f]=y[f];for(let $=0;$<I.length;$++)f=I[$],Object.prototype.hasOwnProperty.call(y,f)&&(c[f]=y[f])}}function N(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function V(c){a.setTimeout(()=>{throw c},0)}function S(){var c=xr;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Ot{constructor(){this.h=this.g=null}add(d,f){let y=On.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var On=new U(()=>new fr,c=>c.reset());class fr{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ti,Dn=!1,xr=new Ot,Qt=()=>{let c=a.Promise.resolve(void 0);Ti=()=>{c.then(Yn)}};var Yn=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(f){V(f)}var d=On;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Dn=!1};function Cn(){this.s=this.s,this.C=this.C}Cn.prototype.s=!1,Cn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var Ci=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function er(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ae){e:{try{oe(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:zm[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&er.aa.h.call(this)}}C(er,ct);var zm={2:"touch",3:"pen",4:"mouse"};er.prototype.h=function(){er.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),Up=0;function ch(c,d,f,y,L){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=L,this.key=++Up,this.da=this.fa=!1}function ln(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ns(c){this.src=c,this.g={},this.h=0}ns.prototype.add=function(c,d,f,y,L){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var ie=is(c,d,y,L);return-1<ie?(d=c[ie],f||(d.fa=!1)):(d=new ch(d,this.src,$,!!y,L),d.fa=f,c.push(d)),d};function Yu(c,d){var f=d.type;if(f in c.g){var y=c.g[f],L=Array.prototype.indexOf.call(y,d,void 0),$;($=0<=L)&&Array.prototype.splice.call(y,L,1),$&&(ln(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function is(c,d,f,y){for(var L=0;L<c.length;++L){var $=c[L];if(!$.da&&$.listener==d&&$.capture==!!f&&$.ha==y)return L}return-1}var Xu="closure_lm_"+(1e6*Math.random()|0),Ju={};function qm(c,d,f,y,L){if(y&&y.once)return ko(c,d,f,y,L);if(Array.isArray(d)){for(var $=0;$<d.length;$++)qm(c,d[$],f,y,L);return null}return f=va(f),c&&c[pt]?c.K(d,f,u(y)?!!y.capture:!!y,L):Km(c,d,f,!1,y,L)}function Km(c,d,f,y,L,$){if(!d)throw Error("Invalid event type");var ie=u(L)?!!L.capture:!!L,wt=rs(c);if(wt||(c[Xu]=wt=new ns(c)),f=wt.add(d,f,y,ie,$),f.proxy)return f;if(y=Hm(),f.proxy=y,y.src=c,y.listener=f,c.addEventListener)Ci||(L=ie),L===void 0&&(L=!1),c.addEventListener(d.toString(),y,L);else if(c.attachEvent)c.attachEvent(uh(d.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hm(){function c(f){return d.call(c.src,c.listener,f)}let d=Zu;return c}function ko(c,d,f,y,L){if(Array.isArray(d)){for(var $=0;$<d.length;$++)ko(c,d[$],f,y,L);return null}return f=va(f),c&&c[pt]?c.L(d,f,u(y)?!!y.capture:!!y,L):Km(c,d,f,!0,y,L)}function lh(c,d,f,y,L){if(Array.isArray(d))for(var $=0;$<d.length;$++)lh(c,d[$],f,y,L);else y=u(y)?!!y.capture:!!y,f=va(f),c&&c[pt]?(c=c.i,d=String(d).toString(),d in c.g&&($=c.g[d],f=is($,f,y,L),-1<f&&(ln($[f]),Array.prototype.splice.call($,f,1),$.length==0&&(delete c.g[d],c.h--)))):c&&(c=rs(c))&&(d=c.g[d.toString()],c=-1,d&&(c=is(d,f,y,L)),(f=-1<c?d[c]:null)&&ya(f))}function ya(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[pt])Yu(d.i,c);else{var f=c.type,y=c.proxy;d.removeEventListener?d.removeEventListener(f,y,c.capture):d.detachEvent?d.detachEvent(uh(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=rs(d))?(Yu(f,c),f.h==0&&(f.src=null,d[Xu]=null)):ln(c)}}}function uh(c){return c in Ju?Ju[c]:Ju[c]="on"+c}function Zu(c,d){if(c.da)c=!0;else{d=new er(d,this);var f=c.listener,y=c.ha||c.src;c.fa&&ya(c),c=f.call(y,d)}return c}function rs(c){return c=c[Xu],c instanceof ns?c:null}var Zc="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(c){return typeof c=="function"?c:(c[Zc]||(c[Zc]=function(d){return c.handleEvent(d)}),c[Zc])}function vn(){Cn.call(this),this.i=new ns(this),this.M=this,this.F=null}C(vn,Cn),vn.prototype[pt]=!0,vn.prototype.removeEventListener=function(c,d,f,y){lh(this,c,d,f,y)};function En(c,d){var f,y=c.F;if(y)for(f=[];y;y=y.F)f.push(y);if(c=c.M,y=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var L=d;d=new ct(y,c),P(d,L)}if(L=!0,f)for(var $=f.length-1;0<=$;$--){var ie=d.g=f[$];L=ho(ie,y,!0,d)&&L}if(ie=d.g=c,L=ho(ie,y,!0,d)&&L,L=ho(ie,y,!1,d)&&L,f)for($=0;$<f.length;$++)ie=d.g=f[$],L=ho(ie,y,!1,d)&&L}vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],y=0;y<f.length;y++)ln(f[y]);delete c.g[d],c.h--}}this.F=null},vn.prototype.K=function(c,d,f,y){return this.i.add(String(c),d,!1,f,y)},vn.prototype.L=function(c,d,f,y){return this.i.add(String(c),d,!0,f,y)};function ho(c,d,f,y){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,$=0;$<d.length;++$){var ie=d[$];if(ie&&!ie.da&&ie.capture==f){var wt=ie.listener,an=ie.ha||ie.src;ie.fa&&Yu(c.i,ie),L=wt.call(an,y)!==!1&&L}}return L&&!y.defaultPrevented}function Hl(c,d,f){if(typeof c=="function")f&&(c=_(c,f));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ed(c){c.g=Hl(()=>{c.g=null,c.i&&(c.i=!1,ed(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sc extends Cn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ed(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(c){Cn.call(this),this.h=c,this.g={}}C(rt,Cn);var el=[];function ba(c){we(c.g,function(d,f){this.g.hasOwnProperty(f)&&ya(d)},c),c.g={}}rt.prototype.N=function(){rt.aa.N.call(this),ba(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ac=a.JSON.stringify,Je=a.JSON.parse,Wm=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wl(){}Wl.prototype.h=null;function td(c){return c.h||(c.h=c.i())}function dh(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){ct.call(this,"d")}C(nd,ct);function id(){ct.call(this,"c")}C(id,ct);var or={},cc=null;function wa(){return cc=cc||new vn}or.La="serverreachability";function Gl(c){ct.call(this,or.La,c)}C(Gl,ct);function xn(c){let d=wa();En(d,new Gl(d))}or.STAT_EVENT="statevent";function Bi(c,d){ct.call(this,or.STAT_EVENT,c),this.stat=d}C(Bi,ct);function jn(c){let d=wa();En(d,new Bi(d,c))}or.Ma="timingevent";function Ql(c,d){ct.call(this,or.Ma,c),this.size=d}C(Ql,ct);function Ao(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function tv(c,d,f,y,L,$){c.info(function(){if(c.g)if($)for(var ie="",wt=$.split("&"),an=0;an<wt.length;an++){var lt=wt[an].split("=");if(1<lt.length){var In=lt[0];lt=lt[1];var kn=In.split("_");ie=2<=kn.length&&kn[1]=="type"?ie+(In+"="+lt+"&"):ie+(In+"=redacted&")}}else ie=null;else ie=$;return"XMLHTTP REQ ("+y+") [attempt "+L+"]: "+d+`
`+f+`
`+ie})}function lc(c,d,f,y,L,$,ie){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+L+"]: "+d+`
`+f+`
`+$+" "+ie})}function Ir(c,d,f,y){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hh(c,f)+(y?" "+y:"")})}function uc(c,d){c.info(function(){return"TIMEOUT: "+d})}Ro.prototype.info=function(){};function hh(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var y=f[c];if(!(2>y.length)){var L=y[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ie=1;ie<L.length;ie++)L[ie]=""}}}}return ac(f)}catch{return d}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yl;function mo(){}C(mo,Wl),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},Yl=new mo;function Sr(c,d,f,y){this.j=c,this.i=d,this.l=f,this.R=y||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}var Ei={},ss={};function fo(c,d,f){c.L=1,c.v=xa(ui(d)),c.m=f,c.P=!0,mh(c,null)}function mh(c,d){c.F=Date.now(),Ca(c),c.A=ui(c.v);var f=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),sd(f.i,"t",y),c.C=0,f=c.j.J,c.h=new rd,c.g=hd(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sc(_(c.Y,c,c.g),c.O)),d=c.U,f=c.g,y=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(el[0]=L.toString()),L=el);for(var $=0;$<L.length;$++){var ie=qm(f,L[$],y||d.handleEvent,!1,d.h||d);if(!ie)break;d.g[ie.key]=ie}d=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),xn(),tv(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&$i(c)==3?d.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{let kn=$i(this.g);var d=this.g.Ba();let us=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||Zl(this.g)))){this.J||kn!=4||d==7||(d==8||0>=us?xn(3):xn(2)),as(this);var f=this.g.Z();this.X=f;t:if(dc(this)){var y=Zl(this.g);c="";var L=y.length,$=$i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),Ns(this);var ie="";break t}this.h.i=new a.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,c+=this.h.i.decode(y[d],{stream:!($&&d==L-1)});y.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=f==200,lc(this.i,this.u,this.A,this.l,this.R,kn,f),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,an=this.g;if((wt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(wt)){var lt=wt;break t}}lt=null}if(f=lt)Ir(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,f);else{this.o=!1,this.s=3,jn(12),Tr(this),Ns(this);break e}}if(this.P){f=!0;let Oi;for(;!this.J&&this.C<ie.length;)if(Oi=fh(this,ie),Oi==ss){kn==4&&(this.s=4,jn(14),f=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Oi==Ei){this.s=4,jn(15),Ir(this.i,this.l,ie,"[Invalid Chunk]"),f=!1;break}else Ir(this.i,this.l,Oi,null),Xl(this,Oi);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ie.length!=0||this.h.h||(this.s=1,jn(16),f=!1),this.o=this.o&&f,!f)Ir(this.i,this.l,ie,"[Invalid Chunked Response]"),Tr(this),Ns(this);else if(0<ie.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),eu(In),In.M=!0,jn(11))}}else Ir(this.i,this.l,ie,null),Xl(this,ie);kn==4&&Tr(this),this.o&&!this.J&&(kn==4?ud(this.j,this):(this.o=!1,Ca(this)))}else Ch(this.g),f==400&&0<ie.indexOf("Unknown SID")?(this.s=3,jn(12)):(this.s=0,jn(13)),Tr(this),Ns(this)}}}catch{}finally{}};function dc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fh(c,d){var f=c.C,y=d.indexOf(`
`,f);return y==-1?ss:(f=Number(d.substring(f,y)),isNaN(f)?Ei:(y+=1,y+f>d.length?ss:(d=d.slice(y,y+f),c.C=y+f,d)))}Sr.prototype.cancel=function(){this.J=!0,Tr(this)};function Ca(c){c.S=Date.now()+c.I,od(c,c.I)}function od(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ao(_(c.ba,c),d)}function as(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(uc(this.i,this.A),this.L!=2&&(xn(),jn(17)),Tr(this),this.s=2,Ns(this)):od(this,this.S-c)};function Ns(c){c.j.G==0||c.J||ud(c.j,c)}function Tr(c){as(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ba(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Xl(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Un(f.h,c))){if(!c.K&&Un(f.h,c)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var L=y;if(L[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ls(f),ka(f);else break e;vc(f),jn(18)}}else f.za=L[1],0<f.za-f.T&&37500>L[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ao(_(f.Za,f),6e3));if(1>=_h(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((c.K||f.g==c)&&Ls(f),!W(d))for(L=f.Da.g.parse(d),d=0;d<L.length;d++){let lt=L[d];if(f.T=lt[0],lt=lt[1],f.G==2)if(lt[0]=="c"){f.K=lt[1],f.ia=lt[2];let In=lt[3];In!=null&&(f.la=In,f.j.info("VER="+f.la));let kn=lt[4];kn!=null&&(f.Aa=kn,f.j.info("SVER="+f.Aa));let us=lt[5];us!=null&&typeof us=="number"&&0<us&&(y=1.5*us,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;let Oi=c.g;if(Oi){let Bs=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var $=y.h;$.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ea($,$.h),$.h=null))}if(y.D){let vo=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(y.ya=vo,$e(y.I,y.D,vo))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var ie=c;if(y.qa=tu(y,y.J?y.ia:null,y.W),ie.K){nl(y.h,ie);var wt=ie,an=y.L;an&&(wt.I=an),wt.B&&(as(wt),Ca(wt)),y.g=ie}else Eh(y);0<f.i.length&&Aa(f)}else lt[0]!="stop"&&lt[0]!="close"||Kr(f,7);else f.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Kr(f,7):yc(f):lt[0]!="noop"&&f.l&&f.l.ta(lt),f.v=0)}}xn(4)}catch{}}var sn=class{constructor(c,d){this.g=c,this.map=d}};function ph(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gh(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _h(c){return c.h?1:c.g?c.g.size:0}function Un(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ea(c,d){c.g?c.g.add(d):c.h=d}function nl(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ph.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function hc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return T(c.i)}function Gm(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,y=0;y<f;y++)d.push(c[y]);return d}d=[],f=0;for(y in c)d[f++]=c[y];return d}function Qm(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let y in c)d[f++]=y;return d}}}function Jl(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Qm(c),y=Gm(c),L=y.length,$=0;$<L;$++)d.call(void 0,y[$],f&&f[$],c)}var yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vh(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var y=c[f].indexOf("="),L=null;if(0<=y){var $=c[f].substring(0,y);L=c[f].substring(y+1)}else $=c[f];d($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Yr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yr){this.h=c.h,cs(this,c.j),this.o=c.o,this.g=c.g,mc(this,c.s),this.l=c.l;var d=c.i,f=new ii;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ym(this,f),this.m=c.m}else c&&(d=String(c).match(yh))?(this.h=!1,cs(this,d[1]||"",!0),this.o=Ia(d[2]||""),this.g=Ia(d[3]||"",!0),mc(this,d[4]),this.l=Ia(d[5]||"",!0),Ym(this,d[6]||"",!0),this.m=Ia(d[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}Yr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Sa(d,fc,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Sa(d,fc,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Sa(f,f.charAt(0)=="/"?pc:bh,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Sa(f,qp)),c.join("")};function ui(c){return new Yr(c)}function cs(c,d,f){c.j=f?Ia(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function mc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ym(c,d,f){d instanceof ii?(c.i=d,nv(c.i,c.h)):(f||(d=Sa(d,zp)),c.i=new ii(d,c.h))}function $e(c,d,f){c.i.set(d,f)}function xa(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ia(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,po),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function po(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fc=/[#\/\?@]/g,bh=/[#\?:]/g,pc=/[#\?]/g,zp=/[#\?@]/g,qp=/#/g;function ii(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pi(c){c.g||(c.g=new Map,c.h=0,c.i&&vh(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ii.prototype,n.add=function(c,d){pi(this),this.i=null,c=sr(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function il(c,d){pi(c),d=sr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function rl(c,d){return pi(c),d=sr(c,d),c.g.has(d)}n.forEach=function(c,d){pi(this),this.g.forEach(function(f,y){f.forEach(function(L){c.call(d,L,y,this)},this)},this)},n.na=function(){pi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){let L=c[y];for(let $=0;$<L.length;$++)f.push(d[y])}return f},n.V=function(c){pi(this);let d=[];if(typeof c=="string")rl(this,c)&&(d=d.concat(this.g.get(sr(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return pi(this),this.i=null,c=sr(this,c),rl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function sd(c,d,f){il(c,d),0<f.length&&(c.i=null,c.g.set(sr(c,d),T(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];let $=encodeURIComponent(String(y)),ie=this.V(y);for(y=0;y<ie.length;y++){var L=$;ie[y]!==""&&(L+="="+encodeURIComponent(String(ie[y]))),c.push(L)}}return this.i=c.join("&")};function sr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function nv(c,d){d&&!c.j&&(pi(c),c.i=null,c.g.forEach(function(f,y){var L=y.toLowerCase();y!=L&&(il(this,y),sd(this,L,f))},c)),c.j=d}function Fs(c,d){let f=new Ro;if(a.Image){let y=new Image;y.onload=b(Dr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=b(Dr,f,"TestLoadImage: error",!1,d,y),y.onabort=b(Dr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=b(Dr,f,"TestLoadImage: timeout",!1,d,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else d(!1)}function Xm(c,d){let f=new Ro,y=new AbortController,L=setTimeout(()=>{y.abort(),Dr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:y.signal}).then($=>{clearTimeout(L),$.ok?Dr(f,"TestPingServer: ok",!0,d):Dr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Dr(f,"TestPingServer: error",!1,d)})}function Dr(c,d,f,y,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),y(f)}catch{}}function Jm(){this.g=new Wm}function ad(c,d,f){let y=f||"";try{Jl(c,function(L,$){let ie=L;u(L)&&(ie=ac(L)),d.push(y+$+"="+encodeURIComponent(ie))})}catch(L){throw d.push(y+"type="+encodeURIComponent("_badmap")),L}}function ls(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ls,Wl),ls.prototype.g=function(){return new gc(this.l,this.j)},ls.prototype.i=function(c){return function(){return c}}({});function gc(c,d){vn.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gc,vn),n=gc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ta(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zm(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zm(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?go(this):Ta(this),this.readyState==3&&Zm(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,go(this))},n.Qa=function(c){this.g&&(this.response=c,go(this))},n.ga=function(){this.g&&go(this)};function go(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ta(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ta(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ef(c){let d="";return we(c,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function _c(c,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=ef(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):$e(c,d,f))}function Nt(c){vn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Nt,vn);var tf=/^https?$/i,iv=["POST","PUT"];n=Nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yl.g(),this.v=this.o?td(this.o):td(Yl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch($){nf(this,$);return}if(c=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var L in y)f.set(L,y[L]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let $ of y.keys())f.set($,y.get($));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find($=>$.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iv,d,void 0))||y||L||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,ie]of f)this.g.setRequestHeader($,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(c),this.u=!1}catch($){nf(this,$)}};function nf(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rf(c),Da(c)}function rf(c){c.A||(c.A=!0,En(c,"complete"),En(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,En(this,"complete"),En(this,"abort"),Da(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),Nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cd(this):this.bb())},n.bb=function(){cd(this)};function cd(c){if(c.h&&typeof s<"u"&&(!c.v[1]||$i(c)!=4||c.Z()!=2)){if(c.u&&$i(c)==4)Hl(c.Ea,0,c);else if(En(c,"readystatechange"),$i(c)==4){c.h=!1;try{let ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=ie===0){var L=String(c.D).match(yh)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),y=!tf.test(L?L.toLowerCase():"")}f=y}if(f)En(c,"complete"),En(c,"success");else{c.m=6;try{var $=2<$i(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",rf(c)}}finally{Da(c)}}}}function Da(c,d){if(c.g){wh(c);let f=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||En(c,"ready");try{f.onreadystatechange=y}catch{}}}function wh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function $i(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Je(d)}};function Zl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(c){let d={};c=(c.g&&2<=$i(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(W(c[y]))continue;var f=N(c[y]);let L=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let $=d[L]||[];d[L]=$,$.push(f)}M(d,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function of(c){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,c),this.cb=Vs("retryDelaySeedMs",1e4,c),this.Wa=Vs("forwardChannelMaxRetries",2,c),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(c&&c.concurrentRequestLimit),this.Da=new Jm,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=of.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,y){jn(0),this.W=c,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=tu(this,null,this.W),Aa(this)};function yc(c){if(ld(c),c.G==3){var d=c.U++,f=ui(c.I);if($e(f,"SID",c.K),$e(f,"RID",d),$e(f,"TYPE","terminate"),_o(c,f),d=new Sr(c,c.j,d),d.L=2,d.v=xa(ui(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=hd(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ca(d)}dd(c)}function ka(c){c.g&&(eu(c),c.g.cancel(),c.g=null)}function ld(c){ka(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ls(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Aa(c){if(!gh(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ti||Qt(),Dn||(Ti(),Dn=!0),xr.add(d,c),c.B=0}}function sf(c,d){return _h(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ao(_(c.Ga,c,d),Ra(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let L=new Sr(this,this.j,c),$=this.o;if(this.S&&($?($=E($),P($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ol(this,L,d),f=ui(this.I),$e(f,"RID",c),$e(f,"CVER",22),this.D&&$e(f,"X-HTTP-Session-Id",this.D),_o(this,f),$&&(this.O?d="headers="+encodeURIComponent(String(ef($)))+"&"+d:this.m&&_c(f,this.m,$)),Ea(this.h,L),this.Ua&&$e(f,"TYPE","init"),this.P?($e(f,"$req",d),$e(f,"SID","null"),L.T=!0,fo(L,f,null)):fo(L,f,d),this.G=2}}else this.G==3&&(c?ar(this,c):this.i.length==0||gh(this.h)||ar(this))};function ar(c,d){var f;d?f=d.l:f=c.U++;let y=ui(c.I);$e(y,"SID",c.K),$e(y,"RID",f),$e(y,"AID",c.T),_o(c,y),c.m&&c.o&&_c(y,c.m,c.o),f=new Sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ol(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ea(c.h,f),fo(f,y,d)}function _o(c,d){c.H&&we(c.H,function(f,y){$e(d,y,f)}),c.l&&Jl({},function(f,y){$e(d,y,f)})}function ol(c,d,f){f=Math.min(c.i.length,f);var y=c.l?_(c.l.Na,c.l,c):null;e:{var L=c.i;let $=-1;for(;;){let ie=["count="+f];$==-1?0<f?($=L[0].g,ie.push("ofs="+$)):$=0:ie.push("ofs="+$);let wt=!0;for(let an=0;an<f;an++){let lt=L[an].g,In=L[an].map;if(lt-=$,0>lt)$=Math.max(0,L[an].g-100),wt=!1;else try{ad(In,ie,"req"+lt+"_")}catch{y&&y(In)}}if(wt){y=ie.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,y}function Eh(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ti||Qt(),Dn||(Ti(),Dn=!0),xr.add(d,c),c.v=0}}function vc(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ao(_(c.Fa,c),Ra(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,xh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ao(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jn(10),ka(this),xh(this))};function eu(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xh(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ui(c.qa);$e(d,"RID","rpc"),$e(d,"SID",c.K),$e(d,"AID",c.T),$e(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(d,"TO",c.ja),$e(d,"TYPE","xmlhttp"),_o(c,d),c.m&&c.o&&_c(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xa(ui(d)),f.m=null,f.P=!0,mh(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ka(this),vc(this),jn(19))};function Ls(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ud(c,d){var f=null;if(c.g==d){Ls(c),eu(c),c.g=null;var y=2}else if(Un(c.h,d))f=d.D,nl(c.h,d),y=1;else return;if(c.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var L=c.B;y=wa(),En(y,new Ql(y,f)),Aa(c)}else Eh(c);else if(L=d.s,L==3||L==0&&0<d.X||!(y==1&&sf(c,d)||y==2&&vc(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),L){case 1:Kr(c,5);break;case 4:Kr(c,10);break;case 3:Kr(c,6);break;default:Kr(c,2)}}}function Ra(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Kr(c,d){if(c.j.info("Error code "+d),d==2){var f=_(c.fb,c),y=c.Xa;let L=!y;y=new Yr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cs(y,"https"),xa(y),L?Fs(y.toString(),f):Xm(y.toString(),f)}else jn(2);c.G=0,c.l&&c.l.sa(d),dd(c),ld(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),jn(2)):(this.j.info("Failed to ping google.com"),jn(1))};function dd(c){if(c.G=0,c.ka=[],c.l){let d=hc(c.h);(d.length!=0||c.i.length!=0)&&(k(c.ka,d),k(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function tu(c,d,f){var y=f instanceof Yr?ui(f):new Yr(f);if(y.g!="")d&&(y.g=d+"."+y.g),mc(y,y.s);else{var L=a.location;y=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var $=new Yr(null);y&&cs($,y),d&&($.g=d),L&&mc($,L),f&&($.l=f),y=$}return f=c.D,d=c.ya,f&&d&&$e(y,f,d),$e(y,"VER",c.la),_o(c,y),y}function hd(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Nt(new ls({eb:f})):new Nt(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}n=Ih.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new Xn(c,d)};function Xn(c,d){vn.call(this),this.g=new of(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new yo(this)}C(Xn,vn),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){yc(this.g)},Xn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ac(c),c=f);d.i.push(new sn(d.Ya++,c)),d.G==3&&Aa(d)},Xn.prototype.N=function(){this.g.l=null,delete this.j,yc(this.g),delete this.g,Xn.aa.N.call(this)};function nu(c){nd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(nu,nd);function af(){id.call(this),this.status=1}C(af,id);function yo(c){this.g=c}C(yo,Ih),yo.prototype.ua=function(){En(this.g,"a")},yo.prototype.ta=function(c){En(this.g,new nu(c))},yo.prototype.sa=function(c){En(this.g,new af)},yo.prototype.ra=function(){En(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,YM=Td.createWebChannelTransport=function(){return new sl},QM=Td.getStatEventTarget=function(){return wa()},GM=Td.Event=or,Kx=Td.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,Hb=Td.ErrorCode=tl,Os.COMPLETE="complete",WM=Td.EventType=Os,dh.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",vn.prototype.listen=vn.prototype.K,f_=Td.WebChannel=dh,$ue=Td.FetchXmlHttpFactory=ls,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,HM=Td.XhrIo=Nt}).apply(typeof qx<"u"?qx:typeof self<"u"?self:typeof window<"u"?window:{});var P5="@firebase/firestore";var so=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};so.UNAUTHENTICATED=new so(null),so.GOOGLE_CREDENTIALS=new so("google-credentials-uid"),so.FIRST_PARTY=new so("first-party-uid"),so.MOCK_USER=new so("mock-user");var M_="10.14.0";var Jf=new sg("@firebase/firestore");function Wb(){return Jf.logLevel}function _t(n,...t){if(Jf.logLevel<=hl.DEBUG){let e=t.map(PO);Jf.debug(`Firestore (${M_}): ${n}`,...e)}}function kd(n,...t){if(Jf.logLevel<=hl.ERROR){let e=t.map(PO);Jf.error(`Firestore (${M_}): ${n}`,...e)}}function w_(n,...t){if(Jf.logLevel<=hl.WARN){let e=t.map(PO);Jf.warn(`Firestore (${M_}): ${n}`,...e)}}function PO(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function Bt(n="Unexpected state"){let t=`FIRESTORE (${M_}) INTERNAL ASSERTION FAILED: `+n;throw kd(t),new Error(t)}function fi(n,t){n||Bt()}function Wt(n,t){return n}var Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mt=class extends fv{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Al=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Yx=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},tP=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(so.UNAUTHENTICATED))}shutdown(){}},nP=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},iP=class{constructor(t){this.t=t,this.currentUser=so.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){fi(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),o=new Al;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Al,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;t.enqueueRetryable(()=>O(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Al)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fi(typeof i.accessToken=="string"),new Yx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return fi(t===null||typeof t=="string"),new so(t)}},rP=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=so.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},oP=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new rP(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(so.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sP=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},aP=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){fi(this.o===void 0);let i=o=>{o.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,_t("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(fi(typeof e.token=="string"),this.R=e.token,new sP(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Uue(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Xx=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=Uue(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}};function Qn(n,t){return n<t?-1:n>t?1:0}function C_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Io=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mt(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Qn(this.nanoseconds,t.nanoseconds):Qn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var tn=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Io(0,0))}static max(){return new n(new Io(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jx=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&Bt(),i===void 0?i=t.length-e:i>t.length-e&&Bt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=t.get(r),s=e.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},ir=class n extends Jx{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new mt(Ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},zue=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ja=class n extends Jx{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return zue.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new mt(Ce.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new mt(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new mt(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new mt(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var At=class n{constructor(t){this.path=t}static fromPath(t){return new n(ir.fromString(t))}static fromName(t){return new n(ir.fromString(t).popFirst(5))}static empty(){return new n(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ir.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ir.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new ir(t.slice()))}};var cP=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};cP.UNKNOWN_ID=-1;function que(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=tn.fromTimestamp(i===1e9?new Io(e+1,0):new Io(e,i));return new Zf(r,At.empty(),t)}function Kue(n){return new Zf(n.readTime,n.key,-1)}var Zf=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(tn.min(),At.empty(),-1)}static max(){return new n(tn.max(),At.empty(),-1)}};function Hue(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=At.comparator(n.documentKey,t.documentKey),e!==0?e:Qn(n.largestBatchId,t.largestBatchId))}var Wue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lP=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function g0(n){return O(this,null,function*(){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==Wue)throw n;_t("LocalStore","Unexpectedly lost primary lease")})}var Ne=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},l=>i(l))}),s=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;e(t[u]).next(h=>{s[u]=h,++a,a===o&&i(s)},h=>r(h))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};function Gue(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function _0(n){return n.name==="IndexedDbTransactionError"}var fK=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function SI(n){return n==null}function Zb(n){return n===0&&1/n==-1/0}function Que(n){return typeof n=="number"&&Number.isInteger(n)&&!Zb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Yue=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tVe=[...Yue,"documentOverlays"],Xue=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jue=Xue,Zue=[...Jue,"indexConfiguration","indexState","indexEntries"];var nVe=[...Zue,"globals"];function O5(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function P_(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function pK(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var dr=class n{constructor(t,e){this.comparator=t,this.root=e||Eu.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Eu.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eu.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new y_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new y_(this.root,t,this.comparator,!1)}getReverseIterator(){return new y_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new y_(this.root,t,this.comparator,!0)}},y_=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Eu=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();let t=this.left.check();if(t!==this.right.check())throw Bt();return t+(this.isRed()?0:1)}};Eu.EMPTY=null,Eu.RED=!0,Eu.BLACK=!1;Eu.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(t,e,i,r,o){return this}insert(t,e,i){return new Eu(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var jo=class n{constructor(t){this.comparator=t,this.data=new dr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(t){return new Zx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Zx=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cu=class n{constructor(t){this.fields=t,t.sort(ja.comparator)}static empty(){return new n([])}unionWith(t){let e=new jo(ja.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return C_(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var eI=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Uo=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eI("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Qn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Uo.EMPTY_BYTE_STRING=new Uo("");var ede=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ad(n){if(fi(!!n),typeof n=="string"){let t=0,e=ede.exec(n);if(fi(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Qi(n.seconds),nanos:Qi(n.nanos)}}function Qi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function om(n){return typeof n=="string"?Uo.fromBase64String(n):Uo.fromUint8Array(n)}function OO(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function NO(n){let t=n.mapValue.fields.__previous_value__;return OO(t)?NO(t):t}function e0(n){let t=Ad(n.mapValue.fields.__local_write_time__.timestampValue);return new Io(t.seconds,t.nanos)}var uP=class{constructor(t,e,i,r,o,s,a,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},tI=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Hx={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ep(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OO(n)?4:_K(n)?9007199254740991:gK(n)?10:11:Bt()}function Su(n,t){if(n===t)return!0;let e=ep(n);if(e!==ep(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return e0(n).isEqual(e0(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Ad(r.timestampValue),a=Ad(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return om(r.bytesValue).isEqual(om(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return Qi(r.geoPointValue.latitude)===Qi(o.geoPointValue.latitude)&&Qi(r.geoPointValue.longitude)===Qi(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Qi(r.integerValue)===Qi(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Qi(r.doubleValue),a=Qi(o.doubleValue);return s===a?Zb(s)===Zb(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return C_(n.arrayValue.values||[],t.arrayValue.values||[],Su);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(O5(s)!==O5(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Su(s[l],a[l])))return!1;return!0}(n,t);default:return Bt()}}function t0(n,t){return(n.values||[]).find(e=>Su(e,t))!==void 0}function E_(n,t){if(n===t)return 0;let e=ep(n),i=ep(t);if(e!==i)return Qn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Qn(n.booleanValue,t.booleanValue);case 2:return function(o,s){let a=Qi(o.integerValue||o.doubleValue),l=Qi(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return N5(n.timestampValue,t.timestampValue);case 4:return N5(e0(n),e0(t));case 5:return Qn(n.stringValue,t.stringValue);case 6:return function(o,s){let a=om(o),l=om(s);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=Qn(a[u],l[u]);if(h!==0)return h}return Qn(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){let a=Qn(Qi(o.latitude),Qi(s.latitude));return a!==0?a:Qn(Qi(o.longitude),Qi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return F5(n.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,u,h;let p=o.fields||{},_=s.fields||{},b=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(l=_.value)===null||l===void 0?void 0:l.arrayValue,T=Qn(((u=b?.values)===null||u===void 0?void 0:u.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:F5(b,C)}(n.mapValue,t.mapValue);case 11:return function(o,s){if(o===Hx.mapValue&&s===Hx.mapValue)return 0;if(o===Hx.mapValue)return 1;if(s===Hx.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let _=Qn(l[p],h[p]);if(_!==0)return _;let b=E_(a[l[p]],u[h[p]]);if(b!==0)return b}return Qn(l.length,h.length)}(n.mapValue,t.mapValue);default:throw Bt()}}function N5(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Qn(n,t);let e=Ad(n),i=Ad(t),r=Qn(e.seconds,i.seconds);return r!==0?r:Qn(e.nanos,i.nanos)}function F5(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=E_(e[r],i[r]);if(o)return o}return Qn(e.length,i.length)}function x_(n){return dP(n)}function dP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=Ad(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return om(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return At.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=dP(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${dP(e.fields[s])}`;return r+"}"}(n.mapValue):Bt()}function V5(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function hP(n){return!!n&&"integerValue"in n}function FO(n){return!!n&&"arrayValue"in n}function L5(n){return!!n&&"nullValue"in n}function B5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gx(n){return!!n&&"mapValue"in n}function gK(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Qb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return P_(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Qb(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Qb(n.arrayValue.values[e]);return t}return Object.assign({},n)}function _K(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var kl=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Gx(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qb(e)}setAll(t){let e=ja.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=Qb(s):r.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());Gx(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Su(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Gx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){P_(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(Qb(this.value))}};function yK(n){let t=[];return P_(n.fields,(e,i)=>{let r=new ja([e]);if(Gx(i)){let o=yK(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new Cu(t)}var Rl=class n{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new n(t,0,tn.min(),tn.min(),tn.min(),kl.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,tn.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,tn.min(),tn.min(),kl.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,tn.min(),tn.min(),kl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var I_=class{constructor(t,e){this.position=t,this.inclusive=e}};function $5(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],s=n.position[r];if(o.field.isKeyField()?i=At.comparator(At.fromName(s.referenceValue),e.key):i=E_(s,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function j5(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Su(n.position[e],t.position[e]))return!1;return!0}var S_=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function tde(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var nI=class{},Br=class n extends nI{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new fP(t,e,i):e==="array-contains"?new _P(t,i):e==="in"?new yP(t,i):e==="not-in"?new vP(t,i):e==="array-contains-any"?new bP(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new pP(t,i):new gP(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(E_(e,this.value)):e!==null&&ep(this.value)===ep(e)&&this.matchesComparison(E_(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ml=class n extends nI{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return vK(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vK(n){return n.op==="and"}function bK(n){return nde(n)&&vK(n)}function nde(n){for(let t of n.filters)if(t instanceof Ml)return!1;return!0}function mP(n){if(n instanceof Br)return n.field.canonicalString()+n.op.toString()+x_(n.value);if(bK(n))return n.filters.map(t=>mP(t)).join(",");{let t=n.filters.map(e=>mP(e)).join(",");return`${n.op}(${t})`}}function wK(n,t){return n instanceof Br?function(i,r){return r instanceof Br&&i.op===r.op&&i.field.isEqual(r.field)&&Su(i.value,r.value)}(n,t):n instanceof Ml?function(i,r){return r instanceof Ml&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&wK(s,r.filters[a]),!0):!1}(n,t):void Bt()}function CK(n){return n instanceof Br?function(e){return`${e.field.canonicalString()} ${e.op} ${x_(e.value)}`}(n):n instanceof Ml?function(e){return e.op.toString()+" {"+e.getFilters().map(CK).join(" ,")+"}"}(n):"Filter"}var fP=class extends Br{constructor(t,e,i){super(t,e,i),this.key=At.fromName(i.referenceValue)}matches(t){let e=At.comparator(t.key,this.key);return this.matchesComparison(e)}},pP=class extends Br{constructor(t,e){super(t,"in",e),this.keys=EK("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},gP=class extends Br{constructor(t,e){super(t,"not-in",e),this.keys=EK("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function EK(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>At.fromName(i.referenceValue))}var _P=class extends Br{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return FO(e)&&t0(e.arrayValue,this.value)}},yP=class extends Br{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&t0(this.value.arrayValue,e)}},vP=class extends Br{constructor(t,e){super(t,"not-in",e)}matches(t){if(t0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!t0(this.value.arrayValue,e)}},bP=class extends Br{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!FO(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>t0(this.value.arrayValue,i))}};var wP=class{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function U5(n,t=null,e=[],i=[],r=null,o=null,s=null){return new wP(n,t,e,i,r,o,s)}function VO(n){let t=Wt(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>mP(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),SI(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>x_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>x_(i)).join(",")),t.ue=e}return t.ue}function LO(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!tde(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!wK(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!j5(n.startAt,t.startAt)&&j5(n.endAt,t.endAt)}function CP(n){return At.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var tp=class{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ide(n,t,e,i,r,o,s,a){return new tp(n,t,e,i,r,o,s,a)}function TI(n){return new tp(n)}function z5(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xK(n){return n.collectionGroup!==null}function Yb(n){let t=Wt(n);if(t.ce===null){t.ce=[];let e=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new jo(ja.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new S_(o,i))}),e.has(ja.keyField().canonicalString())||t.ce.push(new S_(ja.keyField(),i))}return t.ce}function xu(n){let t=Wt(n);return t.le||(t.le=rde(t,Yb(n))),t.le}function rde(n,t){if(n.limitType==="F")return U5(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new S_(r.field,o)});let e=n.endAt?new I_(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new I_(n.startAt.position,n.startAt.inclusive):null;return U5(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function EP(n,t){let e=n.filters.concat([t]);return new tp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function xP(n,t,e){return new tp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function DI(n,t){return LO(xu(n),xu(t))&&n.limitType===t.limitType}function IK(n){return`${VO(xu(n))}|lt:${n.limitType}`}function p_(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>CK(r)).join(", ")}]`),SI(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>x_(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>x_(r)).join(",")),`Target(${i})`}(xu(n))}; limitType=${n.limitType})`}function kI(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):At.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of Yb(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=$5(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,Yb(i),r)||i.endAt&&!function(s,a,l){let u=$5(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,Yb(i),r))}(n,t)}function ode(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SK(n){return(t,e)=>{let i=!1;for(let r of Yb(n)){let o=sde(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function sde(n,t,e){let i=n.field.isKeyField()?At.comparator(t.key,e.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?E_(l,u):Bt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Bt()}}var sm=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){P_(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return pK(this.inner)}size(){return this.innerSize}};var ade=new dr(At.comparator);function Rd(){return ade}var TK=new dr(At.comparator);function Gb(...n){let t=TK;for(let e of n)t=t.insert(e.key,e);return t}function DK(n){let t=TK;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Qf(){return Xb()}function kK(){return Xb()}function Xb(){return new sm(n=>n.toString(),(n,t)=>n.isEqual(t))}var cde=new dr(At.comparator),lde=new jo(At.comparator);function Sn(...n){let t=lde;for(let e of n)t=t.add(e);return t}var ude=new jo(Qn);function dde(){return ude}function BO(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zb(t)?"-0":t}}function AK(n){return{integerValue:""+n}}function hde(n,t){return Que(t)?AK(t):BO(n,t)}var T_=class{constructor(){this._=void 0}};function mde(n,t,e){return n instanceof np?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&OO(o)&&(o=NO(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof ip?MK(n,t):n instanceof rp?PK(n,t):function(r,o){let s=RK(r,o),a=q5(s)+q5(r.Pe);return hP(s)&&hP(r.Pe)?AK(a):BO(r.serializer,a)}(n,t)}function fde(n,t,e){return n instanceof ip?MK(n,t):n instanceof rp?PK(n,t):e}function RK(n,t){return n instanceof D_?function(i){return hP(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var np=class extends T_{},ip=class extends T_{constructor(t){super(),this.elements=t}};function MK(n,t){let e=OK(t);for(let i of n.elements)e.some(r=>Su(r,i))||e.push(i);return{arrayValue:{values:e}}}var rp=class extends T_{constructor(t){super(),this.elements=t}};function PK(n,t){let e=OK(t);for(let i of n.elements)e=e.filter(r=>!Su(r,i));return{arrayValue:{values:e}}}var D_=class extends T_{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function q5(n){return Qi(n.integerValue||n.doubleValue)}function OK(n){return FO(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var IP=class{constructor(t,e){this.field=t,this.transform=e}};function pde(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof ip&&r instanceof ip||i instanceof rp&&r instanceof rp?C_(i.elements,r.elements,Su):i instanceof D_&&r instanceof D_?Su(i.Pe,r.Pe):i instanceof np&&r instanceof np}(n.transform,t.transform)}var SP=class{constructor(t,e){this.version=t,this.transformResults=e}},Dd=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Qx(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var k_=class{};function NK(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new n0(n.key,Dd.none()):new op(n.key,n.data,Dd.none());{let e=n.data,i=kl.empty(),r=new jo(ja.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Md(n.key,i,new Cu(r.toArray()),Dd.none())}}function gde(n,t,e){n instanceof op?function(r,o,s){let a=r.value.clone(),l=H5(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Md?function(r,o,s){if(!Qx(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=H5(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(FK(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function Jb(n,t,e,i){return n instanceof op?function(o,s,a,l){if(!Qx(o.precondition,s))return a;let u=o.value.clone(),h=W5(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof Md?function(o,s,a,l){if(!Qx(o.precondition,s))return a;let u=W5(o.fieldTransforms,l,s),h=s.data;return h.setAll(FK(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(o,s,a){return Qx(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,t,e)}function _de(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=RK(i.transform,r||null);o!=null&&(e===null&&(e=kl.empty()),e.set(i.field,o))}return e||null}function K5(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&C_(i,r,(o,s)=>pde(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var op=class extends k_{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Md=class extends k_{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FK(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function H5(n,t,e){let i=new Map;fi(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,fde(s,a,e[r]))}return i}function W5(n,t,e){let i=new Map;for(let r of n){let o=r.transform,s=e.data.field(r.field);i.set(r.field,mde(o,s,t))}return i}var n0=class extends k_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},TP=class extends k_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var DP=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&gde(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=Jb(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=Jb(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=kK();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;let l=NK(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(tn.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Sn())}isEqual(t){return this.batchId===t.batchId&&C_(this.mutations,t.mutations,(e,i)=>K5(e,i))&&C_(this.baseMutations,t.baseMutations,(e,i)=>K5(e,i))}},kP=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){fi(t.mutations.length===i.length);let r=function(){return cde}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(t,e,i,r)}};var AP=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var RP=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Vr,Nn;function yde(n){switch(n){default:return Bt();case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0}}function VK(n){if(n===void 0)return kd("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Vr.OK:return Ce.OK;case Vr.CANCELLED:return Ce.CANCELLED;case Vr.UNKNOWN:return Ce.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Ce.INTERNAL;case Vr.UNAVAILABLE:return Ce.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Ce.NOT_FOUND;case Vr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Vr.ABORTED:return Ce.ABORTED;case Vr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Vr.DATA_LOSS:return Ce.DATA_LOSS;default:return Bt()}}(Nn=Vr||(Vr={}))[Nn.OK=0]="OK",Nn[Nn.CANCELLED=1]="CANCELLED",Nn[Nn.UNKNOWN=2]="UNKNOWN",Nn[Nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nn[Nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nn[Nn.NOT_FOUND=5]="NOT_FOUND",Nn[Nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nn[Nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nn[Nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nn[Nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nn[Nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nn[Nn.ABORTED=10]="ABORTED",Nn[Nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nn[Nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nn[Nn.INTERNAL=13]="INTERNAL",Nn[Nn.UNAVAILABLE=14]="UNAVAILABLE",Nn[Nn.DATA_LOSS=15]="DATA_LOSS";var G5=null;function vde(){return new TextEncoder}var bde=new im([4294967295,4294967295],0);function Q5(n){let t=vde().encode(n),e=new KM;return e.update(t),new Uint8Array(e.digest())}function Y5(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new im([e,i],0),new im([r,o],0)]}var MP=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Yf(`Invalid padding: ${e}`);if(i<0)throw new Yf(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Yf(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Yf(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=im.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(im.fromNumber(i)));return r.compare(bde)===1&&(r=new im([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=Q5(t),[i,r]=Y5(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new n(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;let e=Q5(t),[i,r]=Y5(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},Yf=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var iI=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,i0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(tn.min(),r,new dr(Qn),Rd(),Sn())}},i0=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Sn(),Sn(),Sn())}};var v_=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},rI=class{constructor(t,e){this.targetId=t,this.me=e}},oI=class{constructor(t,e,i=Uo.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},sI=class{constructor(){this.fe=0,this.ge=J5(),this.pe=Uo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Sn(),e=Sn(),i=Sn();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Bt()}}),new i0(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=J5()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,fi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},PP=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Rd(),this.qe=X5(),this.Qe=new dr(Qn)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:Bt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let o=r.target;if(CP(o))if(i===0){let s=new At(o.path);this.Ue(e,s,Rl.newNoDocument(s,tn.min()))}else fi(i===1);else{let s=this.Ye(e);if(s!==i){let a=this.Ze(t),l=a?this.Xe(a,t,s):1;if(l!==0){this.je(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}G5?.et(function(h,p,_,b,C){var T,k,U,W,K,oe;let ae={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},we=p.unchangedNames;return we&&(ae.bloomFilter={applied:C===0,hashCount:(T=we?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(W=(U=(k=we?.bits)===null||k===void 0?void 0:k.bitmap)===null||U===void 0?void 0:U.length)!==null&&W!==void 0?W:0,padding:(oe=(K=we?.bits)===null||K===void 0?void 0:K.padding)!==null&&oe!==void 0?oe:0,mightContain:M=>{var E;return(E=b?.mightContain(M))!==null&&E!==void 0&&E}}),ae}(s,t.me,this.Le.tt(),a,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,s,a;try{s=om(i).toUint8Array()}catch(l){if(l instanceof eI)return w_("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new MP(s,r,o)}catch(l){return w_(l instanceof Yf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,o,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&CP(a.target)){let l=new At(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Rl.newNoDocument(l,t))}o.be&&(e.set(s,o.ve()),o.Ce())}});let i=Sn();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));let r=new iI(t,e,this.Qe,this.ke,i);return this.ke=Rd(),this.qe=X5(),this.Qe=new dr(Qn),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new sI,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new jo(Qn),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||_t("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new sI),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function X5(){return new dr(At.comparator)}function J5(){return new dr(At.comparator)}var wde={asc:"ASCENDING",desc:"DESCENDING"},Cde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ede={and:"AND",or:"OR"},OP=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function NP(n,t){return n.useProto3Json||SI(t)?t:{value:t}}function aI(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function LK(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function xde(n,t){return aI(n,t.toTimestamp())}function Iu(n){return fi(!!n),tn.fromTimestamp(function(e){let i=Ad(e);return new Io(i.seconds,i.nanos)}(n))}function $O(n,t){return FP(n,t).canonicalString()}function FP(n,t){let e=function(r){return new ir(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function BK(n){let t=ir.fromString(n);return fi(qK(t)),t}function VP(n,t){return $O(n.databaseId,t.path)}function XM(n,t){let e=BK(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new At(jK(e))}function $K(n,t){return $O(n.databaseId,t)}function Ide(n){let t=BK(n);return t.length===4?ir.emptyPath():jK(t)}function LP(n){return new ir(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jK(n){return fi(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Z5(n,t,e){return{name:VP(n,t),fields:e.value.mapValue.fields}}function Sde(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Bt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(fi(h===void 0||typeof h=="string"),Uo.fromBase64String(h||"")):(fi(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Uo.fromUint8Array(h||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){let h=u.code===void 0?Ce.UNKNOWN:VK(u.code);return new mt(h,u.message||"")}(s);e=new oI(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=XM(n,i.document.name),o=Iu(i.document.updateTime),s=i.document.createTime?Iu(i.document.createTime):tn.min(),a=new kl({mapValue:{fields:i.document.fields}}),l=Rl.newFoundDocument(r,o,s,a),u=i.targetIds||[],h=i.removedTargetIds||[];e=new v_(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=XM(n,i.document),o=i.readTime?Iu(i.readTime):tn.min(),s=Rl.newNoDocument(r,o),a=i.removedTargetIds||[];e=new v_([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=XM(n,i.document),o=i.removedTargetIds||[];e=new v_([],o,r,null)}else{if(!("filter"in t))return Bt();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new RP(r,o),a=i.targetId;e=new rI(a,s)}}return e}function Tde(n,t){let e;if(t instanceof op)e={update:Z5(n,t.key,t.value)};else if(t instanceof n0)e={delete:VP(n,t.key)};else if(t instanceof Md)e={update:Z5(n,t.key,t.data),updateMask:Fde(t.fieldMask)};else{if(!(t instanceof TP))return Bt();e={verify:VP(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof np)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ip)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof D_)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Bt()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:xde(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Bt()}(n,t.precondition)),e}function Dde(n,t){return n&&n.length>0?(fi(t!==void 0),n.map(e=>function(r,o){let s=r.updateTime?Iu(r.updateTime):Iu(o);return s.isEqual(tn.min())&&(s=Iu(o)),new SP(s,r.transformResults||[])}(e,t))):[]}function kde(n,t){return{documents:[$K(n,t.path)]}}function Ade(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=$K(n,r);let o=function(u){if(u.length!==0)return zK(Ml.create(u,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:g_(_.field),direction:Pde(_.dir)}}(h))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=NP(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:r}}function Rde(n){let t=Ide(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){fi(i===1);let h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let o=[];e.where&&(o=function(p){let _=UK(p);return _ instanceof Ml&&bK(_)?_.getFilters():[_]}(e.where));let s=[];e.orderBy&&(s=function(p){return p.map(_=>function(C){return new S_(__(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(e.orderBy));let a=null;e.limit&&(a=function(p){let _;return _=typeof p=="object"?p.value:p,SI(_)?null:_}(e.limit));let l=null;e.startAt&&(l=function(p){let _=!!p.before,b=p.values||[];return new I_(b,_)}(e.startAt));let u=null;return e.endAt&&(u=function(p){let _=!p.before,b=p.values||[];return new I_(b,_)}(e.endAt)),ide(t,r,s,o,a,"F",l,u)}function Mde(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function UK(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=__(e.unaryFilter.field);return Br.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=__(e.unaryFilter.field);return Br.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=__(e.unaryFilter.field);return Br.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=__(e.unaryFilter.field);return Br.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(n):n.fieldFilter!==void 0?function(e){return Br.create(__(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ml.create(e.compositeFilter.filters.map(i=>UK(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Bt()}}(e.compositeFilter.op))}(n):Bt()}function Pde(n){return wde[n]}function Ode(n){return Cde[n]}function Nde(n){return Ede[n]}function g_(n){return{fieldPath:n.canonicalString()}}function __(n){return ja.fromServerFormat(n.fieldPath)}function zK(n){return n instanceof Br?function(e){if(e.op==="=="){if(B5(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NAN"}};if(L5(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(B5(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NOT_NAN"}};if(L5(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:g_(e.field),op:Ode(e.op),value:e.value}}}(n):n instanceof Ml?function(e){let i=e.getFilters().map(r=>zK(r));return i.length===1?i[0]:{compositeFilter:{op:Nde(e.op),filters:i}}}(n):Bt()}function Fde(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function qK(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var r0=class n{constructor(t,e,i,r,o=tn.min(),s=tn.min(),a=Uo.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var BP=class{constructor(t){this.ct=t}};function Vde(n){let t=Rde({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xP(t,t.limit,"L"):t}var cI=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(Qi(t.integerValue));else if("doubleValue"in t){let i=Qi(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),Zb(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=Ad(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(om(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?_K(t)?this.dt(e,Number.MAX_SAFE_INTEGER):gK(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):Bt()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let o=t.fields||{};this.dt(e,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(Qi(a)),this.Vt(s,e),this.Tt(o[s],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),At.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};cI.vt=new cI;var $P=class{constructor(){this.un=new jP}addToCollectionParentIndex(t,e){return this.un.add(e),Ne.resolve()}getCollectionParents(t,e){return Ne.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return Ne.resolve()}deleteFieldIndex(t,e){return Ne.resolve()}deleteAllFieldIndexes(t){return Ne.resolve()}createTargetIndexes(t,e){return Ne.resolve()}getDocumentsMatchingTarget(t,e){return Ne.resolve(null)}getIndexType(t,e){return Ne.resolve(0)}getFieldIndexes(t,e){return Ne.resolve([])}getNextCollectionGroupToUpdate(t){return Ne.resolve(null)}getMinOffset(t,e){return Ne.resolve(Zf.min())}getMinOffsetFromCollectionGroup(t,e){return Ne.resolve(Zf.min())}updateCollectionGroup(t,e,i){return Ne.resolve()}updateIndexEntries(t,e){return Ne.resolve()}},jP=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new jo(ir.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new jo(ir.comparator)).toArray()}};var rVe=new Uint8Array(0);var wu=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(41943040,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);var o0=class n{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var UP=class{constructor(){this.changes=new sm(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Rl.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?Ne.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var zP=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var qP=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Jb(i.mutation,r,Cu.empty(),Io.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Sn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Sn()){let r=Qf();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=Gb();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let i=Qf();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Sn()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=Rd(),s=Xb(),a=function(){return Xb()}();return e.forEach((l,u)=>{let h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Md)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Jb(h.mutation,u,h.mutation.getFieldMask(),Io.now())):s.set(u.key,Cu.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),e.forEach((u,h)=>{var p;return a.set(u,new zP(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(t,e){let i=Xb(),r=new dr((s,a)=>s-a),o=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let h=i.get(l)||Cu.empty();h=a.applyToLocalView(u,h),i.set(l,h);let p=(r.get(a.batchId)||Sn()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=kK();h.forEach(_=>{if(!o.has(_)){let b=NK(e.get(_),i.get(_));b!==null&&p.set(_,b),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,p))}return Ne.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(s){return At.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):xK(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):Ne.resolve(Qf()),a=-1,l=o;return s.next(u=>Ne.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?Ne.resolve():this.remoteDocumentCache.getEntry(t,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Sn())).next(h=>({batchId:a,changes:DK(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new At(e)).next(i=>{let r=Gb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,s=Gb();return this.indexManager.getCollectionParents(t,o).next(a=>Ne.forEach(a,l=>{let u=function(p,_){return new tp(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(h=>{h.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Rl.newInvalidDocument(h)))});let a=Gb();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&Jb(h.mutation,u,Cu.empty(),Io.now()),kI(e,u)&&(a=a.insert(l,u))}),a})}};var KP=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return Ne.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Iu(r.createTime)}}(e)),Ne.resolve()}getNamedQuery(t,e){return Ne.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:Vde(r.bundledQuery),readTime:Iu(r.readTime)}}(e)),Ne.resolve()}};var HP=class{constructor(){this.overlays=new dr(At.comparator),this.Ir=new Map}getOverlay(t,e){return Ne.resolve(this.overlays.get(e))}getOverlays(t,e){let i=Qf();return Ne.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.ht(t,e,o)}),Ne.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Ne.resolve()}getOverlaysForCollection(t,e,i){let r=Qf(),o=e.length+1,s=new At(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Ne.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new dr((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let h=o.get(u.largestBatchId);h===null&&(h=Qf(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Qf(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return Ne.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new AP(e,i));let o=this.Ir.get(e);o===void 0&&(o=Sn(),this.Ir.set(e,o)),this.Ir.set(e,o.add(i.key))}};var WP=class{constructor(){this.sessionToken=Uo.EMPTY_BYTE_STRING}getSessionToken(t){return Ne.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Ne.resolve()}};var s0=class{constructor(){this.Tr=new jo(Lr.Er),this.dr=new jo(Lr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let i=new Lr(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new Lr(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){let e=new At(new ir([])),i=new Lr(e,t),r=new Lr(e,t+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new At(new ir([])),i=new Lr(e,t),r=new Lr(e,t+1),o=Sn();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new Lr(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Lr=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return At.comparator(t.key,e.key)||Qn(t.wr,e.wr)}static Ar(t,e){return Qn(t.wr,e.wr)||At.comparator(t.key,e.key)}};var GP=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new jo(Lr.Er)}checkEmpty(t){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new DP(o,e,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new Lr(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(t,e){return Ne.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.vr(i),o=r<0?0:r;return Ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Lr(e,0),r=new Lr(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),Ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new jo(Qn);return e.forEach(r=>{let o=new Lr(r,0),s=new Lr(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),Ne.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;At.isDocumentKey(o)||(o=o.child(""));let s=new Lr(new At(o),0),a=new jo(Qn);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},s),Ne.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(i=>{let r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){fi(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Ne.forEach(e.mutations,r=>{let o=new Lr(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){let i=new Lr(e,0),r=this.br.firstAfterOrEqual(i);return Ne.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ne.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var QP=class{constructor(t){this.Mr=t,this.docs=function(){return new dr(At.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return Ne.resolve(i?i.document.mutableCopy():Rl.newInvalidDocument(e))}getEntries(t,e){let i=Rd();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Rl.newInvalidDocument(r))}),Ne.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=Rd(),s=e.path,a=new At(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Hue(Kue(h),i)<=0||(r.has(h.key)||kI(e,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Ne.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Bt()}Or(t,e){return Ne.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new YP(this)}getSize(t){return Ne.resolve(this.size)}},YP=class extends UP{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),Ne.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var XP=class{constructor(t){this.persistence=t,this.Nr=new sm(e=>VO(e),LO),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new s0,this.targetCount=0,this.kr=o0.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),Ne.resolve()}getLastRemoteSnapshotVersion(t){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ne.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),Ne.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new o0(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,Ne.resolve()}updateTargetData(t,e){return this.Kn(e),Ne.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),Ne.waitFor(o).next(()=>r)}getTargetCount(t){return Ne.resolve(this.targetCount)}getTargetData(t,e){let i=this.Nr.get(e)||null;return Ne.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),Ne.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),Ne.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),Ne.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Br.yr(e);return Ne.resolve(i)}containsKey(t,e){return Ne.resolve(this.Br.containsKey(e))}};var JP=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new fK(0),this.Kr=!1,this.Kr=!0,this.$r=new WP,this.referenceDelegate=t(this),this.Ur=new XP(this),this.indexManager=new $P,this.remoteDocumentCache=function(r){return new QP(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new BP(e),this.Gr=new KP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new HP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new GP(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){_t("MemoryPersistence","Starting transaction:",t);let r=new ZP(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(t,e){return Ne.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}},ZP=class extends lP{constructor(t){super(),this.currentSequenceNumber=t}},eO=class n{constructor(t){this.persistence=t,this.Jr=new s0,this.Yr=null}static Zr(t){return new n(t)}get Xr(){if(this.Yr)return this.Yr;throw Bt()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),Ne.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),Ne.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),Ne.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,i=>{let r=At.fromPath(i);return this.ei(t,r).next(o=>{o||e.removeEntry(r,tn.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var tO=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=Sn(),r=Sn();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var nO=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var iO=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hj()?8:Gue(uj())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.Yi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nO;return this.Xi(t,e,s).next(a=>{if(o.result=a,this.zi)return this.es(t,e,s,a.size)})}).next(()=>o.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(Wb()<=hl.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",p_(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(Wb()<=hl.DEBUG&&_t("QueryEngine","Query:",p_(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Wb()<=hl.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",p_(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xu(e))):Ne.resolve())}Yi(t,e){if(z5(e))return Ne.resolve(null);let i=xu(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=xP(e,null,"F"),i=xu(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=Sn(...o);return this.Ji.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.ts(e,a);return this.ns(e,u,s,l.readTime)?this.Yi(t,xP(e,null,"F")):this.rs(t,u,e,l)}))})))}Zi(t,e,i,r){return z5(e)||r.isEqual(tn.min())?Ne.resolve(null):this.Ji.getDocuments(t,i).next(o=>{let s=this.ts(e,o);return this.ns(e,s,i,r)?Ne.resolve(null):(Wb()<=hl.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),p_(e)),this.rs(t,s,e,que(r,-1)).next(a=>a))})}ts(t,e){let i=new jo(SK(t));return e.forEach((r,o)=>{kI(t,o)&&(i=i.add(o))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(t,e,i){return Wb()<=hl.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",p_(e)),this.Ji.getDocumentsMatchingQuery(t,e,Zf.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var rO=class{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new dr(Qn),this._s=new sm(o=>VO(o),LO),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function Lde(n,t,e,i){return new rO(n,t,e,i)}function KK(n,t){return O(this,null,function*(){let e=Wt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=Sn();for(let u of r){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Bde(n,t){let e=Wt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,_=p.keys(),b=Ne.resolve();return _.forEach(C=>{b=b.next(()=>h.getEntry(l,C)).next(T=>{let k=u.docVersions.get(C);fi(k!==null),T.version.compareTo(k)<0&&(p.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Sn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function HK(n){let t=Wt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function $de(n,t){let e=Wt(n),i=t.snapshotVersion,r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;let a=[];t.targetChanges.forEach((h,p)=>{let _=r.get(p);if(!_)return;a.push(e.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>e.Ur.addMatchingKeys(o,h.addedDocuments,p)));let b=_.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?b=b.withResumeToken(Uo.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,i)),r=r.insert(p,b),function(T,k,U){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(_,b,h)&&a.push(e.Ur.updateTargetData(o,b))});let l=Rd(),u=Sn();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(jde(o,s,t.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(tn.min())){let h=e.Ur.getLastRemoteSnapshotVersion(o).next(p=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(h)}return Ne.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(e.os=r,o))}function jde(n,t,e){let i=Sn(),r=Sn();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=Rd();return e.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(tn.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):_t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function Ude(n,t){let e=Wt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function zde(n,t){let e=Wt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(o=>o?(r=o,Ne.resolve(r)):e.Ur.allocateTargetId(i).next(s=>(r=new r0(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}function oO(n,t,e){return O(this,null,function*(){let i=Wt(n),r=i.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!_0(s))throw s;_t("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function eK(n,t,e){let i=Wt(n),r=tn.min(),o=Sn();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let p=Wt(l),_=p._s.get(h);return _!==void 0?Ne.resolve(p.os.get(_)):p.Ur.getTargetData(u,h)}(i,s,xu(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,t,e?r:tn.min(),e?o:Sn())).next(a=>(qde(i,ode(t),a),{documents:a,Ts:o})))}function qde(n,t,e){let i=n.us.get(t)||tn.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(t,i)}var lI=class{constructor(){this.activeTargetIds=dde()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var sO=class{constructor(){this.so=new lI,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new lI,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var aO=class{_o(t){}shutdown(){}};var uI=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wx=null;function JM(){return Wx===null?Wx=function(){return 268435456+Math.round(2147483648*Math.random())}():Wx++,"0x"+Wx.toString(16)}var Kde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cO=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var $o="WebChannelConnection",lO=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(e,i,r,o,s){let a=JM(),l=this.xo(e,i.toUriEncodedString());_t("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(e,l,u,r).then(h=>(_t("RestConnection",`Received RPC '${e}' ${a}: `,h),h),h=>{throw w_("RestConnection",`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(e,i,r,o,s,a){return this.Mo(e,i,r,o,s)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+M_}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>e[s]=o),r&&r.headers.forEach((o,s)=>e[s]=o)}xo(e,i){let r=Kde[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){let o=JM();return new Promise((s,a)=>{let l=new HM;l.setWithCredentials(!0),l.listenOnce(WM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hb.NO_ERROR:let h=l.getResponseJson();_t($o,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(h)),s(h);break;case Hb.TIMEOUT:_t($o,`RPC '${t}' ${o} timed out`),a(new mt(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Hb.HTTP_ERROR:let p=l.getStatus();if(_t($o,`RPC '${t}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let b=_?.error;if(b&&b.status&&b.message){let C=function(k){let U=k.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(U)>=0?U:Ce.UNKNOWN}(b.status);a(new mt(C,b.message))}else a(new mt(Ce.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new mt(Ce.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{_t($o,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(r);_t($o,`RPC '${t}' ${o} sending request:`,r),l.send(e,"POST",u,i,15)})}Bo(t,e,i){let r=JM(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=YM(),a=QM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let h=o.join("");_t($o,`Creating RPC '${t}' stream ${r}: ${h}`,l);let p=s.createWebChannel(h,l),_=!1,b=!1,C=new cO({Io:k=>{b?_t($o,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(_||(_t($o,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),_t($o,`RPC '${t}' stream ${r} sending:`,k),p.send(k))},To:()=>p.close()}),T=(k,U,W)=>{k.listen(U,K=>{try{W(K)}catch(oe){setTimeout(()=>{throw oe},0)}})};return T(p,f_.EventType.OPEN,()=>{b||(_t($o,`RPC '${t}' stream ${r} transport opened.`),C.yo())}),T(p,f_.EventType.CLOSE,()=>{b||(b=!0,_t($o,`RPC '${t}' stream ${r} transport closed`),C.So())}),T(p,f_.EventType.ERROR,k=>{b||(b=!0,w_($o,`RPC '${t}' stream ${r} transport errored:`,k),C.So(new mt(Ce.UNAVAILABLE,"The operation could not be completed")))}),T(p,f_.EventType.MESSAGE,k=>{var U;if(!b){let W=k.data[0];fi(!!W);let K=W,oe=K.error||((U=K[0])===null||U===void 0?void 0:U.error);if(oe){_t($o,`RPC '${t}' stream ${r} received error:`,oe);let ae=oe.status,we=function(I){let P=Vr[I];if(P!==void 0)return VK(P)}(ae),M=oe.message;we===void 0&&(we=Ce.INTERNAL,M="Unknown error status: "+ae+" with message "+oe.message),b=!0,C.So(new mt(we,M)),p.close()}else _t($o,`RPC '${t}' stream ${r} received:`,W),C.bo(W)}}),T(a,GM.STAT_EVENT,k=>{k.stat===Kx.PROXY?_t($o,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===Kx.NOPROXY&&_t($o,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function ZM(){return typeof document<"u"?document:null}function AI(n){return new OP(n,!0)}var dI=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&_t("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var hI=class{constructor(t,e,i,r,o,s,a,l){this.ui=t,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dI(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return O(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return O(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return O(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===Ce.RESOURCE_EXHAUSTED?(kd(e.toString()),kd("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{let r=new mt(Ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){let i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>O(this,null,function*(){this.state=0,this.start()}))}I_(t){return _t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uO=class extends hI{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=Sde(this.serializer,t),i=function(o){if(!("targetChange"in o))return tn.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?tn.min():s.readTime?Iu(s.readTime):tn.min()}(t);return this.listener.d_(e,i)}A_(t){let e={};e.database=LP(this.serializer),e.addTarget=function(o,s){let a,l=s.target;if(a=CP(l)?{documents:kde(o,l)}:{query:Ade(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=LK(o,s.resumeToken);let u=NP(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(tn.min())>0){a.readTime=aI(o,s.snapshotVersion.toTimestamp());let u=NP(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let i=Mde(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){let e={};e.database=LP(this.serializer),e.removeTarget=t,this.a_(e)}},dO=class extends hI{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return fi(!!t.streamToken),this.lastStreamToken=t.streamToken,fi(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){fi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=Dde(t.writeResults,t.commitTime),i=Iu(t.commitTime);return this.listener.g_(i,e)}p_(){let t={};t.database=LP(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>Tde(this.serializer,i))};this.a_(e)}};var hO=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new mt(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,FP(e,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(Ce.UNKNOWN,o.toString())})}Lo(t,e,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(t,FP(e,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new mt(Ce.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mO=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kd(e),this.D_=!1):_t("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var fO=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>O(this,null,function*(){ap(this)&&(_t("RemoteStore","Restarting streams for network reachability change."),yield function(l){return O(this,null,function*(){let u=Wt(l);u.L_.add(4),yield y0(u),u.q_.set("Unknown"),u.L_.delete(4),yield RI(u)})}(this))}))}),this.q_=new mO(i,r)}};function RI(n){return O(this,null,function*(){if(ap(n))for(let t of n.B_)yield t(!0)})}function y0(n){return O(this,null,function*(){for(let t of n.B_)yield t(!1)})}function WK(n,t){let e=Wt(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),qO(e)?zO(e):O_(e).r_()&&UO(e,t))}function jO(n,t){let e=Wt(n),i=O_(e);e.N_.delete(t),i.r_()&&GK(e,t),e.N_.size===0&&(i.r_()?i.o_():ap(e)&&e.q_.set("Unknown"))}function UO(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tn.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}O_(n).A_(t)}function GK(n,t){n.Q_.xe(t),O_(n).R_(t)}function zO(n){n.Q_=new PP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),O_(n).start(),n.q_.v_()}function qO(n){return ap(n)&&!O_(n).n_()&&n.N_.size>0}function ap(n){return Wt(n).L_.size===0}function QK(n){n.Q_=void 0}function Hde(n){return O(this,null,function*(){n.q_.set("Online")})}function Wde(n){return O(this,null,function*(){n.N_.forEach((t,e)=>{UO(n,t)})})}function Gde(n,t){return O(this,null,function*(){QK(n),qO(n)?(n.q_.M_(t),zO(n)):n.q_.set("Unknown")})}function Qde(n,t,e){return O(this,null,function*(){if(n.q_.set("Online"),t instanceof oI&&t.state===2&&t.cause)try{yield function(r,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,t)}catch(i){_t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield mI(n,i)}else if(t instanceof v_?n.Q_.Ke(t):t instanceof rI?n.Q_.He(t):n.Q_.We(t),!e.isEqual(tn.min()))try{let i=yield HK(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.N_.get(u);h&&o.N_.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.N_.get(l);if(!h)return;o.N_.set(l,h.withResumeToken(Uo.EMPTY_BYTE_STRING,h.snapshotVersion)),GK(o,l);let p=new r0(h.target,l,u,h.sequenceNumber);UO(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){_t("RemoteStore","Failed to raise snapshot:",i),yield mI(n,i)}})}function mI(n,t,e){return O(this,null,function*(){if(!_0(t))throw t;n.L_.add(1),yield y0(n),n.q_.set("Offline"),e||(e=()=>HK(n.localStore)),n.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){_t("RemoteStore","Retrying IndexedDB access"),yield e(),n.L_.delete(1),yield RI(n)}))})}function YK(n,t){return t().catch(e=>mI(n,e,t))}function MI(n){return O(this,null,function*(){let t=Wt(n),e=am(t),i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Yde(t);)try{let r=yield Ude(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,Xde(t,r)}catch(r){yield mI(t,r)}XK(t)&&JK(t)})}function Yde(n){return ap(n)&&n.O_.length<10}function Xde(n,t){n.O_.push(t);let e=am(n);e.r_()&&e.V_&&e.m_(t.mutations)}function XK(n){return ap(n)&&!am(n).n_()&&n.O_.length>0}function JK(n){am(n).start()}function Jde(n){return O(this,null,function*(){am(n).p_()})}function Zde(n){return O(this,null,function*(){let t=am(n);for(let e of n.O_)t.m_(e.mutations)})}function ehe(n,t,e){return O(this,null,function*(){let i=n.O_.shift(),r=kP.from(i,t,e);yield YK(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield MI(n)})}function the(n,t){return O(this,null,function*(){t&&am(n).V_&&(yield function(i,r){return O(this,null,function*(){if(function(s){return yde(s)&&s!==Ce.ABORTED}(r.code)){let o=i.O_.shift();am(i).s_(),yield YK(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield MI(i)}})}(n,t)),XK(n)&&JK(n)})}function tK(n,t){return O(this,null,function*(){let e=Wt(n);e.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");let i=ap(e);e.L_.add(3),yield y0(e),i&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield RI(e)})}function nhe(n,t){return O(this,null,function*(){let e=Wt(n);t?(e.L_.delete(2),yield RI(e)):t||(e.L_.add(2),yield y0(e),e.q_.set("Unknown"))})}function O_(n){return n.K_||(n.K_=function(e,i,r){let o=Wt(e);return o.w_(),new uO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:Hde.bind(null,n),Ro:Wde.bind(null,n),mo:Gde.bind(null,n),d_:Qde.bind(null,n)}),n.B_.push(t=>O(this,null,function*(){t?(n.K_.s_(),qO(n)?zO(n):n.q_.set("Unknown")):(yield n.K_.stop(),QK(n))}))),n.K_}function am(n){return n.U_||(n.U_=function(e,i,r){let o=Wt(e);return o.w_(),new dO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Jde.bind(null,n),mo:the.bind(null,n),f_:Zde.bind(null,n),g_:ehe.bind(null,n)}),n.B_.push(t=>O(this,null,function*(){t?(n.U_.s_(),yield MI(n)):(yield n.U_.stop(),n.O_.length>0&&(_t("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var pO=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Al,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let s=Date.now()+i,a=new n(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(Ce.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KO(n,t){if(kd("AsyncQueue",`${t}: ${n}`),_0(n))return new mt(Ce.UNAVAILABLE,`${t}: ${n}`);throw n}var fI=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||At.comparator(e.key,i.key):(e,i)=>At.comparator(e.key,i.key),this.keyedMap=Gb(),this.sortedSet=new dr(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var pI=class{constructor(){this.W_=new dr(At.comparator)}track(t){let e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):Bt():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}},A_=class n{constructor(t,e,i,r,o,s,a,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new n(t,e,fI.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&DI(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var gO=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},_O=class{constructor(){this.queries=nK(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){let r=Wt(e),o=r.queries;r.queries=nK(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new mt(Ce.ABORTED,"Firestore shutting down"))}};function nK(){return new sm(n=>IK(n),DI)}function HO(n,t){return O(this,null,function*(){let e=Wt(n),i=3,r=t.query,o=e.queries.get(r);o?!o.H_()&&t.J_()&&(i=2):(o=new gO,i=t.J_()?0:1);try{switch(i){case 0:o.z_=yield e.onListen(r,!0);break;case 1:o.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(s){let a=KO(s,`Initialization of query '${p_(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&GO(e)})}function WO(n,t){return O(this,null,function*(){let e=Wt(n),i=t.query,r=3,o=e.queries.get(i);if(o){let s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=t.J_()?0:1:!o.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function ihe(n,t){let e=Wt(n),i=!1;for(let r of t){let o=r.query,s=e.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&GO(e)}function rhe(n,t,e){let i=Wt(n),r=i.queries.get(t);if(r)for(let o of r.j_)o.onError(e);i.queries.delete(t)}function GO(n){n.Y_.forEach(t=>{t.next()})}var yO,iK;(iK=yO||(yO={})).ea="default",iK.Cache="cache";var a0=class{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new A_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=A_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==yO.Cache}};var gI=class{constructor(t){this.key=t}},_I=class{constructor(t){this.key=t}},vO=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Sn(),this.mutatedKeys=Sn(),this.Aa=SK(t),this.Ra=new fI(this.Aa)}get Va(){return this.Ta}ma(t,e){let i=e?e.fa:new pI,r=e?e.Ra:this.Ra,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,p)=>{let _=r.get(h),b=kI(this.query,p)?p:null,C=!!_&&this.mutatedKeys.has(_.key),T=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),k=!1;_&&b?_.data.isEqual(b.data)?C!==T&&(i.track({type:3,doc:b}),k=!0):this.ga(_,b)||(i.track({type:2,doc:b}),k=!0,(l&&this.Aa(b,l)>0||u&&this.Aa(b,u)<0)&&(a=!0)):!_&&b?(i.track({type:0,doc:b}),k=!0):_&&!b&&(i.track({type:1,doc:_}),k=!0,(l||u)&&(a=!0)),k&&(b?(s=s.add(b),o=T?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let s=t.fa.G_();s.sort((h,p)=>function(b,C){let T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return T(b)-T(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(i),r=r!=null&&r;let a=e&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new A_(this.query,t.Ra,o,s,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=Sn(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let e=[];return t.forEach(i=>{this.da.has(i)||e.push(new _I(i))}),this.da.forEach(i=>{t.has(i)||e.push(new gI(i))}),e}ba(t){this.Ta=t.Ts,this.da=Sn();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return A_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bO=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},wO=class{constructor(t){this.key=t,this.va=!1}},CO=class{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new sm(a=>IK(a),DI),this.Ma=new Map,this.xa=new Set,this.Oa=new dr(At.comparator),this.Na=new Map,this.La=new s0,this.Ba={},this.ka=new Map,this.qa=o0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ohe(n,t,e=!0){return O(this,null,function*(){let i=rH(n),r,o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield ZK(i,t,e,!0),r})}function she(n,t){return O(this,null,function*(){let e=rH(n);yield ZK(e,t,!0,!1)})}function ZK(n,t,e,i){return O(this,null,function*(){let r=yield zde(n.localStore,xu(t)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,e),a;return i&&(a=yield ahe(n,t,o,s==="current",r.resumeToken)),n.isPrimaryClient&&e&&WK(n.remoteStore,r),a})}function ahe(n,t,e,i,r){return O(this,null,function*(){n.Ka=(p,_,b)=>function(T,k,U,W){return O(this,null,function*(){let K=k.view.ma(U);K.ns&&(K=yield eK(T.localStore,k.query,!1).then(({documents:M})=>k.view.ma(M,K)));let oe=W&&W.targetChanges.get(k.targetId),ae=W&&W.targetMismatches.get(k.targetId)!=null,we=k.view.applyChanges(K,T.isPrimaryClient,oe,ae);return oK(T,k.targetId,we.wa),we.snapshot})}(n,p,_,b);let o=yield eK(n.localStore,t,!0),s=new vO(t,o.Ts),a=s.ma(o.documents),l=i0.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=s.applyChanges(a,n.isPrimaryClient,l);oK(n,e,u.wa);let h=new bO(t,e,s);return n.Fa.set(t,h),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),u.snapshot})}function che(n,t,e){return O(this,null,function*(){let i=Wt(n),r=i.Fa.get(t),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!DI(s,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield oO(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&jO(i.remoteStore,r.targetId),EO(i,r.targetId)}).catch(g0))):(EO(i,r.targetId),yield oO(i.localStore,r.targetId,!0))})}function lhe(n,t){return O(this,null,function*(){let e=Wt(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),jO(e.remoteStore,i.targetId))})}function uhe(n,t,e){return O(this,null,function*(){let i=_he(n);try{let r=yield function(s,a){let l=Wt(s),u=Io.now(),h=a.reduce((b,C)=>b.add(C.key),Sn()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=Rd(),T=Sn();return l.cs.getEntries(b,h).next(k=>{C=k,C.forEach((U,W)=>{W.isValidDocument()||(T=T.add(U))})}).next(()=>l.localDocuments.getOverlayedDocuments(b,C)).next(k=>{p=k;let U=[];for(let W of a){let K=_de(W,p.get(W.key).overlayedDocument);K!=null&&U.push(new Md(W.key,K,yK(K.value.mapValue),Dd.exists(!0)))}return l.mutationQueue.addMutationBatch(b,u,U,a)}).next(k=>{_=k;let U=k.applyToLocalDocumentSet(p,T);return l.documentOverlayCache.saveOverlays(b,k.batchId,U)})}).then(()=>({batchId:_.batchId,changes:DK(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new dr(Qn)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,e),yield v0(i,r.changes),yield MI(i.remoteStore)}catch(r){let o=KO(r,"Failed to persist write");e.reject(o)}})}function eH(n,t){return O(this,null,function*(){let e=Wt(n);try{let i=yield $de(e.localStore,t);t.targetChanges.forEach((r,o)=>{let s=e.Na.get(o);s&&(fi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?fi(s.va):r.removedDocuments.size>0&&(fi(s.va),s.va=!1))}),yield v0(e,i,t)}catch(i){yield g0(i)}})}function rK(n,t,e){let i=Wt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=Wt(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let _ of p.j_)_.Z_(a)&&(u=!0)}),u&&GO(l)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function dhe(n,t,e){return O(this,null,function*(){let i=Wt(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Na.get(t),o=r&&r.key;if(o){let s=new dr(At.comparator);s=s.insert(o,Rl.newNoDocument(o,tn.min()));let a=Sn().add(o),l=new iI(tn.min(),new Map,new dr(Qn),s,a);yield eH(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(t),QO(i)}else yield oO(i.localStore,t,!1).then(()=>EO(i,t,e)).catch(g0)})}function hhe(n,t){return O(this,null,function*(){let e=Wt(n),i=t.batch.batchId;try{let r=yield Bde(e.localStore,t);nH(e,i,null),tH(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield v0(e,r)}catch(r){yield g0(r)}})}function mhe(n,t,e){return O(this,null,function*(){let i=Wt(n);try{let r=yield function(s,a){let l=Wt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(fi(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,t);nH(i,t,e),tH(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield v0(i,r)}catch(r){yield g0(r)}})}function tH(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function nH(n,t,e){let i=Wt(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function EO(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||iH(n,i)})}function iH(n,t){n.xa.delete(t.path.canonicalString());let e=n.Oa.get(t);e!==null&&(jO(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),QO(n))}function oK(n,t,e){for(let i of e)i instanceof gI?(n.La.addReference(i.key,t),fhe(n,i)):i instanceof _I?(_t("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||iH(n,i.key)):Bt()}function fhe(n,t){let e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(_t("SyncEngine","New document in limbo: "+e),n.xa.add(i),QO(n))}function QO(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let t=n.xa.values().next().value;n.xa.delete(t);let e=new At(ir.fromString(t)),i=n.qa.next();n.Na.set(i,new wO(e)),n.Oa=n.Oa.insert(e,i),WK(n.remoteStore,new r0(xu(TI(e.path)),i,"TargetPurposeLimboResolution",fK.oe))}}function v0(n,t,e){return O(this,null,function*(){let i=Wt(n),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,t,e).then(u=>{var h;if((u||e)&&i.isPrimaryClient){let p=u?!u.fromCache:(h=e?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);let p=tO.Wi(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return O(this,null,function*(){let h=Wt(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ne.forEach(u,_=>Ne.forEach(_.$i,b=>h.persistence.referenceDelegate.addReference(p,_.targetId,b)).next(()=>Ne.forEach(_.Ui,b=>h.persistence.referenceDelegate.removeReference(p,_.targetId,b)))))}catch(p){if(!_0(p))throw p;_t("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let b=h.os.get(_),C=b.snapshotVersion,T=b.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(_,T)}}})}(i.localStore,o))})}function phe(n,t){return O(this,null,function*(){let e=Wt(n);if(!e.currentUser.isEqual(t)){_t("SyncEngine","User change. New user:",t.toKey());let i=yield KK(e.localStore,t);e.currentUser=t,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new mt(Ce.CANCELLED,s))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield v0(e,i.hs)}})}function ghe(n,t){let e=Wt(n),i=e.Na.get(t);if(i&&i.va)return Sn().add(i.key);{let r=Sn(),o=e.Ma.get(t);if(!o)return r;for(let s of o){let a=e.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function rH(n){let t=Wt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=eH.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ghe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dhe.bind(null,t),t.Ca.d_=ihe.bind(null,t.eventManager),t.Ca.$a=rhe.bind(null,t.eventManager),t}function _he(n){let t=Wt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hhe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mhe.bind(null,t),t}var sK=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=AI(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),yield this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)})}ja(e,i){return null}Ha(e,i){return null}za(e){return Lde(this.persistence,new iO,e.initialUser,this.serializer)}Ga(e){return new JP(eO.Zr,this.serializer)}Wa(e){return new sO}terminate(){return O(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var yhe=(()=>{class n{initialize(e,i){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rK(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=phe.bind(null,this.syncEngine),yield nhe(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new _O}()}createDatastore(e){let i=AI(e.databaseInfo.databaseId),r=function(s){return new lO(s)}(e.databaseInfo);return function(s,a,l,u){return new hO(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return function(r,o,s,a,l){return new fO(r,o,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,i=>rK(this.syncEngine,i,0),function(){return uI.D()?new uI:new aO}())}createSyncEngine(e,i){return function(o,s,a,l,u,h,p){let _=new CO(o,s,a,l,u,h);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return O(this,null,function*(){var e,i;yield function(o){return O(this,null,function*(){let s=Wt(o);_t("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield y0(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var c0=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):kd("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var xO=class{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=so.UNAUTHENTICATED,this.clientId=Xx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>O(this,null,function*(){_t("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(_t("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Al;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=KO(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function eP(n,t){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>O(this,null,function*(){i.isEqual(r)||(yield KK(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function aK(n,t){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield vhe(n);_t("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>tK(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>tK(t.remoteStore,r)),n._onlineComponents=t})}function vhe(n){return O(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eP(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!function(r){return r.name==="FirebaseError"?r.code===Ce.FAILED_PRECONDITION||r.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;w_("Error using user provided cache. Falling back to memory cache: "+e),yield eP(n,new sK)}}else _t("FirestoreClient","Using default OfflineComponentProvider"),yield eP(n,new sK);return n._offlineComponents})}function oH(n){return O(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t("FirestoreClient","Using user provided OnlineComponentProvider"),yield aK(n,n._uninitializedComponentsProvider._online)):(_t("FirestoreClient","Using default OnlineComponentProvider"),yield aK(n,new yhe))),n._onlineComponents})}function bhe(n){return oH(n).then(t=>t.syncEngine)}function yI(n){return O(this,null,function*(){let t=yield oH(n),e=t.eventManager;return e.onListen=ohe.bind(null,t.syncEngine),e.onUnlisten=che.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=she.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=lhe.bind(null,t.syncEngine),e})}function whe(n,t,e={}){let i=new Al;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let h=new c0({next:_=>{h.Za(),s.enqueueAndForget(()=>WO(o,p));let b=_.docs.has(a);!b&&_.fromCache?u.reject(new mt(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&l&&l.source==="server"?u.reject(new mt(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new a0(TI(a.path),h,{includeMetadataChanges:!0,_a:!0});return HO(o,p)}(yield yI(n),n.asyncQueue,t,e,i)})),i.promise}function Che(n,t,e={}){let i=new Al;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let h=new c0({next:_=>{h.Za(),s.enqueueAndForget(()=>WO(o,p)),_.fromCache&&l.source==="server"?u.reject(new mt(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new a0(a,h,{includeMetadataChanges:!0,_a:!0});return HO(o,p)}(yield yI(n),n.asyncQueue,t,e,i)})),i.promise}function sH(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var cK=new Map;function aH(n,t,e){if(!e)throw new mt(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Ehe(n,t,e,i){if(t===!0&&i===!0)throw new mt(Ce.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function lK(n){if(!At.isDocumentKey(n))throw new mt(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uK(n){if(At.isDocumentKey(n))throw new mt(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Bt()}function Vc(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=PI(n);throw new mt(Ce.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var vI=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new mt(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mt(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ehe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sH((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new mt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new mt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new mt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},R_=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vI(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new tP;switch(i.type){case"firstParty":return new oP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return O(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=cK.get(e);i&&(_t("ComponentProvider","Removing Datastore"),cK.delete(e),i.terminate())}(this),Promise.resolve()}};function cH(n,t,e,i={}){var r;let o=(n=Vc(n,R_))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&w_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=so.MOCK_USER;else{a=og(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new mt(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new so(u)}n._authCredentials=new nP(new Yx(a,l))}}var sp=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Is=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},rm=class n extends sp{constructor(t,e,i){super(t,e,TI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Is(this.firestore,null,new At(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function lH(n,t,...e){if(n=yr(n),aH("collection","path",t),n instanceof R_){let i=ir.fromString(t,...e);return uK(i),new rm(n,null,i)}{if(!(n instanceof Is||n instanceof rm))throw new mt(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ir.fromString(t,...e));return uK(i),new rm(n.firestore,null,i)}}function YO(n,t,...e){if(n=yr(n),arguments.length===1&&(t=Xx.newId()),aH("doc","path",t),n instanceof R_){let i=ir.fromString(t,...e);return lK(i),new Is(n,null,new At(i))}{if(!(n instanceof Is||n instanceof rm))throw new mt(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ir.fromString(t,...e));return lK(i),new Is(n.firestore,n instanceof rm?n.converter:null,new At(i))}}var bI=class{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dI(this,"async_queue_retry"),this.Vu=()=>{let i=ZM();i&&_t("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;let e=ZM();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let e=ZM();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let e=new Al;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return O(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!_0(t))throw t;_t("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){let e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw kd("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);let r=pO.createAndSchedule(this,t,e,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Bt()}verifyOperationInProgress(){}wu(){return O(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(let e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let e=this.Tu.indexOf(t);this.Tu.splice(e,1)}};function dK(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Tu=class extends R_{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new bI,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return O(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new bI(t),this._firestoreClient=void 0,yield t}})}};function uH(n,t){let e=typeof n=="object"?n:fl(),i=typeof n=="string"?n:t||"(default)",r=gd(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=Mh("firestore");o&&cH(r,...o)}return r}function OI(n){if(n._terminated)throw new mt(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xhe(n),n._firestoreClient}function xhe(n){var t,e,i;let r=n._freezeSettings(),o=function(a,l,u,h){return new uP(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sH(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new xO(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var l0=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Uo.fromBase64String(t))}catch(e){throw new mt(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Uo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var u0=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ja(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var d0=class{constructor(t){this._methodName=t}};var h0=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Qn(this._lat,t._lat)||Qn(this._long,t._long)}};var m0=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var Ihe=/^__.*__$/,IO=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Md(t,this.data,this.fieldMask,e,this.fieldTransforms):new op(t,this.data,e,this.fieldTransforms)}};function dH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}var SO=class n{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return wI(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(dH(this.Cu)&&Ihe.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}},TO=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||AI(t)}Qu(t,e,i,r=!1){return new SO({Cu:t,methodName:e,qu:i,path:ja.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function XO(n){let t=n._freezeSettings(),e=AI(n._databaseId);return new TO(n._databaseId,!!t.ignoreUndefinedProperties,e)}function hH(n,t,e,i,r,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,t,e,r);pH("Data must be an object, but it was:",s,i);let a=mH(i,s),l,u;if(o.merge)l=new Cu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let _=The(t,p,e);if(!s.contains(_))throw new mt(Ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);khe(h,_)||h.push(_)}l=new Cu(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new IO(new kl(a),l,u)}var DO=class n extends d0{_toFieldTransform(t){return new IP(t.path,new np)}isEqual(t){return t instanceof n}};function She(n,t,e,i=!1){return JO(e,n.Qu(i?4:3,t))}function JO(n,t){if(fH(n=yr(n)))return pH("Unsupported field value:",t,n),mH(n,t);if(n instanceof d0)return function(i,r){if(!dH(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=JO(a,r.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=yr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hde(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Io.fromDate(i);return{timestampValue:aI(r.serializer,o)}}if(i instanceof Io){let o=new Io(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:aI(r.serializer,o)}}if(i instanceof h0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof l0)return{bytesValue:LK(r.serializer,i._byteString)};if(i instanceof Is){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$O(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof m0)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return BO(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${PI(i)}`)}(n,t)}function mH(n,t){let e={};return pK(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):P_(n,(i,r)=>{let o=JO(r,t.Mu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function fH(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Io||n instanceof h0||n instanceof l0||n instanceof Is||n instanceof d0||n instanceof m0)}function pH(n,t,e){if(!fH(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=PI(e);throw i==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+i)}}function The(n,t,e){if((t=yr(t))instanceof u0)return t._internalPath;if(typeof t=="string")return gH(n,t);throw wI("Field path arguments must be of type string or ",n,!1,void 0,e)}var Dhe=new RegExp("[~\\*/\\[\\]]");function gH(n,t,e){if(t.search(Dhe)>=0)throw wI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new u0(...t.split("."))._internalPath}catch{throw wI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function wI(n,t,e,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new mt(Ce.INVALID_ARGUMENT,a+n+l)}function khe(n,t){return n.some(e=>e.isEqual(t))}var CI=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Is(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new kO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(ZO("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},kO=class extends CI{data(){return super.data()}};function ZO(n,t){return typeof t=="string"?gH(n,t):t instanceof u0?t._internalPath:t._delegate._internalPath}function _H(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var f0=class{},AO=class extends f0{};function yH(n,t,...e){let i=[];t instanceof f0&&i.push(t),i=i.concat(e),function(o){let s=o.filter(l=>l instanceof RO).length,a=o.filter(l=>l instanceof EI).length;if(s>1||s>0&&a>0)throw new mt(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var EI=class n extends AO{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return bH(t._query,e),new sp(t.firestore,t.converter,EP(t._query,e))}_parse(t){let e=XO(t.firestore);return function(o,s,a,l,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new mt(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mK(p,h);let b=[];for(let C of p)b.push(hK(l,o,C));_={arrayValue:{values:b}}}else _=hK(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mK(p,h),_=She(a,s,p,h==="in"||h==="not-in");return Br.create(u,h,_)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function vH(n,t,e){let i=t,r=ZO("where",n);return EI._create(r,i,e)}var RO=class n extends f0{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Ml.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)bH(s,l),s=EP(s,l)}(t._query,e),new sp(t.firestore,t.converter,EP(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function hK(n,t,e){if(typeof(e=yr(e))=="string"){if(e==="")throw new mt(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xK(t)&&e.indexOf("/")!==-1)throw new mt(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(ir.fromString(e));if(!At.isDocumentKey(i))throw new mt(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return V5(n,new At(i))}if(e instanceof Is)return V5(n,e._key);throw new mt(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${PI(e)}.`)}function mK(n,t){if(!Array.isArray(n)||n.length===0)throw new mt(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bH(n,t){let e=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new mt(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var MO=class{convertValue(t,e="none"){switch(ep(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(om(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Bt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return P_(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Qi(s.doubleValue));return new m0(o)}convertGeoPoint(t){return new h0(Qi(t.latitude),Qi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=NO(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(e0(t));default:return null}}convertTimestamp(t){let e=Ad(t);return new Io(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=ir.fromString(t);fi(qK(i));let r=new tI(i.get(1),i.get(3)),o=new At(i.popFirst(5));return r.isEqual(e)||kd(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function wH(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var Xf=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},xI=class extends CI{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new b_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(ZO("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},b_=class extends xI{data(t={}){return super.data(t)}},II=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Xf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new b_(this._firestore,this._userDataWriter,i.key,i,new Xf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new b_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Xf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new b_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Xf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Ahe(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Ahe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}function CH(n){n=Vc(n,Is);let t=Vc(n.firestore,Tu);return whe(OI(t),n._key).then(e=>DH(t,n,e))}var p0=class extends MO{constructor(t){super(),this.firestore=t}convertBytes(t){return new l0(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Is(this.firestore,null,e)}};function EH(n){n=Vc(n,sp);let t=Vc(n.firestore,Tu),e=OI(t),i=new p0(t);return _H(n._query),Che(e,n._query).then(r=>new II(t,i,n,r))}function xH(n,t,e){n=Vc(n,Is);let i=Vc(n.firestore,Tu),r=wH(n.converter,t,e);return eN(i,[hH(XO(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Dd.none())])}function IH(n){return eN(Vc(n.firestore,Tu),[new n0(n._key,Dd.none())])}function SH(n,t){let e=Vc(n.firestore,Tu),i=YO(n),r=wH(n.converter,t);return eN(e,[hH(XO(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Dd.exists(!1))]).then(()=>i)}function TH(n,...t){var e,i,r;n=yr(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||dK(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dK(t[s])){let p=t[s];t[s]=(e=p.next)===null||e===void 0?void 0:e.bind(p),t[s+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),t[s+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,u,h;if(n instanceof Is)u=Vc(n.firestore,Tu),h=TI(n._key.path),l={next:p=>{t[s]&&t[s](DH(u,n,p))},error:t[s+1],complete:t[s+2]};else{let p=Vc(n,sp);u=Vc(p.firestore,Tu),h=p._query;let _=new p0(u);l={next:b=>{t[s]&&t[s](new II(u,_,p,b))},error:t[s+1],complete:t[s+2]},_H(n._query)}return function(_,b,C,T){let k=new c0(T),U=new a0(b,k,C);return _.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return HO(yield yI(_),U)})),()=>{k.Za(),_.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return WO(yield yI(_),U)}))}}(OI(u),h,a,l)}function eN(n,t){return function(i,r){let o=new Al;return i.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return uhe(yield bhe(i),r,o)})),o.promise}(OI(n),t)}function DH(n,t,e){let i=e.docs.get(t._key),r=new p0(n);return new xI(n,r,t._key,i,new Xf(e.hasPendingWrites,e.fromCache),t.converter)}function b0(){return new DO("serverTimestamp")}(function(t,e=!0){(function(r){M_=r})(ag),ml(new dl("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Tu(new iP(i.getProvider("auth-internal")),new aP(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new mt(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tI(u.options.projectId,h)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ei(P5,"4.7.3",t),ei(P5,"4.7.3","esm2017")})();var zo=class{key="";title="";fatherKey="";userKey="";serverTimestamp="";constructor(t){this.build(t)}build(t){return Object.assign(this,t),this}setKey(t){return this.key=t,this}setUserKey(t){return this.userKey=t,this}get name(){return this.title}serialize(){return{title:this.title,fatherKey:this.fatherKey,userKey:this.userKey,_deleted:!1,serverTimestamp:this.serverTimestamp||b0()}}};var Ua=class{constructor(t){return t}},kH="database",tN=class{constructor(){return gl(kH)}};var nN=new ce("angularfire2.database-instances");function Rhe(n,t){let e=fu(kH,n,t);return e&&new Ua(e)}function Mhe(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ua(i)}}var Phe={provide:tN,deps:[[new Rn,nN]]},Ohe={provide:Ua,useFactory:Rhe,deps:[[new Rn,nN],bs]};function AH(n,...t){return ei("angularfire",js.full,"rtdb"),Rr([Ohe,Phe,{provide:nN,useFactory:Mhe(n),multi:!0,deps:[Ke,Mt,Us,Ba,[new Rn,El],[new Rn,_s],...t]}])}var Pd=ki(v5,!0),RH=ki(Px,!0);var Od=ki(Ub,!0);var w0=ki(w5,!0);var za=class{constructor(t){return t}},MH="firestore",iN=class{constructor(){return gl(MH)}};var rN=new ce("angularfire2.firestore-instances");function Nhe(n,t){let e=fu(MH,n,t);return e&&new za(e)}function Fhe(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new za(i)}}var Vhe={provide:iN,deps:[[new Rn,rN]]},Lhe={provide:za,useFactory:Nhe,deps:[[new Rn,rN],bs]};function PH(n,...t){return ei("angularfire",js.full,"fst"),Rr([Lhe,Vhe,{provide:rN,useFactory:Fhe(n),multi:!0,deps:[Ke,Mt,Us,Ba,[new Rn,El],[new Rn,_s],...t]}])}var cm=ki(SH,!0);var wr=ki(lH,!0);var FI=ki(IH,!0);var qo=ki(YO,!0);var Pl=ki(CH,!0);var lm=ki(EH,!0);var OH=ki(uH,!0);var N_=ki(TH,!0);var Ol=ki(yH,!0);var Nl=ki(xH,!0);var qa=ki(vH,!0);function um(n,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},um(n,t)}function C0(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,um(n,t)}function LI(n){return n[n.length-1]}function Du(n){return Array.isArray(n)?n.slice(0):[n]}function NH(n,t){n=n.slice(0);for(var e=[];n.length;){var i=n.splice(0,t);e.push(i)}return e}function F_(n){return Array.isArray(n)}function FH(n){return n!=null}function BI(n,t){var e=0,i=-1;for(var r of n){i=i+1;var o=t(r,i);if(o)e=e+1;else break}return e}function VH(n,t){return O(this,null,function*(){var e=yield Promise.all(n.map(t));return n.filter((...[,i])=>e[i])})}function Ko(n,t){var e=t.length;if(e!==0){var i=n.length;n.length=i+t.length;for(var r=0;r<e;++r)n[i+r]=t[r]}}function LH(n){return n.filter(function(t,e,i){return i.indexOf(t)===e})}function Lc(n){for(var t="",e=0;e<n.length;e++){var i=n[e];if(i==="-")return parseInt(t,10);t+=i}throw new Error("malformatted revision: "+n)}function Ss(n,t){var e=t?Lc(t._rev)+1:1;return e+"-"+n}function BH(n){var t=n.split("."),e=t.length;return e===1?i=>i[n]:i=>{for(var r=i,o=0;o<e;++o){var s=t[o];if(r=r[s],typeof r>"u")return r}return r}}function Gt(n){return Object.assign({},n)}function $H(n){return Object.keys(n)[0]}function V_(n,t=!1){if(!n)return n;if(!t&&Array.isArray(n))return n.sort((i,r)=>typeof i=="string"&&typeof r=="string"?i.localeCompare(r):typeof i=="object"?1:-1).map(i=>V_(i,t));if(typeof n=="object"&&!Array.isArray(n)){var e={};return Object.keys(n).sort((i,r)=>i.localeCompare(r)).forEach(i=>{e[i]=V_(n[i],t)}),e}return n}function oN(n){if(!n||n===null||typeof n!="object")return n;if(Array.isArray(n)){for(var t=new Array(n.length),e=t.length;e--;)t[e]=oN(n[e]);return t}var i={};for(var r in n)i[r]=oN(n[r]);return i}var So=oN;function Ka(n,t,e){return Object.defineProperty(n,t,{get:function(){return e}}),e}var E0=1;function dm(){return{lwt:E0}}function Ho(){return""}function jH(n){return Object.assign({},n,{_meta:void 0,_deleted:void 0,_rev:void 0})}function UH(n,t,e){if(t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;){var o=t[i],s=e[i];if(i++,o._rev!==s._rev||o[n]!==s[n])return!1}return!0}function Bhe(n){return O(this,null,function*(){var t=new TextEncoder().encode(n),e=yield crypto.subtle.digest("SHA-256",t),i=Array.prototype.map.call(new Uint8Array(e),r=>("00"+r.toString(16)).slice(-2)).join("");return i})}var $I=Bhe;function zH(){return new Promise(n=>setTimeout(n,0))}function qH(n=0){return new Promise(t=>setTimeout(t,n))}function KH(n){return n&&typeof n.then=="function"?n:Promise.resolve(n)}var x0=Promise.resolve(!0),Wo=Promise.resolve(!1),HH=Promise.resolve(null),Ts=Promise.resolve();function L_(n=1e4){return typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:n})}):qH(0)}var sN=Ts;function WH(n=void 0){return sN=sN.then(()=>L_(n)),sN}function GH(n){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{n()})}function QH(n,t){return n.reduce((e,i)=>e.then(i),Promise.resolve(t))}var YH=/\./g;var XH="abcdefghijklmnopqrstuvwxyz";function cp(n=10){for(var t="",e=0;e<n;e++)t+=XH.charAt(Math.floor(Math.random()*XH.length));return t}function jI(n){n+="";var t=n.charAt(0).toUpperCase();return t+n.substr(1)}function lp(n){for(;n.charAt(0)===".";)n=n.substr(1);for(;n.slice(-1)===".";)n=n.slice(0,-1);return n}function B_(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var e,i;if(Array.isArray(n)){if(e=n.length,e!==t.length)return!1;for(i=e;i--!==0;)if(!B_(n[i],t[i]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();var r=Object.keys(n);if(e=r.length,e!==Object.keys(t).length)return!1;for(i=e;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=e;i--!==0;){var o=r[i];if(!B_(n[o],t[o]))return!1}return!0}return n!==n&&t!==t}var cN=n=>{var t=typeof n;return n!==null&&(t==="object"||t==="function")},aN=new Set(["__proto__","prototype","constructor"]),$he=new Set("0123456789");function JH(n){var t=[],e="",i="start",r=!1;for(var o of n)switch(o){case"\\":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd")throw new Error("Invalid character after an index");r&&(e+=o),i="property",r=!r;break}case".":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd"){i="property";break}if(r){r=!1,e+=o;break}if(aN.has(e))return[];t.push(e),e="",i="property";break}case"[":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd"){i="index";break}if(r){r=!1,e+=o;break}if(i==="property"){if(aN.has(e))return[];t.push(e),e=""}i="index";break}case"]":{if(i==="index"){t.push(Number.parseInt(e,10)),e="",i="indexEnd";break}if(i==="indexEnd")throw new Error("Invalid character after an index")}default:{if(i==="index"&&!$he.has(o))throw new Error("Invalid character in an index");if(i==="indexEnd")throw new Error("Invalid character after an index");i==="start"&&(i="property"),r&&(r=!1,e+="\\"),e+=o}}switch(r&&(e+="\\"),i){case"property":{if(aN.has(e))return[];t.push(e);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function ZH(n,t){if(typeof t!="number"&&Array.isArray(n)){var e=Number.parseInt(t,10);return Number.isInteger(e)&&n[e]===n[t]}return!1}function jhe(n,t){if(ZH(n,t))throw new Error("Cannot use string index")}function Nd(n,t,e){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return n[t];if(!cN(n)||typeof t!="string")return e===void 0?n:e;var i=JH(t);if(i.length===0)return e;for(var r=0;r<i.length;r++){var o=i[r];if(ZH(n,o)?n=r===i.length-1?void 0:null:n=n[o],n==null){if(r!==i.length-1)return e;break}}return n===void 0?e:n}function lN(n,t,e){if(Array.isArray(t)&&(t=t.join(".")),!cN(n)||typeof t!="string")return n;for(var i=n,r=JH(t),o=0;o<r.length;o++){var s=r[o];jhe(n,s),o===r.length-1?n[s]=e:cN(n[s])||(n[s]=typeof r[o+1]=="number"?[]:{}),n=n[s]}return i}function up(n,t){var e=n.get(t);if(typeof e>"u")throw new Error("missing value from map "+t);return e}function Yi(n,t,e,i){var r=n.get(t);return typeof r>"u"?(r=e(),n.set(t,r)):i&&i(r),r}function ti(n){var t=n.split("-"),e="RxDB";return t.forEach(i=>{e+=jI(i)}),e+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+e+" } from 'rxdb/plugins/"+n+`';
            addRxPlugin(`+e+`);
        `)}function I0(n){var t={name:n.name,message:n.message,rxdb:n.rxdb,parameters:n.parameters,extensions:n.extensions,code:n.code,url:n.url,stack:n.stack?n.stack.replace(/\n/g,` 
 `):void 0};return t}var uN=0;function Xi(){var n=Date.now();n=n+.01,n<=uN&&(n=uN+.01);var t=parseFloat(n.toFixed(2));return uN=t,t}function ft(n,t){if(!n)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return n}var UI={bufferSize:1,refCount:!0};var S0="16.7.0";var zI={};var Uhe="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",hN=16,dN=Wo,e9=!1;function qI(){return O(this,null,function*(){return e9||(e9=!0,dN=O(this,null,function*(){return!!(zI.premium&&typeof zI.premium=="string"&&(yield $I(zI.premium))===Uhe)})),dN})}var t9=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},zhe=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[e++],s=n[e++],a=n[e++],l=((r&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{let o=n[e++],s=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return t.join("")},n9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],s=r+1<n.length,a=s?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,h=o>>2,p=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,b=u&63;l||(b=64,s||(_=64)),i.push(e[h],e[p],e[_],e[b])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(t9(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):zhe(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;let u=r<n.length?e[n.charAt(r)]:64;++r;let p=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||a==null||u==null||p==null)throw new mN;let _=o<<2|a>>4;if(i.push(_),u!==64){let b=a<<4&240|u>>2;if(i.push(b),p!==64){let C=u<<6&192|p;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},mN=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qhe=function(n){let t=t9(n);return n9.encodeByteArray(t,!0)},fN=function(n){return qhe(n).replace(/\./g,"")},i9=function(n){try{return n9.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Khe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Hhe=()=>Khe().__FIREBASE_DEFAULTS__,Whe=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ghe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&i9(n[1]);return t&&JSON.parse(t)},Qhe=()=>{try{return Hhe()||Whe()||Ghe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};function r9(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yhe(){var n;let t=(n=Qhe())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o9(){return!Yhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pN(){try{return typeof indexedDB=="object"}catch{return!1}}function s9(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}var Xhe="FirebaseError",Fd=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Xhe,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T0.prototype.create)}},T0=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],s=o?Jhe(o,i):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Fd(r,a,i)}};function Jhe(n,t){return n.replace(Zhe,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var Zhe=/\{\$([^}]+)}/g;var B2e=4*60*60*1e3;function Bc(n){return n&&n._delegate?n._delegate:n}var hm=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var eme=[],Fn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Fn||{}),tme={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},nme=Fn.INFO,ime={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},rme=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=ime[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},$_=class{constructor(t){this.name=t,this._logLevel=nme,this._logHandler=rme,this._userLogHandler=null,eme.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tme[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}};var _N=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sme(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function sme(n){let t=n.getComponent();return t?.type==="VERSION"}var yN="@firebase/app",a9="0.11.1";var Vd=new $_("@firebase/app"),ame="@firebase/app-compat",cme="@firebase/analytics-compat",lme="@firebase/analytics",ume="@firebase/app-check-compat",dme="@firebase/app-check",hme="@firebase/auth",mme="@firebase/auth-compat",fme="@firebase/database",pme="@firebase/data-connect",gme="@firebase/database-compat",_me="@firebase/functions",yme="@firebase/functions-compat",vme="@firebase/installations",bme="@firebase/installations-compat",wme="@firebase/messaging",Cme="@firebase/messaging-compat",Eme="@firebase/performance",xme="@firebase/performance-compat",Ime="@firebase/remote-config",Sme="@firebase/remote-config-compat",Tme="@firebase/storage",Dme="@firebase/storage-compat",kme="@firebase/firestore",Ame="@firebase/vertexai",Rme="@firebase/firestore-compat",Mme="firebase",Pme="11.3.1";var Ome={[yN]:"fire-core",[ame]:"fire-core-compat",[lme]:"fire-analytics",[cme]:"fire-analytics-compat",[dme]:"fire-app-check",[ume]:"fire-app-check-compat",[hme]:"fire-auth",[mme]:"fire-auth-compat",[fme]:"fire-rtdb",[pme]:"fire-data-connect",[gme]:"fire-rtdb-compat",[_me]:"fire-fn",[yme]:"fire-fn-compat",[vme]:"fire-iid",[bme]:"fire-iid-compat",[wme]:"fire-fcm",[Cme]:"fire-fcm-compat",[Eme]:"fire-perf",[xme]:"fire-perf-compat",[Ime]:"fire-rc",[Sme]:"fire-rc-compat",[Tme]:"fire-gcs",[Dme]:"fire-gcs-compat",[kme]:"fire-fst",[Rme]:"fire-fst-compat",[Ame]:"fire-vertex","fire-js":"fire-js",[Mme]:"fire-js-all"};var Nme=new Map,Fme=new Map,c9=new Map;function l9(n,t){try{n.container.addComponent(t)}catch(e){Vd.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function D0(n){let t=n.name;if(c9.has(t))return Vd.debug(`There were multiple attempts to register component ${t}.`),!1;c9.set(t,n);for(let e of Nme.values())l9(e,n);for(let e of Fme.values())l9(e,n);return!0}function m9(n){return n==null?!1:n.settings!==void 0}var Vme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wN=new T0("app","Firebase",Vme);var f9=Pme;function j_(n,t,e){var i;let r=(i=Ome[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let o=r.match(/\s|\//),s=t.match(/\s|\//);if(o||s){let a=[`Unable to register library "${r}" with version "${t}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Vd.warn(a.join(" "));return}D0(new hm(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var Lme="firebase-heartbeat-database",Bme=1,k0="firebase-heartbeat-store",gN=null;function p9(){return gN||(gN=vj(Lme,Bme,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(k0)}catch(e){console.warn(e)}}}}).catch(n=>{throw wN.create("idb-open",{originalErrorMessage:n.message})})),gN}function $me(n){return O(this,null,function*(){try{let e=(yield p9()).transaction(k0),i=yield e.objectStore(k0).get(g9(n));return yield e.done,i}catch(t){if(t instanceof Fd)Vd.warn(t.message);else{let e=wN.create("idb-get",{originalErrorMessage:t?.message});Vd.warn(e.message)}}})}function u9(n,t){return O(this,null,function*(){try{let i=(yield p9()).transaction(k0,"readwrite");yield i.objectStore(k0).put(t,g9(n)),yield i.done}catch(e){if(e instanceof Fd)Vd.warn(e.message);else{let i=wN.create("idb-set",{originalErrorMessage:e?.message});Vd.warn(i.message)}}})}function g9(n){return`${n.name}!${n.options.appId}`}var jme=1024,Ume=30,vN=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new bN(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return O(this,null,function*(){var t,e;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=d9();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>Ume){let s=qme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vd.warn(i)}})}getHeartbeatsHeader(){return O(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=d9(),{heartbeatsToSend:i,unsentEntries:r}=zme(this._heartbeatsCache.heartbeats),o=fN(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vd.warn(e),""}})}};function d9(){return new Date().toISOString().substring(0,10)}function zme(n,t=jme){let e=[],i=n.slice();for(let r of n){let o=e.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),h9(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),h9(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var bN=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return O(this,null,function*(){return pN()?s9().then(()=>!0).catch(()=>!1):!1})}read(){return O(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield $me(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return O(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return u9(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return O(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return u9(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function h9(n){return fN(JSON.stringify({version:2,heartbeats:n})).length}function qme(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function Kme(n){D0(new hm("platform-logger",t=>new _N(t),"PRIVATE")),D0(new hm("heartbeat",t=>new vN(t),"PRIVATE")),j_(yN,a9,n),j_(yN,a9,"esm2017"),j_("fire-js","")}Kme("");var _9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},y9={};var Ld,CN;(function(){var n;function t(M,E){function I(){}I.prototype=E.prototype,M.D=E.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(P,N,V){for(var S=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)S[Ot-2]=arguments[Ot];return E.prototype[N].apply(P,S)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,E,I){I||(I=0);var P=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)P[N]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(N=0;16>N;++N)P[N]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=M.g[0],I=M.g[1],N=M.g[2];var V=M.g[3],S=E+(V^I&(N^V))+P[0]+3614090360&4294967295;E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[1]+3905402710&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[2]+606105819&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[3]+3250441966&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[4]+4118548399&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[5]+1200080426&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[6]+2821735955&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[7]+4249261313&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[8]+1770035416&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[9]+2336552879&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[10]+4294925233&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[11]+2304563134&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(V^I&(N^V))+P[12]+1804603682&4294967295,E=I+(S<<7&4294967295|S>>>25),S=V+(N^E&(I^N))+P[13]+4254626195&4294967295,V=E+(S<<12&4294967295|S>>>20),S=N+(I^V&(E^I))+P[14]+2792965006&4294967295,N=V+(S<<17&4294967295|S>>>15),S=I+(E^N&(V^E))+P[15]+1236535329&4294967295,I=N+(S<<22&4294967295|S>>>10),S=E+(N^V&(I^N))+P[1]+4129170786&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[6]+3225465664&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[11]+643717713&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[0]+3921069994&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[5]+3593408605&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[10]+38016083&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[15]+3634488961&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[4]+3889429448&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[9]+568446438&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[14]+3275163606&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[3]+4107603335&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[8]+1163531501&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(N^V&(I^N))+P[13]+2850285829&4294967295,E=I+(S<<5&4294967295|S>>>27),S=V+(I^N&(E^I))+P[2]+4243563512&4294967295,V=E+(S<<9&4294967295|S>>>23),S=N+(E^I&(V^E))+P[7]+1735328473&4294967295,N=V+(S<<14&4294967295|S>>>18),S=I+(V^E&(N^V))+P[12]+2368359562&4294967295,I=N+(S<<20&4294967295|S>>>12),S=E+(I^N^V)+P[5]+4294588738&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[8]+2272392833&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[11]+1839030562&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[14]+4259657740&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[1]+2763975236&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[4]+1272893353&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[7]+4139469664&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[10]+3200236656&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[13]+681279174&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[0]+3936430074&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[3]+3572445317&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[6]+76029189&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(I^N^V)+P[9]+3654602809&4294967295,E=I+(S<<4&4294967295|S>>>28),S=V+(E^I^N)+P[12]+3873151461&4294967295,V=E+(S<<11&4294967295|S>>>21),S=N+(V^E^I)+P[15]+530742520&4294967295,N=V+(S<<16&4294967295|S>>>16),S=I+(N^V^E)+P[2]+3299628645&4294967295,I=N+(S<<23&4294967295|S>>>9),S=E+(N^(I|~V))+P[0]+4096336452&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[7]+1126891415&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[14]+2878612391&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[5]+4237533241&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[12]+1700485571&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[3]+2399980690&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[10]+4293915773&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[1]+2240044497&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[8]+1873313359&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[15]+4264355552&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[6]+2734768916&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[13]+1309151649&4294967295,I=N+(S<<21&4294967295|S>>>11),S=E+(N^(I|~V))+P[4]+4149444226&4294967295,E=I+(S<<6&4294967295|S>>>26),S=V+(I^(E|~N))+P[11]+3174756917&4294967295,V=E+(S<<10&4294967295|S>>>22),S=N+(E^(V|~I))+P[2]+718787259&4294967295,N=V+(S<<15&4294967295|S>>>17),S=I+(V^(N|~E))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+V&4294967295}i.prototype.u=function(M,E){E===void 0&&(E=M.length);for(var I=E-this.blockSize,P=this.B,N=this.h,V=0;V<E;){if(N==0)for(;V<=I;)r(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<E;)if(P[N++]=M.charCodeAt(V++),N==this.blockSize){r(this,P),N=0;break}}else for(;V<E;)if(P[N++]=M[V++],N==this.blockSize){r(this,P),N=0;break}}this.h=N,this.o+=E},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;var I=8*this.o;for(E=M.length-8;E<M.length;++E)M[E]=I&255,I/=256;for(this.u(M),M=Array(16),E=I=0;4>E;++E)for(var P=0;32>P;P+=8)M[I++]=this.g[E]>>>P&255;return M};function o(M,E){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=E(M)}function s(M,E){this.h=E;for(var I=[],P=!0,N=M.length-1;0<=N;N--){var V=M[N]|0;P&&V==E||(I[N]=V,P=!1)}this.g=I}var a={};function l(M){return-128<=M&&128>M?o(M,function(E){return new s([E|0],0>E?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return k(u(-M));for(var E=[],I=1,P=0;M>=I;P++)E[P]=M/I|0,I*=4294967296;return new s(E,0)}function h(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return k(h(M.substring(1),E));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),P=p,N=0;N<M.length;N+=8){var V=Math.min(8,M.length-N),S=parseInt(M.substring(N,N+V),E);8>V?(V=u(Math.pow(E,V)),P=P.j(V).add(u(S))):(P=P.j(I),P=P.add(u(S)))}return P}var p=l(0),_=l(1),b=l(16777216);n=s.prototype,n.m=function(){if(T(this))return-k(this).m();for(var M=0,E=1,I=0;I<this.g.length;I++){var P=this.i(I);M+=(0<=P?P:4294967296+P)*E,E*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(T(this))return"-"+k(this).toString(M);for(var E=u(Math.pow(M,6)),I=this,P="";;){var N=oe(I,E).g;I=U(I,N.j(E));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=N,C(I))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(var E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function T(M){return M.h==-1}n.l=function(M){return M=U(this,M),T(M)?-1:C(M)?0:1};function k(M){for(var E=M.g.length,I=[],P=0;P<E;P++)I[P]=~M.g[P];return new s(I,~M.h).add(_)}n.abs=function(){return T(this)?k(this):this},n.add=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0,N=0;N<=E;N++){var V=P+(this.i(N)&65535)+(M.i(N)&65535),S=(V>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);P=S>>>16,V&=65535,S&=65535,I[N]=S<<16|V}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(M,E){return M.add(k(E))}n.j=function(M){if(C(this)||C(M))return p;if(T(this))return T(M)?k(this).j(k(M)):k(k(this).j(M));if(T(M))return k(this.j(k(M)));if(0>this.l(b)&&0>M.l(b))return u(this.m()*M.m());for(var E=this.g.length+M.g.length,I=[],P=0;P<2*E;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<M.g.length;N++){var V=this.i(P)>>>16,S=this.i(P)&65535,Ot=M.i(N)>>>16,On=M.i(N)&65535;I[2*P+2*N]+=S*On,W(I,2*P+2*N),I[2*P+2*N+1]+=V*On,W(I,2*P+2*N+1),I[2*P+2*N+1]+=S*Ot,W(I,2*P+2*N+1),I[2*P+2*N+2]+=V*Ot,W(I,2*P+2*N+2)}for(P=0;P<E;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=E;P<2*E;P++)I[P]=0;return new s(I,0)};function W(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function K(M,E){this.g=M,this.h=E}function oe(M,E){if(C(E))throw Error("division by zero");if(C(M))return new K(p,p);if(T(M))return E=oe(k(M),E),new K(k(E.g),k(E.h));if(T(E))return E=oe(M,k(E)),new K(k(E.g),E.h);if(30<M.g.length){if(T(M)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var I=_,P=E;0>=P.l(M);)I=ae(I),P=ae(P);var N=we(I,1),V=we(P,1);for(P=we(P,2),I=we(I,2);!C(P);){var S=V.add(P);0>=S.l(M)&&(N=N.add(I),V=S),P=we(P,1),I=we(I,1)}return E=U(M,N.j(E)),new K(N,E)}for(N=p;0<=M.l(E);){for(I=Math.max(1,Math.floor(M.m()/E.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=u(I),S=V.j(E);T(S)||0<S.l(M);)I-=P,V=u(I),S=V.j(E);C(V)&&(V=_),N=N.add(V),M=U(M,S)}return new K(N,M)}n.A=function(M){return oe(this,M).h},n.and=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)&M.i(P);return new s(I,this.h&M.h)},n.or=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)|M.i(P);return new s(I,this.h|M.h)},n.xor=function(M){for(var E=Math.max(this.g.length,M.g.length),I=[],P=0;P<E;P++)I[P]=this.i(P)^M.i(P);return new s(I,this.h^M.h)};function ae(M){for(var E=M.g.length+1,I=[],P=0;P<E;P++)I[P]=M.i(P)<<1|M.i(P-1)>>>31;return new s(I,M.h)}function we(M,E){var I=E>>5;E%=32;for(var P=M.g.length-I,N=[],V=0;V<P;V++)N[V]=0<E?M.i(V+I)>>>E|M.i(V+I+1)<<32-E:M.i(V+I);return new s(N,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CN=y9.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Ld=y9.Integer=s}).apply(typeof _9<"u"?_9:typeof self<"u"?self:typeof window<"u"?window:{});var KI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bd={};var EN,Hme,U_,xN,A0,HI,IN,SN,TN;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof KI=="object"&&KI];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=e(this);function r(c,d){if(d)e:{var f=i;c=c.split(".");for(var y=0;y<c.length-1;y++){var L=c[y];if(!(L in f))break e;f=f[L]}c=c[c.length-1],y=f[c],d=d(y),d!=y&&d!=null&&t(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,y=!1,L={next:function(){if(!y&&f<c.length){var $=f++;return{value:d($,c[$]),done:!1}}return y=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,y),c.apply(d,L)}}return function(){return c.apply(d,arguments)}}function _(c,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function b(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(y,L,$){for(var ie=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)ie[wt-2]=arguments[wt];return d.prototype[L].apply(y,ie)}}function T(c){let d=c.length;if(0<d){let f=Array(d);for(let y=0;y<d;y++)f[y]=c[y];return f}return[]}function k(c,d){for(let f=1;f<arguments.length;f++){let y=arguments[f];if(l(y)){let L=c.length||0,$=y.length||0;c.length=L+$;for(let ie=0;ie<$;ie++)c[L+ie]=y[ie]}else c.push(y)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var ae=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function we(c,d,f){for(let y in c)d.call(f,c[y],y,c)}function M(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function E(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,d){let f,y;for(let L=1;L<arguments.length;L++){y=arguments[L];for(f in y)c[f]=y[f];for(let $=0;$<I.length;$++)f=I[$],Object.prototype.hasOwnProperty.call(y,f)&&(c[f]=y[f])}}function N(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function V(c){a.setTimeout(()=>{throw c},0)}function S(){var c=xr;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Ot{constructor(){this.h=this.g=null}add(d,f){let y=On.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var On=new U(()=>new fr,c=>c.reset());class fr{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ti,Dn=!1,xr=new Ot,Qt=()=>{let c=a.Promise.resolve(void 0);Ti=()=>{c.then(Yn)}};var Yn=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(f){V(f)}var d=On;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Dn=!1};function Cn(){this.s=this.s,this.C=this.C}Cn.prototype.s=!1,Cn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var Ci=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function er(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ae){e:{try{oe(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:zm[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&er.aa.h.call(this)}}C(er,ct);var zm={2:"touch",3:"pen",4:"mouse"};er.prototype.h=function(){er.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),Up=0;function ch(c,d,f,y,L){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=L,this.key=++Up,this.da=this.fa=!1}function ln(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ns(c){this.src=c,this.g={},this.h=0}ns.prototype.add=function(c,d,f,y,L){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var ie=is(c,d,y,L);return-1<ie?(d=c[ie],f||(d.fa=!1)):(d=new ch(d,this.src,$,!!y,L),d.fa=f,c.push(d)),d};function Yu(c,d){var f=d.type;if(f in c.g){var y=c.g[f],L=Array.prototype.indexOf.call(y,d,void 0),$;($=0<=L)&&Array.prototype.splice.call(y,L,1),$&&(ln(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function is(c,d,f,y){for(var L=0;L<c.length;++L){var $=c[L];if(!$.da&&$.listener==d&&$.capture==!!f&&$.ha==y)return L}return-1}var Xu="closure_lm_"+(1e6*Math.random()|0),Ju={};function qm(c,d,f,y,L){if(y&&y.once)return ko(c,d,f,y,L);if(Array.isArray(d)){for(var $=0;$<d.length;$++)qm(c,d[$],f,y,L);return null}return f=va(f),c&&c[pt]?c.K(d,f,u(y)?!!y.capture:!!y,L):Km(c,d,f,!1,y,L)}function Km(c,d,f,y,L,$){if(!d)throw Error("Invalid event type");var ie=u(L)?!!L.capture:!!L,wt=rs(c);if(wt||(c[Xu]=wt=new ns(c)),f=wt.add(d,f,y,ie,$),f.proxy)return f;if(y=Hm(),f.proxy=y,y.src=c,y.listener=f,c.addEventListener)Ci||(L=ie),L===void 0&&(L=!1),c.addEventListener(d.toString(),y,L);else if(c.attachEvent)c.attachEvent(uh(d.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hm(){function c(f){return d.call(c.src,c.listener,f)}let d=Zu;return c}function ko(c,d,f,y,L){if(Array.isArray(d)){for(var $=0;$<d.length;$++)ko(c,d[$],f,y,L);return null}return f=va(f),c&&c[pt]?c.L(d,f,u(y)?!!y.capture:!!y,L):Km(c,d,f,!0,y,L)}function lh(c,d,f,y,L){if(Array.isArray(d))for(var $=0;$<d.length;$++)lh(c,d[$],f,y,L);else y=u(y)?!!y.capture:!!y,f=va(f),c&&c[pt]?(c=c.i,d=String(d).toString(),d in c.g&&($=c.g[d],f=is($,f,y,L),-1<f&&(ln($[f]),Array.prototype.splice.call($,f,1),$.length==0&&(delete c.g[d],c.h--)))):c&&(c=rs(c))&&(d=c.g[d.toString()],c=-1,d&&(c=is(d,f,y,L)),(f=-1<c?d[c]:null)&&ya(f))}function ya(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[pt])Yu(d.i,c);else{var f=c.type,y=c.proxy;d.removeEventListener?d.removeEventListener(f,y,c.capture):d.detachEvent?d.detachEvent(uh(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=rs(d))?(Yu(f,c),f.h==0&&(f.src=null,d[Xu]=null)):ln(c)}}}function uh(c){return c in Ju?Ju[c]:Ju[c]="on"+c}function Zu(c,d){if(c.da)c=!0;else{d=new er(d,this);var f=c.listener,y=c.ha||c.src;c.fa&&ya(c),c=f.call(y,d)}return c}function rs(c){return c=c[Xu],c instanceof ns?c:null}var Zc="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(c){return typeof c=="function"?c:(c[Zc]||(c[Zc]=function(d){return c.handleEvent(d)}),c[Zc])}function vn(){Cn.call(this),this.i=new ns(this),this.M=this,this.F=null}C(vn,Cn),vn.prototype[pt]=!0,vn.prototype.removeEventListener=function(c,d,f,y){lh(this,c,d,f,y)};function En(c,d){var f,y=c.F;if(y)for(f=[];y;y=y.F)f.push(y);if(c=c.M,y=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var L=d;d=new ct(y,c),P(d,L)}if(L=!0,f)for(var $=f.length-1;0<=$;$--){var ie=d.g=f[$];L=ho(ie,y,!0,d)&&L}if(ie=d.g=c,L=ho(ie,y,!0,d)&&L,L=ho(ie,y,!1,d)&&L,f)for($=0;$<f.length;$++)ie=d.g=f[$],L=ho(ie,y,!1,d)&&L}vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],y=0;y<f.length;y++)ln(f[y]);delete c.g[d],c.h--}}this.F=null},vn.prototype.K=function(c,d,f,y){return this.i.add(String(c),d,!1,f,y)},vn.prototype.L=function(c,d,f,y){return this.i.add(String(c),d,!0,f,y)};function ho(c,d,f,y){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,$=0;$<d.length;++$){var ie=d[$];if(ie&&!ie.da&&ie.capture==f){var wt=ie.listener,an=ie.ha||ie.src;ie.fa&&Yu(c.i,ie),L=wt.call(an,y)!==!1&&L}}return L&&!y.defaultPrevented}function Hl(c,d,f){if(typeof c=="function")f&&(c=_(c,f));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ed(c){c.g=Hl(()=>{c.g=null,c.i&&(c.i=!1,ed(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sc extends Cn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ed(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(c){Cn.call(this),this.h=c,this.g={}}C(rt,Cn);var el=[];function ba(c){we(c.g,function(d,f){this.g.hasOwnProperty(f)&&ya(d)},c),c.g={}}rt.prototype.N=function(){rt.aa.N.call(this),ba(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ac=a.JSON.stringify,Je=a.JSON.parse,Wm=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wl(){}Wl.prototype.h=null;function td(c){return c.h||(c.h=c.i())}function dh(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){ct.call(this,"d")}C(nd,ct);function id(){ct.call(this,"c")}C(id,ct);var or={},cc=null;function wa(){return cc=cc||new vn}or.La="serverreachability";function Gl(c){ct.call(this,or.La,c)}C(Gl,ct);function xn(c){let d=wa();En(d,new Gl(d))}or.STAT_EVENT="statevent";function Bi(c,d){ct.call(this,or.STAT_EVENT,c),this.stat=d}C(Bi,ct);function jn(c){let d=wa();En(d,new Bi(d,c))}or.Ma="timingevent";function Ql(c,d){ct.call(this,or.Ma,c),this.size=d}C(Ql,ct);function Ao(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function tv(c,d,f,y,L,$){c.info(function(){if(c.g)if($)for(var ie="",wt=$.split("&"),an=0;an<wt.length;an++){var lt=wt[an].split("=");if(1<lt.length){var In=lt[0];lt=lt[1];var kn=In.split("_");ie=2<=kn.length&&kn[1]=="type"?ie+(In+"="+lt+"&"):ie+(In+"=redacted&")}}else ie=null;else ie=$;return"XMLHTTP REQ ("+y+") [attempt "+L+"]: "+d+`
`+f+`
`+ie})}function lc(c,d,f,y,L,$,ie){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+L+"]: "+d+`
`+f+`
`+$+" "+ie})}function Ir(c,d,f,y){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hh(c,f)+(y?" "+y:"")})}function uc(c,d){c.info(function(){return"TIMEOUT: "+d})}Ro.prototype.info=function(){};function hh(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var y=f[c];if(!(2>y.length)){var L=y[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ie=1;ie<L.length;ie++)L[ie]=""}}}}return ac(f)}catch{return d}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yl;function mo(){}C(mo,Wl),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},Yl=new mo;function Sr(c,d,f,y){this.j=c,this.i=d,this.l=f,this.R=y||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}var Ei={},ss={};function fo(c,d,f){c.L=1,c.v=xa(ui(d)),c.m=f,c.P=!0,mh(c,null)}function mh(c,d){c.F=Date.now(),Ca(c),c.A=ui(c.v);var f=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),sd(f.i,"t",y),c.C=0,f=c.j.J,c.h=new rd,c.g=hd(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sc(_(c.Y,c,c.g),c.O)),d=c.U,f=c.g,y=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(el[0]=L.toString()),L=el);for(var $=0;$<L.length;$++){var ie=qm(f,L[$],y||d.handleEvent,!1,d.h||d);if(!ie)break;d.g[ie.key]=ie}d=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),xn(),tv(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&$i(c)==3?d.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{let kn=$i(this.g);var d=this.g.Ba();let us=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||Zl(this.g)))){this.J||kn!=4||d==7||(d==8||0>=us?xn(3):xn(2)),as(this);var f=this.g.Z();this.X=f;t:if(dc(this)){var y=Zl(this.g);c="";var L=y.length,$=$i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),Ns(this);var ie="";break t}this.h.i=new a.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,c+=this.h.i.decode(y[d],{stream:!($&&d==L-1)});y.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=f==200,lc(this.i,this.u,this.A,this.l,this.R,kn,f),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,an=this.g;if((wt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(wt)){var lt=wt;break t}}lt=null}if(f=lt)Ir(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,f);else{this.o=!1,this.s=3,jn(12),Tr(this),Ns(this);break e}}if(this.P){f=!0;let Oi;for(;!this.J&&this.C<ie.length;)if(Oi=fh(this,ie),Oi==ss){kn==4&&(this.s=4,jn(14),f=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Oi==Ei){this.s=4,jn(15),Ir(this.i,this.l,ie,"[Invalid Chunk]"),f=!1;break}else Ir(this.i,this.l,Oi,null),Xl(this,Oi);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ie.length!=0||this.h.h||(this.s=1,jn(16),f=!1),this.o=this.o&&f,!f)Ir(this.i,this.l,ie,"[Invalid Chunked Response]"),Tr(this),Ns(this);else if(0<ie.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),eu(In),In.M=!0,jn(11))}}else Ir(this.i,this.l,ie,null),Xl(this,ie);kn==4&&Tr(this),this.o&&!this.J&&(kn==4?ud(this.j,this):(this.o=!1,Ca(this)))}else Ch(this.g),f==400&&0<ie.indexOf("Unknown SID")?(this.s=3,jn(12)):(this.s=0,jn(13)),Tr(this),Ns(this)}}}catch{}finally{}};function dc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fh(c,d){var f=c.C,y=d.indexOf(`
`,f);return y==-1?ss:(f=Number(d.substring(f,y)),isNaN(f)?Ei:(y+=1,y+f>d.length?ss:(d=d.slice(y,y+f),c.C=y+f,d)))}Sr.prototype.cancel=function(){this.J=!0,Tr(this)};function Ca(c){c.S=Date.now()+c.I,od(c,c.I)}function od(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ao(_(c.ba,c),d)}function as(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(uc(this.i,this.A),this.L!=2&&(xn(),jn(17)),Tr(this),this.s=2,Ns(this)):od(this,this.S-c)};function Ns(c){c.j.G==0||c.J||ud(c.j,c)}function Tr(c){as(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ba(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Xl(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Un(f.h,c))){if(!c.K&&Un(f.h,c)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var L=y;if(L[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ls(f),ka(f);else break e;vc(f),jn(18)}}else f.za=L[1],0<f.za-f.T&&37500>L[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ao(_(f.Za,f),6e3));if(1>=_h(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((c.K||f.g==c)&&Ls(f),!W(d))for(L=f.Da.g.parse(d),d=0;d<L.length;d++){let lt=L[d];if(f.T=lt[0],lt=lt[1],f.G==2)if(lt[0]=="c"){f.K=lt[1],f.ia=lt[2];let In=lt[3];In!=null&&(f.la=In,f.j.info("VER="+f.la));let kn=lt[4];kn!=null&&(f.Aa=kn,f.j.info("SVER="+f.Aa));let us=lt[5];us!=null&&typeof us=="number"&&0<us&&(y=1.5*us,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;let Oi=c.g;if(Oi){let Bs=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var $=y.h;$.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ea($,$.h),$.h=null))}if(y.D){let vo=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(y.ya=vo,$e(y.I,y.D,vo))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var ie=c;if(y.qa=tu(y,y.J?y.ia:null,y.W),ie.K){nl(y.h,ie);var wt=ie,an=y.L;an&&(wt.I=an),wt.B&&(as(wt),Ca(wt)),y.g=ie}else Eh(y);0<f.i.length&&Aa(f)}else lt[0]!="stop"&&lt[0]!="close"||Kr(f,7);else f.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Kr(f,7):yc(f):lt[0]!="noop"&&f.l&&f.l.ta(lt),f.v=0)}}xn(4)}catch{}}var sn=class{constructor(c,d){this.g=c,this.map=d}};function ph(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gh(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _h(c){return c.h?1:c.g?c.g.size:0}function Un(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ea(c,d){c.g?c.g.add(d):c.h=d}function nl(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ph.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function hc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return T(c.i)}function Gm(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,y=0;y<f;y++)d.push(c[y]);return d}d=[],f=0;for(y in c)d[f++]=c[y];return d}function Qm(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let y in c)d[f++]=y;return d}}}function Jl(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Qm(c),y=Gm(c),L=y.length,$=0;$<L;$++)d.call(void 0,y[$],f&&f[$],c)}var yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vh(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var y=c[f].indexOf("="),L=null;if(0<=y){var $=c[f].substring(0,y);L=c[f].substring(y+1)}else $=c[f];d($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Yr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yr){this.h=c.h,cs(this,c.j),this.o=c.o,this.g=c.g,mc(this,c.s),this.l=c.l;var d=c.i,f=new ii;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ym(this,f),this.m=c.m}else c&&(d=String(c).match(yh))?(this.h=!1,cs(this,d[1]||"",!0),this.o=Ia(d[2]||""),this.g=Ia(d[3]||"",!0),mc(this,d[4]),this.l=Ia(d[5]||"",!0),Ym(this,d[6]||"",!0),this.m=Ia(d[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}Yr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Sa(d,fc,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Sa(d,fc,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Sa(f,f.charAt(0)=="/"?pc:bh,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Sa(f,qp)),c.join("")};function ui(c){return new Yr(c)}function cs(c,d,f){c.j=f?Ia(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function mc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ym(c,d,f){d instanceof ii?(c.i=d,nv(c.i,c.h)):(f||(d=Sa(d,zp)),c.i=new ii(d,c.h))}function $e(c,d,f){c.i.set(d,f)}function xa(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ia(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,po),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function po(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fc=/[#\/\?@]/g,bh=/[#\?:]/g,pc=/[#\?]/g,zp=/[#\?@]/g,qp=/#/g;function ii(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pi(c){c.g||(c.g=new Map,c.h=0,c.i&&vh(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ii.prototype,n.add=function(c,d){pi(this),this.i=null,c=sr(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function il(c,d){pi(c),d=sr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function rl(c,d){return pi(c),d=sr(c,d),c.g.has(d)}n.forEach=function(c,d){pi(this),this.g.forEach(function(f,y){f.forEach(function(L){c.call(d,L,y,this)},this)},this)},n.na=function(){pi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){let L=c[y];for(let $=0;$<L.length;$++)f.push(d[y])}return f},n.V=function(c){pi(this);let d=[];if(typeof c=="string")rl(this,c)&&(d=d.concat(this.g.get(sr(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return pi(this),this.i=null,c=sr(this,c),rl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function sd(c,d,f){il(c,d),0<f.length&&(c.i=null,c.g.set(sr(c,d),T(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];let $=encodeURIComponent(String(y)),ie=this.V(y);for(y=0;y<ie.length;y++){var L=$;ie[y]!==""&&(L+="="+encodeURIComponent(String(ie[y]))),c.push(L)}}return this.i=c.join("&")};function sr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function nv(c,d){d&&!c.j&&(pi(c),c.i=null,c.g.forEach(function(f,y){var L=y.toLowerCase();y!=L&&(il(this,y),sd(this,L,f))},c)),c.j=d}function Fs(c,d){let f=new Ro;if(a.Image){let y=new Image;y.onload=b(Dr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=b(Dr,f,"TestLoadImage: error",!1,d,y),y.onabort=b(Dr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=b(Dr,f,"TestLoadImage: timeout",!1,d,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else d(!1)}function Xm(c,d){let f=new Ro,y=new AbortController,L=setTimeout(()=>{y.abort(),Dr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:y.signal}).then($=>{clearTimeout(L),$.ok?Dr(f,"TestPingServer: ok",!0,d):Dr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Dr(f,"TestPingServer: error",!1,d)})}function Dr(c,d,f,y,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),y(f)}catch{}}function Jm(){this.g=new Wm}function ad(c,d,f){let y=f||"";try{Jl(c,function(L,$){let ie=L;u(L)&&(ie=ac(L)),d.push(y+$+"="+encodeURIComponent(ie))})}catch(L){throw d.push(y+"type="+encodeURIComponent("_badmap")),L}}function ls(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ls,Wl),ls.prototype.g=function(){return new gc(this.l,this.j)},ls.prototype.i=function(c){return function(){return c}}({});function gc(c,d){vn.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gc,vn),n=gc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ta(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zm(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zm(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?go(this):Ta(this),this.readyState==3&&Zm(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,go(this))},n.Qa=function(c){this.g&&(this.response=c,go(this))},n.ga=function(){this.g&&go(this)};function go(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ta(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ta(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ef(c){let d="";return we(c,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function _c(c,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=ef(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):$e(c,d,f))}function Nt(c){vn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Nt,vn);var tf=/^https?$/i,iv=["POST","PUT"];n=Nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yl.g(),this.v=this.o?td(this.o):td(Yl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch($){nf(this,$);return}if(c=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var L in y)f.set(L,y[L]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let $ of y.keys())f.set($,y.get($));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find($=>$.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iv,d,void 0))||y||L||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,ie]of f)this.g.setRequestHeader($,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(c),this.u=!1}catch($){nf(this,$)}};function nf(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rf(c),Da(c)}function rf(c){c.A||(c.A=!0,En(c,"complete"),En(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,En(this,"complete"),En(this,"abort"),Da(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),Nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cd(this):this.bb())},n.bb=function(){cd(this)};function cd(c){if(c.h&&typeof s<"u"&&(!c.v[1]||$i(c)!=4||c.Z()!=2)){if(c.u&&$i(c)==4)Hl(c.Ea,0,c);else if(En(c,"readystatechange"),$i(c)==4){c.h=!1;try{let ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=ie===0){var L=String(c.D).match(yh)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),y=!tf.test(L?L.toLowerCase():"")}f=y}if(f)En(c,"complete"),En(c,"success");else{c.m=6;try{var $=2<$i(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",rf(c)}}finally{Da(c)}}}}function Da(c,d){if(c.g){wh(c);let f=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||En(c,"ready");try{f.onreadystatechange=y}catch{}}}function wh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function $i(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Je(d)}};function Zl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(c){let d={};c=(c.g&&2<=$i(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(W(c[y]))continue;var f=N(c[y]);let L=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let $=d[L]||[];d[L]=$,$.push(f)}M(d,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function of(c){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,c),this.cb=Vs("retryDelaySeedMs",1e4,c),this.Wa=Vs("forwardChannelMaxRetries",2,c),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(c&&c.concurrentRequestLimit),this.Da=new Jm,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=of.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,y){jn(0),this.W=c,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=tu(this,null,this.W),Aa(this)};function yc(c){if(ld(c),c.G==3){var d=c.U++,f=ui(c.I);if($e(f,"SID",c.K),$e(f,"RID",d),$e(f,"TYPE","terminate"),_o(c,f),d=new Sr(c,c.j,d),d.L=2,d.v=xa(ui(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=hd(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ca(d)}dd(c)}function ka(c){c.g&&(eu(c),c.g.cancel(),c.g=null)}function ld(c){ka(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ls(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Aa(c){if(!gh(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ti||Qt(),Dn||(Ti(),Dn=!0),xr.add(d,c),c.B=0}}function sf(c,d){return _h(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ao(_(c.Ga,c,d),Ra(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let L=new Sr(this,this.j,c),$=this.o;if(this.S&&($?($=E($),P($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ol(this,L,d),f=ui(this.I),$e(f,"RID",c),$e(f,"CVER",22),this.D&&$e(f,"X-HTTP-Session-Id",this.D),_o(this,f),$&&(this.O?d="headers="+encodeURIComponent(String(ef($)))+"&"+d:this.m&&_c(f,this.m,$)),Ea(this.h,L),this.Ua&&$e(f,"TYPE","init"),this.P?($e(f,"$req",d),$e(f,"SID","null"),L.T=!0,fo(L,f,null)):fo(L,f,d),this.G=2}}else this.G==3&&(c?ar(this,c):this.i.length==0||gh(this.h)||ar(this))};function ar(c,d){var f;d?f=d.l:f=c.U++;let y=ui(c.I);$e(y,"SID",c.K),$e(y,"RID",f),$e(y,"AID",c.T),_o(c,y),c.m&&c.o&&_c(y,c.m,c.o),f=new Sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ol(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ea(c.h,f),fo(f,y,d)}function _o(c,d){c.H&&we(c.H,function(f,y){$e(d,y,f)}),c.l&&Jl({},function(f,y){$e(d,y,f)})}function ol(c,d,f){f=Math.min(c.i.length,f);var y=c.l?_(c.l.Na,c.l,c):null;e:{var L=c.i;let $=-1;for(;;){let ie=["count="+f];$==-1?0<f?($=L[0].g,ie.push("ofs="+$)):$=0:ie.push("ofs="+$);let wt=!0;for(let an=0;an<f;an++){let lt=L[an].g,In=L[an].map;if(lt-=$,0>lt)$=Math.max(0,L[an].g-100),wt=!1;else try{ad(In,ie,"req"+lt+"_")}catch{y&&y(In)}}if(wt){y=ie.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,y}function Eh(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ti||Qt(),Dn||(Ti(),Dn=!0),xr.add(d,c),c.v=0}}function vc(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ao(_(c.Fa,c),Ra(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,xh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ao(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jn(10),ka(this),xh(this))};function eu(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xh(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ui(c.qa);$e(d,"RID","rpc"),$e(d,"SID",c.K),$e(d,"AID",c.T),$e(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(d,"TO",c.ja),$e(d,"TYPE","xmlhttp"),_o(c,d),c.m&&c.o&&_c(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xa(ui(d)),f.m=null,f.P=!0,mh(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ka(this),vc(this),jn(19))};function Ls(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ud(c,d){var f=null;if(c.g==d){Ls(c),eu(c),c.g=null;var y=2}else if(Un(c.h,d))f=d.D,nl(c.h,d),y=1;else return;if(c.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var L=c.B;y=wa(),En(y,new Ql(y,f)),Aa(c)}else Eh(c);else if(L=d.s,L==3||L==0&&0<d.X||!(y==1&&sf(c,d)||y==2&&vc(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),L){case 1:Kr(c,5);break;case 4:Kr(c,10);break;case 3:Kr(c,6);break;default:Kr(c,2)}}}function Ra(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Kr(c,d){if(c.j.info("Error code "+d),d==2){var f=_(c.fb,c),y=c.Xa;let L=!y;y=new Yr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cs(y,"https"),xa(y),L?Fs(y.toString(),f):Xm(y.toString(),f)}else jn(2);c.G=0,c.l&&c.l.sa(d),dd(c),ld(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),jn(2)):(this.j.info("Failed to ping google.com"),jn(1))};function dd(c){if(c.G=0,c.ka=[],c.l){let d=hc(c.h);(d.length!=0||c.i.length!=0)&&(k(c.ka,d),k(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function tu(c,d,f){var y=f instanceof Yr?ui(f):new Yr(f);if(y.g!="")d&&(y.g=d+"."+y.g),mc(y,y.s);else{var L=a.location;y=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var $=new Yr(null);y&&cs($,y),d&&($.g=d),L&&mc($,L),f&&($.l=f),y=$}return f=c.D,d=c.ya,f&&d&&$e(y,f,d),$e(y,"VER",c.la),_o(c,y),y}function hd(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Nt(new ls({eb:f})):new Nt(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}n=Ih.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new Xn(c,d)};function Xn(c,d){vn.call(this),this.g=new of(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new yo(this)}C(Xn,vn),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){yc(this.g)},Xn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ac(c),c=f);d.i.push(new sn(d.Ya++,c)),d.G==3&&Aa(d)},Xn.prototype.N=function(){this.g.l=null,delete this.j,yc(this.g),delete this.g,Xn.aa.N.call(this)};function nu(c){nd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(nu,nd);function af(){id.call(this),this.status=1}C(af,id);function yo(c){this.g=c}C(yo,Ih),yo.prototype.ua=function(){En(this.g,"a")},yo.prototype.ta=function(c){En(this.g,new nu(c))},yo.prototype.sa=function(c){En(this.g,new af)},yo.prototype.ra=function(){En(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,TN=Bd.createWebChannelTransport=function(){return new sl},SN=Bd.getStatEventTarget=function(){return wa()},IN=Bd.Event=or,HI=Bd.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,A0=Bd.ErrorCode=tl,Os.COMPLETE="complete",xN=Bd.EventType=Os,dh.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",vn.prototype.listen=vn.prototype.K,U_=Bd.WebChannel=dh,Hme=Bd.FetchXmlHttpFactory=ls,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,EN=Bd.XhrIo=Nt}).apply(typeof KI<"u"?KI:typeof self<"u"?self:typeof window<"u"?window:{});var v9="@firebase/firestore",b9="4.7.8";var Qo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Qo.UNAUTHENTICATED=new Qo(null),Qo.GOOGLE_CREDENTIALS=new Qo("google-credentials-uid"),Qo.FIRST_PARTY=new Qo("first-party-uid"),Qo.MOCK_USER=new Qo("mock-user");var uy="11.3.1";var mp=new $_("@firebase/firestore");function z_(){return mp.logLevel}function at(n,...t){if(mp.logLevel<=Fn.DEBUG){let e=t.map(bV);mp.debug(`Firestore (${uy}): ${n}`,...e)}}function $d(n,...t){if(mp.logLevel<=Fn.ERROR){let e=t.map(bV);mp.error(`Firestore (${uy}): ${n}`,...e)}}function V0(n,...t){if(mp.logLevel<=Fn.WARN){let e=t.map(bV);mp.warn(`Firestore (${uy}): ${n}`,...e)}}function bV(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function Dt(n="Unexpected state"){let t=`FIRESTORE (${uy}) INTERNAL ASSERTION FAILED: `+n;throw $d(t),new Error(t)}function Ln(n,t){n||Dt()}function Lt(n,t){return n}var ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},it=class extends Fd{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ha=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var RN=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},MN=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Qo.UNAUTHENTICATED))}shutdown(){}};var PN=class{constructor(t){this.t=t,this.currentUser=Qo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Ln(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),o=new Ha;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ha,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;t.enqueueRetryable(()=>O(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ha)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ln(typeof i.accessToken=="string"),new RN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return Ln(t===null||typeof t=="string"),new Qo(t)}},ON=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Qo.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},NN=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new ON(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Qo.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ZI=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},FN=class{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,m9(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Ln(this.o===void 0);let i=o=>{o.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,at("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ZI(this.V));let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ln(typeof e.token=="string"),this.R=e.token,new ZI(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Wme(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var eS=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=Wme(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}};function Mn(n,t){return n<t?-1:n>t?1:0}function Y_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var w9=-62135596800,C9=1e6,Gr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*C9);return new n(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new it(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new it(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<w9)throw new it(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C9}_compareTo(t){return this.seconds===t.seconds?Mn(this.nanoseconds,t.nanoseconds):Mn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds-w9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var $t=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new Gr(0,0))}static max(){return new n(new Gr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var VN="__name__",tS=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&Dt(),i===void 0?i=t.length-e:i>t.length-e&&Dt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=n.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Math.sign(t.length-e.length)}static compareSegments(t,e){let i=n.isNumericId(t),r=n.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(t).compare(n.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ld.fromString(t.substring(4,t.length-2))}},rr=class n extends tS{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new it(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},Gme=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wa=class n extends tS{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return Gme.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VN}static keyField(){return new n([VN])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new it(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new it(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new it(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new it(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var Rt=class n{constructor(t){this.path=t}static fromPath(t){return new n(rr.fromString(t))}static fromName(t){return new n(rr.fromString(t).popFirst(5))}static empty(){return new n(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&rr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return rr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new rr(t.slice()))}};var L0=-1,LN=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};LN.UNKNOWN_ID=-1;function Qme(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=$t.fromTimestamp(i===1e9?new Gr(e+1,0):new Gr(e,i));return new fp(r,Rt.empty(),t)}function Yme(n){return new fp(n.readTime,n.key,L0)}var fp=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n($t.min(),Rt.empty(),L0)}static max(){return new n($t.max(),Rt.empty(),L0)}};function Xme(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Rt.comparator(n.documentKey,t.documentKey),e!==0?e:Mn(n.largestBatchId,t.largestBatchId))}var Jme="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",BN=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function dy(n){return O(this,null,function*(){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Jme)throw n;at("LocalStore","Unexpectedly lost primary lease")})}var Te=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},l=>i(l))}),s=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;e(t[u]).next(h=>{s[u]=h,++a,a===o&&i(s)},h=>r(h))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};function Zme(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function hy(n){return n.name==="IndexedDbTransactionError"}var wV=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.oe(r),this._e=r=>i.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this._e&&this._e(e),e}}n.ae=-1;return n})(),NS=-1;function tw(n){return n==null}function B0(n){return n===0&&1/n==-1/0}function efe(n){return typeof n=="number"&&Number.isInteger(n)&&!B0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var cW="";function tfe(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=E9(t)),t=nfe(n.get(e),t);return E9(t)}function nfe(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case cW:e+="";break;default:e+=o}}return e}function E9(n){return n+cW+""}var ife="remoteDocuments",lW="owner";var uW="mutationQueues";var dW="mutations";var hW="documentMutations",rfe="remoteDocumentsV14";var mW="remoteDocumentGlobal";var fW="targets";var pW="targetDocuments";var gW="targetGlobal",_W="collectionParents";var yW="clientMetadata";var vW="bundles";var bW="namedQueries";var ofe="indexConfiguration";var sfe="indexState";var afe="indexEntries";var wW="documentOverlays";var cfe="globals";var lfe=[uW,dW,hW,ife,fW,lW,gW,pW,yW,mW,_W,vW,bW],bBe=[...lfe,wW],ufe=[uW,dW,hW,rfe,fW,lW,gW,pW,yW,mW,_W,vW,bW,wW],dfe=ufe,hfe=[...dfe,ofe,sfe,afe];var wBe=[...hfe,cfe];function x9(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function bm(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function CW(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var hr=class n{constructor(t,e){this.comparator=t,this.root=e||ku.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ku.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ku.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new W_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new W_(this.root,t,this.comparator,!1)}getReverseIterator(){return new W_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new W_(this.root,t,this.comparator,!0)}},W_=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ku=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();let t=this.left.check();if(t!==this.right.check())throw Dt();return t+(this.isRed()?0:1)}};ku.EMPTY=null,ku.RED=!0,ku.BLACK=!1;ku.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(t,e,i,r,o){return this}insert(t,e,i){return new ku(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ao=class n{constructor(t){this.comparator=t,this.data=new hr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nS(this.data.getIterator())}getIteratorFrom(t){return new nS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},nS=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jc=class n{constructor(t){this.fields=t,t.sort(Wa.comparator)}static empty(){return new n([])}unionWith(t){let e=new ao(Wa.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Y_(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var iS=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Yo=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iS("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Yo.EMPTY_BYTE_STRING=new Yo("");var mfe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jd(n){if(Ln(!!n),typeof n=="string"){let t=0,e=mfe.exec(n);if(Ln(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ji(n.seconds),nanos:Ji(n.nanos)}}function Ji(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ud(n){return typeof n=="string"?Yo.fromBase64String(n):Yo.fromUint8Array(n)}var EW="server_timestamp",xW="__type__",IW="__previous_value__",SW="__local_write_time__";function CV(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[xW])===null||e===void 0?void 0:e.stringValue)===EW}function FS(n){let t=n.mapValue.fields[IW];return CV(t)?FS(t):t}function $0(n){let t=jd(n.mapValue.fields[SW].timestampValue);return new Gr(t.seconds,t.nanos)}var $N=class{constructor(t,e,i,r,o,s,a,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},jN="(default)",rS=class n{constructor(t,e){this.projectId=t,this.database=e||jN}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===jN}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var EV="__type__",TW="__max__",WI={mapValue:{fields:{__type__:{stringValue:TW}}}},xV="__vector__",X_="value";function pm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?CV(n)?4:kW(n)?9007199254740991:DW(n)?10:11:Dt()}function Mu(n,t){if(n===t)return!0;let e=pm(n);if(e!==pm(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return $0(n).isEqual($0(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=jd(r.timestampValue),a=jd(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return Ud(r.bytesValue).isEqual(Ud(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return Ji(r.geoPointValue.latitude)===Ji(o.geoPointValue.latitude)&&Ji(r.geoPointValue.longitude)===Ji(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ji(r.integerValue)===Ji(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Ji(r.doubleValue),a=Ji(o.doubleValue);return s===a?B0(s)===B0(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return Y_(n.arrayValue.values||[],t.arrayValue.values||[],Mu);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(x9(s)!==x9(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Mu(s[l],a[l])))return!1;return!0}(n,t);default:return Dt()}}function j0(n,t){return(n.values||[]).find(e=>Mu(e,t))!==void 0}function J_(n,t){if(n===t)return 0;let e=pm(n),i=pm(t);if(e!==i)return Mn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Mn(n.booleanValue,t.booleanValue);case 2:return function(o,s){let a=Ji(o.integerValue||o.doubleValue),l=Ji(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return I9(n.timestampValue,t.timestampValue);case 4:return I9($0(n),$0(t));case 5:return Mn(n.stringValue,t.stringValue);case 6:return function(o,s){let a=Ud(o),l=Ud(s);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=Mn(a[u],l[u]);if(h!==0)return h}return Mn(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){let a=Mn(Ji(o.latitude),Ji(s.latitude));return a!==0?a:Mn(Ji(o.longitude),Ji(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return S9(n.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,u,h;let p=o.fields||{},_=s.fields||{},b=(a=p[X_])===null||a===void 0?void 0:a.arrayValue,C=(l=_[X_])===null||l===void 0?void 0:l.arrayValue,T=Mn(((u=b?.values)===null||u===void 0?void 0:u.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:S9(b,C)}(n.mapValue,t.mapValue);case 11:return function(o,s){if(o===WI.mapValue&&s===WI.mapValue)return 0;if(o===WI.mapValue)return 1;if(s===WI.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let _=Mn(l[p],h[p]);if(_!==0)return _;let b=J_(a[l[p]],u[h[p]]);if(b!==0)return b}return Mn(l.length,h.length)}(n.mapValue,t.mapValue);default:throw Dt()}}function I9(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Mn(n,t);let e=jd(n),i=jd(t),r=Mn(e.seconds,i.seconds);return r!==0?r:Mn(e.nanos,i.nanos)}function S9(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=J_(e[r],i[r]);if(o)return o}return Mn(e.length,i.length)}function Z_(n){return UN(n)}function UN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=jd(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ud(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Rt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=UN(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${UN(e.fields[s])}`;return r+"}"}(n.mapValue):Dt()}function YI(n){switch(pm(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=FS(n);return t?16+YI(t):16;case 5:return 2*n.stringValue.length;case 6:return Ud(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+YI(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return bm(i.fields,(o,s)=>{r+=o.length+YI(s)}),r}(n.mapValue);default:throw Dt()}}function T9(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function zN(n){return!!n&&"integerValue"in n}function IV(n){return!!n&&"arrayValue"in n}function D9(n){return!!n&&"nullValue"in n}function k9(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function XI(n){return!!n&&"mapValue"in n}function DW(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[EV])===null||e===void 0?void 0:e.stringValue)===xV}function M0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return bm(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=M0(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=M0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function kW(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TW}var EBe={mapValue:{fields:{[EV]:{stringValue:xV},[X_]:{arrayValue:{}}}}};var aa=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!XI(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=M0(e)}setAll(t){let e=Wa.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=M0(s):r.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());XI(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Mu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];XI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){bm(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(M0(this.value))}};function AW(n){let t=[];return bm(n.fields,(e,i)=>{let r=new Wa([e]);if(XI(i)){let o=AW(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new jc(t)}var Qa=class n{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new n(t,0,$t.min(),$t.min(),$t.min(),aa.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,$t.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,$t.min(),$t.min(),aa.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,$t.min(),$t.min(),aa.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=aa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=aa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ey=class{constructor(t,e){this.position=t,this.inclusive=e}};function A9(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],s=n.position[r];if(o.field.isKeyField()?i=Rt.comparator(Rt.fromName(s.referenceValue),e.key):i=J_(s,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function R9(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Mu(n.position[e],t.position[e]))return!1;return!0}var pp=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function ffe(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var oS=class{},Ur=class n extends oS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new KN(t,e,i):e==="array-contains"?new GN(t,i):e==="in"?new QN(t,i):e==="not-in"?new YN(t,i):e==="array-contains-any"?new XN(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new HN(t,i):new WN(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(J_(e,this.value)):e!==null&&pm(this.value)===pm(e)&&this.matchesComparison(J_(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fl=class n extends oS{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new n(t,e)}matches(t){return RW(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function RW(n){return n.op==="and"}function MW(n){return pfe(n)&&RW(n)}function pfe(n){for(let t of n.filters)if(t instanceof Fl)return!1;return!0}function qN(n){if(n instanceof Ur)return n.field.canonicalString()+n.op.toString()+Z_(n.value);if(MW(n))return n.filters.map(t=>qN(t)).join(",");{let t=n.filters.map(e=>qN(e)).join(",");return`${n.op}(${t})`}}function PW(n,t){return n instanceof Ur?function(i,r){return r instanceof Ur&&i.op===r.op&&i.field.isEqual(r.field)&&Mu(i.value,r.value)}(n,t):n instanceof Fl?function(i,r){return r instanceof Fl&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&PW(s,r.filters[a]),!0):!1}(n,t):void Dt()}function OW(n){return n instanceof Ur?function(e){return`${e.field.canonicalString()} ${e.op} ${Z_(e.value)}`}(n):n instanceof Fl?function(e){return e.op.toString()+" {"+e.getFilters().map(OW).join(" ,")+"}"}(n):"Filter"}var KN=class extends Ur{constructor(t,e,i){super(t,e,i),this.key=Rt.fromName(i.referenceValue)}matches(t){let e=Rt.comparator(t.key,this.key);return this.matchesComparison(e)}},HN=class extends Ur{constructor(t,e){super(t,"in",e),this.keys=NW("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},WN=class extends Ur{constructor(t,e){super(t,"not-in",e),this.keys=NW("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function NW(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Rt.fromName(i.referenceValue))}var GN=class extends Ur{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return IV(e)&&j0(e.arrayValue,this.value)}},QN=class extends Ur{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&j0(this.value.arrayValue,e)}},YN=class extends Ur{constructor(t,e){super(t,"not-in",e)}matches(t){if(j0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!j0(this.value.arrayValue,e)}},XN=class extends Ur{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!IV(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>j0(this.value.arrayValue,i))}};var JN=class{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function M9(n,t=null,e=[],i=[],r=null,o=null,s=null){return new JN(n,t,e,i,r,o,s)}function SV(n){let t=Lt(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>qN(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),tw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Z_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Z_(i)).join(",")),t.le=e}return t.le}function TV(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!ffe(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!PW(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!R9(n.startAt,t.startAt)&&R9(n.endAt,t.endAt)}function ZN(n){return Rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var gm=class{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function gfe(n,t,e,i,r,o,s,a){return new gm(n,t,e,i,r,o,s,a)}function VS(n){return new gm(n)}function P9(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FW(n){return n.collectionGroup!==null}function P0(n){let t=Lt(n);if(t.he===null){t.he=[];let e=new Set;for(let o of t.explicitOrderBy)t.he.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ao(Wa.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.he.push(new pp(o,i))}),e.has(Wa.keyField().canonicalString())||t.he.push(new pp(Wa.keyField(),i))}return t.he}function Au(n){let t=Lt(n);return t.Pe||(t.Pe=_fe(t,P0(n))),t.Pe}function _fe(n,t){if(n.limitType==="F")return M9(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new pp(r.field,o)});let e=n.endAt?new ey(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ey(n.startAt.position,n.startAt.inclusive):null;return M9(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function eF(n,t){let e=n.filters.concat([t]);return new gm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function sS(n,t,e){return new gm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function LS(n,t){return TV(Au(n),Au(t))&&n.limitType===t.limitType}function VW(n){return`${SV(Au(n))}|lt:${n.limitType}`}function q_(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>OW(r)).join(", ")}]`),tw(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Z_(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Z_(r)).join(",")),`Target(${i})`}(Au(n))}; limitType=${n.limitType})`}function BS(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Rt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of P0(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=A9(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,P0(i),r)||i.endAt&&!function(s,a,l){let u=A9(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,P0(i),r))}(n,t)}function yfe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LW(n){return(t,e)=>{let i=!1;for(let r of P0(n)){let o=vfe(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function vfe(n,t,e){let i=n.field.isKeyField()?Rt.comparator(t.key,e.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?J_(l,u):Dt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Dt()}}var zd=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){bm(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return CW(this.inner)}size(){return this.innerSize}};var bfe=new hr(Rt.comparator);function qd(){return bfe}var BW=new hr(Rt.comparator);function R0(...n){let t=BW;for(let e of n)t=t.insert(e.key,e);return t}function $W(n){let t=BW;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function dp(){return O0()}function jW(){return O0()}function O0(){return new zd(n=>n.toString(),(n,t)=>n.isEqual(t))}var wfe=new hr(Rt.comparator),Cfe=new ao(Rt.comparator);function Tn(...n){let t=Cfe;for(let e of n)t=t.add(e);return t}var Efe=new ao(Mn);function xfe(){return Efe}function DV(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:B0(t)?"-0":t}}function UW(n){return{integerValue:""+n}}function Ife(n,t){return efe(t)?UW(t):DV(n,t)}var ty=class{constructor(){this._=void 0}};function Sfe(n,t,e){return n instanceof gp?function(r,o){let s={fields:{[xW]:{stringValue:EW},[SW]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&CV(o)&&(o=FS(o)),o&&(s.fields[IW]=o),{mapValue:s}}(e,t):n instanceof _p?qW(n,t):n instanceof yp?KW(n,t):function(r,o){let s=zW(r,o),a=O9(s)+O9(r.Ie);return zN(s)&&zN(r.Ie)?UW(a):DV(r.serializer,a)}(n,t)}function Tfe(n,t,e){return n instanceof _p?qW(n,t):n instanceof yp?KW(n,t):e}function zW(n,t){return n instanceof ny?function(i){return zN(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var gp=class extends ty{},_p=class extends ty{constructor(t){super(),this.elements=t}};function qW(n,t){let e=HW(t);for(let i of n.elements)e.some(r=>Mu(r,i))||e.push(i);return{arrayValue:{values:e}}}var yp=class extends ty{constructor(t){super(),this.elements=t}};function KW(n,t){let e=HW(t);for(let i of n.elements)e=e.filter(r=>!Mu(r,i));return{arrayValue:{values:e}}}var ny=class extends ty{constructor(t,e){super(),this.serializer=t,this.Ie=e}};function O9(n){return Ji(n.integerValue||n.doubleValue)}function HW(n){return IV(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var tF=class{constructor(t,e){this.field=t,this.transform=e}};function Dfe(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof _p&&r instanceof _p||i instanceof yp&&r instanceof yp?Y_(i.elements,r.elements,Mu):i instanceof ny&&r instanceof ny?Mu(i.Ie,r.Ie):i instanceof gp&&r instanceof gp}(n.transform,t.transform)}var nF=class{constructor(t,e){this.version=t,this.transformResults=e}},ca=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function JI(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var iy=class{};function WW(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ry(n.key,ca.none()):new vp(n.key,n.data,ca.none());{let e=n.data,i=aa.empty(),r=new ao(Wa.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Pu(n.key,i,new jc(r.toArray()),ca.none())}}function kfe(n,t,e){n instanceof vp?function(r,o,s){let a=r.value.clone(),l=F9(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Pu?function(r,o,s){if(!JI(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=F9(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(GW(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function N0(n,t,e,i){return n instanceof vp?function(o,s,a,l){if(!JI(o.precondition,s))return a;let u=o.value.clone(),h=V9(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof Pu?function(o,s,a,l){if(!JI(o.precondition,s))return a;let u=V9(o.fieldTransforms,l,s),h=s.data;return h.setAll(GW(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(o,s,a){return JI(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,t,e)}function Afe(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=zW(i.transform,r||null);o!=null&&(e===null&&(e=aa.empty()),e.set(i.field,o))}return e||null}function N9(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Y_(i,r,(o,s)=>Dfe(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var vp=class extends iy{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Pu=class extends iy{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GW(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function F9(n,t,e){let i=new Map;Ln(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,Tfe(s,a,e[r]))}return i}function V9(n,t,e){let i=new Map;for(let r of n){let o=r.transform,s=e.data.field(r.field);i.set(r.field,Sfe(o,s,t))}return i}var ry=class extends iy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},aS=class extends iy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var iF=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&kfe(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=N0(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=N0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=jW();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;let l=WW(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument($t.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Tn())}isEqual(t){return this.batchId===t.batchId&&Y_(this.mutations,t.mutations,(e,i)=>N9(e,i))&&Y_(this.baseMutations,t.baseMutations,(e,i)=>N9(e,i))}},rF=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Ln(t.mutations.length===i.length);let r=function(){return wfe}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(t,e,i,r)}};var oF=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sF=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var $r,Vn;function QW(n){switch(n){case ge.OK:return Dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Dt()}}function YW(n){if(n===void 0)return $d("GRPC error has no .code"),ge.UNKNOWN;switch(n){case $r.OK:return ge.OK;case $r.CANCELLED:return ge.CANCELLED;case $r.UNKNOWN:return ge.UNKNOWN;case $r.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case $r.INTERNAL:return ge.INTERNAL;case $r.UNAVAILABLE:return ge.UNAVAILABLE;case $r.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case $r.NOT_FOUND:return ge.NOT_FOUND;case $r.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case $r.ABORTED:return ge.ABORTED;case $r.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case $r.DATA_LOSS:return ge.DATA_LOSS;default:return Dt()}}(Vn=$r||($r={}))[Vn.OK=0]="OK",Vn[Vn.CANCELLED=1]="CANCELLED",Vn[Vn.UNKNOWN=2]="UNKNOWN",Vn[Vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vn[Vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vn[Vn.NOT_FOUND=5]="NOT_FOUND",Vn[Vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vn[Vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vn[Vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vn[Vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vn[Vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vn[Vn.ABORTED=10]="ABORTED",Vn[Vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vn[Vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vn[Vn.INTERNAL=13]="INTERNAL",Vn[Vn.UNAVAILABLE=14]="UNAVAILABLE",Vn[Vn.DATA_LOSS=15]="DATA_LOSS";var L9=null;function Rfe(){return new TextEncoder}var Mfe=new Ld([4294967295,4294967295],0);function B9(n){let t=Rfe().encode(n),e=new CN;return e.update(t),new Uint8Array(e.digest())}function $9(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ld([e,i],0),new Ld([r,o],0)]}var aF=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new hp(`Invalid padding: ${e}`);if(i<0)throw new hp(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new hp(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new hp(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Ld.fromNumber(this.Ee)}Ae(t,e,i){let r=t.add(e.multiply(Ld.fromNumber(i)));return r.compare(Mfe)===1&&(r=new Ld([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;let e=B9(t),[i,r]=$9(e);for(let o=0;o<this.hashCount;o++){let s=this.Ae(i,r,o);if(!this.Re(s))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new n(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Ee===0)return;let e=B9(t),[i,r]=$9(e);for(let o=0;o<this.hashCount;o++){let s=this.Ae(i,r,o);this.Ve(s)}}Ve(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},hp=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cS=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,U0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n($t.min(),r,new hr(Mn),qd(),Tn())}},U0=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Tn(),Tn(),Tn())}};var G_=class{constructor(t,e,i,r){this.me=t,this.removedTargetIds=e,this.key=i,this.fe=r}},lS=class{constructor(t,e){this.targetId=t,this.ge=e}},uS=class{constructor(t,e,i=Yo.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},dS=class{constructor(){this.pe=0,this.ye=j9(),this.we=Yo.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Tn(),e=Tn(),i=Tn();return this.ye.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Dt()}}),new U0(this.we,this.Se,t,e,i)}Me(){this.be=!1,this.ye=j9()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Ln(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},cF=class{constructor(t){this.ke=t,this.qe=new Map,this.Qe=qd(),this.$e=GI(),this.Ke=GI(),this.Ue=new hr(Mn)}We(t){for(let e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(let e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{let i=this.He(e);switch(t.state){case 0:this.Je(e)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(e);break;case 3:this.Je(e)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),i.Ce(t.resumeToken));break;default:Dt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((i,r)=>{this.Je(r)&&e(r)})}Ze(t){let e=t.targetId,i=t.ge.count,r=this.Xe(e);if(r){let o=r.target;if(ZN(o))if(i===0){let s=new Rt(o.path);this.ze(e,s,Qa.newNoDocument(s,$t.min()))}else Ln(i===1);else{let s=this.et(e);if(s!==i){let a=this.tt(t),l=a?this.nt(a,t,s):1;if(l!==0){this.Ye(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,u)}L9?.rt(function(h,p,_,b,C){var T,k,U,W,K,oe;let ae={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},we=p.unchangedNames;return we&&(ae.bloomFilter={applied:C===0,hashCount:(T=we?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(W=(U=(k=we?.bits)===null||k===void 0?void 0:k.bitmap)===null||U===void 0?void 0:U.length)!==null&&W!==void 0?W:0,padding:(oe=(K=we?.bits)===null||K===void 0?void 0:K.padding)!==null&&oe!==void 0?oe:0,mightContain:M=>{var E;return(E=b?.mightContain(M))!==null&&E!==void 0&&E}}),ae}(s,t.ge,this.ke.it(),a,l))}}}}tt(t){let e=t.ge.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,s,a;try{s=Ud(i).toUint8Array()}catch(l){if(l instanceof iS)return V0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new aF(s,r,o)}catch(l){return V0(l instanceof hp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,e,i){return e.ge.count===i-this.st(t,e.targetId)?0:2}st(t,e){let i=this.ke.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.ze(e,o,null),r++)}),r}ot(t){let e=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&ZN(a.target)){let l=new Rt(a.target.path);this._t(l).has(s)||this.ut(s,l)||this.ze(s,l,Qa.newNoDocument(l,t))}o.ve&&(e.set(s,o.Fe()),o.Me())}});let i=Tn();this.Ke.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Xe(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(t));let r=new cS(t,e,this.Ue,this.Qe,i);return this.Qe=qd(),this.$e=GI(),this.Ke=GI(),this.Ue=new hr(Mn),r}Ge(t,e){if(!this.Je(t))return;let i=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,i),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,i){if(!this.Je(t))return;let r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),i&&(this.Qe=this.Qe.insert(e,i))}removeTarget(t){this.qe.delete(t)}et(t){let e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new dS,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new ao(Mn),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new ao(Mn),this.$e=this.$e.insert(t,e)),e}Je(t){let e=this.Xe(t)!==null;return e||at("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){let e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new dS),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}};function GI(){return new hr(Rt.comparator)}function j9(){return new hr(Rt.comparator)}var Pfe={asc:"ASCENDING",desc:"DESCENDING"},Ofe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nfe={and:"AND",or:"OR"},lF=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function uF(n,t){return n.useProto3Json||tw(t)?t:{value:t}}function hS(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function XW(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ffe(n,t){return hS(n,t.toTimestamp())}function Ga(n){return Ln(!!n),$t.fromTimestamp(function(e){let i=jd(e);return new Gr(i.seconds,i.nanos)}(n))}function kV(n,t){return dF(n,t).canonicalString()}function dF(n,t){let e=function(r){return new rr(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function JW(n){let t=rr.fromString(n);return Ln(r6(t)),t}function mS(n,t){return kV(n.databaseId,t.path)}function F0(n,t){let e=JW(t);if(e.get(1)!==n.databaseId.projectId)throw new it(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new it(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Rt(e6(e))}function ZW(n,t){return kV(n.databaseId,t)}function Vfe(n){let t=JW(n);return t.length===4?rr.emptyPath():e6(t)}function hF(n){return new rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e6(n){return Ln(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function U9(n,t,e){return{name:mS(n,t),fields:e.value.mapValue.fields}}function Lfe(n,t){return"found"in t?function(i,r){Ln(!!r.found),r.found.name,r.found.updateTime;let o=F0(i,r.found.name),s=Ga(r.found.updateTime),a=r.found.createTime?Ga(r.found.createTime):$t.min(),l=new aa({mapValue:{fields:r.found.fields}});return Qa.newFoundDocument(o,s,a,l)}(n,t):"missing"in t?function(i,r){Ln(!!r.missing),Ln(!!r.readTime);let o=F0(i,r.missing),s=Ga(r.readTime);return Qa.newNoDocument(o,s)}(n,t):Dt()}function Bfe(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Dt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(Ln(h===void 0||typeof h=="string"),Yo.fromBase64String(h||"")):(Ln(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Yo.fromUint8Array(h||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){let h=u.code===void 0?ge.UNKNOWN:YW(u.code);return new it(h,u.message||"")}(s);e=new uS(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=F0(n,i.document.name),o=Ga(i.document.updateTime),s=i.document.createTime?Ga(i.document.createTime):$t.min(),a=new aa({mapValue:{fields:i.document.fields}}),l=Qa.newFoundDocument(r,o,s,a),u=i.targetIds||[],h=i.removedTargetIds||[];e=new G_(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=F0(n,i.document),o=i.readTime?Ga(i.readTime):$t.min(),s=Qa.newNoDocument(r,o),a=i.removedTargetIds||[];e=new G_([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=F0(n,i.document),o=i.removedTargetIds||[];e=new G_([],o,r,null)}else{if(!("filter"in t))return Dt();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new sF(r,o),a=i.targetId;e=new lS(a,s)}}return e}function t6(n,t){let e;if(t instanceof vp)e={update:U9(n,t.key,t.value)};else if(t instanceof ry)e={delete:mS(n,t.key)};else if(t instanceof Pu)e={update:U9(n,t.key,t.data),updateMask:Gfe(t.fieldMask)};else{if(!(t instanceof aS))return Dt();e={verify:mS(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof gp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _p)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ny)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Dt()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Ffe(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Dt()}(n,t.precondition)),e}function $fe(n,t){return n&&n.length>0?(Ln(t!==void 0),n.map(e=>function(r,o){let s=r.updateTime?Ga(r.updateTime):Ga(o);return s.isEqual($t.min())&&(s=Ga(o)),new nF(s,r.transformResults||[])}(e,t))):[]}function jfe(n,t){return{documents:[ZW(n,t.path)]}}function Ufe(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=ZW(n,r);let o=function(u){if(u.length!==0)return i6(Fl.create(u,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:K_(_.field),direction:Kfe(_.dir)}}(h))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=uF(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ht:e,parent:r}}function zfe(n){let t=Vfe(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){Ln(i===1);let h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let o=[];e.where&&(o=function(p){let _=n6(p);return _ instanceof Fl&&MW(_)?_.getFilters():[_]}(e.where));let s=[];e.orderBy&&(s=function(p){return p.map(_=>function(C){return new pp(H_(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(e.orderBy));let a=null;e.limit&&(a=function(p){let _;return _=typeof p=="object"?p.value:p,tw(_)?null:_}(e.limit));let l=null;e.startAt&&(l=function(p){let _=!!p.before,b=p.values||[];return new ey(b,_)}(e.startAt));let u=null;return e.endAt&&(u=function(p){let _=!p.before,b=p.values||[];return new ey(b,_)}(e.endAt)),gfe(t,r,s,o,a,"F",l,u)}function qfe(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function n6(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=H_(e.unaryFilter.field);return Ur.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=H_(e.unaryFilter.field);return Ur.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=H_(e.unaryFilter.field);return Ur.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=H_(e.unaryFilter.field);return Ur.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):n.fieldFilter!==void 0?function(e){return Ur.create(H_(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Fl.create(e.compositeFilter.filters.map(i=>n6(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Dt()}}(e.compositeFilter.op))}(n):Dt()}function Kfe(n){return Pfe[n]}function Hfe(n){return Ofe[n]}function Wfe(n){return Nfe[n]}function K_(n){return{fieldPath:n.canonicalString()}}function H_(n){return Wa.fromServerFormat(n.fieldPath)}function i6(n){return n instanceof Ur?function(e){if(e.op==="=="){if(k9(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NAN"}};if(D9(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(k9(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NOT_NAN"}};if(D9(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K_(e.field),op:Hfe(e.op),value:e.value}}}(n):n instanceof Fl?function(e){let i=e.getFilters().map(r=>i6(r));return i.length===1?i[0]:{compositeFilter:{op:Wfe(e.op),filters:i}}}(n):Dt()}function Gfe(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function r6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var z0=class n{constructor(t,e,i,r,o=$t.min(),s=$t.min(),a=Yo.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var mF=class{constructor(t){this.Tt=t}};function Qfe(n){let t=zfe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sS(t,t.limit,"L"):t}var fS=class{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(Ji(t.integerValue));else if("doubleValue"in t){let i=Ji(t.doubleValue);isNaN(i)?this.ft(e,13):(this.ft(e,15),B0(i)?e.gt(0):e.gt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.ft(e,20),typeof i=="string"&&(i=jd(i)),e.yt(`${i.seconds||""}`),e.gt(i.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(Ud(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.ft(e,45),e.gt(i.latitude||0),e.gt(i.longitude||0)}else"mapValue"in t?kW(t)?this.ft(e,Number.MAX_SAFE_INTEGER):DW(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):Dt()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){let i=t.fields||{};this.ft(e,55);for(let r of Object.keys(i))this.wt(r,e),this.Rt(i[r],e)}vt(t,e){var i,r;let o=t.fields||{};this.ft(e,53);let s=X_,a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.ft(e,15),e.gt(Ji(a)),this.wt(s,e),this.Rt(o[s],e)}Ft(t,e){let i=t.values||[];this.ft(e,50);for(let r of i)this.Rt(r,e)}Dt(t,e){this.ft(e,37),Rt.fromName(t).path.forEach(i=>{this.ft(e,60),this.Mt(i,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}};fS.xt=new fS;var fF=class{constructor(){this.Tn=new pF}addToCollectionParentIndex(t,e){return this.Tn.add(e),Te.resolve()}getCollectionParents(t,e){return Te.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return Te.resolve()}deleteFieldIndex(t,e){return Te.resolve()}deleteAllFieldIndexes(t){return Te.resolve()}createTargetIndexes(t,e){return Te.resolve()}getDocumentsMatchingTarget(t,e){return Te.resolve(null)}getIndexType(t,e){return Te.resolve(0)}getFieldIndexes(t,e){return Te.resolve([])}getNextCollectionGroupToUpdate(t){return Te.resolve(null)}getMinOffset(t,e){return Te.resolve(fp.min())}getMinOffsetFromCollectionGroup(t,e){return Te.resolve(fp.min())}updateCollectionGroup(t,e,i){return Te.resolve()}updateIndexEntries(t,e){return Te.resolve()}},pF=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ao(rr.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ao(rr.comparator)).toArray()}};var xBe=new Uint8Array(0);var z9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o6=41943040,$c=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}};$c.DEFAULT_COLLECTION_PERCENTILE=10,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$c.DEFAULT=new $c(o6,$c.DEFAULT_COLLECTION_PERCENTILE,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$c.DISABLED=new $c(-1,0,0);var q0=class n{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new n(0)}static Un(){return new n(-1)}};var q9="LruGarbageCollector",Yfe=1048576;function K9([n,t],[e,i]){let r=Mn(n,e);return r===0?Mn(t,i):r}var gF=class{constructor(t){this.Hn=t,this.buffer=new ao(K9),this.Jn=0}Yn(){return++this.Jn}Zn(t){let e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();K9(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},_F=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){at(q9,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>O(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){hy(e)?at(q9,"Ignoring IndexedDB error during garbage collection: ",e):yield dy(e)}yield this.er(3e5)}))}},yF=class{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return Te.resolve(wV.ae);let i=new gF(e);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.tr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(z9)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z9):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let i,r,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,s=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(t,i,e))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(u=Date.now(),z_()<=Fn.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:p})))}};function Xfe(n,t){return new yF(n,t)}var vF=class{constructor(){this.changes=new zd(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Qa.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?Te.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var bF=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var wF=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&N0(i.mutation,r,jc.empty(),Gr.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Tn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Tn()){let r=dp();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=R0();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let i=dp();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Tn()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=qd(),s=O0(),a=function(){return O0()}();return e.forEach((l,u)=>{let h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Pu)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),N0(h.mutation,u,h.mutation.getFieldMask(),Gr.now())):s.set(u.key,jc.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),e.forEach((u,h)=>{var p;return a.set(u,new bF(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(t,e){let i=O0(),r=new hr((s,a)=>s-a),o=Tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let h=i.get(l)||jc.empty();h=a.applyToLocalView(u,h),i.set(l,h);let p=(r.get(a.batchId)||Tn()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=jW();h.forEach(_=>{if(!o.has(_)){let b=WW(e.get(_),i.get(_));b!==null&&p.set(_,b),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,p))}return Te.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(s){return Rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):FW(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):Te.resolve(dp()),a=L0,l=o;return s.next(u=>Te.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?Te.resolve():this.remoteDocumentCache.getEntry(t,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Tn())).next(h=>({batchId:a,changes:$W(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Rt(e)).next(i=>{let r=R0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,s=R0();return this.indexManager.getCollectionParents(t,o).next(a=>Te.forEach(a,l=>{let u=function(p,_){return new gm(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(h=>{h.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Qa.newInvalidDocument(h)))});let a=R0();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&N0(h.mutation,u,jc.empty(),Gr.now()),BS(e,u)&&(a=a.insert(l,u))}),a})}};var CF=class{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return Te.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Ga(r.createTime)}}(e)),Te.resolve()}getNamedQuery(t,e){return Te.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:Qfe(r.bundledQuery),readTime:Ga(r.readTime)}}(e)),Te.resolve()}};var EF=class{constructor(){this.overlays=new hr(Rt.comparator),this.Rr=new Map}getOverlay(t,e){return Te.resolve(this.overlays.get(e))}getOverlays(t,e){let i=dp();return Te.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.Et(t,e,o)}),Te.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Rr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),Te.resolve()}getOverlaysForCollection(t,e,i){let r=dp(),o=e.length+1,s=new Rt(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Te.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new hr((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let h=o.get(u.largestBatchId);h===null&&(h=dp(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=dp(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return Te.resolve(a)}Et(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new oF(e,i));let o=this.Rr.get(e);o===void 0&&(o=Tn(),this.Rr.set(e,o)),this.Rr.set(e,o.add(i.key))}};var xF=class{constructor(){this.sessionToken=Yo.EMPTY_BYTE_STRING}getSessionToken(t){return Te.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Te.resolve()}};var K0=class{constructor(){this.Vr=new ao(jr.mr),this.gr=new ao(jr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){let i=new jr(t,e);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.wr(new jr(t,e))}Sr(t,e){t.forEach(i=>this.removeReference(i,e))}br(t){let e=new Rt(new rr([])),i=new jr(e,t),r=new jr(e,t+1),o=[];return this.gr.forEachInRange([i,r],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){let e=new Rt(new rr([])),i=new jr(e,t),r=new jr(e,t+1),o=Tn();return this.gr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new jr(t,0),i=this.Vr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},jr=class{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return Rt.comparator(t.key,e.key)||Mn(t.Cr,e.Cr)}static pr(t,e){return Mn(t.Cr,e.Cr)||Rt.comparator(t.key,e.key)}};var IF=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new ao(jr.mr)}checkEmpty(t){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new iF(o,e,i,r);this.mutationQueue.push(s);for(let a of r)this.Mr=this.Mr.add(new jr(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Te.resolve(s)}lookupMutationBatch(t,e){return Te.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.Nr(i),o=r<0?0:r;return Te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?NS:this.Fr-1)}getAllMutationBatches(t){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new jr(e,0),r=new jr(e,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,r],s=>{let a=this.Or(s.Cr);o.push(a)}),Te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ao(Mn);return e.forEach(r=>{let o=new jr(r,0),s=new jr(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{i=i.add(a.Cr)})}),Te.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;Rt.isDocumentKey(o)||(o=o.child(""));let s=new jr(new Rt(o),0),a=new ao(Mn);return this.Mr.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Cr)),!0)},s),Te.resolve(this.Br(a))}Br(t){let e=[];return t.forEach(i=>{let r=this.Or(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Ln(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Te.forEach(e.mutations,r=>{let o=new jr(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,e){let i=new jr(e,0),r=this.Mr.firstAfterOrEqual(i);return Te.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Te.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){let e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var SF=class{constructor(t){this.kr=t,this.docs=function(){return new hr(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.kr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return Te.resolve(i?i.document.mutableCopy():Qa.newInvalidDocument(e))}getEntries(t,e){let i=qd();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Qa.newInvalidDocument(r))}),Te.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=qd(),s=e.path,a=new Rt(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Xme(Yme(h),i)<=0||(r.has(h.key)||BS(e,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Te.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Dt()}qr(t,e){return Te.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new TF(this)}getSize(t){return Te.resolve(this.size)}},TF=class extends vF{constructor(t){super(),this.Ir=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),Te.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}};var DF=class{constructor(t){this.persistence=t,this.Qr=new zd(e=>SV(e),TV),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.$r=0,this.Kr=new K0,this.targetCount=0,this.Ur=q0.Kn()}forEachTarget(t,e){return this.Qr.forEach((i,r)=>e(r)),Te.resolve()}getLastRemoteSnapshotVersion(t){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Te.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$r&&(this.$r=e),Te.resolve()}zn(t){this.Qr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Ur=new q0(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,Te.resolve()}updateTargetData(t,e){return this.zn(e),Te.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.br(e.targetId),this.targetCount-=1,Te.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),Te.waitFor(o).next(()=>r)}getTargetCount(t){return Te.resolve(this.targetCount)}getTargetData(t,e){let i=this.Qr.get(e)||null;return Te.resolve(i)}addMatchingKeys(t,e,i){return this.Kr.yr(e,i),Te.resolve()}removeMatchingKeys(t,e,i){this.Kr.Sr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),Te.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Kr.br(e),Te.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Kr.vr(e);return Te.resolve(i)}containsKey(t,e){return Te.resolve(this.Kr.containsKey(e))}};var pS=class{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new wV(0),this.zr=!1,this.zr=!0,this.jr=new xF,this.referenceDelegate=t(this),this.Hr=new DF(this),this.indexManager=new fF,this.remoteDocumentCache=function(r){return new SF(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new mF(e),this.Yr=new CF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new EF,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Wr[t.toKey()];return i||(i=new IF(e,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,i){at("MemoryPersistence","Starting transaction:",t);let r=new kF(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(o=>this.referenceDelegate.Xr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}ei(t,e){return Te.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,e)))}},kF=class extends BN{constructor(t){super(),this.currentSequenceNumber=t}},AF=class n{constructor(t){this.persistence=t,this.ti=new K0,this.ni=null}static ri(t){return new n(t)}get ii(){if(this.ni)return this.ni;throw Dt()}addReference(t,e,i){return this.ti.addReference(i,e),this.ii.delete(i.toString()),Te.resolve()}removeReference(t,e,i){return this.ti.removeReference(i,e),this.ii.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),Te.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.ii,i=>{let r=Rt.fromPath(i);return this.si(t,r).next(o=>{o||e.removeEntry(r,$t.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(i=>{i?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return Te.or([()=>Te.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}},gS=class n{constructor(t,e){this.persistence=t,this.oi=new zd(i=>tfe(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Xfe(this,e)}static ri(t,e){return new n(t,e)}Zr(){}Xr(t){return Te.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){let e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}sr(t){let e=0;return this.rr(t,i=>{e++}).next(()=>e)}rr(t,e){return Te.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(o=>o?Te.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.qr(t,s=>this.ar(t,s,e).next(a=>{a||(i++,o.removeEntry(s,$t.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),Te.resolve()}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),Te.resolve()}removeReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),Te.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),Te.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=YI(t.data.value)),e}ar(t,e,i){return Te.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let r=this.oi.get(e);return Te.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var RF=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hi=i,this.Ji=r}static Yi(t,e){let i=Tn(),r=Tn();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var MF=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var PF=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return o9()?8:Zme(r9())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.rs(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new MF;return this._s(t,e,s).next(a=>{if(o.result=a,this.Xi)return this.us(t,e,s,a.size)})}).next(()=>o.result)}us(t,e,i,r){return i.documentReadCount<this.es?(z_()<=Fn.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",q_(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Te.resolve()):(z_()<=Fn.DEBUG&&at("QueryEngine","Query:",q_(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(z_()<=Fn.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",q_(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Au(e))):Te.resolve())}rs(t,e){if(P9(e))return Te.resolve(null);let i=Au(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=sS(e,null,"F"),i=Au(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=Tn(...o);return this.ns.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.cs(e,a);return this.ls(e,u,s,l.readTime)?this.rs(t,sS(e,null,"F")):this.hs(t,u,e,l)}))})))}ss(t,e,i,r){return P9(e)||r.isEqual($t.min())?Te.resolve(null):this.ns.getDocuments(t,i).next(o=>{let s=this.cs(e,o);return this.ls(e,s,i,r)?Te.resolve(null):(z_()<=Fn.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),q_(e)),this.hs(t,s,e,Qme(r,L0)).next(a=>a))})}cs(t,e){let i=new ao(LW(t));return e.forEach((r,o)=>{BS(t,o)&&(i=i.add(o))}),i}ls(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}_s(t,e,i){return z_()<=Fn.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",q_(e)),this.ns.getDocumentsMatchingQuery(t,e,fp.min(),i)}hs(t,e,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var AV="LocalStore",Jfe=3e8,OF=class{constructor(t,e,i,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new hr(Mn),this.Is=new zd(o=>SV(o),TV),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}};function Zfe(n,t,e,i){return new OF(n,t,e,i)}function s6(n,t){return O(this,null,function*(){let e=Lt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.As(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=Tn();for(let u of r){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(i,l).next(u=>({Rs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function epe(n,t){let e=Lt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,_=p.keys(),b=Te.resolve();return _.forEach(C=>{b=b.next(()=>h.getEntry(l,C)).next(T=>{let k=u.docVersions.get(C);Ln(k!==null),T.version.compareTo(k)<0&&(p.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Tn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function a6(n){let t=Lt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function tpe(n,t){let e=Lt(n),i=t.snapshotVersion,r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;let a=[];t.targetChanges.forEach((h,p)=>{let _=r.get(p);if(!_)return;a.push(e.Hr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>e.Hr.addMatchingKeys(o,h.addedDocuments,p)));let b=_.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?b=b.withResumeToken(Yo.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,i)),r=r.insert(p,b),function(T,k,U){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=Jfe?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(_,b,h)&&a.push(e.Hr.updateTargetData(o,b))});let l=qd(),u=Tn();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(npe(o,s,t.documentUpdates).next(h=>{l=h.Vs,u=h.fs})),!i.isEqual($t.min())){let h=e.Hr.getLastRemoteSnapshotVersion(o).next(p=>e.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(h)}return Te.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(e.Ts=r,o))}function npe(n,t,e){let i=Tn(),r=Tn();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=qd();return e.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual($t.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):at(AV,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Vs:s,fs:r}})}function ipe(n,t){let e=Lt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=NS),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function rpe(n,t){let e=Lt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Hr.getTargetData(i,t).next(o=>o?(r=o,Te.resolve(r)):e.Hr.allocateTargetId(i).next(s=>(r=new z0(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(i.targetId,i),e.Is.set(t,i.targetId)),i})}function NF(n,t,e){return O(this,null,function*(){let i=Lt(n),r=i.Ts.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!hy(s))throw s;at(AV,`Failed to update sequence numbers for target ${t}: ${s}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)})}function H9(n,t,e){let i=Lt(n),r=$t.min(),o=Tn();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let p=Lt(l),_=p.Is.get(h);return _!==void 0?Te.resolve(p.Ts.get(_)):p.Hr.getTargetData(u,h)}(i,s,Au(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(s,t,e?r:$t.min(),e?o:Tn())).next(a=>(ope(i,yfe(t),a),{documents:a,gs:o})))}function ope(n,t,e){let i=n.Es.get(t)||$t.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(t,i)}var _S=class{constructor(){this.activeTargetIds=xfe()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var FF=class{constructor(){this.ho=new _S,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,i){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new _S,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var VF=class{To(t){}shutdown(){}};var W9="ConnectivityMonitor",yS=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){at(W9,"Network connectivity changed: AVAILABLE");for(let t of this.Vo)t(0)}Ro(){at(W9,"Network connectivity changed: UNAVAILABLE");for(let t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var QI=null;function LF(){return QI===null?QI=function(){return 268435456+Math.round(2147483648*Math.random())}():QI++,"0x"+QI.toString(16)}var DN="RestConnection",spe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},BF=class{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===jN?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,e,i,r,o){let s=LF(),a=this.bo(t,e.toUriEncodedString());at(DN,`Sending RPC '${t}' ${s}:`,a,i);let l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,o),this.vo(t,a,l,i).then(u=>(at(DN,`Received RPC '${t}' ${s}: `,u),u),u=>{throw V0(DN,`RPC '${t}' ${s} failed with error: `,u,"url: ",a,"request:",i),u})}Co(t,e,i,r,o,s){return this.So(t,e,i,r,o)}Do(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uy}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}bo(t,e){let i=spe[t];return`${this.po}/v1/${e}:${i}`}terminate(){}};var $F=class{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}};var Go="WebChannelConnection",jF=class extends BF{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,i,r){let o=LF();return new Promise((s,a)=>{let l=new EN;l.setWithCredentials(!0),l.listenOnce(xN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case A0.NO_ERROR:let h=l.getResponseJson();at(Go,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(h)),s(h);break;case A0.TIMEOUT:at(Go,`RPC '${t}' ${o} timed out`),a(new it(ge.DEADLINE_EXCEEDED,"Request time out"));break;case A0.HTTP_ERROR:let p=l.getStatus();if(at(Go,`RPC '${t}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let b=_?.error;if(b&&b.status&&b.message){let C=function(k){let U=k.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(U)>=0?U:ge.UNKNOWN}(b.status);a(new it(C,b.message))}else a(new it(ge.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new it(ge.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{at(Go,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(r);at(Go,`RPC '${t}' ${o} sending request:`,r),l.send(e,"POST",u,i,15)})}Wo(t,e,i){let r=LF(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=TN(),a=SN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let h=o.join("");at(Go,`Creating RPC '${t}' stream ${r}: ${h}`,l);let p=s.createWebChannel(h,l),_=!1,b=!1,C=new $F({Fo:k=>{b?at(Go,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(_||(at(Go,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),at(Go,`RPC '${t}' stream ${r} sending:`,k),p.send(k))},Mo:()=>p.close()}),T=(k,U,W)=>{k.listen(U,K=>{try{W(K)}catch(oe){setTimeout(()=>{throw oe},0)}})};return T(p,U_.EventType.OPEN,()=>{b||(at(Go,`RPC '${t}' stream ${r} transport opened.`),C.Qo())}),T(p,U_.EventType.CLOSE,()=>{b||(b=!0,at(Go,`RPC '${t}' stream ${r} transport closed`),C.Ko())}),T(p,U_.EventType.ERROR,k=>{b||(b=!0,V0(Go,`RPC '${t}' stream ${r} transport errored:`,k),C.Ko(new it(ge.UNAVAILABLE,"The operation could not be completed")))}),T(p,U_.EventType.MESSAGE,k=>{var U;if(!b){let W=k.data[0];Ln(!!W);let K=W,oe=K?.error||((U=K[0])===null||U===void 0?void 0:U.error);if(oe){at(Go,`RPC '${t}' stream ${r} received error:`,oe);let ae=oe.status,we=function(I){let P=$r[I];if(P!==void 0)return YW(P)}(ae),M=oe.message;we===void 0&&(we=ge.INTERNAL,M="Unknown error status: "+ae+" with message "+oe.message),b=!0,C.Ko(new it(we,M)),p.close()}else at(Go,`RPC '${t}' stream ${r} received:`,W),C.Uo(W)}}),T(a,IN.STAT_EVENT,k=>{k.stat===HI.PROXY?at(Go,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===HI.NOPROXY&&at(Go,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}};function kN(){return typeof document<"u"?document:null}function $S(n){return new lF(n,!0)}var H0=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Ti=t,this.timerId=e,this.Go=i,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();let e=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-i);r>0&&at("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var G9="PersistentStream",vS=class{constructor(t,e,i,r,o,s,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new H0(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return O(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}T_(){return O(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(t,e){return O(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?($d(e.toString()),$d("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Lo(e)})}A_(){}auth(){this.state=1;let t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===e&&this.V_(i,r)},i=>{t(()=>{let r=new it(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,e){let i=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(()=>O(this,null,function*(){this.state=0,this.start()}))}m_(t){return at(G9,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(at(G9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},UF=class extends vS{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();let e=Bfe(this.serializer,t),i=function(o){if(!("targetChange"in o))return $t.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?$t.min():s.readTime?Ga(s.readTime):$t.min()}(t);return this.listener.p_(e,i)}y_(t){let e={};e.database=hF(this.serializer),e.addTarget=function(o,s){let a,l=s.target;if(a=ZN(l)?{documents:jfe(o,l)}:{query:Ufe(o,l).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=XW(o,s.resumeToken);let u=uF(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo($t.min())>0){a.readTime=hS(o,s.snapshotVersion.toTimestamp());let u=uF(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let i=qfe(this.serializer,t);i&&(e.labels=i),this.I_(e)}w_(t){let e={};e.database=hF(this.serializer),e.removeTarget=t,this.I_(e)}},zF=class extends vS{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Ln(!!t.streamToken),this.lastStreamToken=t.streamToken,Ln(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Ln(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();let e=$fe(t.writeResults,t.commitTime),i=Ga(t.commitTime);return this.listener.v_(i,e)}C_(){let t={};t.database=hF(this.serializer),this.I_(t)}b_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>t6(this.serializer,i))};this.I_(e)}};var qF=class{},KF=class extends qF{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new it(ge.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,dF(e,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it(ge.UNKNOWN,o.toString())})}Co(t,e,i,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(t,dF(e,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new it(ge.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},HF=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?($d(e),this.N_=!1):at("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var bp="RemoteStore",WF=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{i.enqueueAndForget(()=>O(this,null,function*(){wm(this)&&(at(bp,"Restarting streams for network reachability change."),yield function(l){return O(this,null,function*(){let u=Lt(l);u.W_.add(4),yield nw(u),u.j_.set("Unknown"),u.W_.delete(4),yield jS(u)})}(this))}))}),this.j_=new HF(i,r)}};function jS(n){return O(this,null,function*(){if(wm(n))for(let t of n.G_)yield t(!0)})}function nw(n){return O(this,null,function*(){for(let t of n.G_)yield t(!1)})}function c6(n,t){let e=Lt(n);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),OV(e)?PV(e):my(e).c_()&&MV(e,t))}function RV(n,t){let e=Lt(n),i=my(e);e.U_.delete(t),i.c_()&&l6(e,t),e.U_.size===0&&(i.c_()?i.P_():wm(e)&&e.j_.set("Unknown"))}function MV(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($t.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}my(n).y_(t)}function l6(n,t){n.H_.Ne(t),my(n).w_(t)}function PV(n){n.H_=new cF({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.U_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),my(n).start(),n.j_.B_()}function OV(n){return wm(n)&&!my(n).u_()&&n.U_.size>0}function wm(n){return Lt(n).W_.size===0}function u6(n){n.H_=void 0}function ape(n){return O(this,null,function*(){n.j_.set("Online")})}function cpe(n){return O(this,null,function*(){n.U_.forEach((t,e)=>{MV(n,t)})})}function lpe(n,t){return O(this,null,function*(){u6(n),OV(n)?(n.j_.q_(t),PV(n)):n.j_.set("Unknown")})}function upe(n,t,e){return O(this,null,function*(){if(n.j_.set("Online"),t instanceof uS&&t.state===2&&t.cause)try{yield function(r,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.U_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.U_.delete(a),r.H_.removeTarget(a))})}(n,t)}catch(i){at(bp,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield bS(n,i)}else if(t instanceof G_?n.H_.We(t):t instanceof lS?n.H_.Ze(t):n.H_.je(t),!e.isEqual($t.min()))try{let i=yield a6(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.U_.get(u);h&&o.U_.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.U_.get(l);if(!h)return;o.U_.set(l,h.withResumeToken(Yo.EMPTY_BYTE_STRING,h.snapshotVersion)),l6(o,l);let p=new z0(h.target,l,u,h.sequenceNumber);MV(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){at(bp,"Failed to raise snapshot:",i),yield bS(n,i)}})}function bS(n,t,e){return O(this,null,function*(){if(!hy(t))throw t;n.W_.add(1),yield nw(n),n.j_.set("Offline"),e||(e=()=>a6(n.localStore)),n.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){at(bp,"Retrying IndexedDB access"),yield e(),n.W_.delete(1),yield jS(n)}))})}function d6(n,t){return t().catch(e=>bS(n,e,t))}function US(n){return O(this,null,function*(){let t=Lt(n),e=_m(t),i=t.K_.length>0?t.K_[t.K_.length-1].batchId:NS;for(;dpe(t);)try{let r=yield ipe(t.localStore,i);if(r===null){t.K_.length===0&&e.P_();break}i=r.batchId,hpe(t,r)}catch(r){yield bS(t,r)}h6(t)&&m6(t)})}function dpe(n){return wm(n)&&n.K_.length<10}function hpe(n,t){n.K_.push(t);let e=_m(n);e.c_()&&e.S_&&e.b_(t.mutations)}function h6(n){return wm(n)&&!_m(n).u_()&&n.K_.length>0}function m6(n){_m(n).start()}function mpe(n){return O(this,null,function*(){_m(n).C_()})}function fpe(n){return O(this,null,function*(){let t=_m(n);for(let e of n.K_)t.b_(e.mutations)})}function ppe(n,t,e){return O(this,null,function*(){let i=n.K_.shift(),r=rF.from(i,t,e);yield d6(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield US(n)})}function gpe(n,t){return O(this,null,function*(){t&&_m(n).S_&&(yield function(i,r){return O(this,null,function*(){if(function(s){return QW(s)&&s!==ge.ABORTED}(r.code)){let o=i.K_.shift();_m(i).h_(),yield d6(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield US(i)}})}(n,t)),h6(n)&&m6(n)})}function Q9(n,t){return O(this,null,function*(){let e=Lt(n);e.asyncQueue.verifyOperationInProgress(),at(bp,"RemoteStore received new credentials");let i=wm(e);e.W_.add(3),yield nw(e),i&&e.j_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),yield jS(e)})}function _pe(n,t){return O(this,null,function*(){let e=Lt(n);t?(e.W_.delete(2),yield jS(e)):t||(e.W_.add(2),yield nw(e),e.j_.set("Unknown"))})}function my(n){return n.J_||(n.J_=function(e,i,r){let o=Lt(e);return o.M_(),new UF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{xo:ape.bind(null,n),No:cpe.bind(null,n),Lo:lpe.bind(null,n),p_:upe.bind(null,n)}),n.G_.push(t=>O(this,null,function*(){t?(n.J_.h_(),OV(n)?PV(n):n.j_.set("Unknown")):(yield n.J_.stop(),u6(n))}))),n.J_}function _m(n){return n.Y_||(n.Y_=function(e,i,r){let o=Lt(e);return o.M_(),new zF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:mpe.bind(null,n),Lo:gpe.bind(null,n),D_:fpe.bind(null,n),v_:ppe.bind(null,n)}),n.G_.push(t=>O(this,null,function*(){t?(n.Y_.h_(),yield US(n)):(yield n.Y_.stop(),n.K_.length>0&&(at(bp,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))}))),n.Y_}var GF=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let s=Date.now()+i,a=new n(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zS(n,t){if($d("AsyncQueue",`${t}: ${n}`),hy(n))return new it(ge.UNAVAILABLE,`${t}: ${n}`);throw n}var wS=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Rt.comparator(e.key,i.key):(e,i)=>Rt.comparator(e.key,i.key),this.keyedMap=R0(),this.sortedSet=new hr(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var CS=class{constructor(){this.Z_=new hr(Rt.comparator)}track(t){let e=t.doc.key,i=this.Z_.get(e);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(e):t.type===1&&i.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):Dt():this.Z_=this.Z_.insert(e,t)}X_(){let t=[];return this.Z_.inorderTraversal((e,i)=>{t.push(i)}),t}},oy=class n{constructor(t,e,i,r,o,s,a,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new n(t,e,wS.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&LS(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var QF=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}},YF=class{constructor(){this.queries=Y9(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,i){let r=Lt(e),o=r.queries;r.queries=Y9(),o.forEach((s,a)=>{for(let l of a.ta)l.onError(i)})})(this,new it(ge.ABORTED,"Firestore shutting down"))}};function Y9(){return new zd(n=>VW(n),LS)}function NV(n,t){return O(this,null,function*(){let e=Lt(n),i=3,r=t.query,o=e.queries.get(r);o?!o.na()&&t.ra()&&(i=2):(o=new QF,i=t.ra()?0:1);try{switch(i){case 0:o.ea=yield e.onListen(r,!0);break;case 1:o.ea=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(s){let a=zS(s,`Initialization of query '${q_(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,o),o.ta.push(t),t.sa(e.onlineState),o.ea&&t.oa(o.ea)&&VV(e)})}function FV(n,t){return O(this,null,function*(){let e=Lt(n),i=t.query,r=3,o=e.queries.get(i);if(o){let s=o.ta.indexOf(t);s>=0&&(o.ta.splice(s,1),o.ta.length===0?r=t.ra()?0:1:!o.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function ype(n,t){let e=Lt(n),i=!1;for(let r of t){let o=r.query,s=e.queries.get(o);if(s){for(let a of s.ta)a.oa(r)&&(i=!0);s.ea=r}}i&&VV(e)}function vpe(n,t,e){let i=Lt(n),r=i.queries.get(t);if(r)for(let o of r.ta)o.onError(e);i.queries.delete(t)}function VV(n){n.ia.forEach(t=>{t.next()})}var XF,X9;(X9=XF||(XF={}))._a="default",X9.Cache="cache";var W0=class{constructor(t,e,i){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new oy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;let i=e!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;let e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=oy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==XF.Cache}};var ES=class{constructor(t){this.key=t}},xS=class{constructor(t){this.key=t}},JF=class{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Tn(),this.mutatedKeys=Tn(),this.ya=LW(t),this.wa=new wS(this.ya)}get Sa(){return this.fa}ba(t,e){let i=e?e.Da:new CS,r=e?e.wa:this.wa,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,p)=>{let _=r.get(h),b=BS(this.query,p)?p:null,C=!!_&&this.mutatedKeys.has(_.key),T=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),k=!1;_&&b?_.data.isEqual(b.data)?C!==T&&(i.track({type:3,doc:b}),k=!0):this.va(_,b)||(i.track({type:2,doc:b}),k=!0,(l&&this.ya(b,l)>0||u&&this.ya(b,u)<0)&&(a=!0)):!_&&b?(i.track({type:0,doc:b}),k=!0):_&&!b&&(i.track({type:1,doc:_}),k=!0,(l||u)&&(a=!0)),k&&(b?(s=s.add(b),o=T?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{wa:s,Da:i,ls:a,mutatedKeys:o}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;let s=t.Da.X_();s.sort((h,p)=>function(b,C){let T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return T(b)-T(C)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(i),r=r!=null&&r;let a=e&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,u=l!==this.ga;return this.ga=l,s.length!==0||u?{snapshot:new oy(this.query,t.wa,o,s,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new CS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];let t=this.pa;this.pa=Tn(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});let e=[];return t.forEach(i=>{this.pa.has(i)||e.push(new xS(i))}),this.pa.forEach(i=>{t.has(i)||e.push(new ES(i))}),e}Oa(t){this.fa=t.gs,this.pa=Tn();let e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return oy.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},qS="SyncEngine",ZF=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},eV=class{constructor(t){this.key=t,this.Ba=!1}},tV=class{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new zd(a=>VW(a),LS),this.qa=new Map,this.Qa=new Set,this.$a=new hr(Rt.comparator),this.Ka=new Map,this.Ua=new K0,this.Wa={},this.Ga=new Map,this.za=q0.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function bpe(n,t,e=!0){return O(this,null,function*(){let i=v6(n),r,o=i.ka.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Na()):r=yield f6(i,t,e,!0),r})}function wpe(n,t){return O(this,null,function*(){let e=v6(n);yield f6(e,t,!0,!1)})}function f6(n,t,e,i){return O(this,null,function*(){let r=yield rpe(n.localStore,Au(t)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,e),a;return i&&(a=yield Cpe(n,t,o,s==="current",r.resumeToken)),n.isPrimaryClient&&e&&c6(n.remoteStore,r),a})}function Cpe(n,t,e,i,r){return O(this,null,function*(){n.Ha=(p,_,b)=>function(T,k,U,W){return O(this,null,function*(){let K=k.view.ba(U);K.ls&&(K=yield H9(T.localStore,k.query,!1).then(({documents:M})=>k.view.ba(M,K)));let oe=W&&W.targetChanges.get(k.targetId),ae=W&&W.targetMismatches.get(k.targetId)!=null,we=k.view.applyChanges(K,T.isPrimaryClient,oe,ae);return Z9(T,k.targetId,we.Ma),we.snapshot})}(n,p,_,b);let o=yield H9(n.localStore,t,!0),s=new JF(t,o.gs),a=s.ba(o.documents),l=U0.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=s.applyChanges(a,n.isPrimaryClient,l);Z9(n,e,u.Ma);let h=new ZF(t,e,s);return n.ka.set(t,h),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),u.snapshot})}function Epe(n,t,e){return O(this,null,function*(){let i=Lt(n),r=i.ka.get(t),o=i.qa.get(r.targetId);if(o.length>1)return i.qa.set(r.targetId,o.filter(s=>!LS(s,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield NF(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&RV(i.remoteStore,r.targetId),nV(i,r.targetId)}).catch(dy))):(nV(i,r.targetId),yield NF(i.localStore,r.targetId,!0))})}function xpe(n,t){return O(this,null,function*(){let e=Lt(n),i=e.ka.get(t),r=e.qa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),RV(e.remoteStore,i.targetId))})}function Ipe(n,t,e){return O(this,null,function*(){let i=Ppe(n);try{let r=yield function(s,a){let l=Lt(s),u=Gr.now(),h=a.reduce((b,C)=>b.add(C.key),Tn()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=qd(),T=Tn();return l.ds.getEntries(b,h).next(k=>{C=k,C.forEach((U,W)=>{W.isValidDocument()||(T=T.add(U))})}).next(()=>l.localDocuments.getOverlayedDocuments(b,C)).next(k=>{p=k;let U=[];for(let W of a){let K=Afe(W,p.get(W.key).overlayedDocument);K!=null&&U.push(new Pu(W.key,K,AW(K.value.mapValue),ca.exists(!0)))}return l.mutationQueue.addMutationBatch(b,u,U,a)}).next(k=>{_=k;let U=k.applyToLocalDocumentSet(p,T);return l.documentOverlayCache.saveOverlays(b,k.batchId,U)})}).then(()=>({batchId:_.batchId,changes:$W(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Wa[s.currentUser.toKey()];u||(u=new hr(Mn)),u=u.insert(a,l),s.Wa[s.currentUser.toKey()]=u}(i,r.batchId,e),yield iw(i,r.changes),yield US(i.remoteStore)}catch(r){let o=zS(r,"Failed to persist write");e.reject(o)}})}function p6(n,t){return O(this,null,function*(){let e=Lt(n);try{let i=yield tpe(e.localStore,t);t.targetChanges.forEach((r,o)=>{let s=e.Ka.get(o);s&&(Ln(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ba=!0:r.modifiedDocuments.size>0?Ln(s.Ba):r.removedDocuments.size>0&&(Ln(s.Ba),s.Ba=!1))}),yield iw(e,i,t)}catch(i){yield dy(i)}})}function J9(n,t,e){let i=Lt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ka.forEach((o,s)=>{let a=s.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=Lt(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let _ of p.ta)_.sa(a)&&(u=!0)}),u&&VV(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Spe(n,t,e){return O(this,null,function*(){let i=Lt(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Ka.get(t),o=r&&r.key;if(o){let s=new hr(Rt.comparator);s=s.insert(o,Qa.newNoDocument(o,$t.min()));let a=Tn().add(o),l=new cS($t.min(),new Map,new hr(Mn),s,a);yield p6(i,l),i.$a=i.$a.remove(o),i.Ka.delete(t),LV(i)}else yield NF(i.localStore,t,!1).then(()=>nV(i,t,e)).catch(dy)})}function Tpe(n,t){return O(this,null,function*(){let e=Lt(n),i=t.batch.batchId;try{let r=yield epe(e.localStore,t);_6(e,i,null),g6(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield iw(e,r)}catch(r){yield dy(r)}})}function Dpe(n,t,e){return O(this,null,function*(){let i=Lt(n);try{let r=yield function(s,a){let l=Lt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Ln(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,t);_6(i,t,e),g6(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield iw(i,r)}catch(r){yield dy(r)}})}function kpe(n,t){return O(this,null,function*(){let e=Lt(n);wm(e.remoteStore)||at(qS,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=Lt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(i===NS)return void t.resolve();let r=e.Ga.get(i)||[];r.push(t),e.Ga.set(i,r)}catch(i){let r=zS(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function g6(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function _6(n,t,e){let i=Lt(n),r=i.Wa[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Wa[i.currentUser.toKey()]=r}}function nV(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.qa.get(t))n.ka.delete(i),e&&n.La.Ja(i,e);n.qa.delete(t),n.isPrimaryClient&&n.Ua.br(t).forEach(i=>{n.Ua.containsKey(i)||y6(n,i)})}function y6(n,t){n.Qa.delete(t.path.canonicalString());let e=n.$a.get(t);e!==null&&(RV(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ka.delete(e),LV(n))}function Z9(n,t,e){for(let i of e)i instanceof ES?(n.Ua.addReference(i.key,t),Ape(n,i)):i instanceof xS?(at(qS,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,t),n.Ua.containsKey(i.key)||y6(n,i.key)):Dt()}function Ape(n,t){let e=t.key,i=e.path.canonicalString();n.$a.get(e)||n.Qa.has(i)||(at(qS,"New document in limbo: "+e),n.Qa.add(i),LV(n))}function LV(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let t=n.Qa.values().next().value;n.Qa.delete(t);let e=new Rt(rr.fromString(t)),i=n.za.next();n.Ka.set(i,new eV(e)),n.$a=n.$a.insert(e,i),c6(n.remoteStore,new z0(Au(VS(e.path)),i,"TargetPurposeLimboResolution",wV.ae))}}function iw(n,t,e){return O(this,null,function*(){let i=Lt(n),r=[],o=[],s=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{s.push(i.Ha(l,t,e).then(u=>{var h;if((u||e)&&i.isPrimaryClient){let p=u?!u.fromCache:(h=e?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);let p=RF.Yi(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),i.La.p_(r),yield function(l,u){return O(this,null,function*(){let h=Lt(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Te.forEach(u,_=>Te.forEach(_.Hi,b=>h.persistence.referenceDelegate.addReference(p,_.targetId,b)).next(()=>Te.forEach(_.Ji,b=>h.persistence.referenceDelegate.removeReference(p,_.targetId,b)))))}catch(p){if(!hy(p))throw p;at(AV,"Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let b=h.Ts.get(_),C=b.snapshotVersion,T=b.withLastLimboFreeSnapshotVersion(C);h.Ts=h.Ts.insert(_,T)}}})}(i.localStore,o))})}function Rpe(n,t){return O(this,null,function*(){let e=Lt(n);if(!e.currentUser.isEqual(t)){at(qS,"User change. New user:",t.toKey());let i=yield s6(e.localStore,t);e.currentUser=t,function(o,s){o.Ga.forEach(a=>{a.forEach(l=>{l.reject(new it(ge.CANCELLED,s))})}),o.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield iw(e,i.Rs)}})}function Mpe(n,t){let e=Lt(n),i=e.Ka.get(t);if(i&&i.Ba)return Tn().add(i.key);{let r=Tn(),o=e.qa.get(t);if(!o)return r;for(let s of o){let a=e.ka.get(s);r=r.unionWith(a.view.Sa)}return r}}function v6(n){let t=Lt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=p6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mpe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Spe.bind(null,t),t.La.p_=ype.bind(null,t.eventManager),t.La.Ja=vpe.bind(null,t.eventManager),t}function Ppe(n){let t=Lt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tpe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dpe.bind(null,t),t}var b6=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=$S(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),yield this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)})}tu(e,i){return null}nu(e,i){return null}eu(e){return Zfe(this.persistence,new PF,e.initialUser,this.serializer)}Xa(e){return new pS(AF.ri,this.serializer)}Za(e){return new FF}terminate(){return O(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),iV=class extends b6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Ln(this.persistence.referenceDelegate instanceof gS);let i=this.persistence.referenceDelegate.garbageCollector;return new _F(i,t.asyncQueue,e)}Xa(t){let e=this.cacheSizeBytes!==void 0?$c.withCacheSize(this.cacheSizeBytes):$c.DEFAULT;return new pS(i=>gS.ri(i,e),this.serializer)}};var Ope=(()=>{class n{initialize(e,i){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J9(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rpe.bind(null,this.syncEngine),yield _pe(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new YF}()}createDatastore(e){let i=$S(e.databaseInfo.databaseId),r=function(s){return new jF(s)}(e.databaseInfo);return function(s,a,l,u){return new KF(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return function(r,o,s,a,l){return new WF(r,o,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,i=>J9(this.syncEngine,i,0),function(){return yS.D()?new yS:new VF}())}createSyncEngine(e,i){return function(o,s,a,l,u,h,p){let _=new tV(o,s,a,l,u,h);return p&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return O(this,null,function*(){var e,i;yield function(o){return O(this,null,function*(){let s=Lt(o);at(bp,"RemoteStore shutting down."),s.W_.add(5),yield nw(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var G0=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):$d("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var rV=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new it(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(r,o){return O(this,null,function*(){let s=Lt(r),a={documents:o.map(p=>mS(s.serializer,p))},l=yield s.Co("BatchGetDocuments",s.serializer.databaseId,rr.emptyPath(),a,o.length),u=new Map;l.forEach(p=>{let _=Lfe(s.serializer,p);u.set(_.key.toString(),_)});let h=[];return o.forEach(p=>{let _=u.get(p.toString());Ln(!!_),h.push(_)}),h})}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new ry(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{let r=Rt.fromPath(i);this.mutations.push(new aS(r,this.precondition(r)))}),yield function(i,r){return O(this,null,function*(){let o=Lt(i),s={writes:r.map(a=>t6(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,rr.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Dt();e=$t.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new it(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual($t.min())?ca.exists(!1):ca.updateTime(e):ca.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual($t.min()))throw new it(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ca.updateTime(e)}return ca.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var oV=class{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.Tu=i.maxAttempts,this.a_=new H0(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(()=>O(this,null,function*(){let t=new rV(this.datastore),e=this.du(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})}))}du(t){try{let e=this.updateFunction(t);return!tw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!QW(e)}return!1}};var ym="FirestoreClient",sV=class{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Qo.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>O(this,null,function*(){at(ym,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(at(ym,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=zS(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function AN(n,t){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),at(ym,"Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>O(this,null,function*(){i.isEqual(r)||(yield s6(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function eW(n,t){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield Npe(n);at(ym,"Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Q9(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Q9(t.remoteStore,r)),n._onlineComponents=t})}function Npe(n){return O(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){at(ym,"Using user provided OfflineComponentProvider");try{yield AN(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!function(r){return r.name==="FirebaseError"?r.code===ge.FAILED_PRECONDITION||r.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;V0("Error using user provided cache. Falling back to memory cache: "+e),yield AN(n,new b6)}}else at(ym,"Using default OfflineComponentProvider"),yield AN(n,new iV(void 0));return n._offlineComponents})}function BV(n){return O(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(at(ym,"Using user provided OnlineComponentProvider"),yield eW(n,n._uninitializedComponentsProvider._online)):(at(ym,"Using default OnlineComponentProvider"),yield eW(n,new Ope))),n._onlineComponents})}function w6(n){return BV(n).then(t=>t.syncEngine)}function Fpe(n){return BV(n).then(t=>t.datastore)}function IS(n){return O(this,null,function*(){let t=yield BV(n),e=t.eventManager;return e.onListen=bpe.bind(null,t.syncEngine),e.onUnlisten=Epe.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=wpe.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=xpe.bind(null,t.syncEngine),e})}function Vpe(n,t,e={}){let i=new Ha;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let h=new G0({next:_=>{h.su(),s.enqueueAndForget(()=>FV(o,p));let b=_.docs.has(a);!b&&_.fromCache?u.reject(new it(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&l&&l.source==="server"?u.reject(new it(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new W0(VS(a.path),h,{includeMetadataChanges:!0,Ta:!0});return NV(o,p)}(yield IS(n),n.asyncQueue,t,e,i)})),i.promise}function Lpe(n,t,e={}){let i=new Ha;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let h=new G0({next:_=>{h.su(),s.enqueueAndForget(()=>FV(o,p)),_.fromCache&&l.source==="server"?u.reject(new it(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new W0(a,h,{includeMetadataChanges:!0,Ta:!0});return NV(o,p)}(yield IS(n),n.asyncQueue,t,e,i)})),i.promise}function C6(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var tW=new Map;function Bpe(n,t,e){if(!e)throw new it(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function $pe(n,t,e,i){if(t===!0&&i===!0)throw new it(ge.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function nW(n){if(!Rt.isDocumentKey(n))throw new it(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Dt()}function Ru(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new it(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=KS(n);throw new it(ge.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function jpe(n,t){if(t<=0)throw new it(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}var Upe="firestore.googleapis.com",iW=!0,SS=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new it(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Upe,this.ssl=iW}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:iW;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=o6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Yfe)throw new it(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$pe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C6((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new it(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new it(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new it(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},TS=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SS(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MN;switch(i.type){case"firstParty":return new NN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new it(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return O(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=tW.get(e);i&&(at("ComponentProvider","Removing Datastore"),tW.delete(e),i.terminate())}(this),Promise.resolve()}};var Kd=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},la=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Q0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},Q0=class n extends Kd{constructor(t,e,i){super(t,e,VS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new la(this.firestore,null,new Rt(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function $V(n,t,...e){if(n=Bc(n),arguments.length===1&&(t=eS.newId()),Bpe("doc","path",t),n instanceof TS){let i=rr.fromString(t,...e);return nW(i),new la(n,null,new Rt(i))}{if(!(n instanceof la||n instanceof Q0))throw new it(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(rr.fromString(t,...e));return nW(i),new la(n.firestore,n instanceof Q0?n.converter:null,new Rt(i))}}var rW="AsyncQueue",DS=class{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new H0(this,"async_queue_retry"),this.Su=()=>{let i=kN();i&&at(rW,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;let e=kN();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;let e=kN();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});let e=new Ha;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}Cu(){return O(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!hy(t))throw t;at(rW,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(t){let e=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw $d("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=e,e}enqueueAfterDelay(t,e,i){this.Du(),this.wu.indexOf(t)>-1&&(e=0);let r=GF.createAndSchedule(this,t,e,i,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&Dt()}verifyOperationInProgress(){}Mu(){return O(this,null,function*(){let t;do t=this.bu,yield t;while(t!==this.bu)})}xu(t){for(let e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){let e=this.fu.indexOf(t);this.fu.splice(e,1)}};function oW(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Ou=class extends TS{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new DS,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return O(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new DS(t),this._firestoreClient=void 0,yield t}})}};function wp(n){if(n._terminated)throw new it(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zpe(n),n._firestoreClient}function zpe(n){var t,e,i;let r=n._freezeSettings(),o=function(a,l,u,h){return new $N(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,C6(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new sV(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function HS(n){return function(e){let i=new Ha;return e.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return kpe(yield w6(e),i)})),i.promise}(wp(n=Ru(n,Ou)))}var sy=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Yo.fromBase64String(t))}catch(e){throw new it(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Yo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var vm=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new it(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};function WS(){return new vm(VN)}var ay=class{constructor(t){this._methodName=t}};var Y0=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new it(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new it(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Mn(this._lat,t._lat)||Mn(this._long,t._long)}};var X0=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var qpe=/^__.*__$/,aV=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Pu(t,this.data,this.fieldMask,e,this.fieldTransforms):new vp(t,this.data,e,this.fieldTransforms)}},kS=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Pu(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function E6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}var cV=class n{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return RS(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(E6(this.Lu)&&qpe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}},lV=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||$S(t)}ju(t,e,i,r=!1){return new cV({Lu:t,methodName:e,zu:i,path:Wa.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jV(n){let t=n._freezeSettings(),e=$S(n._databaseId);return new lV(n._databaseId,!!t.ignoreUndefinedProperties,e)}function x6(n,t,e,i,r,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,t,e,r);UV("Data must be an object, but it was:",s,i);let a=T6(i,s),l,u;if(o.merge)l=new jc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let _=dV(t,p,e);if(!s.contains(_))throw new it(ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);k6(h,_)||h.push(_)}l=new jc(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new aV(new aa(a),l,u)}var AS=class n extends ay{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};var uV=class n extends ay{_toFieldTransform(t){return new tF(t.path,new gp)}isEqual(t){return t instanceof n}};function I6(n,t,e,i){let r=n.ju(1,t,e);UV("Data must be an object, but it was:",r,i);let o=[],s=aa.empty();bm(i,(l,u)=>{let h=zV(t,l,e);u=Bc(u);let p=r.Ku(h);if(u instanceof AS)o.push(h);else{let _=rw(u,p);_!=null&&(o.push(h),s.set(h,_))}});let a=new jc(o);return new kS(s,a,r.fieldTransforms)}function S6(n,t,e,i,r,o){let s=n.ju(1,t,e),a=[dV(t,i,e)],l=[r];if(o.length%2!=0)throw new it(ge.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(dV(t,o[_])),l.push(o[_+1]);let u=[],h=aa.empty();for(let _=a.length-1;_>=0;--_)if(!k6(u,a[_])){let b=a[_],C=l[_];C=Bc(C);let T=s.Ku(b);if(C instanceof AS)u.push(b);else{let k=rw(C,T);k!=null&&(u.push(b),h.set(b,k))}}let p=new jc(u);return new kS(h,p,s.fieldTransforms)}function Kpe(n,t,e,i=!1){return rw(e,n.ju(i?4:3,t))}function rw(n,t){if(D6(n=Bc(n)))return UV("Unsupported field value:",t,n),T6(n,t);if(n instanceof ay)return function(i,r){if(!E6(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=rw(a,r.Uu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Bc(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ife(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Gr.fromDate(i);return{timestampValue:hS(r.serializer,o)}}if(i instanceof Gr){let o=new Gr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hS(r.serializer,o)}}if(i instanceof Y0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sy)return{bytesValue:XW(r.serializer,i._byteString)};if(i instanceof la){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kV(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof X0)return function(s,a){return{mapValue:{fields:{[EV]:{stringValue:xV},[X_]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return DV(a.serializer,u)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${KS(i)}`)}(n,t)}function T6(n,t){let e={};return CW(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bm(n,(i,r)=>{let o=rw(r,t.qu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function D6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gr||n instanceof Y0||n instanceof sy||n instanceof la||n instanceof ay||n instanceof X0)}function UV(n,t,e){if(!D6(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=KS(e);throw i==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+i)}}function dV(n,t,e){if((t=Bc(t))instanceof vm)return t._internalPath;if(typeof t=="string")return zV(n,t);throw RS("Field path arguments must be of type string or ",n,!1,void 0,e)}var Hpe=new RegExp("[~\\*/\\[\\]]");function zV(n,t,e){if(t.search(Hpe)>=0)throw RS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new vm(...t.split("."))._internalPath}catch{throw RS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function RS(n,t,e,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new it(ge.INVALID_ARGUMENT,a+n+l)}function k6(n,t){return n.some(e=>e.isEqual(t))}var cy=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new la(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new hV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(GS("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},hV=class extends cy{data(){return super.data()}};function GS(n,t){return typeof t=="string"?zV(n,t):t instanceof vm?t._internalPath:t._delegate._internalPath}function A6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new it(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var J0=class{},Z0=class extends J0{};function Cp(n,t,...e){let i=[];t instanceof J0&&i.push(t),i=i.concat(e),function(o){let s=o.filter(l=>l instanceof mV).length,a=o.filter(l=>l instanceof MS).length;if(s>1||s>0&&a>0)throw new it(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var MS=class n extends Z0{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return R6(t._query,e),new Kd(t.firestore,t.converter,eF(t._query,e))}_parse(t){let e=jV(t.firestore);return function(o,s,a,l,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new it(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){aW(p,h);let C=[];for(let T of p)C.push(sW(l,o,T));_={arrayValue:{values:C}}}else _=sW(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||aW(p,h),_=Kpe(a,s,p,h==="in"||h==="not-in");return Ur.create(u,h,_)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function ow(n,t,e){let i=t,r=GS("where",n);return MS._create(r,i,e)}var mV=class n extends J0{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Fl.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)R6(s,l),s=eF(s,l)}(t._query,e),new Kd(t.firestore,t.converter,eF(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var fV=class n extends Z0{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,s){if(r.startAt!==null)throw new it(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new it(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pp(o,s)}(t._query,this._field,this._direction);return new Kd(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new gm(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function sw(n,t="asc"){let e=t,i=GS("orderBy",n);return fV._create(i,e)}var pV=class n extends Z0{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){return new Kd(t.firestore,t.converter,sS(t._query,this._limit,this._limitType))}};function aw(n){return jpe("limit",n),pV._create("limit",n,"F")}function sW(n,t,e){if(typeof(e=Bc(e))=="string"){if(e==="")throw new it(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FW(t)&&e.indexOf("/")!==-1)throw new it(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(rr.fromString(e));if(!Rt.isDocumentKey(i))throw new it(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return T9(n,new Rt(i))}if(e instanceof la)return T9(n,e._key);throw new it(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KS(e)}.`)}function aW(n,t){if(!Array.isArray(n)||n.length===0)throw new it(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function R6(n,t){let e=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new it(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new it(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var PS=class{convertValue(t,e="none"){switch(pm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ji(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ud(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return bm(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[X_].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Ji(s.doubleValue));return new X0(o)}convertGeoPoint(t){return new Y0(Ji(t.latitude),Ji(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=FS(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp($0(t));default:return null}}convertTimestamp(t){let e=jd(t);return new Gr(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=rr.fromString(t);Ln(r6(i));let r=new rS(i.get(1),i.get(3)),o=new Rt(i.popFirst(5));return r.isEqual(e)||$d(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function M6(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var gV=class extends PS{constructor(t){super(),this.firestore=t}convertBytes(t){return new sy(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new la(this.firestore,null,e)}};var mm=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},ew=class extends cy{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(GS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Q_=class extends ew{data(t={}){return super.data(t)}},OS=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new mm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Q_(this._firestore,this._userDataWriter,i.key,i,new mm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new it(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new Q_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mm(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Q_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mm(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Wpe(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Wpe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function P6(n){n=Ru(n,la);let t=Ru(n.firestore,Ou);return Vpe(wp(t),n._key).then(e=>N6(t,n,e))}var ly=class extends PS{constructor(t){super(),this.firestore=t}convertBytes(t){return new sy(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new la(this.firestore,null,e)}};function QS(n){n=Ru(n,Kd);let t=Ru(n.firestore,Ou),e=wp(t),i=new ly(t);return A6(n._query),Lpe(e,n._query).then(r=>new OS(t,i,n,r))}function O6(n,...t){var e,i,r;n=Bc(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||oW(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(oW(t[s])){let p=t[s];t[s]=(e=p.next)===null||e===void 0?void 0:e.bind(p),t[s+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),t[s+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,u,h;if(n instanceof la)u=Ru(n.firestore,Ou),h=VS(n._key.path),l={next:p=>{t[s]&&t[s](N6(u,n,p))},error:t[s+1],complete:t[s+2]};else{let p=Ru(n,Kd);u=Ru(p.firestore,Ou),h=p._query;let _=new ly(u);l={next:b=>{t[s]&&t[s](new OS(u,_,p,b))},error:t[s+1],complete:t[s+2]},A6(n._query)}return function(_,b,C,T){let k=new G0(T),U=new W0(b,k,C);return _.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return NV(yield IS(_),U)})),()=>{k.su(),_.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return FV(yield IS(_),U)}))}}(wp(u),h,a,l)}function Gpe(n,t){return function(i,r){let o=new Ha;return i.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Ipe(yield w6(i),r,o)})),o.promise}(wp(n),t)}function N6(n,t,e){let i=e.docs.get(t._key),r=new ly(n);return new ew(n,r,t._key,i,new mm(e.hasPendingWrites,e.fromCache),t.converter)}var Qpe={maxAttempts:5};var _V=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jV(t)}set(t,e,i){this._verifyNotCommitted();let r=fm(t,this._firestore),o=M6(r.converter,e,i),s=x6(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,ca.none())),this}update(t,e,i,...r){this._verifyNotCommitted();let o=fm(t,this._firestore),s;return s=typeof(e=Bc(e))=="string"||e instanceof vm?S6(this._dataReader,"WriteBatch.update",o._key,e,i,r):I6(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,ca.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=fm(t,this._firestore);return this._mutations=this._mutations.concat(new ry(e._key,ca.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function fm(n,t){if((n=Bc(n)).firestore!==t)throw new it(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var yV=class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=jV(t)}get(t){let e=fm(t,this._firestore),i=new gV(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||r.length!==1)return Dt();let o=r[0];if(o.isFoundDocument())return new cy(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new cy(this._firestore,i,e._key,null,e.converter);throw Dt()})}set(t,e,i){let r=fm(t,this._firestore),o=M6(r.converter,e,i),s=x6(this._dataReader,"Transaction.set",r._key,o,r.converter!==null,i);return this._transaction.set(r._key,s),this}update(t,e,i,...r){let o=fm(t,this._firestore),s;return s=typeof(e=Bc(e))=="string"||e instanceof vm?S6(this._dataReader,"Transaction.update",o._key,e,i,r):I6(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this}delete(t){let e=fm(t,this._firestore);return this._transaction.delete(e._key),this}};var vV=class extends yV{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=fm(t,this._firestore),i=new ly(this._firestore);return super.get(t).then(r=>new ew(this._firestore,i,e._key,r._document,new mm(!1,!1),e.converter))}};function qV(n,t,e){n=Ru(n,Ou);let i=Object.assign(Object.assign({},Qpe),e);return function(o){if(o.maxAttempts<1)throw new it(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Ha;return o.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let u=yield Fpe(o);new oV(o.asyncQueue,u,a,s,l).Iu()})),l.promise}(wp(n),r=>t(new vV(n,r)),i)}function F6(){return new uV("serverTimestamp")}function V6(n){return wp(n=Ru(n,Ou)),new _V(n,t=>Gpe(n,t))}(function(t,e=!0){(function(r){uy=r})(f9),D0(new hm("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Ou(new PN(i.getProvider("auth-internal")),new FN(s,i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new it(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rS(u.options.projectId,h)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),j_(v9,b9,t),j_(v9,b9,"esm2017")})();function L6(n){return n&&typeof n.then=="function"}var Ype=Promise.resolve(!1),B6=Promise.resolve(!0),Ya=Promise.resolve();function Nu(n,t){return n||(n=0),new Promise(function(e){return setTimeout(function(){return e(t)},n)})}function $6(n,t){return Math.floor(Math.random()*(t-n+1)+n)}function Hd(){return Math.random().toString(36).substring(2)}var KV=0;function Wd(){var n=Date.now()*1e3;return n<=KV&&(n=KV+1),KV=n,n}function j6(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var Xpe=Wd,Jpe="native";function Zpe(n){var t={time:Wd(),messagesCallback:null,bc:new BroadcastChannel(n),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function ege(n){n.bc.close(),n.subFns=[]}function tge(n,t){try{return n.bc.postMessage(t,!1),Ya}catch(e){return Promise.reject(e)}}function nge(n,t){n.messagesCallback=t}function ige(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function rge(){return 150}var U6={create:Zpe,close:ege,onMessage:nge,postMessage:tge,canBeUsed:ige,type:Jpe,averageResponseTime:rge,microSeconds:Xpe};var Cm=class{ttl;map=new Map;_to=!1;constructor(t){this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,z6()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,oge(this)},0))}clear(){this.map.clear()}};function oge(n){let t=z6()-n.ttl,e=n.map[Symbol.iterator]();for(;;){let i=e.next().value;if(!i)return;let r=i[0];if(i[1]<t)n.map.delete(r);else return}}function z6(){return Date.now()}function fy(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(n));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),n.idb&&typeof n.idb.onclose=="function"&&(t.idb.onclose=n.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),n.methods&&(t.methods=n.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var sge=Wd,age="pubkey.broadcast-channel-0-",Gd="messages",YS={durability:"relaxed"},cge="idb";function q6(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function HV(n){n.commit&&n.commit()}function lge(n){var t=q6(),e=age+n,i=t.open(e);return i.onupgradeneeded=function(r){var o=r.target.result;o.createObjectStore(Gd,{keyPath:"id",autoIncrement:!0})},new Promise(function(r,o){i.onerror=function(s){return o(s)},i.onsuccess=function(){r(i.result)}})}function uge(n,t,e){var i=Date.now(),r={uuid:t,time:i,data:e},o=n.transaction([Gd],"readwrite",YS);return new Promise(function(s,a){o.oncomplete=function(){return s()},o.onerror=function(u){return a(u)};var l=o.objectStore(Gd);l.add(r),HV(o)})}function dge(n,t){var e=n.transaction(Gd,"readonly",YS),i=e.objectStore(Gd),r=[],o=IDBKeyRange.bound(t+1,1/0);if(i.getAll){var s=i.getAll(o);return new Promise(function(l,u){s.onerror=function(h){return u(h)},s.onsuccess=function(h){l(h.target.result)}})}function a(){try{return o=IDBKeyRange.bound(t+1,1/0),i.openCursor(o)}catch{return i.openCursor()}}return new Promise(function(l,u){var h=a();h.onerror=function(p){return u(p)},h.onsuccess=function(p){var _=p.target.result;_?_.value.id<t+1?_.continue(t+1):(r.push(_.value),_.continue()):(HV(e),l(r))}})}function hge(n,t){if(n.closed)return Promise.resolve([]);var e=n.db.transaction(Gd,"readwrite",YS),i=e.objectStore(Gd);return Promise.all(t.map(function(r){var o=i.delete(r);return new Promise(function(s){o.onsuccess=function(){return s()}})}))}function mge(n,t){var e=Date.now()-t,i=n.transaction(Gd,"readonly",YS),r=i.objectStore(Gd),o=[];return new Promise(function(s){r.openCursor().onsuccess=function(a){var l=a.target.result;if(l){var u=l.value;u.time<e?(o.push(u),l.continue()):(HV(i),s(o))}else s(o)}})}function fge(n){return mge(n.db,n.options.idb.ttl).then(function(t){return hge(n,t.map(function(e){return e.id}))})}function pge(n,t){return t=fy(t),lge(n).then(function(e){var i={closed:!1,lastCursorId:0,channelName:n,options:t,uuid:Hd(),eMIs:new Cm(t.idb.ttl*2),writeBlockPromise:Ya,messagesCallback:null,readQueuePromises:[],db:e};return e.onclose=function(){i.closed=!0,t.idb.onclose&&t.idb.onclose()},K6(i),i})}function K6(n){n.closed||H6(n).then(function(){return Nu(n.options.idb.fallbackInterval)}).then(function(){return K6(n)})}function gge(n,t){return!(n.uuid===t.uuid||t.eMIs.has(n.id)||n.data.time<t.messagesCallbackTime)}function H6(n){return n.closed?Ya:n.messagesCallback?dge(n.db,n.lastCursorId).then(function(t){var e=t.filter(function(i){return!!i}).map(function(i){return i.id>n.lastCursorId&&(n.lastCursorId=i.id),i}).filter(function(i){return gge(i,n)}).sort(function(i,r){return i.time-r.time});return e.forEach(function(i){n.messagesCallback&&(n.eMIs.add(i.id),n.messagesCallback(i.data))}),Ya}):Ya}function _ge(n){n.closed=!0,n.db.close()}function yge(n,t){return n.writeBlockPromise=n.writeBlockPromise.then(function(){return uge(n.db,n.uuid,t)}).then(function(){$6(0,10)===0&&fge(n)}),n.writeBlockPromise}function vge(n,t,e){n.messagesCallbackTime=e,n.messagesCallback=t,H6(n)}function bge(){return!!q6()}function wge(n){return n.idb.fallbackInterval*2}var W6={create:pge,close:_ge,onMessage:vge,postMessage:yge,canBeUsed:bge,type:cge,averageResponseTime:wge,microSeconds:sge};var Cge=Wd,Ege="pubkey.broadcastChannel-",xge="localstorage";function G6(){var n;if(typeof window>"u")return null;try{n=window.localStorage,n=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return n}function Q6(n){return Ege+n}function Ige(n,t){return new Promise(function(e){Nu().then(function(){var i=Q6(n.channelName),r={token:Hd(),time:Date.now(),data:t,uuid:n.uuid},o=JSON.stringify(r);G6().setItem(i,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=i,s.newValue=o,window.dispatchEvent(s),e()})})}function Sge(n,t){var e=Q6(n),i=function(o){o.key===e&&t(JSON.parse(o.newValue))};return window.addEventListener("storage",i),i}function Tge(n){window.removeEventListener("storage",n)}function Dge(n,t){if(t=fy(t),!Y6())throw new Error("BroadcastChannel: localstorage cannot be used");var e=Hd(),i=new Cm(t.localstorage.removeTimeout),r={channelName:n,uuid:e,eMIs:i};return r.listener=Sge(n,function(o){r.messagesCallback&&o.uuid!==e&&(!o.token||i.has(o.token)||o.data.time&&o.data.time<r.messagesCallbackTime||(i.add(o.token),r.messagesCallback(o.data)))}),r}function kge(n){Tge(n.listener)}function Age(n,t,e){n.messagesCallbackTime=e,n.messagesCallback=t}function Y6(){var n=G6();if(!n)return!1;try{var t="__broadcastchannel_check";n.setItem(t,"works"),n.removeItem(t)}catch{return!1}return!0}function Rge(){var n=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?n*2:n}var X6={create:Dge,close:kge,onMessage:Age,postMessage:Ige,canBeUsed:Y6,type:xge,averageResponseTime:Rge,microSeconds:Cge};var J6=Wd,Mge="simulate",WV=new Set;function Pge(n){var t={time:J6(),name:n,messagesCallback:null};return WV.add(t),t}function Oge(n){WV.delete(n)}var Z6=5;function Nge(n,t){return new Promise(function(e){return setTimeout(function(){var i=Array.from(WV);i.forEach(function(r){r.name===n.name&&r!==n&&r.messagesCallback&&r.time<t.time&&r.messagesCallback(t)}),e()},Z6)})}function Fge(n,t){n.messagesCallback=t}function Vge(){return!0}function Lge(){return Z6}var eG={create:Pge,close:Oge,onMessage:Fge,postMessage:Nge,canBeUsed:Vge,type:Mge,averageResponseTime:Lge,microSeconds:J6};var tG=[U6,W6,X6];function nG(n){var t=[].concat(n.methods,tG).filter(Boolean);if(n.type){if(n.type==="simulate")return eG;var e=t.find(function(r){return r.type===n.type});if(e)return e;throw new Error("method-type "+n.type+" not found")}n.webWorkerSupport||(t=t.filter(function(r){return r.type!=="idb"}));var i=t.find(function(r){return r.canBeUsed()});if(i)return i;throw new Error("No usable method found in "+JSON.stringify(tG.map(function(r){return r.type})))}var GV=new Set,Bge=0,cw=function(t,e){this.id=Bge++,GV.add(this),this.name=t,iG&&(e=iG),this.options=fy(e),this.method=nG(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,$ge(this)};cw._pubkey=!0;var iG;cw.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return rG(this,"message",t)},postInternal:function(t){return rG(this,"internal",t)},set onmessage(n){var t=this.method.microSeconds(),e={time:t,fn:n};sG(this,"message",this._onML),n&&typeof n=="function"?(this._onML=e,oG(this,"message",e)):this._onML=null},addEventListener:function(t,e){var i=this.method.microSeconds(),r={time:i,fn:e};oG(this,t,r)},removeEventListener:function(t,e){var i=this._addEL[t].find(function(r){return r.fn===e});sG(this,t,i)},close:function(){var t=this;if(!this.closed){GV.delete(this),this.closed=!0;var e=this._prepP?this._prepP:Ya;return this._onML=null,this._addEL.message=[],e.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(i){return i()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function rG(n,t,e){var i=n.method.microSeconds(),r={time:i,type:t,data:e},o=n._prepP?n._prepP:Ya;return o.then(function(){var s=n.method.postMessage(n._state,r);return n._uMP.add(s),s.catch().then(function(){return n._uMP.delete(s)}),s})}function $ge(n){var t=n.method.create(n.name,n.options);L6(t)?(n._prepP=t,t.then(function(e){n._state=e})):n._state=t}function aG(n){return n._addEL.message.length>0||n._addEL.internal.length>0}function oG(n,t,e){n._addEL[t].push(e),jge(n)}function sG(n,t,e){n._addEL[t]=n._addEL[t].filter(function(i){return i!==e}),Uge(n)}function jge(n){if(!n._iL&&aG(n)){var t=function(r){n._addEL[r.type].forEach(function(o){r.time>=o.time&&o.fn(r.data)})},e=n.method.microSeconds();n._prepP?n._prepP.then(function(){n._iL=!0,n.method.onMessage(n._state,t,e)}):(n._iL=!0,n.method.onMessage(n._state,t,e))}}function Uge(n){if(n._iL&&!aG(n)){n._iL=!1;var t=n.method.microSeconds();n.method.onMessage(n._state,null,t)}}function cG(n){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return n(),t()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){n()},!0),window.addEventListener("unload",function(){n()},!0)}}function lG(n){process.on("exit",function(){return n()}),process.on("beforeExit",function(){return n().then(function(){return process.exit()})}),process.on("SIGINT",function(){return n().then(function(){return process.exit()})}),process.on("uncaughtException",function(t){return n().then(function(){console.trace(t),process.exit(101)})})}var zge=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",qge=zge?lG:cG,lw=new Set,uG=!1;function Kge(){uG||(uG=!0,qge(Hge))}function dG(n){if(Kge(),typeof n!="function")throw new Error("Listener is no function");lw.add(n);var t={remove:function(){return lw.delete(n)},run:function(){return lw.delete(n),n()}};return t}function Hge(){var n=[];return lw.forEach(function(t){n.push(t()),lw.delete(t)}),Promise.all(n)}function Qd(n,t){var e={context:"leader",action:t,token:n.token};return n.broadcastChannel.postInternal(e)}function XS(n){n.isLeader=!0,n._hasLeader=!0;var t=dG(function(){return n.die()});n._unl.push(t);var e=function(r){r.context==="leader"&&r.action==="apply"&&Qd(n,"tell"),r.context==="leader"&&r.action==="tell"&&!n._dpLC&&(n._dpLC=!0,n._dpL(),Qd(n,"tell"))};return n.broadcastChannel.addEventListener("internal",e),n._lstns.push(e),Qd(n,"tell")}var QV=function(t,e){var i=this;this.broadcastChannel=t,t._befC.push(function(){return i.die()}),this._options=e,this.isLeader=!1,this.isDead=!1,this.token=Hd(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+t.method.type+"||"+t.name};QV.prototype={hasLeader:function(){var t=this;return navigator.locks.query().then(function(e){var i=e.held?e.held.filter(function(r){return r.name===t.lN}):[];return!!(i&&i.length>0)})},awaitLeadership:function(){var t=this;if(!this._wLMP){this._wKMC.c=new AbortController;var e=new Promise(function(i,r){t._wKMC.res=i,t._wKMC.rej=r});this._wLMP=new Promise(function(i){navigator.locks.request(t.lN,{signal:t._wKMC.c.signal},function(){return t._wKMC.c=void 0,XS(t),i(),e}).catch(function(){})})}return this._wLMP},set onduplicate(n){},die:function(){var t=this;return this._lstns.forEach(function(e){return t.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Qd(this,"death")}};var hG=function(t,e){var i=this;this.broadcastChannel=t,this._options=e,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Hd(),this._aplQ=Ya,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(s){s.context==="leader"&&(s.action==="death"&&(i._hasLeader=!1),s.action==="tell"&&(i._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};hG.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(t){var e=this;if(this.isLeader)return Nu(0,!0);if(this.isDead)return Nu(0,!1);if(this._aplQC>1)return this._aplQ;var i=function(){if(e.isLeader)return B6;var o=!1,s,a=new Promise(function(h){s=function(){o=!0,h()}}),l=function(p){p.context==="leader"&&p.token!=e.token&&(p.action==="apply"&&p.token>e.token&&s(),p.action==="tell"&&(s(),e._hasLeader=!0))};e.broadcastChannel.addEventListener("internal",l);var u=t?e._options.responseTime*4:e._options.responseTime;return Qd(e,"apply").then(function(){return Promise.race([Nu(u),a.then(function(){return Promise.reject(new Error)})])}).then(function(){return Qd(e,"apply")}).then(function(){return Promise.race([Nu(u),a.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return e.broadcastChannel.removeEventListener("internal",l),o?!1:XS(e).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return i()}).then(function(){e._aplQC=e._aplQC-1}),this._aplQ.then(function(){return e.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=Wge(this)),this._aLP},set onduplicate(n){this._dpL=n},die:function(){var t=this;return this._lstns.forEach(function(e){return t.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Qd(this,"death")}};function Wge(n){return n.isLeader?Ya:new Promise(function(t){var e=!1;function i(){e||(e=!0,n.broadcastChannel.removeEventListener("internal",o),t(!0))}n.applyOnce().then(function(){n.isLeader&&i()});var r=function s(){return Nu(n._options.fallbackInterval).then(function(){if(!(n.isDead||e))if(n.isLeader)i();else return n.applyOnce(!0).then(function(){n.isLeader?i():s()})})};r();var o=function(a){a.context==="leader"&&a.action==="death"&&(n._hasLeader=!1,n.applyOnce().then(function(){n.isLeader&&i()}))};n.broadcastChannel.addEventListener("internal",o),n._lstns.push(o)})}function Gge(n,t){return n||(n={}),n=JSON.parse(JSON.stringify(n)),n.fallbackInterval||(n.fallbackInterval=3e3),n.responseTime||(n.responseTime=t.method.averageResponseTime(t.options)),n}function YV(n,t){if(n._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=Gge(t,n);var e=j6()?new QV(n,t):new hG(n,t);return n._befC.push(function(){return e.die()}),n._leaderElector=e,e}var JS=new Map;function XV(n,t,e,i){var r=JS.get(t);return r||(r={bc:new cw(["RxDB:",n,e].join("|")),refs:new Set},JS.set(t,r)),r.refs.add(i),r.bc}function ZS(n,t){var e=JS.get(n);if(e&&(e.refs.delete(t),e.refs.size===0))return JS.delete(n),e.bc.close()}function mG(n,t,e,i){if(t.multiInstance){var r=i||XV(n,t.databaseInstanceToken,e.databaseName,e),o=new ye,s=_=>{_.storageName===n&&_.databaseName===t.databaseName&&_.collectionName===t.collectionName&&_.version===t.schema.version&&o.next(_.eventBulk)};r.addEventListener("message",s);var a=e.changeStream(),l=!1,u=a.subscribe(_=>{l||r.postMessage({storageName:n,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:_})});e.changeStream=function(){return o.asObservable().pipe(E$(a))};var h=e.close.bind(e);e.close=function(){return O(this,null,function*(){return l=!0,u.unsubscribe(),r.removeEventListener("message",s),i||(yield ZS(t.databaseInstanceToken,e)),h()})};var p=e.remove.bind(e);e.remove=function(){return O(this,null,function*(){return l=!0,u.unsubscribe(),r.removeEventListener("message",s),i||(yield ZS(t.databaseInstanceToken,e)),p()})}}}var pG=new WeakMap,Qge=new WeakMap;function fG(n){return Yi(Qge,n,()=>YV(n))}function Yge(){var n=XV(this.storage.name,this.token,this.name,this),t=this.close.bind(this);this.close=function(){return ZS(this.token,this),t()};var e=fG(n);return e||(e=fG(n),pG.set(this,e)),this.leaderElector=()=>e,e}function Xge(){return this.multiInstance?this.leaderElector().isLeader:!0}function Jge(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):x0}function Zge(n){var t=pG.get(n);t&&t.die()}var e_e=!0,t_e={RxDatabase:n=>{n.leaderElector=Yge,n.isLeader=Xge,n.waitForLeadership=Jge}},gG={name:"leader-election",rxdb:e_e,prototypes:t_e,hooks:{preCloseRxDatabase:{after:Zge}}};function Ep(n){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(n)}function _G(n,t){if(Ep(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(Ep(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function yG(n){var t=_G(n,"string");return Ep(t)=="symbol"?t:t+""}function vG(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,yG(i.key),i)}}function Ds(n,t,e){return t&&vG(n.prototype,t),e&&vG(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function eT(n){return eT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eT(n)}function bG(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function JV(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!n})()}function wG(n,t,e){if(JV())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(n.bind.apply(n,i));return e&&um(r,e.prototype),r}function uw(n){var t=typeof Map=="function"?new Map:void 0;return uw=function(i){if(i===null||!bG(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(i))return t.get(i);t.set(i,r)}function r(){return wG(i,arguments,eT(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),um(r,i)},uw(n)}var ni={isDevMode(){return!1},deepFreezeWhenDevMode(n){return n},tunnelErrorMessage(n){return`
        RxDB Error-Code: `+n+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function n_e(n){var t="";return Object.keys(n).length===0||(t+="-".repeat(20)+`
`,t+=`Parameters:
`,t+=Object.keys(n).map(e=>{var i="[object Object]";try{e==="errors"?i=n[e].map(r=>JSON.stringify(r,Object.getOwnPropertyNames(r))):i=JSON.stringify(n[e],function(r,o){return o===void 0?null:o},2)}catch{}return e+": "+i}).join(`
`),t+=`
`),t}function CG(n,t,e){return`
`+n+`
`+n_e(e)}var i_e=function(n){function t(i,r,o={}){var s,a=CG(r,i,o);return s=n.call(this,a)||this,s.code=i,s.message=a,s.url=ZV(i),s.parameters=o,s.rxdb=!0,s}C0(t,n);var e=t.prototype;return e.toString=function(){return this.message},Ds(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(uw(Error)),r_e=function(n){function t(i,r,o={}){var s,a=CG(r,i,o);return s=n.call(this,a)||this,s.code=i,s.message=a,s.url=ZV(i),s.parameters=o,s.rxdb=!0,s}C0(t,n);var e=t.prototype;return e.toString=function(){return this.message},Ds(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(uw(TypeError));function ZV(n){return"https://rxdb.info/errors.html?console=errors#"+n}function EG(n){return`
Find out more about this error here: `+ZV(n)+` 
`}function Xe(n,t){return new i_e(n,ni.tunnelErrorMessage(n)+EG(n),t)}function dw(n,t){return new r_e(n,ni.tunnelErrorMessage(n)+EG(n),t)}function py(n){return n&&n.status===409?n:!1}var o_e={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function tT(n){return Xe("COL20",{name:o_e[n.status],document:n.documentId,writeError:n})}function Uc(n,t){var e=t;e=e.replace(YH,".properties."),e="properties."+e,e=lp(e);var i=Nd(n,e);return i}function xG(n,t,e){if(typeof t.primaryKey=="string")return e;var i=Xa(t,e),r=e[n];if(r&&r!==i)throw Xe("DOC19",{args:{documentData:e,existingPrimary:r,newPrimary:i},schema:t});return e[n]=i,e}function zr(n){return typeof n=="string"?n:n.key}function IG(n){var t=zr(n.primaryKey),e=Uc(n,t);return ft(e.maxLength)}function Xa(n,t){if(typeof n.primaryKey=="string")return t[n.primaryKey];var e=n.primaryKey;return e.fields.map(i=>{var r=Nd(t,i);if(typeof r>"u")throw Xe("DOC18",{args:{field:i,documentData:t}});return r}).join(e.separator)}function SG(n){var t=V_(n,!0);return t}function s_e(n){return["_deleted",n]}function gy(n){n=Gt(n);var t=zr(n.primaryKey);n.properties=Gt(n.properties),n.additionalProperties=!1,Object.prototype.hasOwnProperty.call(n,"keyCompression")||(n.keyCompression=!1),n.indexes=n.indexes?n.indexes.slice(0):[],n.required=n.required?n.required.slice(0):[],n.encrypted=n.encrypted?n.encrypted.slice(0):[],n.properties._rev={type:"string",minLength:1},n.properties._attachments={type:"object"},n.properties._deleted={type:"boolean"},n.properties._meta=a_e,n.required=n.required?n.required.slice(0):[],n.required.push("_deleted"),n.required.push("_rev"),n.required.push("_meta"),n.required.push("_attachments");var e=eL(n);Ko(n.required,e),n.required=n.required.filter(o=>!o.includes(".")).filter((o,s,a)=>a.indexOf(o)===s),n.version=n.version||0;var i=n.indexes.map(o=>{var s=F_(o)?o.slice(0):[o];return s.includes(t)||s.push(t),s[0]!=="_deleted"&&s.unshift("_deleted"),s});i.length===0&&i.push(s_e(t)),i.push(["_meta.lwt",t]),n.internalIndexes&&n.internalIndexes.map(o=>{i.push(o)});var r=new Set;return i.filter(o=>{var s=o.join(",");return r.has(s)?!1:(r.add(s),!0)}),n.indexes=i,n}var a_e={type:"object",properties:{lwt:{type:"number",minimum:E0,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function eL(n){var t=Object.keys(n.properties).filter(i=>n.properties[i].final),e=zr(n.primaryKey);return t.push(e),typeof n.primaryKey!="string"&&n.primaryKey.fields.forEach(i=>t.push(i)),t}function TG(n,t){for(var e=Object.keys(n.defaultValues),i=0;i<e.length;++i){var r=e[i];(!Object.prototype.hasOwnProperty.call(t,r)||typeof t[r]>"u")&&(t[r]=n.defaultValues[r])}return t}var xp="\uFFFF",Ip=Number.MIN_SAFE_INTEGER;function DG(n,t){var e=t.selector,i=n.indexes?n.indexes.slice(0):[];t.index&&(i=[t.index]);var r=!!t.sort.find(h=>Object.values(h)[0]==="desc"),o=new Set;Object.keys(e).forEach(h=>{var p=Uc(n,h);p&&p.type==="boolean"&&Object.prototype.hasOwnProperty.call(e[h],"$eq")&&o.add(h)});var s=t.sort.map(h=>Object.keys(h)[0]),a=s.filter(h=>!o.has(h)).join(","),l=-1,u;if(i.forEach(h=>{var p=!0,_=!0,b=h.map(W=>{var K=e[W],oe=K?Object.keys(K):[],ae={};if(!K||!oe.length){var we=_?Ip:xp;ae={startKey:we,endKey:p?xp:Ip,inclusiveStart:!0,inclusiveEnd:!0}}else oe.forEach(M=>{if(nT.has(M)){var E=K[M],I=d_e(M,E);ae=Object.assign(ae,I)}});return typeof ae.startKey>"u"&&(ae.startKey=Ip),typeof ae.endKey>"u"&&(ae.endKey=xp),typeof ae.inclusiveStart>"u"&&(ae.inclusiveStart=!0),typeof ae.inclusiveEnd>"u"&&(ae.inclusiveEnd=!0),_&&!ae.inclusiveStart&&(_=!1),p&&!ae.inclusiveEnd&&(p=!1),ae}),C=b.map(W=>W.startKey),T=b.map(W=>W.endKey),k={index:h,startKeys:C,endKeys:T,inclusiveEnd:p,inclusiveStart:_,sortSatisfiedByIndex:!r&&a===h.filter(W=>!o.has(W)).join(","),selectorSatisfiedByIndex:u_e(h,t.selector,C,T)},U=h_e(n,t,k);(U>=l||t.index)&&(l=U,u=k)}),!u)throw Xe("SNH",{query:t});return u}var nT=new Set(["$eq","$gt","$gte","$lt","$lte"]),c_e=new Set(["$eq","$gt","$gte"]),l_e=new Set(["$eq","$lt","$lte"]);function u_e(n,t,e,i){var r=Object.entries(t),o=r.find(([M,E])=>{if(!n.includes(M))return!0;var I=Object.entries(E).find(([P,N])=>!nT.has(P));return I});if(o||t.$and||t.$or)return!1;var s=[],a=new Set;for(var[l,u]of Object.entries(t)){if(!n.includes(l))return!1;var h=Object.keys(u).filter(M=>c_e.has(M));if(h.length>1)return!1;var p=h[0];if(p&&a.add(l),p!=="$eq"){if(s.length>0)return!1;s.push(p)}}var _=[],b=new Set;for(var[C,T]of Object.entries(t)){if(!n.includes(C))return!1;var k=Object.keys(T).filter(M=>l_e.has(M));if(k.length>1)return!1;var U=k[0];if(U&&b.add(C),U!=="$eq"){if(_.length>0)return!1;_.push(U)}}var W=0;for(var K of n){for(var oe of[a,b]){if(!oe.has(K)&&oe.size>0)return!1;oe.delete(K)}var ae=e[W],we=i[W];if(ae!==we&&a.size>0&&b.size>0)return!1;W++}return!0}function d_e(n,t){switch(n){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function h_e(n,t,e){var i=0,r=h=>{h>0&&(i=i+h)},o=10,s=BI(e.startKeys,h=>h!==Ip&&h!==xp);r(s*o);var a=BI(e.startKeys,h=>h!==xp&&h!==Ip);r(a*o);var l=BI(e.startKeys,(h,p)=>h===e.endKeys[p]);r(l*o*1.5);var u=e.sortSatisfiedByIndex?5:0;return r(u),i}var ua=class extends Error{},hw=Symbol("missing"),RG=Object.freeze(new Error("mingo: cycle detected while processing object/array")),oT=n=>{let t=tL(n),e=0,i=t.length;for(;i;)e=(e<<5)-e^t.charCodeAt(--i);return e>>>0},Em=n=>typeof n!="object"&&typeof n!="function"||n===null,MG=n=>Em(n)||As(n)||Vu(n),m_e={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},Qr=(n,t)=>{n===hw&&(n=void 0),t===hw&&(t=void 0);let[e,i]=[n,t].map(r=>m_e[Fu(r)]);return e!==i?e-i:ks(n,t)?0:n<t?-1:n>t?1:0},Vl=class n extends Map{#e=oT;#n=new Map;#t=t=>{let e=this.#e(t);return[(this.#n.get(e)||[]).find(i=>ks(i,t)),e]};constructor(){super()}static init(t){let e=new n;return t&&(e.#e=t),e}clear(){super.clear(),this.#n.clear()}delete(t){if(Em(t))return super.delete(t);let[e,i]=this.#t(t);return super.delete(e)?(this.#n.set(i,this.#n.get(i).filter(r=>!ks(r,e))),!0):!1}get(t){if(Em(t))return super.get(t);let[e,i]=this.#t(t);return super.get(e)}has(t){if(Em(t))return super.has(t);let[e,i]=this.#t(t);return super.has(e)}set(t,e){if(Em(t))return super.set(t,e);let[i,r]=this.#t(t);if(super.has(i))super.set(i,e);else{super.set(t,e);let o=this.#n.get(r)||[];o.push(t),this.#n.set(r,o)}return this}get size(){return super.size}};function De(n,t){if(!n)throw new ua(t)}var Fu=n=>{let t=Object.prototype.toString.call(n),e=t.substring(8,t.length-1).toLowerCase();if(e!=="object")return e;let i=n.constructor;return i==null||i===Object?e:i.name},Xd=n=>typeof n=="boolean",wn=n=>typeof n=="string",f_e=n=>typeof n=="symbol",Kt=n=>!isNaN(n)&&typeof n=="number";var et=Array.isArray,Bn=n=>{if(!n)return!1;let t=Object.getPrototypeOf(n);return(t===Object.prototype||t===null)&&Fu(n)==="object"},p_e=n=>!Em(n),As=n=>n instanceof Date,Vu=n=>n instanceof RegExp,mw=n=>typeof n=="function",Ge=n=>n==null,Lu=(n,t=!0)=>!!n||t&&n==="",Ja=n=>Ge(n)||wn(n)&&!n||et(n)&&n.length===0||Bn(n)&&Object.keys(n).length===0,Bu=n=>et(n)?n:[n],Za=(n,t)=>!!n&&Object.prototype.hasOwnProperty.call(n,t),iL=n=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(n),Yd=(n,t)=>{if(Ge(n)||Xd(n)||Kt(n)||wn(n))return n;if(As(n))return new Date(n);if(Vu(n))return new RegExp(n);if(iL(n)){let e=n.constructor;return new e(n)}if(t instanceof Set||(t=new Set),t.has(n))throw RG;t.add(n);try{if(et(n)){let e=new Array(n.length);for(let i=0;i<n.length;i++)e[i]=Yd(n[i],t);return e}if(Bn(n)){let e={};for(let i of Object.keys(n))e[i]=Yd(n[i],t);return e}}finally{t.delete(n)}return n},kG=n=>n===hw;function sT(n,t){if(kG(n)||Ge(n))return t;if(kG(t)||Ge(t))return n;if(Em(n)||Em(t))return t;et(n)&&et(t)&&De(n.length===t.length,"arrays must be of equal length to merge.");for(let e of Object.keys(t))n[e]=sT(n[e],t[e]);return n}function rL(n,t=oT){let e=[Vl.init(t),Vl.init(t)];if(n.length===0)return[];if(n.some(i=>i.length===0))return[];if(n.length===1)return[...n];n[n.length-1].forEach(i=>e[0].set(i,!0));for(let i=n.length-2;i>-1;i--){if(n[i].forEach(r=>{e[0].has(r)&&e[1].set(r,!0)}),e[1].size===0)return[];e.reverse(),e[1].clear()}return Array.from(e[0].keys())}function xm(n,t=1){let e=new Array;function i(r,o){for(let s=0,a=r.length;s<a;s++)et(r[s])&&(o>0||o<0)?i(r[s],Math.max(-1,o-1)):e.push(r[s])}return i(n,t),e}var g_e=Object.prototype.toString;function PG(n){if(iL(n))return!0;if(typeof n.toString=="function"){let t=Object.getPrototypeOf(n);for(;t!==null;){if(Za(t,"toString")&&t.toString!==g_e)return!0;t=Object.getPrototypeOf(t)}}return!1}function ks(n,t){if(n===t||Object.is(n,t))return!0;if(n===null||t===null||typeof n!=typeof t||typeof n!="object"||n.constructor!==t.constructor)return!1;if(n instanceof Date)return+n==+t;if(n instanceof RegExp)return n.toString()===t.toString();let e=n.constructor;if(e===Array||e===Object){let i=Object.keys(n).sort(),r=Object.keys(t).sort();if(i.length!==r.length)return!1;for(let o=0,s=i[o];o<i.length;s=i[++o])if(s!==r[o]||!ks(n[s],t[s]))return!1;return!0}return PG(n)&&n.toString()===t.toString()}var tL=(n,t)=>{if(n===null)return"null";if(n===void 0)return"undefined";if(wn(n)||Kt(n)||Xd(n))return JSON.stringify(n);if(As(n))return n.toISOString();if(Vu(n)||f_e(n)||mw(n))return n.toString();if(iL(n))return Fu(n)+"["+n.toString()+"]";if(t instanceof Set||(t=new Set),t.has(n))throw RG;try{if(t.add(n),et(n))return"["+n.map(e=>tL(e,t)).join(",")+"]";if(Bn(n))return"{"+Object.keys(n).sort().map(i=>`${i}:${tL(n[i],t)}`).join()+"}";if(PG(n))return Fu(n)+"("+JSON.stringify(n.toString())+")";throw new Error("mingo: cannot stringify custom type without explicit toString() method.")}finally{t.delete(n)}};function OG(n,t){return Ge(n)?null:(t=t||oT,t(n))}function aT(n,t,e=oT){if(n.length<1)return new Map;let i=new Map,r=new Map;for(let o=0;o<n.length;o++){let s=n[o],a=t(s,o),l=OG(a,e);if(l===null)r.has(null)?r.get(null).push(s):r.set(null,[s]);else{let u=i.has(l)?i.get(l).find(h=>ks(h,a)):null;Ge(u)?(r.set(a,[s]),i.has(l)?i.get(l).push(a):i.set(l,[a])):r.get(u).push(s)}}return r}function nL(n,t){return et(n)||Bn(n)?n[t]:void 0}function __e(n,t){if(t<1)return n;for(;t--&&n.length===1;)n=n[0];return n}function ec(n,t,e){let i=0;function r(s,a){let l=s;for(let u=0;u<a.length;u++){let h=a[u];if(/^\d+$/.exec(h)===null&&et(l)){if(u===0&&i>0)break;i+=1;let _=a.slice(u);l=l.reduce((b,C)=>{let T=r(C,_);return T!==void 0&&b.push(T),b},[]);break}else l=nL(l,h);if(l===void 0)break}return l}let o=MG(n)?n:r(n,t.split("."));return et(o)&&e?.unwrapArray?__e(o,i):o}function _y(n,t,e){let i=t.indexOf("."),r=i==-1?t:t.substring(0,i),o=t.substring(i+1),s=i!=-1;if(et(n)){let u=/^\d+$/.test(r),h=u&&e?.preserveIndex?[...n]:[];if(u){let p=parseInt(r),_=nL(n,p);s&&(_=_y(_,o,e)),e?.preserveIndex?h[p]=_:h.push(_)}else for(let p of n){let _=_y(p,t,e);e?.preserveMissing?h.push(_??hw):(_!=null||e?.preserveIndex)&&h.push(_)}return h}let a=e?.preserveKeys?ee({},n):{},l=nL(n,r);if(s&&(l=_y(l,o,e)),l!==void 0)return a[r]=l,a}function iT(n){if(et(n))for(let t=n.length-1;t>=0;t--)n[t]===hw?n.splice(t,1):iT(n[t]);else if(Bn(n))for(let t in n)Za(n,t)&&iT(n[t])}var AG=/^\d+$/;function rT(n,t,e,i){let r=t.split("."),o=r[0],s=r.slice(1).join(".");if(r.length===1)(Bn(n)||et(n)&&AG.test(o))&&e(n,o);else{i?.buildGraph&&Ge(n[o])&&(n[o]={});let a=n[o];if(!a)return;let l=!!(r.length>1&&AG.test(r[1]));et(a)&&i?.descendArray&&!l?a.forEach(u=>rT(u,s,e,i)):rT(a,s,e,i)}}function fw(n,t,e){rT(n,t,(i,r)=>{i[r]=mw(e)?e(i[r]):e},{buildGraph:!0})}function pw(n,t,e){rT(n,t,(i,r)=>{if(et(i)){if(/^\d+$/.test(r))i.splice(parseInt(r),1);else if(e&&e.descendArray)for(let o of i)Bn(o)&&delete o[r]}else Bn(i)&&delete i[r]},e)}var y_e=/^\$[a-zA-Z0-9_]+$/;function zc(n){return y_e.test(n)}function cT(n){if(MG(n))return Vu(n)?{$regex:n}:{$eq:n};if(p_e(n)){if(!Object.keys(n).some(zc))return{$eq:n};if(Za(n,"$regex")){let t=ee({},n);return t.$regex=new RegExp(n.$regex,n.$options),delete t.$options,t}}return n}var vy=(n=>(n[n.CLONE_OFF=0]="CLONE_OFF",n[n.CLONE_INPUT=1]="CLONE_INPUT",n[n.CLONE_OUTPUT=2]="CLONE_OUTPUT",n[n.CLONE_ALL=3]="CLONE_ALL",n))(vy||{}),Zi=class n{#e;#n;#t;constructor(t,e,i){this.#e=t,this.update(e,i)}static init(t,e,i){return t instanceof n?new n(t.#e,t.root??e,Qe(ee(ee({},t.#t),i),{variables:Object.assign({},t.#t?.variables,i?.variables)})):new n(t,e,i)}update(t,e){this.#n=t;let i=Object.assign({},this.#t?.variables,e?.variables);return Object.keys(i).length?this.#t=Qe(ee({},e),{variables:i}):this.#t=e??{},this}getOptions(){return Object.freeze(Qe(ee({},this.#e),{context:yy.from(this.#e.context)}))}get root(){return this.#n}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}};function gw(n){return n instanceof Zi?n.getOptions():Object.freeze(Qe(ee({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0},n),{context:n?.context?yy.from(n?.context):yy.init()}))}var uT=(n=>(n.ACCUMULATOR="accumulator",n.EXPRESSION="expression",n.PIPELINE="pipeline",n.PROJECTION="projection",n.QUERY="query",n.WINDOW="window",n))(uT||{}),yy=class n{#e=new Map;constructor(){}static init(){return new n}static from(t){let e=n.init();return Ge(t)||t.#e.forEach((i,r)=>e.addOperators(r,i)),e}addOperators(t,e){this.#e.has(t)||this.#e.set(t,{});for(let[i,r]of Object.entries(e))this.getOperator(t,i)||(this.#e.get(t)[i]=r);return this}getOperator(t,e){return(this.#e.get(t)??{})[e]??null}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}},Sp=yy.init();function oL(n,t){for(let[e,i]of Object.entries(t)){De(mw(i)&&zc(e),`'${e}' is not a valid operator`);let r=Jd(n,e,null);De(!r||i===r,`${e} already exists for '${n}' operators. Cannot change operator function once registered.`)}switch(n){case"accumulator":Sp.addAccumulatorOps(t);break;case"expression":Sp.addExpressionOps(t);break;case"pipeline":Sp.addPipelineOps(t);break;case"projection":Sp.addProjectionOps(t);break;case"query":Sp.addQueryOps(t);break;case"window":Sp.addWindowOps(t);break}}function Jd(n,t,e){let{context:i,useGlobalContext:r}=e||{},o=i?i.getOperator(n,t):null;return!o&&r?Sp.getOperator(n,t):o}function me(n,t,e,i){let r=Zi.init(i,n);return e&&zc(e)?NG(n,t,e,r):lT(n,t,r)}var v_e=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function lT(n,t,e){if(wn(t)&&t.length>0&&t[0]==="$"){if(b_e.includes(t))return t;let i=e.root,r=t.split(".");if(v_e.includes(r[0])){switch(r[0]){case"$$ROOT":break;case"$$CURRENT":i=n;break;case"$$REMOVE":i=void 0;break;case"$$NOW":i=new Date;break}t=t.slice(r[0].length+1)}else if(r[0].slice(0,2)==="$$"){i=Object.assign({},e.variables,{this:n},e?.local?.variables);let o=r[0].slice(2);De(Za(i,o),`Use of undefined variable: ${o}`),t=t.slice(2)}else t=t.slice(1);return t===""?i:ec(i,t)}if(et(t))return t.map(i=>lT(n,i,e));if(Bn(t)){let i={},r=Object.entries(t);for(let[o,s]of r){if(zc(o))return De(r.length==1,"expression must have single operator."),NG(n,s,o,e);i[o]=lT(n,s,e)}return i}return t}function NG(n,t,e,i){let r=Jd("expression",e,i);if(r)return r(n,t,i);let o=Jd("accumulator",e,i);return De(!!o,`accumulator '${e}' is not registered.`),et(n)||(n=lT(n,t,i),t=null),De(et(n),`arguments must resolve to array for ${e}.`),o(n,t,i.update(null,i.local))}var b_e=["$$KEEP","$$PRUNE","$$DESCEND"];function co(n){return n instanceof _w?n:new _w(n)}function yw(...n){let t=0;return co(()=>{for(;t<n.length;){let e=n[t].next();if(!e.done)return e;t++}return{done:!0}})}function w_e(n){return!!n&&typeof n=="object"&&n?.next instanceof Function}function C_e(n,t){let e=n.slice(t+1);n.splice(t),Array.prototype.push.apply(n,e)}var sL=new Error;function E_e(n,t,e){let i=!1,r=-1,o=0;return function(s){try{e:for(;!i;){let a=n();r++;let l=-1,u=t.length,h=!1;for(;++l<u;){let p=t[l];switch(p.action){case 0:a=p.func(a,r);break;case 1:if(!p.func(a,r))continue e;break;case 2:--p.count,p.count||(h=!0);break;case 3:--p.count,p.count||C_e(t,l);continue e;default:break e}}if(i=h,s)e[o++]=a;else return{value:a,done:!1}}}catch(a){if(a!==sL)throw a}return i=!0,{done:i}}}var _w=class{constructor(t){this.#e=[],this.#n=[],this.isDone=!1;let e;if(t instanceof Function&&(t={next:t}),w_e(t)){let i=t;e=()=>{let r=i.next();if(r.done)throw sL;return r.value}}else if(et(t)){let i=t,r=i.length,o=0;e=()=>{if(o<r)return i[o++];throw sL}}else if(!(t instanceof Function))throw new ua("Lazy must be initialized with an array, generator, or function.");this.#t=E_e(e,this.#e,this.#n)}#e;#n;#t;push(t,e){return typeof e=="function"?this.#e.push({action:t,func:e}):typeof e=="number"&&this.#e.push({action:t,count:e}),this}next(){return this.#t()}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){let e=this,i;return co(()=>(i||(i=co(t(e.value()))),i.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#n}each(t){for(;;){let e=this.next();if(e.done)break;if(t(e.value)===!1)return!1}return!0}reduce(t,e){let i=this.next();for(e===void 0&&!i.done&&(e=i.value,i=this.next());!i.done;)e=t(e,i.value),i=this.next();return e}size(){return this.reduce((t,e)=>++t,0)}[Symbol.iterator](){return this}};var FG=(n,t,e)=>n.take(t);var vw=(n,t,e)=>Ja(t)?n:(LG(t,e),n.map(VG(t,Zi.init(e))));function VG(n,t,e=!0){let i=t.idKey,r=Object.keys(n),o=new Array,s=new Array,a={};for(let b of r){let C=n[b];if(Kt(C)||Xd(C))C?s.push(b):o.push(b);else if(et(C))a[b]=T=>C.map(k=>me(T,k,null,t.update(T))??null);else if(Bn(C)){let T=Object.keys(C),k=T.length==1?T[0]:"",U=Jd("projection",k,t);U?k==="$slice"&&!Bu(C[k]).every(Kt)?a[b]=K=>me(K,C,b,t.update(K)):a[b]=K=>U(K,C[k],b,t.update(K)):zc(k)?a[b]=W=>me(W,C[k],k,t):(LG(C,t),a[b]=W=>{if(!Za(W,b))return me(W,C,null,t);e&&t.update(W);let K=ec(W,b),oe=VG(C,t,!1);return et(K)?K.map(oe):Bn(K)?oe(K):oe(W)})}else a[b]=wn(C)&&C[0]==="$"?T=>me(T,C,b,t):T=>C}let l=Object.keys(a),u=o.includes(i);if(e&&u&&o.length===1&&!s.length&&!l.length)return b=>{let C=ee({},b);return delete C[i],C};let p=e&&!u&&!s.includes(i),_={preserveMissing:!0};return b=>{let C={};if(o.length&&!s.length){sT(C,b);for(let T of o)pw(C,T,{descendArray:!0})}for(let T of s){let k=_y(b,T,_)??{};sT(C,k)}s.length&&iT(C);for(let T of l){let k=a[T](b);k===void 0?pw(C,T,{descendArray:!0}):fw(C,T,k)}return p&&Za(b,i)&&(C[i]=ec(b,i)),C}}function LG(n,t){let e=!1,i=!1;for(let[r,o]of Object.entries(n))De(!r.startsWith("$"),"Field names may not start with '$'."),De(!r.endsWith(".$"),"Positional projection operator '$' is not supported."),r!==t?.idKey&&(o===0||o===!1?e=!0:(o===1||o===!0)&&(i=!0),De(!(e&&i),"Projection cannot have a mix of inclusion and exclusion."))}var BG=(n,t,e)=>n.drop(t);var $u=(n,t,e)=>{if(Ja(t)||!Bn(t))return n;let i=Qr,r=e.collation;return Bn(r)&&wn(r.locale)&&(i=I_e(r)),n.transform(o=>{let s=Object.keys(t);for(let a of s.reverse()){let l=aT(o,p=>ec(p,a),e.hashFunction),u=Array.from(l.keys()).sort(i);t[a]===-1&&u.reverse();let h=0;for(let p of u)for(let _ of l.get(p))o[h++]=_;De(h==o.length,"bug: counter must match collection size.")}return o})},x_e={1:"base",2:"accent",3:"variant"};function I_e(n){let t={sensitivity:x_e[n.strength||3],caseFirst:n.caseFirst==="off"?"false":n.caseFirst||"false",numeric:n.numericOrdering||!1,ignorePunctuation:n.alternate==="shifted"};(n.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));let e=new Intl.Collator(n.locale,t);return(i,r)=>{if(!wn(i)||!wn(r))return Qr(i,r);let o=e.compare(i,r);return o<0?-1:o>0?1:0}}var S_e={$sort:$u,$skip:BG,$limit:FG},dT=class{#e;#n;#t;#r;#s={};#i=null;#o=[];constructor(t,e,i,r){this.#e=t,this.#n=e,this.#t=i,this.#r=r}fetch(){if(this.#i)return this.#i;this.#i=co(this.#e).filter(this.#n);let t=this.#r.processingMode;t&vy.CLONE_INPUT&&this.#i.map(Yd);for(let e of["$sort","$skip","$limit"])Za(this.#s,e)&&(this.#i=S_e[e](this.#i,this.#s[e],this.#r));return Object.keys(this.#t).length&&(this.#i=vw(this.#i,this.#t,this.#r)),t&vy.CLONE_OUTPUT&&this.#i.map(Yd),this.#i}fetchAll(){let t=co([...this.#o]);return this.#o=[],yw(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.#s.$skip=t,this}limit(t){return this.#s.$limit=t,this}sort(t){return this.#s.$sort=t,this}collation(t){return this.#r=Qe(ee({},this.#r),{collation:t}),this}next(){if(this.#o.length>0)return this.#o.pop();let t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(this.#o.length>0)return!0;let t=this.fetch().next();return t.done?!1:(this.#o.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}};var T_e=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"])),tc=class{#e;#n;#t;constructor(t,e){this.#t=Yd(t),this.#n=gw(e),this.#e=[],this.compile()}compile(){De(Bn(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);let t={};for(let[e,i]of Object.entries(this.#t)){if(e==="$where")De(this.#n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(t,{field:e,expr:i});else if(T_e.has(e))this.processOperator(e,e,i);else{De(!zc(e),`unknown top level operator: ${e}`);for(let[r,o]of Object.entries(cT(i)))this.processOperator(e,r,o)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,e,i){let r=Jd("query",e,this.#n);De(!!r,`unknown query operator ${e}`),this.#e.push(r(t,i,this.#n))}test(t){return this.#e.every(e=>e(t))}find(t,e){return new dT(t,i=>this.test(i),e||{},this.#n)}remove(t){return t.reduce((e,i)=>(this.test(i)||e.push(i),e),[])}};var Kje=Object.freeze({R5:[10,16,25,40,63],R10:[100,125,160,200,250,315,400,500,630,800],R20:[100,112,125,140,160,180,200,224,250,280,315,355,400,450,500,560,630,710,800,900],R40:[100,106,112,118,125,132,140,150,160,170,180,190,200,212,224,236,250,265,280,300,315,355,375,400,425,450,475,500,530,560,600,630,670,710,750,800,850,900,950],R80:[103,109,115,122,128,136,145,155,165,175,185,195,206,218,230,243,258,272,290,307,325,345,365,387,412,437,462,487,515,545,575,615,650,690,730,775,825,875,925,975],"1-2-5":[10,20,50],E6:[10,15,22,33,47,68],E12:[10,12,15,18,22,27,33,39,47,56,68,82],E24:[10,11,12,13,15,16,18,20,22,24,27,30,33,36,39,43,47,51,56,62,68,75,82,91],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,255,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,665,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]});var jG=7;var by=1e3*60*60*24,UG={week:by*jG,day:by,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1},D_e=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"],k_e=new Set(D_e),eUe=Object.freeze({mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7});var zG=Object.freeze({"%Y":{name:"year",padding:4,re:/([0-9]{4})/},"%G":{name:"year",padding:4,re:/([0-9]{4})/},"%m":{name:"month",padding:2,re:/(0[1-9]|1[012])/},"%d":{name:"day",padding:2,re:/(0[1-9]|[12][0-9]|3[01])/},"%H":{name:"hour",padding:2,re:/([01][0-9]|2[0-3])/},"%M":{name:"minute",padding:2,re:/([0-5][0-9])/},"%S":{name:"second",padding:2,re:/([0-5][0-9]|60)/},"%L":{name:"millisecond",padding:3,re:/([0-9]{3})/},"%u":{name:"weekday",padding:1,re:/([1-7])/},"%U":{name:"week",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%V":{name:"isoWeek",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%z":{name:"timezone",padding:2,re:/(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/},"%Z":{name:"minuteOffset",padding:3,re:/([+-][0-9]{3})/}});var dUe=Object.freeze({});var M4e={week:by*7,day:by,hour:by/24,minute:6e4,second:1e3,millisecond:1};function li(n){return(e,i,r)=>{let o={unwrapArray:!0},s=Math.max(1,e.split(".").length-1);return a=>{let l=ec(a,e,o);return n(l,i,Qe(ee({},r),{depth:s}))}}}function da(n){return(t,e,i)=>{let r=me(t,e,null,i);return n(...r)}}function bw(n,t,e){return ks(n,t)||Ge(n)&&Ge(t)?!0:et(n)?n.some(i=>ks(i,t))||xm(n,e?.depth).some(i=>ks(i,t)):!1}function hT(n,t,e){return!bw(n,t,e)}function cL(n,t,e){return Ge(n)?t.some(i=>i===null):rL([Bu(n),t],e?.hashFunction).length>0}function mT(n,t,e){return!cL(n,t,e)}function fT(n,t,e){return yT(n,t,(i,r)=>Qr(i,r)<0)}function pT(n,t,e){return yT(n,t,(i,r)=>Qr(i,r)<=0)}function gT(n,t,e){return yT(n,t,(i,r)=>Qr(i,r)>0)}function _T(n,t,e){return yT(n,t,(i,r)=>Qr(i,r)>=0)}function GG(n,t,e){return Bu(n).some(i=>t.length===2&&i%t[0]===t[1])}function QG(n,t,e){let i=Bu(n),r=o=>wn(o)&&Lu(t.exec(o),e?.useStrictMode);return i.some(r)||xm(i,1).some(r)}function YG(n,t,e){return(t===!1||t===0)&&n===void 0||(t===!0||t===1)&&n!==void 0}function XG(n,t,e){if(!et(n)||!et(t)||!n.length||!t.length)return!1;let i=!0;for(let r of t){if(!i)break;Bn(r)&&Object.keys(r).includes("$elemMatch")?i=lL(n,r.$elemMatch,e):Vu(r)?i=n.some(o=>typeof o=="string"&&r.test(o)):i=n.some(o=>ks(r,o))}return i}function JG(n,t,e){return Array.isArray(n)&&n.length===t}function j_e(n){return zc(n)&&["$and","$or","$nor"].indexOf(n)===-1}function lL(n,t,e){if(et(n)&&!Ja(n)){let i=s=>s,r=t;Object.keys(t).every(j_e)&&(r={temp:t},i=s=>({temp:s}));let o=new tc(r,e);for(let s=0,a=n.length;s<a;s++)if(o.test(i(n[s])))return!0}return!1}var HG=n=>n===null,U_e={array:et,boolean:Xd,bool:Xd,date:As,number:Kt,int:Kt,long:Kt,double:Kt,decimal:Kt,null:HG,object:Bn,regexp:Vu,regex:Vu,string:wn,undefined:Ge,function:n=>{throw new ua("unsupported type key `function`.")},1:Kt,2:wn,3:Bn,4:et,6:Ge,8:Xd,9:As,10:HG,11:Vu,16:Kt,18:Kt,19:Kt};function WG(n,t,e){let i=U_e[t];return i?i(n):!1}function ZG(n,t,e){return et(t)?t.findIndex(i=>WG(n,i,e))>=0:WG(n,t,e)}function yT(n,t,e){return Bu(n).some(i=>Fu(i)===Fu(t)&&e(i,t))}var G5e=da(mT);var wy=(n,t)=>(e,i,r)=>{De(et(i),`${n}: expression must be an array.`);let o=me(e,i,null,r);return o.some(Ge)?null:(De(o.every(Kt),`${n}: expression must evalue to array of numbers.`),t(o))};var KKe=wy("$bitAnd",n=>n.reduce((t,e)=>t&e,-1));var XKe=wy("$bitOr",n=>n.reduce((t,e)=>t|e,0));var eHe=wy("$bitXor",n=>n.reduce((t,e)=>t^e,0));var xHe=da(bw);var THe=da(gT);var AHe=da(_T);var PHe=da(fT);var FHe=da(pT);var BHe=da(hT);var e8=(n,t)=>{let e={};return n.split("").forEach((i,r)=>e[i]=t*(r+1)),e},v9e=Qe(ee(ee({},e8("ABCDEFGHIKLM",1)),e8("NOPQRSTUVWXY",-1)),{Z:0});var r8={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Pi(n,t=r8){let e=Object.assign({},r8,t),i=new Set(Object.keys(e));return(r,o,s)=>{let a=me(r,o,null,s);if(i.has(`${a}`)){let l=e[`${a}`];if(l instanceof Error)throw new ua(`cannot apply $${n.name} to -inf, value must in (-inf,inf)`);return l}return n(a)}}var O8e=Pi(Math.acos,{Infinity:1/0,0:new Error});var V8e=Pi(Math.acosh,{Infinity:1/0,0:new Error});var $8e=Pi(Math.asin);var z8e=Pi(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var H8e=Pi(Math.atan);var J8e=Pi(Math.atanh,{1:1/0,"-1":-1/0});var tQe=Pi(Math.cos);var rQe=Pi(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var X_e=Math.PI/180,aQe=Pi(n=>n*X_e,{Infinity:1/0,"-Infinity":1/0});var J_e=180/Math.PI,uQe=Pi(n=>n*J_e,{Infinity:1/0,"-Infinity":-1/0});var mQe=Pi(Math.sin);var gQe=Pi(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var vQe=Pi(Math.tan);var Z_e=Number.MAX_SAFE_INTEGER,eye=Number.MIN_SAFE_INTEGER;var s8=(n,t,e)=>{De(et(t),"Invalid expression: $and expects value to be an Array.");let i=t.map(r=>new tc(r,e));return r=>i.every(o=>o.test(r))};var bT=(n,t,e)=>{De(et(t),"Invalid expression. $or expects value to be an Array");let i=t.map(r=>new tc(r,e));return r=>i.some(o=>o.test(r))};var a8=(n,t,e)=>{De(et(t),"Invalid expression. $nor expects value to be an array.");let i=bT("$or",t,e);return r=>!i(r)};var c8=(n,t,e)=>{let i={};i[n]=cT(t);let r=new tc(i,e);return o=>!r.test(o)};var uL=li(bw);var dL=li(gT);var hL=li(_T);var mL=li(cL);var fL=li(fT);var pL=li(pT);var gL=li(hT);var _L=li(mT);var l8=li(GG);var u8=li(QG);var wJe=li(XG);var d8=li(lL);var h8=li(JG);var m8=li(YG);var f8=li(ZG);var p8=!1;function g8(n){return p8||(oL(uT.PIPELINE,{$sort:$u,$project:vw}),oL(uT.QUERY,{$and:s8,$eq:uL,$elemMatch:d8,$exists:m8,$gt:dL,$gte:hL,$in:mL,$lt:fL,$lte:pL,$ne:gL,$nin:_L,$mod:l8,$nor:a8,$not:c8,$or:bT,$regex:u8,$size:h8,$type:f8}),p8=!0),new tc(n)}function Im(n,t){var e=zr(n.primaryKey);t=Gt(t);var i=So(t);if(typeof i.skip!="number"&&(i.skip=0),i.selector?(i.selector=i.selector,Object.entries(i.selector).forEach(([u,h])=>{(typeof h!="object"||h===null)&&(i.selector[u]={$eq:h})})):i.selector={},i.index){var r=Du(i.index);r.includes(e)||r.push(e),i.index=r}if(i.sort){var l=i.sort.find(u=>$H(u)===e);l||(i.sort=i.sort.slice(0),i.sort.push({[e]:"asc"}))}else if(i.index)i.sort=i.index.map(u=>({[u]:"asc"}));else{if(n.indexes){var o=new Set;Object.entries(i.selector).forEach(([u,h])=>{var p=!1;typeof h=="object"&&h!==null?p=!!Object.keys(h).find(_=>nT.has(_)):p=!0,p&&o.add(u)});var s=-1,a;n.indexes.forEach(u=>{var h=F_(u)?u:[u],p=h.findIndex(_=>!o.has(_));p>0&&p>s&&(s=p,a=h)}),a&&(i.sort=a.map(u=>({[u]:"asc"})))}i.sort||(i.sort=[{[e]:"asc"}])}return i}function wT(n,t){if(!t.sort)throw Xe("SNH",{query:t});var e=[];t.sort.forEach(r=>{var o=Object.keys(r)[0],s=Object.values(r)[0];e.push({key:o,direction:s,getValueFn:BH(o)})});var i=(r,o)=>{for(var s=0;s<e.length;++s){var a=e[s],l=a.getValueFn(r),u=a.getValueFn(o);if(l!==u){var h=a.direction==="asc"?Qr(l,u):Qr(u,l);return h}}};return i}function Cy(n,t){if(!t.sort)throw Xe("SNH",{query:t});var e=g8(t.selector),i=r=>e.test(r);return i}function Ey(n,t){return O(this,null,function*(){var e=yield n.exec();if(!e)return null;if(Array.isArray(e))return Promise.all(e.map(r=>t(r)));if(e instanceof Map)return Promise.all([...e.values()].map(r=>t(r)));var i=yield t(e);return i})}function xy(n,t){if(!t.sort)throw Xe("SNH",{query:t});var e=DG(n,t);return{query:t,queryPlan:e}}var Iy={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function mr(n,t){Iy[n].length>0&&Iy[n].forEach(e=>e(t))}function Ll(n,t){return O(this,null,function*(){for(var e of Iy[n])yield e(t)})}var _8="_rxdb_internal";function Cw(n,t){return O(this,null,function*(){var e=yield n.findDocumentsById([t],!1),i=e[0];if(i)return i})}function vL(n,t,e){return O(this,null,function*(){var i=yield n.bulkWrite([t],e);if(i.error.length>0){var r=i.error[0];throw r}else{var o=zr(n.schema.primaryKey),s=uo(o,[t],i),a=s[0];return a}})}function Sm(n){return Object.assign({},...n)}function Sy(n,t,e,i){if(i)throw i.status===409?Xe("CONFLICT",{collection:n.name,id:t,writeError:i,data:e}):i.status===422?Xe("VD2",{collection:n.name,id:t,writeError:i,data:e}):i}function y8(n,t,e,i,r,o,s){for(var a=!!n.schema.attachments,l=[],u=[],h=[],p=cp(10),_={id:p,events:[],checkpoint:null,context:r},b=_.events,C=[],T=[],k=[],U=e.size>0,W,K=i.length,oe=function(){var we=i[ae],M=we.document,E=we.previous,I=M[t],P=M._deleted,N=E&&E._deleted,V=void 0;U&&(V=e.get(I));var S;if(V){var fr=V._rev;if(!E||E&&fr!==E._rev){var Ti={isError:!0,status:409,documentId:I,writeRow:we,documentInDb:V};return h.push(Ti),1}var Dn=a?yL(we):we;a&&(P?E&&Object.keys(E._attachments).forEach(ct=>{T.push({documentId:I,attachmentId:ct,digest:ft(E)._attachments[ct].digest})}):(Object.entries(M._attachments).find(([ct,Ci])=>{var er=E?E._attachments[ct]:void 0;return!er&&!Ci.data&&(S={documentId:I,documentInDb:V,isError:!0,status:510,writeRow:we,attachmentId:ct}),!0}),S||Object.entries(M._attachments).forEach(([ct,Ci])=>{var er=E?E._attachments[ct]:void 0;if(!er)C.push({documentId:I,attachmentId:ct,attachmentData:Ci,digest:Ci.digest});else{var zm=Dn.document._attachments[ct].digest;Ci.data&&er.digest!==zm&&k.push({documentId:I,attachmentId:ct,attachmentData:Ci,digest:Ci.digest})}}))),S?h.push(S):(a?(u.push(yL(Dn)),s&&s(M)):(u.push(Dn),s&&s(M)),W=Dn);var xr=null,Qt=null,Yn=null;if(N&&!P)Yn="INSERT",xr=a?qc(M):M;else if(E&&!N&&!P)Yn="UPDATE",xr=a?qc(M):M,Qt=E;else if(P)Yn="DELETE",xr=ft(M),Qt=E;else throw Xe("SNH",{args:{writeRow:we}});var Cn={documentId:I,documentData:xr,previousDocumentData:Qt,operation:Yn};b.push(Cn)}else{var Ot=!!P;if(a&&Object.entries(M._attachments).forEach(([ct,Ci])=>{Ci.data?C.push({documentId:I,attachmentId:ct,attachmentData:Ci,digest:Ci.digest}):(S={documentId:I,isError:!0,status:510,writeRow:we,attachmentId:ct},h.push(S))}),S||(a?(l.push(yL(we)),o&&o(M)):(l.push(we),o&&o(M)),W=we),!Ot){var On={documentId:I,operation:"INSERT",documentData:a?qc(M):M,previousDocumentData:a&&E?qc(E):E};b.push(On)}}},ae=0;ae<K;ae++)oe();return{bulkInsertDocs:l,bulkUpdateDocs:u,newestRow:W,errors:h,eventBulk:_,attachmentsAdd:C,attachmentsRemove:T,attachmentsUpdate:k}}function yL(n){return{previous:n.previous,document:qc(n.document)}}function oye(n){return atob(n).length}function sye(n){var t=n.data;if(!t)return n;var e={length:oye(t),digest:n.digest,type:n.type};return e}function qc(n){if(!n._attachments||Object.keys(n._attachments).length===0)return n;var t=Gt(n);return t._attachments={},Object.entries(n._attachments).forEach(([e,i])=>{t._attachments[e]=sye(i)}),t}function Zd(n){return Object.assign({},n,{_meta:Gt(n._meta)})}function CT(n,t,e){ni.deepFreezeWhenDevMode(e);var i=zr(t.schema.primaryKey),r={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(s,a){return O(this,null,function*(){for(var l=n.token,u=new Array(s.length),h=Xi(),p=0;p<s.length;p++){var _=s[p],b=Zd(_.document);b._meta.lwt=h;var C=_.previous;b._rev=Ss(l,C),u[p]={document:b,previous:C}}mr("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:u});var T=yield n.lockedRun(()=>t.bulkWrite(u,a)),k={error:[]};w8.set(k,u);var U=T.error.length===0?[]:T.error.filter(M=>M.status===409&&!M.writeRow.previous&&!M.writeRow.document._deleted&&ft(M.documentInDb)._deleted?!0:(k.error.push(M),!1));if(U.length>0){var W=new Set,K=U.map(M=>(W.add(M.documentId),{previous:M.documentInDb,document:Object.assign({},M.writeRow.document,{_rev:Ss(n.token,M.documentInDb)})})),oe=yield n.lockedRun(()=>t.bulkWrite(K,a));Ko(k.error,oe.error);var ae=uo(i,u,k,W),we=uo(i,K,oe);return Ko(ae,we),k}return k})},query(s){return n.lockedRun(()=>t.query(s))},count(s){return n.lockedRun(()=>t.count(s))},findDocumentsById(s,a){return n.lockedRun(()=>t.findDocumentsById(s,a))},getAttachmentData(s,a,l){return n.lockedRun(()=>t.getAttachmentData(s,a,l))},getChangedDocumentsSince:t.getChangedDocumentsSince?(s,a)=>n.lockedRun(()=>t.getChangedDocumentsSince(ft(s),a)):void 0,cleanup(s){return n.lockedRun(()=>t.cleanup(s))},remove(){return n.storageInstances.delete(r),n.lockedRun(()=>t.remove())},close(){return n.storageInstances.delete(r),n.lockedRun(()=>t.close())},changeStream(){return t.changeStream()}};return n.storageInstances.add(r),r}function v8(n){if(n.schema.keyCompression)throw Xe("UT5",{args:{params:n}});if(bL(n.schema))throw Xe("UT6",{args:{params:n}});if(n.schema.attachments&&n.schema.attachments.compression)throw Xe("UT7",{args:{params:n}})}function bL(n){return!!(n.encrypted&&n.encrypted.length>0||n.attachments&&n.attachments.encrypted)}function aye(n,t,e){var i=zr(n.schema.primaryKey),r=e?e.lwt:E0,o=e?e.id:"";return Im(n.schema,{selector:{$or:[{"_meta.lwt":{$gt:r}},{"_meta.lwt":{$eq:r},[i]:{$gt:e?o:""}}],"_meta.lwt":{$gte:r}},sort:[{"_meta.lwt":"asc"},{[i]:"asc"}],skip:0,limit:t})}function b8(n,t,e){return O(this,null,function*(){if(n.getChangedDocumentsSince)return n.getChangedDocumentsSince(t,e);var i=zr(n.schema.primaryKey),r=xy(n.schema,aye(n,t,e)),o=yield n.query(r),s=o.documents,a=LI(s);return{documents:s,checkpoint:a?{id:a[i],lwt:a._meta.lwt}:e||{id:"",lwt:0}}})}var w8=new WeakMap,cye=new WeakMap;function uo(n,t,e,i){return Yi(cye,e,()=>{var r=[],o=w8.get(e);if(o||(o=t),e.error.length>0||i){for(var s=i||new Set,a=0;a<e.error.length;a++){var l=e.error[a];s.add(l.documentId)}for(var u=0;u<o.length;u++){var h=o[u].document;s.has(h[n])||r.push(qc(h))}}else{r.length=t.length-e.error.length;for(var p=0;p<o.length;p++){var _=o[p].document;r[p]=qc(_)}}return r})}function Ty(n,t){return O(this,null,function*(){var e=Xa(n.input.metaInstance.schema,{isCheckpoint:"1",itemId:t}),i=yield n.input.metaInstance.findDocumentsById([e],!1),r=i[0];if(n.lastCheckpointDoc[t]=r,r)return r.checkpointData})}function Dy(n,t,e){return O(this,null,function*(){n.checkpointQueue=n.checkpointQueue.then(()=>O(this,null,function*(){var i=n.lastCheckpointDoc[t];if(e&&!n.events.canceled.getValue()&&(!i||JSON.stringify(i.checkpointData)!==JSON.stringify(e))){var r={id:"",isCheckpoint:"1",itemId:t,_deleted:!1,_attachments:{},checkpointData:e,_meta:dm(),_rev:Ho()};for(r.id=Xa(n.input.metaInstance.schema,r);!n.events.canceled.getValue();){if(i&&(r.checkpointData=Sm([i.checkpointData,r.checkpointData])),r._meta.lwt=Xi(),r._rev=Ss(yield n.checkpointKey,i),n.events.canceled.getValue())return;var o=[{previous:i,document:r}],s=yield n.input.metaInstance.bulkWrite(o,"replication-set-checkpoint"),a=uo(n.primaryPath,o,s)[0];if(a){n.lastCheckpointDoc[t]=a;return}else{var l=s.error[0];if(l.status!==409)throw l;i=ft(l.documentInDb),r._rev=Ss(yield n.checkpointKey,i)}}}})),yield n.checkpointQueue})}function C8(n){return O(this,null,function*(){var t=yield n.hashFunction([n.identifier,n.forkInstance.databaseName,n.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+t})}function Ew(n,t,e){var i=Gt(n);return t||delete i._attachments,e||(delete i._meta,delete i._rev),i}function xw(n,t){return n.hasAttachments?t.map(e=>{var i=So(e.document);return i.docData=qc(i.docData),{document:i,previous:e.previous}}):t}function wL(n){for(;;)if(n.underlyingPersistentStorage)n=n.underlyingPersistentStorage;else return n}var lye="RxReplicationProtocolMetaData";function E8(n,t){var e=IG(n),i={title:lye,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:n.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:e+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:e>4?e:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:n.properties},isResolvedConflict:{type:"string"}},keyCompression:n.keyCompression,required:["id","isCheckpoint","itemId"]};t&&(i.encrypted=["docData"]);var r=gy(i);return r}function ET(n,t){return n.input.metaInstance.findDocumentsById(t.map(e=>{var i=Xa(n.input.metaInstance.schema,{itemId:e,isCheckpoint:"0"});return i}),!0).then(e=>{var i={};return Object.values(e).forEach(r=>{i[r.itemId]={docData:r.docData,metaDocument:r}}),i})}function ky(n,t,e,i){return O(this,null,function*(){var r=t[n.primaryPath],o=e?Zd(e):{id:"",isCheckpoint:"0",itemId:r,docData:t,_attachments:{},_deleted:!1,_rev:Ho(),_meta:{lwt:0}};o.docData=t,i&&(o.isResolvedConflict=i),o._meta.lwt=Xi(),o.id=Xa(n.input.metaInstance.schema,o),o._rev=Ss(yield n.checkpointKey,e);var s={previous:e,document:o};return s})}function x8(n){return O(this,null,function*(){if(n.input.initialCheckpoint&&n.input.initialCheckpoint.downstream){var t=yield Ty(n,"down");t||(yield Dy(n,"down",n.input.initialCheckpoint.downstream))}var e=yield n.input.hashFunction(n.input.identifier),i=n.input.replicationHandler,r=0,o=[];function s(C){n.stats.down.addNewTask=n.stats.down.addNewTask+1;var T={time:r++,task:C};o.push(T),n.streamQueue.down=n.streamQueue.down.then(()=>{for(var k=[];o.length>0;){n.events.active.down.next(!0);var U=ft(o.shift());if(!(U.time<l)){if(U.task==="RESYNC")if(k.length===0){k.push(U.task);break}else break;k.push(U.task)}}if(k.length!==0)return k[0]==="RESYNC"?u():h(k)}).then(()=>{n.events.active.down.next(!1),!n.firstSyncDone.down.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.down.next(!0)})}if(s("RESYNC"),!n.events.canceled.getValue()){var a=i.masterChangeStream$.pipe(ji(C=>O(this,null,function*(){return yield mf(n.events.active.up.pipe(st(T=>!T))),C}))).subscribe(C=>{n.stats.down.masterChangeStreamEmit=n.stats.down.masterChangeStreamEmit+1,s(C)});mf(n.events.canceled.pipe(st(C=>!!C))).then(()=>a.unsubscribe())}var l=-1;function u(){return O(this,null,function*(){if(n.stats.down.downstreamResyncOnce=n.stats.down.downstreamResyncOnce+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>Ty(n,"down"));for(var C=yield n.checkpointQueue,T=[];!n.events.canceled.getValue();){l=r++;var k=yield i.masterChangesSince(C,n.input.pullBatchSize);if(k.documents.length===0||(C=Sm([C,k.checkpoint]),T.push(b(k.documents,C)),k.documents.length<n.input.pullBatchSize))break}yield Promise.all(T)}})}function h(C){n.stats.down.downstreamProcessChanges=n.stats.down.downstreamProcessChanges+1;var T=[],k=null;return C.forEach(U=>{if(U==="RESYNC")throw new Error("SNH");Ko(T,U.documents),k=Sm([k,U.checkpoint])}),b(T,ft(k))}var p=Ts,_={docs:{}};function b(C,T){var k=n.primaryPath;return n.stats.down.persistFromMaster=n.stats.down.persistFromMaster+1,C.forEach(U=>{var W=U[k];_.docs[W]=U}),_.checkpoint=T,p=p.then(()=>{var U=_.docs;_.docs={};var W=_.checkpoint,K=Object.keys(U);if(n.events.canceled.getValue()||K.length===0)return Ts;var oe=[],ae={},we={},M=[];return Promise.all([n.input.forkInstance.findDocumentsById(K,!0),ET(n,K)]).then(([E,I])=>{var P=new Map;return E.forEach(N=>P.set(N[k],N)),Promise.all(K.map(N=>O(this,null,function*(){var V=P.get(N),S=V?Ew(V,n.hasAttachments,!1):void 0,Ot=U[N],On=I[N];On&&V&&On.metaDocument.isResolvedConflict===V._rev&&(yield n.streamQueue.up);var fr=!On||!S?!1:n.input.conflictHandler.isEqual(On.docData,S,"downstream-check-if-equal-0");if(!fr&&On&&On.docData._rev&&V&&V._meta[n.input.identifier]&&Lc(V._rev)===V._meta[n.input.identifier]&&(fr=!0),V&&On&&fr===!1||V&&!On)return Ts;var Ti=S?n.input.conflictHandler.isEqual(Ot,S,"downstream-check-if-equal-1"):!1;if(S&&Ti)return(!On||fr===!1)&&M.push(yield ky(n,S,On?On.metaDocument:void 0)),Ts;var Dn=Object.assign({},Ot,V?{_meta:Gt(V._meta),_attachments:n.hasAttachments&&Ot._attachments?Ot._attachments:{},_rev:Ho()}:{_meta:{lwt:Xi()},_rev:Ho(),_attachments:n.hasAttachments&&Ot._attachments?Ot._attachments:{}});if(Ot._rev){var xr=V?Lc(V._rev)+1:1;Dn._meta[n.input.identifier]=xr,n.input.keepMeta&&(Dn._rev=Ot._rev)}n.input.keepMeta&&Ot._meta&&(Dn._meta=Ot._meta);var Qt={previous:V,document:Dn};Qt.document._rev=Qt.document._rev?Qt.document._rev:Ss(e,Qt.previous),oe.push(Qt),ae[N]=Qt,we[N]=yield ky(n,Ot,On?On.metaDocument:void 0)})))}).then(()=>O(this,null,function*(){if(oe.length>0)return n.input.forkInstance.bulkWrite(oe,yield n.downstreamBulkWriteFlag).then(E=>{var I=uo(n.primaryPath,oe,E);I.forEach(N=>{var V=N[k];n.events.processed.down.next(ae[V]),M.push(we[V])});var P;if(E.error.forEach(N=>{if(N.status!==409){var V=Xe("RC_PULL",{writeError:N});n.events.error.next(V),P=V}}),P)throw P})})).then(()=>{if(M.length>0)return n.input.metaInstance.bulkWrite(xw(n,M),"replication-down-write-meta").then(E=>{E.error.forEach(I=>{n.events.error.next(Xe("RC_PULL",{id:I.documentId,writeError:I}))})})}).then(()=>{Dy(n,"down",W)})}).catch(U=>n.events.error.next(U)),p}})}function I8(n,t,e){return O(this,null,function*(){var i=n.input.conflictHandler,r=i.isEqual(t.realMasterState,t.newDocumentState,"replication-resolve-conflict");if(!r){var o=yield i.resolve(t,"replication-resolve-conflict"),s=Object.assign({},o,{_meta:Gt(e._meta),_rev:Ho(),_attachments:Gt(e._attachments)});return s._meta.lwt=Xi(),s._rev=Ss(yield n.checkpointKey,e),s}})}function S8(n,t,e,i){return O(this,null,function*(){if(!e._attachments||i&&!i._attachments)throw new Error("_attachments missing");var r=e[n],o=new Set(i&&i._attachments?Object.keys(i._attachments):[]);return yield Promise.all(Object.entries(e._attachments).map(l=>O(this,[l],function*([s,a]){if((!o.has(s)||i&&ft(i._attachments)[s].digest!==a.digest)&&!a.data){var u=yield t.getAttachmentData(r,s,a.digest);a.data=u}}))),e})}function T8(n){return O(this,null,function*(){if(n.input.initialCheckpoint&&n.input.initialCheckpoint.upstream){var t=yield Ty(n,"up");t||(yield Dy(n,"up",n.input.initialCheckpoint.upstream))}var e=n.input.replicationHandler;n.streamQueue.up=n.streamQueue.up.then(()=>h().then(()=>p()));var i=0,r=-1,o=[],s=Wo,a={docs:{}},l=n.input.forkInstance.changeStream().subscribe(b=>{if(!n.events.paused.getValue())return n.stats.up.forkChangeStreamEmit=n.stats.up.forkChangeStreamEmit+1,o.push({task:b,time:i++}),n.events.active.up.getValue()||n.events.active.up.next(!0),n.input.waitBeforePersist?n.input.waitBeforePersist().then(()=>p()):p()}),u=e.masterChangeStream$.pipe(st(b=>b==="RESYNC")).subscribe(()=>{o.push({task:"RESYNC",time:i++}),p()});mf(n.events.canceled.pipe(st(b=>!!b))).then(()=>{l.unsubscribe(),u.unsubscribe()});function h(){return O(this,null,function*(){if(n.stats.up.upstreamInitialSync=n.stats.up.upstreamInitialSync+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>Ty(n,"up"));for(var b=yield n.checkpointQueue,C=new Set,T=function(){return O(this,null,function*(){r=i++,C.size>3&&(yield Promise.race(Array.from(C)));var W=yield b8(n.input.forkInstance,n.input.pushBatchSize,b);if(W.documents.length===0)return 1;b=Sm([b,W.checkpoint]);var K=_(W.documents,ft(b));C.add(K),K.catch().then(()=>C.delete(K))})};!n.events.canceled.getValue()&&!(yield T()););var k=yield Promise.all(C),U=k.find(W=>!!W);U?yield h():!n.firstSyncDone.up.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.up.next(!0)}})}function p(){if(n.events.canceled.getValue()||o.length===0){n.events.active.up.next(!1);return}n.stats.up.processTasks=n.stats.up.processTasks+1,n.events.active.up.next(!0),n.streamQueue.up=n.streamQueue.up.then(()=>O(this,null,function*(){for(var b=[],C={};o.length>0;){var T=ft(o.shift());if(!(T.time<r)){if(T.task==="RESYNC"){n.events.active.up.next(!1),yield h();return}T.task.context!==(yield n.downstreamBulkWriteFlag)&&Ko(b,T.task.events.map(k=>k.documentData)),C=Sm([C,T.task.checkpoint])}}if(yield _(b,C),o.length===0)n.events.active.up.next(!1);else return p()}))}function _(b,C){return n.stats.up.persistToMaster=n.stats.up.persistToMaster+1,b.forEach(T=>{var k=T[n.primaryPath];a.docs[k]=T}),a.checkpoint=C,s=s.then(()=>O(this,null,function*(){if(n.events.canceled.getValue())return!1;var T=a.docs;a.docs={};var k=a.checkpoint,U=Object.keys(T);function W(){return Dy(n,"up",k)}if(U.length===0)return W(),!1;var K=yield ET(n,U),oe={},ae=[],we={},M={};if(yield Promise.all(U.map(Qt=>O(this,null,function*(){var Yn=T[Qt];M[Qt]=Yn;var Cn=Ew(Yn,n.hasAttachments,!!n.input.keepMeta),ct=K[Qt];ct&&ct.metaDocument.isResolvedConflict!==Yn._rev&&n.input.conflictHandler.isEqual(ct.docData,Cn,"upstream-check-if-equal")||ct&&ct.docData._rev&&Lc(Yn._rev)===Yn._meta[n.input.identifier]||(ae.push(Qt),oe[Qt]={assumedMasterState:ct?ct.docData:void 0,newDocumentState:Cn},we[Qt]=yield ky(n,Cn,ct?ct.metaDocument:void 0))}))),ae.length===0)return W(),!1;var E=Object.values(oe),I=new Set,P={},N=NH(E,n.input.pushBatchSize);yield Promise.all(N.map(Qt=>O(this,null,function*(){n.hasAttachments&&(yield Promise.all(Qt.map(Cn=>O(this,null,function*(){Cn.newDocumentState=yield S8(n.primaryPath,n.input.forkInstance,So(Cn.newDocumentState),Cn.assumedMasterState)}))));var Yn=yield e.masterWrite(Qt);Yn.forEach(Cn=>{var ct=Cn[n.primaryPath];I.add(ct),P[ct]=Cn})})));var V=[];if(ae.forEach(Qt=>{I.has(Qt)||(n.events.processed.up.next(oe[Qt]),V.push(we[Qt]))}),n.events.canceled.getValue())return!1;V.length>0&&(yield n.input.metaInstance.bulkWrite(xw(n,V),"replication-up-write-meta"));var S=!1;if(I.size>0){n.stats.up.persistToMasterHadConflicts=n.stats.up.persistToMasterHadConflicts+1;var Ot=[],On={};if(yield Promise.all(Object.entries(P).map(([Qt,Yn])=>{var Cn=oe[Qt],ct={newDocumentState:Cn.newDocumentState,assumedMasterState:Cn.assumedMasterState,realMasterState:Yn};return I8(n,ct,M[Qt]).then(Ci=>O(this,null,function*(){if(Ci){n.events.resolvedConflicts.next({input:ct,output:Ci}),Ot.push({previous:M[Qt],document:Ci});var er=K[Qt];On[Qt]=yield ky(n,ft(Yn),er?er.metaDocument:void 0,Ci._rev)}}))})),Ot.length>0){S=!0,n.stats.up.persistToMasterConflictWrites=n.stats.up.persistToMasterConflictWrites+1;var fr=yield n.input.forkInstance.bulkWrite(Ot,"replication-up-write-conflict"),Ti;if(fr.error.forEach(Qt=>{if(Qt.status!==409){var Yn=Xe("RC_PUSH",{writeError:Qt});n.events.error.next(Yn),Ti=Yn}}),Ti)throw Ti;var Dn=[],xr=uo(n.primaryPath,Ot,fr);xr.forEach(Qt=>{var Yn=Qt[n.primaryPath];Dn.push(On[Yn])}),Dn.length>0&&(yield n.input.metaInstance.bulkWrite(xw(n,Dn),"replication-up-write-conflict-meta"))}}return W(),S})).catch(T=>(n.events.error.next(T),!1)),s}})}var CL={isEqual(n,t){return B_(qc(n),qc(t))},resolve(n){return n.realMasterState}};function D8(n){n=Gt(n),n.forkInstance=wL(n.forkInstance),n.metaInstance=wL(n.metaInstance);var t=C8(n),e={primaryPath:zr(n.forkInstance.schema.primaryKey),hasAttachments:!!n.forkInstance.schema.attachments,input:n,checkpointKey:t,downstreamBulkWriteFlag:t.then(i=>"replication-downstream-"+i),events:{canceled:new gi(!1),paused:new gi(!1),active:{down:new gi(!0),up:new gi(!0)},processed:{down:new ye,up:new ye},resolvedConflicts:new ye,error:new ye},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new gi(!1),up:new gi(!1)},streamQueue:{down:Ts,up:Ts},checkpointQueue:Ts,lastCheckpointDoc:{}};return x8(e),T8(e),e}function xT(n){return mf(iu([n.firstSyncDone.down.pipe(st(t=>!!t)),n.firstSyncDone.up.pipe(st(t=>!!t))])).then(()=>{})}function EL(n){return Promise.all([n.streamQueue.up,n.streamQueue.down,n.checkpointQueue])}function k8(n){return O(this,null,function*(){n.events.canceled.next(!0),n.events.active.up.complete(),n.events.active.down.complete(),n.events.processed.up.complete(),n.events.processed.down.complete(),n.events.resolvedConflicts.complete(),n.events.canceled.complete(),yield n.checkpointQueue})}var xL=n=>Promise.resolve(n);function IL(n,t){if(n==="_deleted")return t;t=Gt(t);var e=!!t._deleted;return t[n]=e,delete t._deleted,t}function IT(n,t,e){return e.map(i=>{var r=Gt(i);if(t!=="_deleted"){var o=!!r[t];r._deleted=o,delete r[t]}else r._deleted=!!r._deleted;var s=n.schema.primaryPath;return r[s]=Xa(n.schema.jsonSchema,r),r})}function SL(n,t){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return n.promiseWait(t);var e,i=new Promise(r=>{e=()=>{window.removeEventListener("online",e),r()},window.addEventListener("online",e)});return Promise.race([i,n.promiseWait(t)]).then(()=>{window.removeEventListener("online",e)})}function A8(n){function t(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var i=new Event("mousemove");document.dispatchEvent(i)}}var e=setInterval(t,20*1e3);n.onCancel.push(()=>clearInterval(e))}var Tm="collection",TL="storage-token",uye="rx-migration-status",dye="rx-pipeline-checkpoint",hye="RxInternalDocument",ST=gy({version:0,title:hye,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Tm,TL,uye,dye,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ay(n,t){return Xa(ST,{key:n,context:t})}function TT(n){return O(this,null,function*(){var t=xy(n.schema,{selector:{context:Tm,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),e=yield n.query(t),i=e.documents;return i})}var R8="storageToken",mye=Ay(R8,TL);function M8(n){return O(this,null,function*(){var t=cp(10),e=n.password?yield n.hashFunction(JSON.stringify(n.password)):void 0,i={id:mye,context:TL,key:R8,data:{rxdbVersion:n.rxdbVersion,token:t,instanceToken:n.token,passwordHash:e},_deleted:!1,_meta:dm(),_rev:Ho(),_attachments:{}},r=[{document:i}],o=yield n.internalStore.bulkWrite(r,"internal-add-storage-token");if(!o.error[0])return uo("id",r,o)[0];var s=ft(o.error[0]);if(s.isError&&py(s)){var a=s;if(!fye(a.documentInDb.data.rxdbVersion,n.rxdbVersion))throw Xe("DM5",{args:{database:n.name,databaseStateVersion:a.documentInDb.data.rxdbVersion,codeVersion:n.rxdbVersion}});if(e&&e!==a.documentInDb.data.passwordHash)throw Xe("DB1",{passwordHash:e,existingPasswordHash:a.documentInDb.data.passwordHash});var l=a.documentInDb;return ft(l)}throw s})}function fye(n,t){if(!n)return!1;var e=n.split(".")[0],i=t.split(".")[0];return e==="15"&&i==="16"?!0:e===i}function P8(n,t,e){return O(this,null,function*(){if(n.schema.version!==e.version)throw Xe("SNH",{schema:e,version:n.schema.version,name:n.name,collection:n,args:{storageCollectionName:t}});for(var i=Iw(n.name,n.schema.jsonSchema),r=Ay(i,Tm);;){var o=yield Cw(n.database.internalStore,r),s=So(ft(o)),a=s.data.connectedStorages.find(l=>l.collectionName===t&&l.schema.version===e.version);if(a)return;s.data.connectedStorages.push({collectionName:t,schema:e});try{yield vL(n.database.internalStore,{previous:ft(o),document:s},"add-connected-storage-to-collection")}catch(l){if(!py(l))throw l}}})}function O8(n,t,e){return O(this,null,function*(){if(n.schema.version!==e.version)throw Xe("SNH",{schema:e,version:n.schema.version,name:n.name,collection:n,args:{storageCollectionName:t}});for(var i=Iw(n.name,n.schema.jsonSchema),r=Ay(i,Tm);;){var o=yield Cw(n.database.internalStore,r),s=So(ft(o)),a=s.data.connectedStorages.find(l=>l.collectionName===t&&l.schema.version===e.version);if(!a)return;s.data.connectedStorages=s.data.connectedStorages.filter(l=>l.collectionName!==t);try{yield vL(n.database.internalStore,{previous:ft(o),document:s},"remove-connected-storage-from-collection")}catch(l){if(!py(l))throw l}}})}function Iw(n,t){return n+"-"+t.version}var DL=function(){function n(e,i){if(this.jsonSchema=e,this.hashFunction=i,this.indexes=pye(this.jsonSchema),this.primaryPath=zr(this.jsonSchema.primaryKey),!e.properties[this.primaryPath].maxLength)throw Xe("SC39",{schema:e});this.finalFields=eL(this.jsonSchema)}var t=n.prototype;return t.validateChange=function(i,r){this.finalFields.forEach(o=>{if(!B_(i[o],r[o]))throw Xe("DOC9",{dataBefore:i,dataAfter:r,fieldName:o,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var i={},r=Uc(this.jsonSchema,"");return Object.keys(r).forEach(o=>{var s=o;i.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var a=this.get(s);return a}}),Object.defineProperty(i,o+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(i,o+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(i,o+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),Ka(this,"getDocumentPrototype",()=>i),i},t.getPrimaryOfDocumentData=function(i){return Xa(this.jsonSchema,i)},Ds(n,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter(([,i])=>Object.prototype.hasOwnProperty.call(i,"default")).forEach(([i,r])=>e[i]=r.default),Ka(this,"defaultValues",e)}},{key:"hash",get:function(){return Ka(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function pye(n){return(n.indexes||[]).map(t=>F_(t)?t:[t])}function N8(n,t,e=!0){e&&mr("preCreateRxSchema",n);var i=gy(n);i=SG(i),ni.deepFreezeWhenDevMode(i);var r=new DL(i,t);return mr("createRxSchema",r),r}function F8(n){return n.documentData?n.documentData:n.previousDocumentData}function V8(n){switch(n.operation){case"INSERT":return{operation:n.operation,id:n.documentId,doc:n.documentData,previous:null};case"UPDATE":return{operation:n.operation,id:n.documentId,doc:ni.deepFreezeWhenDevMode(n.documentData),previous:n.previousDocumentData?n.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:n.operation,id:n.documentId,doc:null,previous:n.previousDocumentData}}}var gye=new Map;function DT(n){return Yi(gye,n,()=>{for(var t=new Array(n.events.length),e=n.events,i=n.collectionName,r=n.isLocal,o=ni.deepFreezeWhenDevMode,s=0;s<e.length;s++){var a=e[s];t[s]={documentId:a.documentId,collectionName:i,isLocal:r,operation:a.operation,documentData:o(a.documentData),previousDocumentData:o(a.previousDocumentData)}}return t})}var L8=function(){function n(e,i,r,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=i,this.preWrite=r,this.postWrite=o}var t=n.prototype;return t.addWrite=function(i,r){var o=i[this.primaryPath],s=Yi(this.queueByDocId,o,()=>[]),a=new Promise((l,u)=>{var h={lastKnownDocumentState:i,modifier:r,resolve:l,reject:u};ft(s).push(h),this.triggerRun()});return a},t.triggerRun=function(){return O(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var i=[],r=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(r.entries()).map(l=>O(this,[l],function*([s,a]){var u=_ye(a.map(_=>_.lastKnownDocumentState)),h=u;for(var p of a)try{h=yield p.modifier(So(h))}catch(_){p.reject(_),p.reject=()=>{},p.resolve=()=>{}}try{yield this.preWrite(h,u)}catch(_){a.forEach(b=>b.reject(_));return}i.push({previous:u,document:h})})));var o=i.length>0?yield this.storageInstance.bulkWrite(i,"incremental-write"):{error:[]};return yield Promise.all(uo(this.primaryPath,i,o).map(s=>{var a=s[this.primaryPath];this.postWrite(s);var l=up(r,a);l.forEach(u=>u.resolve(s))})),o.error.forEach(s=>{var a=s.documentId,l=up(r,a),u=py(s);if(u){var h=Yi(this.queueByDocId,a,()=>[]);l.reverse().forEach(_=>{_.lastKnownDocumentState=ft(u.documentInDb),ft(h).unshift(_)})}else{var p=tT(s);l.forEach(_=>_.reject(p))}}),this.isRunning=!1,this.triggerRun()}})},n}();function kL(n){var t=e=>O(this,null,function*(){var i=jH(e);i._deleted=e._deleted;var r=yield n(i),o=Object.assign({},r,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:typeof r._deleted<"u"?r._deleted:e._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return t}function _ye(n){var t=n[0],e=Lc(t._rev);return n.forEach(i=>{var r=Lc(i._rev);r>e&&(t=i,e=r)}),t}var Sw={get primaryPath(){var n=this;if(n.isInstanceOfRxDocument)return n.collection.schema.primaryPath},get primary(){var n=this;if(n.isInstanceOfRxDocument)return n._data[n.primaryPath]},get revision(){var n=this;if(n.isInstanceOfRxDocument)return n._data._rev},get deleted$(){var n=this;if(n.isInstanceOfRxDocument)return n.$.pipe(ht(t=>t._data._deleted))},get deleted$$(){var n=this,t=n.collection.database.getReactivityFactory();return t.fromObservable(n.deleted$,n.getLatest().deleted,n.collection.database)},get deleted(){var n=this;if(n.isInstanceOfRxDocument)return n._data._deleted},getLatest(){var n=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(n)},get $(){var n=this,t=this.primary;return n.collection.eventBulks$.pipe(st(e=>!e.isLocal),ht(e=>e.events.find(i=>i.documentId===t)),st(e=>!!e),ht(e=>F8(ft(e))),Kn(n.collection._docCache.getLatestDocumentData(t)),ru((e,i)=>e._rev===i._rev),ht(e=>this.collection._docCache.getCachedRxDocument(e)),su(UI))},get $$(){var n=this,t=n.collection.database.getReactivityFactory();return t.fromObservable(n.$,n.getLatest()._data,n.collection.database)},get$(n){if(ni.isDevMode()){if(n.includes(".item."))throw Xe("DOC1",{path:n});if(n===this.primaryPath)throw Xe("DOC2");if(this.collection.schema.finalFields.includes(n))throw Xe("DOC3",{path:n});var t=Uc(this.collection.schema.jsonSchema,n);if(!t)throw Xe("DOC4",{path:n})}return this.$.pipe(ht(e=>Nd(e,n)),ru())},get$$(n){var t=this.get$(n),e=this.collection.database.getReactivityFactory();return e.fromObservable(t,this.getLatest().get(n),this.collection.database)},populate(n){var t=Uc(this.collection.schema.jsonSchema,n),e=this.get(n);if(!e)return HH;if(!t)throw Xe("DOC5",{path:n});if(!t.ref)throw Xe("DOC6",{path:n,schemaObj:t});var i=this.collection.database.collections[t.ref];if(!i)throw Xe("DOC7",{ref:t.ref,path:n,schemaObj:t});return t.type==="array"?i.findByIds(e).exec().then(r=>{var o=r.values();return Array.from(o)}):i.findOne(e).exec()},get(n){return j8(this,n)},toJSON(n=!1){if(n)return ni.deepFreezeWhenDevMode(this._data);var t=Gt(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,ni.deepFreezeWhenDevMode(t)},toMutableJSON(n=!1){return So(this.toJSON(n))},update(n){throw ti("update")},incrementalUpdate(n){throw ti("update")},updateCRDT(n){throw ti("crdt")},putAttachment(){throw ti("attachments")},getAttachment(){throw ti("attachments")},allAttachments(){throw ti("attachments")},get allAttachments$(){throw ti("attachments")},modify(n,t){return O(this,null,function*(){var e=this._data,i=yield kL(n)(e);return this._saveData(i,e)})},incrementalModify(n,t){return this.collection.incrementalWriteQueue.addWrite(this._data,kL(n)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(n){var t=this._data,e=So(t);return Object.entries(n).forEach(([i,r])=>{e[i]=r}),this._saveData(e,t)},incrementalPatch(n){return this.incrementalModify(t=>(Object.entries(n).forEach(([e,i])=>{t[e]=i}),t))},_saveData(n,t){return O(this,null,function*(){if(n=Gt(n),this._data._deleted)throw Xe("DOC11",{id:this.primary,document:this});yield AL(this.collection,n,t);var e=[{previous:t,document:n}],i=yield this.collection.storageInstance.bulkWrite(e,"rx-document-save-data"),r=i.error[0];return Sy(this.collection,this.primary,n,r),yield this.collection._runHooks("post","save",n,this),this.collection._docCache.getCachedRxDocument(uo(this.collection.schema.primaryPath,e,i)[0])})},remove(){return O(this,null,function*(){if(this.deleted)return Promise.reject(Xe("DOC13",{document:this,id:this.primary}));var n=yield this.collection.bulkRemove([this]);if(n.error.length>0){var t=n.error[0];Sy(this.collection,this.primary,this._data,t)}return n.success[0]})},incrementalRemove(){return this.incrementalModify(n=>O(this,null,function*(){return yield this.collection._runHooks("pre","remove",n,this),n._deleted=!0,n})).then(n=>O(this,null,function*(){return yield this.collection._runHooks("post","remove",n._data,n),n}))},close(){throw Xe("DOC14")}};function B8(n=Sw){var t=function(i,r){this.collection=i,this._data=r,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=n,t}function $8(n,t,e){var i=new n(t,e);return mr("createRxDocument",i),i}function AL(n,t,e){return t._meta=Object.assign({},e._meta,t._meta),ni.isDevMode()&&n.schema.validateChange(e,t),n._runHooks("pre","save",t,e)}function j8(n,t){return Yi(n._propertyCache,t,()=>{var e=Nd(n._data,t);if(typeof e!="object"||e===null||Array.isArray(e))return ni.deepFreezeWhenDevMode(e);var i=new Proxy(Gt(e),{get(r,o){if(typeof o!="string")return r[o];var s=o.charAt(o.length-1);if(s==="$")if(o.endsWith("$$")){var a=o.slice(0,-2);return n.get$$(lp(t+"."+a))}else{var l=o.slice(0,-1);return n.get$(lp(t+"."+l))}else if(s==="_"){var u=o.slice(0,-1);return n.populate(lp(t+"."+u))}else{var h=r[o];return typeof h=="number"||typeof h=="string"||typeof h=="boolean"?h:j8(n,lp(t+"."+o))}}});return i})}function kT(n){return n[n.length-1]}function yye(n){let t=typeof n;return n!==null&&(t==="object"||t==="function")}function RL(n,t,e){if(Array.isArray(t)&&(t=t.join(".")),!yye(n)||typeof t!="string")return e===void 0?n:e;let i=t.split(".");if(i.length===0)return e;for(let r=0;r<i.length;r++){let o=i[r];if(vye(n,o)?n=r===i.length-1?void 0:null:n=n[o],n==null){if(r!==i.length-1)return e;break}}return n===void 0?e:n}function vye(n,t){if(typeof t!="number"&&Array.isArray(n)){let e=Number.parseInt(t,10);return Number.isInteger(e)&&n[e]===n[t]}return!1}var ML=n=>!!n.queryParams.limit,U8=n=>n.queryParams.limit===1,z8=n=>!!(n.queryParams.skip&&n.queryParams.skip>0),q8=n=>n.changeEvent.operation==="DELETE",K8=n=>n.changeEvent.operation==="INSERT",H8=n=>n.changeEvent.operation==="UPDATE",W8=n=>ML(n)&&n.previousResults.length>=n.queryParams.limit,G8=n=>{let t=n.queryParams.sortFields,e=n.changeEvent.previous,i=n.changeEvent.doc;if(!i)return!1;if(!e)return!0;for(let r=0;r<t.length;r++){let o=t[r],s=RL(e,o),a=RL(i,o);if(s!==a)return!0}return!1},Q8=n=>{let t=n.changeEvent.id;if(n.keyDocumentMap)return n.keyDocumentMap.has(t);{let e=n.queryParams.primaryKey,i=n.previousResults;for(let r=0;r<i.length;r++)if(i[r][e]===t)return!0;return!1}},Y8=n=>{let t=n.previousResults[0];return!!(t&&t[n.queryParams.primaryKey]===n.changeEvent.id)},X8=n=>{let t=kT(n.previousResults);return!!(t&&t[n.queryParams.primaryKey]===n.changeEvent.id)},J8=n=>{let t=n.changeEvent.previous;if(!t)return!1;let e=n.previousResults[0];return e?e[n.queryParams.primaryKey]===n.changeEvent.id?!0:n.queryParams.sortComparator(t,e)<0:!1},Z8=n=>{let t=n.changeEvent.previous;if(!t)return!1;let e=kT(n.previousResults);return e?e[n.queryParams.primaryKey]===n.changeEvent.id?!0:n.queryParams.sortComparator(t,e)>0:!1},eQ=n=>{let t=n.changeEvent.doc;if(!t)return!1;let e=n.previousResults[0];return e?e[n.queryParams.primaryKey]===n.changeEvent.id?!0:n.queryParams.sortComparator(t,e)<0:!1},tQ=n=>{let t=n.changeEvent.doc;if(!t)return!1;let e=kT(n.previousResults);return e?e[n.queryParams.primaryKey]===n.changeEvent.id?!0:n.queryParams.sortComparator(t,e)>0:!1},nQ=n=>{let t=n.changeEvent.previous;return t?n.queryParams.queryMatcher(t):!1},iQ=n=>{let t=n.changeEvent.doc;return t?n.queryParams.queryMatcher(t):!1},rQ=n=>n.previousResults.length===0;var oQ={0:K8,1:H8,2:q8,3:ML,4:U8,5:z8,6:rQ,7:W8,8:Y8,9:X8,10:G8,11:Q8,12:J8,13:Z8,14:eQ,15:tQ,16:nQ,17:iQ};function sQ(n,t,e,i){var r=n.length,o=r-1,s=0;if(r===0)return n.push(t),0;for(var a;i<=o;)s=i+(o-i>>1),a=n[s],e(a,t)<=0?i=s+1:o=s-1;return e(a,t)<=0&&s++,n.splice(s,0,t),s}var aQ=n=>{},AT=n=>{n.previousResults.unshift(n.changeEvent.doc),n.keyDocumentMap&&n.keyDocumentMap.set(n.changeEvent.id,n.changeEvent.doc)},RT=n=>{n.previousResults.push(n.changeEvent.doc),n.keyDocumentMap&&n.keyDocumentMap.set(n.changeEvent.id,n.changeEvent.doc)},MT=n=>{let t=n.previousResults.shift();n.keyDocumentMap&&t&&n.keyDocumentMap.delete(t[n.queryParams.primaryKey])},PT=n=>{let t=n.previousResults.pop();n.keyDocumentMap&&t&&n.keyDocumentMap.delete(t[n.queryParams.primaryKey])},cQ=n=>{MT(n),RT(n)},lQ=n=>{PT(n),AT(n)},uQ=n=>{MT(n),AT(n)},dQ=n=>{PT(n),RT(n)},PL=n=>{n.keyDocumentMap&&n.keyDocumentMap.delete(n.changeEvent.id);let t=n.queryParams.primaryKey,e=n.previousResults;for(let i=0;i<e.length;i++)if(e[i][t]===n.changeEvent.id){e.splice(i,1);break}},hQ=n=>{let t=n.changeEvent.doc,e=n.queryParams.primaryKey,i=n.previousResults;for(let r=0;r<i.length;r++)if(i[r][e]===n.changeEvent.id){i[r]=t,n.keyDocumentMap&&n.keyDocumentMap.set(n.changeEvent.id,t);break}},mQ=n=>{let t={_id:"wrongHuman"+new Date().getTime()};n.previousResults.length=0,n.previousResults.push(t),n.keyDocumentMap&&(n.keyDocumentMap.clear(),n.keyDocumentMap.set(t._id,t))},OL=n=>{let t=n.changeEvent.id,e=n.changeEvent.doc;if(n.keyDocumentMap){if(n.keyDocumentMap.has(t))return;n.keyDocumentMap.set(t,e)}else if(n.previousResults.find(r=>r[n.queryParams.primaryKey]===t))return;sQ(n.previousResults,e,n.queryParams.sortComparator,0)},fQ=n=>{PL(n),OL(n)},pQ=n=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},gQ=n=>{throw new Error("Action unknownAction should never be called")};var _Q=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],yQ={doNothing:aQ,insertFirst:AT,insertLast:RT,removeFirstItem:MT,removeLastItem:PT,removeFirstInsertLast:cQ,removeLastInsertFirst:lQ,removeFirstInsertFirst:uQ,removeLastInsertLast:dQ,removeExisting:PL,replaceExisting:hQ,alwaysWrong:mQ,insertAtSortPosition:OL,removeExistingAndInsertAtSortPosition:fQ,runFullQueryAgain:pQ,unknownAction:gQ};function OT(n){return n.charCodeAt(0)-40}function vQ(n){return n?"1":"0"}function bye(n=6){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*i));return t}var mtt=bye(4);function NL(n,t){let e=[];for(let i=0,r=n.length;i<r;i+=t)e.push(n.substring(i,i+t));return e}function bQ(n){let t=new Map,i=2+parseInt(n.charAt(0)+n.charAt(1),10)*2,r=n.substring(2,i),o=NL(r,2);for(let T=0;T<o.length;T++){let k=o[T],U=k.charAt(0),W=OT(k.charAt(1));t.set(U,W)}let s=n.substring(i,n.length-3),a=NL(s,4);for(let T=0;T<a.length;T++){let k=a[T],U=k.charAt(0),W=k.charAt(1),K=k.charAt(2),oe=OT(k.charAt(3));if(!t.has(W))throw new Error("missing node with id "+W);if(!t.has(K))throw new Error("missing node with id "+K);let ae=t.get(W),we=t.get(K),M={l:oe,0:ae,1:we};t.set(U,M)}let l=n.slice(-3),u=l.charAt(0),h=l.charAt(1),p=OT(l.charAt(2)),_=t.get(u),b=t.get(h);return{l:p,0:_,1:b}}function wQ(n,t,e){let i=n,r=n.l;for(;;){let o=t[r](e),s=vQ(o);if(i=i[s],typeof i=="number"||typeof i=="string")return i;r=i.l}}var wye="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",FL;function Cye(){return FL||(FL=bQ(wye)),FL}var CQ=n=>wQ(Cye(),oQ,n);function EQ(n){let t=CQ(n);return _Q[t]}function xQ(n,t,e,i,r){let o=yQ[n];return o({queryParams:t,changeEvent:e,previousResults:i,keyDocumentMap:r}),i}function Eye(n,t){return!t.sort||t.sort.length===0?[n]:t.sort.map(e=>Object.keys(e)[0])}var xye=new WeakMap;function Iye(n){return Yi(xye,n,()=>{var t=n.collection,e=Im(t.storageInstance.schema,So(n.mangoQuery)),i=t.schema.primaryPath,r=wT(t.schema.jsonSchema,e),o=(u,h)=>{var p={docA:u,docB:h,rxQuery:n};return r(p.docA,p.docB)},s=Cy(t.schema.jsonSchema,e),a=u=>{var h={doc:u,rxQuery:n};return s(h.doc)},l={primaryKey:n.collection.schema.primaryPath,skip:e.skip,limit:e.limit,sortFields:Eye(i,e),sortComparator:o,queryMatcher:a};return l})}function IQ(n,t){if(!n.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var e=Iye(n),i=ft(n._result).docsData.slice(0),r=ft(n._result).docsDataMap,o=!1,s=[],a=0;a<t.length;a++){var l=t[a],u=V8(l);u&&s.push(u)}var h=s.find(p=>{var _={queryParams:e,changeEvent:p,previousResults:i,keyDocumentMap:r},b=EQ(_);if(b==="runFullQueryAgain")return!0;if(b!=="doNothing")return o=!0,xQ(b,e,p,i,r),!1});return h?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:i}}var Sye=function(){function n(){this._map=new Map}var t=n.prototype;return t.getByQuery=function(i){var r=i.toString(),o=Yi(this._map,r,()=>i);return o},n}();function TQ(){return new Sye}function SQ(n,t){t.uncached=!0;var e=t.toString();n._map.delete(e)}function Tye(n){return n.refCount$.observers.length}var Dye=100,kye=30*1e3,Aye=(n,t)=>(e,i)=>{if(!(i._map.size<n)){var r=Xi()-t,o=[],s=Array.from(i._map.values());for(var a of s)if(!(Tye(a)>0)){if(a._lastEnsureEqual===0&&a._creationTime<r){SQ(i,a);continue}o.push(a)}var l=o.length-n;if(!(l<=0)){var u=o.sort((p,_)=>p._lastEnsureEqual-_._lastEnsureEqual),h=u.slice(0,l);h.forEach(p=>SQ(i,p))}}},LL=Aye(Dye,kye),VL=new WeakSet;function DQ(n){VL.has(n)||(VL.add(n),zH().then(()=>WH(200)).then(()=>{n.closed||n.cacheReplacementPolicy(n,n._queryCache),VL.delete(n)}))}var AQ=function(){function n(e,i,r){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,a=this.cacheItemByDocId.get(s);a&&(a[0].delete(o.revisionHeight),a[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=e,this.changes$=i,this.documentCreator=r,i.subscribe(o=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,a=0;a<o.length;a++){var l=o[a],u=s.get(l.documentId);if(u){var h=l.documentData;h||(h=l.previousDocumentData),u[1]=h}}}),this.tasks.size<=1&&L_().then(()=>{this.processTasks()})})}var t=n.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var i=Array.from(this.tasks);i.forEach(r=>r()),this.tasks.clear()}},t.getLatestDocumentData=function(i){this.processTasks();var r=up(this.cacheItemByDocId,i);return r[1]},t.getLatestDocumentDataIfExists=function(i){this.processTasks();var r=this.cacheItemByDocId.get(i);if(r)return r[1]},Ds(n,[{key:"getCachedRxDocuments",get:function(){var e=kQ(this);return Ka(this,"getCachedRxDocuments",e)}},{key:"getCachedRxDocument",get:function(){var e=kQ(this);return Ka(this,"getCachedRxDocument",i=>e([i])[0])}}])}();function kQ(n){var t=n.primaryPath,e=n.cacheItemByDocId,i=n.registry,r=ni.deepFreezeWhenDevMode,o=n.documentCreator,s=a=>{for(var l=new Array(a.length),u=[],h=0;h<a.length;h++){var p=a[h],_=p[t],b=Lc(p._rev),C=void 0,T=void 0,k=e.get(_);k?(C=k[0],T=C.get(b)):(C=new Map,k=[C,p],e.set(_,k));var U=T?T.deref():void 0;U||(p=r(p),U=o(p),C.set(b,Mye(U)),i&&u.push(U)),l[h]=U}return u.length>0&&i&&(n.tasks.add(()=>{for(var W=0;W<u.length;W++){var K=u[W];i.register(K,{docId:K.primary,revisionHeight:Lc(K.revision)})}}),n.tasks.size<=1&&L_().then(()=>{n.processTasks()})),l};return s}function Tw(n,t){var e=n.getCachedRxDocuments;return e(t)}var Rye=typeof WeakRef=="function",Mye=Rye?Pye:Oye;function Pye(n){return new WeakRef(n)}function Oye(n){return{deref(){return n}}}var BL=function(){function n(e,i,r){this.time=Xi(),this.query=e,this.count=r,this.documents=Tw(this.query.collection._docCache,i)}var t=n.prototype;return t.getValue=function(i){var r=this.query.op;if(r==="count")return this.count;if(r==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&i)throw Xe("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:r});return o}else return r==="findByIds"?this.docsMap:this.documents.slice(0)},Ds(n,[{key:"docsData",get:function(){return Ka(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(i=>{e.set(i.primary,i._data)}),Ka(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,i=this.documents,r=0;r<i.length;r++){var o=i[r];e.set(o.primary,o)}return Ka(this,"docsMap",e)}}])}();var Nye=0,Fye=function(){return++Nye},$L=function(){function n(e,i,r,o={}){this.id=Fye(),this._execOverDatabaseCount=0,this._creationTime=Xi(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new gi(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=Wo,this.op=e,this.mangoQuery=i,this.collection=r,this.other=o,i||(this.mangoQuery=Dw()),this.isFindOneByIdQuery=$ye(this.collection.schema.primaryPath,i)}var t=n.prototype;return t._setResultData=function(i){if(typeof i>"u")throw Xe("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof i=="number"){this._result=new BL(this,[],i);return}else i instanceof Map&&(i=Array.from(i.values()));var r=new BL(this,i,i.length);this._result=r},t._execOverDatabase=function(){return O(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var i=this.getPreparedQuery(),r=yield this.collection.storageInstance.count(i);if(r.mode==="slow"&&!this.collection.database.allowSlowCount)throw Xe("QU14",{collection:this.collection,queryObj:this.mangoQuery});return r.count}if(this.op==="findByIds"){var o=ft(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,a=[];if(o.forEach(h=>{var p=this.collection._docCache.getLatestDocumentDataIfExists(h);if(p){if(!p._deleted){var _=this.collection._docCache.getCachedRxDocument(p);s.set(h,_)}}else a.push(h)}),a.length>0){var l=yield this.collection.storageInstance.findDocumentsById(a,!1);l.forEach(h=>{var p=this.collection._docCache.getCachedRxDocument(h);s.set(p.primary,p)})}return s}var u=Bye(this);return u.then(h=>h)})},t.exec=function(i){return O(this,null,function*(){if(i&&this.op!=="findOne")throw Xe("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield RQ(this);var r=ft(this._result);return r.getValue(i)})},t.toString=function(){var i=V_({op:this.op,query:Im(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),r=JSON.stringify(i);return this.toString=()=>r,r},t.getPreparedQuery=function(){var i={rxQuery:this,mangoQuery:Im(this.collection.schema.jsonSchema,this.mangoQuery)};i.mangoQuery.selector._deleted={$eq:!1},i.mangoQuery.index&&i.mangoQuery.index.unshift("_deleted"),mr("prePrepareQuery",i);var r=xy(this.collection.schema.jsonSchema,i.mangoQuery);return this.getPreparedQuery=()=>r,r},t.doesDocumentDataMatch=function(i){return i._deleted?!1:this.queryMatcher(i)},t.remove=function(){return O(this,null,function*(){var i=yield this.exec();if(Array.isArray(i)){var r=yield this.collection.bulkRemove(i);if(r.error.length>0)throw tT(r.error[0]);return r.success}else return i.remove()})},t.incrementalRemove=function(){return Ey(this.asRxQuery,i=>i.incrementalRemove())},t.update=function(i){throw ti("update")},t.patch=function(i){return Ey(this.asRxQuery,r=>r.patch(i))},t.incrementalPatch=function(i){return Ey(this.asRxQuery,r=>r.incrementalPatch(i))},t.modify=function(i){return Ey(this.asRxQuery,r=>r.modify(i))},t.incrementalModify=function(i){return Ey(this.asRxQuery,r=>r.incrementalModify(i))},t.where=function(i){throw ti("query-builder")},t.sort=function(i){throw ti("query-builder")},t.skip=function(i){throw ti("query-builder")},t.limit=function(i){throw ti("query-builder")},Ds(n,[{key:"$",get:function(){if(!this._$){var e=this.collection.eventBulks$.pipe(st(i=>!i.isLocal),Kn(null),ji(()=>RQ(this)),ht(()=>this._result),su(UI),ru((i,r)=>!!(i&&i.time===ft(r).time)),st(i=>!!i),ht(i=>ft(i).getValue()));this._$=ri(e,this.refCount$.pipe(st(()=>!1)))}return this._$}},{key:"$$",get:function(){var e=this.collection.database.getReactivityFactory();return e.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var e=this.collection.schema.jsonSchema,i=Im(this.collection.schema.jsonSchema,this.mangoQuery);return Ka(this,"queryMatcher",Cy(e,i))}},{key:"asRxQuery",get:function(){return this}}])}();function Dw(){return{selector:{}}}function Vye(n){return n.collection._queryCache.getByQuery(n)}function Ry(n,t,e,i){mr("preCreateRxQuery",{op:n,queryObj:t,collection:e,other:i});var r=new $L(n,t,e,i);return r=Vye(r),DQ(e),r}function MQ(n){var t=n.asRxQuery.collection._changeEventBuffer.getCounter();return n._latestChangeEvent>=t}function RQ(n){return O(this,null,function*(){return n.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(n.collection.awaitBeforeReads).map(t=>t()))),n.collection.database.closed||MQ(n)?!1:(n._ensureEqualQueue=n._ensureEqualQueue.then(()=>Lye(n)),n._ensureEqualQueue)})}function Lye(n){if(n._lastEnsureEqual=Xi(),n.collection.database.closed||MQ(n))return Wo;var t=!1,e=!1;if(n._latestChangeEvent===-1&&(e=!0),!e){var i=n.asRxQuery.collection._changeEventBuffer.getFrom(n._latestChangeEvent+1);if(i===null)e=!0;else{n._latestChangeEvent=n.asRxQuery.collection._changeEventBuffer.getCounter();var r=n.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(i);if(n.op==="count"){var o=ft(n._result).count,s=o;r.forEach(l=>{var u=l.previousDocumentData&&n.doesDocumentDataMatch(l.previousDocumentData),h=n.doesDocumentDataMatch(l.documentData);!u&&h&&s++,u&&!h&&s--}),s!==o&&(t=!0,n._setResultData(s))}else{var a=IQ(n,r);a.runFullQueryAgain?e=!0:a.changed&&(t=!0,n._setResultData(a.newResults))}}}return e?n._execOverDatabase().then(l=>(n._latestChangeEvent=n.collection._changeEventBuffer.getCounter(),typeof l=="number"?((!n._result||l!==n._result.count)&&(t=!0,n._setResultData(l)),t):((!n._result||!UH(n.collection.schema.primaryPath,l,n._result.docsData))&&(t=!0,n._setResultData(l)),t))):Promise.resolve(t)}function Bye(n){return O(this,null,function*(){var t=[],e=n.collection;if(n.isFindOneByIdQuery)if(Array.isArray(n.isFindOneByIdQuery)){var i=n.isFindOneByIdQuery;if(i=i.filter(h=>{var p=n.collection._docCache.getLatestDocumentDataIfExists(h);return p?(p._deleted||t.push(p),!1):!0}),i.length>0){var r=yield e.storageInstance.findDocumentsById(i,!1);Ko(t,r)}}else{var o=n.isFindOneByIdQuery,s=n.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var a=yield e.storageInstance.findDocumentsById([o],!1);a[0]&&(s=a[0])}s&&!s._deleted&&t.push(s)}else{var l=n.getPreparedQuery(),u=yield e.storageInstance.query(l);t=u.documents}return t})}function $ye(n,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[n]){var e=t.selector[n];if(typeof e=="string")return e;if(Object.keys(e).length===1&&typeof e.$eq=="string"||Object.keys(e).length===1&&Array.isArray(e.$eq)&&!e.$eq.find(i=>typeof i!="string"))return e.$eq}return!1}function kw(n,t){return t=Gt(t),t=TG(n,t),typeof n.jsonSchema.primaryKey!="string"&&(t=xG(n.primaryPath,n.jsonSchema,t)),t._meta=dm(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=Ho()),t}function PQ(n,t){return O(this,null,function*(){t.multiInstance=n.multiInstance;var e=yield n.storage.createStorageInstance(t);return e})}function NT(n,t,e,i,r,o,s,a){return O(this,null,function*(){var l=yield TT(t),u=l.filter(b=>b.data.name===r),h=[];u.forEach(b=>{h.push({collectionName:b.data.name,schema:b.data.schema,isCollection:!0}),b.data.connectedStorages.forEach(C=>h.push({collectionName:C.collectionName,isCollection:!1,schema:C.schema}))});var p=new Set;if(h=h.filter(b=>{var C=b.collectionName+"||"+b.schema.version;return p.has(C)?!1:(p.add(C),!0)}),yield Promise.all(h.map(b=>O(this,null,function*(){var C=yield n.createStorageInstance({collectionName:b.collectionName,databaseInstanceToken:e,databaseName:i,multiInstance:o,options:{},schema:b.schema,password:s,devMode:ni.isDevMode()});yield C.remove(),b.isCollection&&(yield Ll("postRemoveRxCollection",{storage:n,databaseName:i,collectionName:r}))}))),a){var _=u.map(b=>{var C=Zd(b);return C._deleted=!0,C._meta.lwt=Xi(),C._rev=Ss(e,b),{previous:b,document:C}});yield t.bulkWrite(_,"rx-database-remove-collection-all")}})}function ic(n){if(n.closed)throw Xe("COL21",{collection:n.name,version:n.schema.version})}var jye=function(){function n(e){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=e,this.subs.push(this.collection.eventBulks$.pipe(st(i=>!i.isLocal)).subscribe(i=>{this.tasks.add(()=>this._handleChangeEvents(i.events)),this.tasks.size<=1&&L_().then(()=>{this.processTasks()})}))}var t=n.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var i=Array.from(this.tasks);i.forEach(r=>r()),this.tasks.clear()}},t._handleChangeEvents=function(i){var r=this.counter;this.counter=this.counter+i.length,i.length>this.limit?this.buffer=i.slice(i.length*-1):(Ko(this.buffer,i),this.buffer=this.buffer.slice(this.limit*-1));for(var o=r+1,s=this.eventCounterMap,a=0;a<i.length;a++){var l=i[a];s.set(l,o+a)}},t.getCounter=function(){return this.processTasks(),this.counter},t.getBuffer=function(){return this.processTasks(),this.buffer},t.getArrayIndexByPointer=function(i){this.processTasks();var r=this.buffer[0],o=this.eventCounterMap.get(r);if(i<o)return null;var s=i-o;return s},t.getFrom=function(i){this.processTasks();var r=[],o=this.getArrayIndexByPointer(i);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)r.push(s);else return r}},t.runFrom=function(i,r){this.processTasks();var o=this.getFrom(i);if(o===null)throw new Error("out of bounds");o.forEach(s=>r(s))},t.reduceByLastOfDoc=function(i){return this.processTasks(),i.slice(0)},t.close=function(){this.tasks.clear(),this.subs.forEach(i=>i.unsubscribe())},n}();function OQ(n){return new jye(n)}var Uye=new WeakMap;function zye(n){var t=n.schema.getDocumentPrototype(),e=qye(n),i=Sw,r={};return[t,e,i].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(a=>{var l=Object.getOwnPropertyDescriptor(o,a),u=!0;(a.startsWith("_")||a.endsWith("_")||a.startsWith("$")||a.endsWith("$"))&&(u=!1),typeof l.value=="function"?Object.defineProperty(r,a,{get(){return l.value.bind(this)},enumerable:u,configurable:!1}):(l.enumerable=u,l.configurable=!1,l.writable&&(l.writable=!1),Object.defineProperty(r,a,l))})}),r}function NQ(n){return Yi(Uye,n,()=>B8(zye(n)))}function FQ(n,t,e){var i=$8(t,n,ni.deepFreezeWhenDevMode(e));return n._runHooksSync("post","create",e,i),mr("postCreateRxDocument",i),i}function qye(n){var t={};return Object.entries(n.methods).forEach(([e,i])=>{t[e]=i}),t}var LQ=["pre","post"],BQ=["insert","save","remove","create"],VQ=!1,My=new Set,jL=function(){function n(e,i,r,o,s={},a={},l={},u={},h={},p=LL,_={},b=CL){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=TQ(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=e,this.name=i,this.schema=r,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=a,this.methods=l,this.attachments=u,this.options=h,this.cacheReplacementPolicy=p,this.statics=_,this.conflictHandler=b,Kye(this.asRxCollection),e&&(this.eventBulks$=e.eventBulks$.pipe(st(C=>C.collectionName===this.name))),this.database&&My.add(this)}var t=n.prototype;return t.prepare=function(){return O(this,null,function*(){if(!(yield qI())){for(var i=0;i<10&&My.size>hN;)i++,yield this.promiseWait(30);if(My.size>hN)throw Xe("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(My.values()).map(l=>({db:l.database?l.database.name:"",c:l.name}))}})}this.storageInstance=CT(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new L8(this.storageInstance,this.schema.primaryPath,(l,u)=>AL(this,l,u),l=>this._runHooks("post","save",l)),this.$=this.eventBulks$.pipe(ji(l=>DT(l))),this.checkpoint$=this.eventBulks$.pipe(ht(l=>l.checkpoint)),this._changeEventBuffer=OQ(this.asRxCollection);var r;this._docCache=new AQ(this.schema.primaryPath,this.eventBulks$.pipe(st(l=>!l.isLocal),ht(l=>l.events)),l=>(r||(r=NQ(this.asRxCollection)),FQ(this.asRxCollection,r,l)));var o=this.database.internalStore.changeStream().pipe(st(l=>{var u=this.name+"-"+this.schema.version,h=l.events.find(p=>p.documentData.context==="collection"&&p.documentData.key===u&&p.operation==="DELETE");return!!h})).subscribe(()=>O(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(l=>l()))}));this._subs.push(o);var s=yield this.database.storageToken,a=this.storageInstance.changeStream().subscribe(l=>{var u={id:l.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:s,events:l.events,databaseToken:this.database.token,checkpoint:l.checkpoint,context:l.context};this.database.$emit(u)});return this._subs.push(a),Ts})},t.cleanup=function(i){throw ic(this),ti("cleanup")},t.migrationNeeded=function(){throw ti("migration-schema")},t.getMigrationState=function(){throw ti("migration-schema")},t.startMigration=function(i=10){return ic(this),this.getMigrationState().startMigration(i)},t.migratePromise=function(i=10){return this.getMigrationState().migratePromise(i)},t.insert=function(i){return O(this,null,function*(){ic(this);var r=yield this.bulkInsert([i]),o=r.error[0];Sy(this,i[this.schema.primaryPath],i,o);var s=ft(r.success[0]);return s})},t.insertIfNotExists=function(i){return O(this,null,function*(){var r=yield this.bulkInsert([i]);if(r.error.length>0){var o=r.error[0];if(o.status===409){var s=o.documentInDb;return Tw(this._docCache,[s])[0]}else throw o}return r.success[0]})},t.bulkInsert=function(i){return O(this,null,function*(){if(ic(this),i.length===0)return{success:[],error:[]};var r=this.schema.primaryPath,o=new Set,s;if(this.hasHooks("pre","insert"))s=yield Promise.all(i.map(k=>{var U=kw(this.schema,k);return this._runHooks("pre","insert",U).then(()=>(o.add(U[r]),{document:U}))}));else{s=new Array(i.length);for(var a=this.schema,l=0;l<i.length;l++){var u=i[l],h=kw(a,u);o.add(h[r]),s[l]={document:h}}}if(o.size!==i.length)throw Xe("COL22",{collection:this.name,args:{documents:i}});var p=yield this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),_,b=this,C={get success(){if(!_){var k=uo(b.schema.primaryPath,s,p);_=Tw(b._docCache,k)}return _},error:p.error};if(this.hasHooks("post","insert")){var T=new Map;s.forEach(k=>{var U=k.document;T.set(U[r],U)}),yield Promise.all(C.success.map(k=>this._runHooks("post","insert",T.get(k.primary),k)))}return C})},t.bulkRemove=function(i){return O(this,null,function*(){ic(this);var r=this.schema.primaryPath;if(i.length===0)return{success:[],error:[]};var o;typeof i[0]=="string"?o=yield this.findByIds(i).exec():(o=new Map,i.forEach(b=>o.set(b.primary,b)));var s=[],a=new Map;Array.from(o.values()).forEach(b=>{var C=b.toMutableJSON(!0);s.push(C),a.set(b.primary,C)}),yield Promise.all(s.map(b=>{var C=b[this.schema.primaryPath];return this._runHooks("pre","remove",b,o.get(C))}));var l=s.map(b=>{var C=Gt(b);return C._deleted=!0,{previous:b,document:C}}),u=yield this.storageInstance.bulkWrite(l,"rx-collection-bulk-remove"),h=uo(this.schema.primaryPath,l,u),p=[],_=h.map(b=>{var C=b[r],T=this._docCache.getCachedRxDocument(b);return p.push(T),C});return yield Promise.all(_.map(b=>this._runHooks("post","remove",a.get(b),o.get(b)))),{success:p,error:u.error}})},t.bulkUpsert=function(i){return O(this,null,function*(){ic(this);var r=[],o=new Map;i.forEach(u=>{var h=kw(this.schema,u),p=h[this.schema.primaryPath];if(!p)throw Xe("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});o.set(p,h),r.push(h)});var s=yield this.bulkInsert(r),a=s.success.slice(0),l=[];return yield Promise.all(s.error.map(u=>O(this,null,function*(){if(u.status!==409)l.push(u);else{var h=u.documentId,p=up(o,h),_=ft(u.documentInDb),b=this._docCache.getCachedRxDocuments([_])[0],C=yield b.incrementalModify(()=>p);a.push(C)}}))),{error:l,success:a}})},t.upsert=function(i){return O(this,null,function*(){ic(this);var r=yield this.bulkUpsert([i]);return Sy(this.asRxCollection,i[this.schema.primaryPath],i,r.error[0]),r.success[0]})},t.incrementalUpsert=function(i){ic(this);var r=kw(this.schema,i),o=r[this.schema.primaryPath];if(!o)throw Xe("COL4",{data:i});var s=this._incrementalUpsertQueues.get(o);return s||(s=Ts),s=s.then(()=>Wye(this,o,r)).then(a=>a.inserted?a.doc:Hye(a.doc,r)),this._incrementalUpsertQueues.set(o,s),s},t.find=function(i){ic(this),mr("prePrepareRxQuery",{op:"find",queryObj:i,collection:this}),i||(i=Dw());var r=Ry("find",i,this);return r},t.findOne=function(i){ic(this),mr("prePrepareRxQuery",{op:"findOne",queryObj:i,collection:this});var r;if(typeof i=="string")r=Ry("findOne",{selector:{[this.schema.primaryPath]:i},limit:1},this);else{if(i||(i=Dw()),i.limit)throw Xe("QU6");i=Gt(i),i.limit=1,r=Ry("findOne",i,this)}return r},t.count=function(i){ic(this),i||(i=Dw());var r=Ry("count",i,this);return r},t.findByIds=function(i){ic(this);var r={selector:{[this.schema.primaryPath]:{$in:i.slice(0)}}},o=Ry("findByIds",r,this);return o},t.exportJSON=function(){throw ti("json-dump")},t.importJSON=function(i){throw ti("json-dump")},t.insertCRDT=function(i){throw ti("crdt")},t.addPipeline=function(i){throw ti("pipeline")},t.addHook=function(i,r,o,s=!1){if(typeof o!="function")throw dw("COL7",{key:r,when:i});if(!LQ.includes(i))throw dw("COL8",{key:r,when:i});if(!BQ.includes(r))throw Xe("COL9",{key:r});if(i==="post"&&r==="create"&&s===!0)throw Xe("COL10",{when:i,key:r,parallel:s});var a=o.bind(this),l=s?"parallel":"series";this.hooks[r]=this.hooks[r]||{},this.hooks[r][i]=this.hooks[r][i]||{series:[],parallel:[]},this.hooks[r][i][l].push(a)},t.getHooks=function(i,r){return!this.hooks[r]||!this.hooks[r][i]?{series:[],parallel:[]}:this.hooks[r][i]},t.hasHooks=function(i,r){if(!this.hooks[r]||!this.hooks[r][i])return!1;var o=this.getHooks(i,r);return o?o.series.length>0||o.parallel.length>0:!1},t._runHooks=function(i,r,o,s){var a=this.getHooks(i,r);if(!a)return Ts;var l=a.series.map(u=>()=>u(o,s));return QH(l).then(()=>Promise.all(a.parallel.map(u=>u(o,s))))},t._runHooksSync=function(i,r,o,s){if(this.hasHooks(i,r)){var a=this.getHooks(i,r);a&&a.series.forEach(l=>l(o,s))}},t.promiseWait=function(i){var r=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},i);this.timeouts.add(s)});return r},t.close=function(){return O(this,null,function*(){return this.closed?Wo:(My.delete(this),yield Promise.all(this.onClose.map(i=>i())),this.closed=!0,Array.from(this.timeouts).forEach(i=>clearTimeout(i)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(i=>i.unsubscribe()),delete this.database.collections[this.name],Ll("postCloseRxCollection",this).then(()=>!0))))})},t.remove=function(){return O(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(i=>i())),yield NT(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)})},Ds(n,[{key:"insert$",get:function(){return this.$.pipe(st(e=>e.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(st(e=>e.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(st(e=>e.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function Kye(n){if(!VQ){VQ=!0;var t=Object.getPrototypeOf(n);BQ.forEach(e=>{LQ.map(i=>{var r=i+jI(e);t[r]=function(o,s){return this.addHook(i,e,o,s)}})})}}function Hye(n,t){return n.incrementalModify(e=>t)}function Wye(n,t,e){var i=n._docCache.getLatestDocumentDataIfExists(t);return i?Promise.resolve({doc:n._docCache.getCachedRxDocuments([i])[0],inserted:!1}):n.findOne(t).exec().then(r=>r?{doc:r,inserted:!1}:n.insert(e).then(o=>({doc:o,inserted:!0})))}function $Q({database:n,name:t,schema:e,instanceCreationOptions:i={},migrationStrategies:r={},autoMigrate:o=!0,statics:s={},methods:a={},attachments:l={},options:u={},localDocuments:h=!1,cacheReplacementPolicy:p=LL,conflictHandler:_=CL}){var b={databaseInstanceToken:n.token,databaseName:n.name,collectionName:t,schema:e.jsonSchema,options:i,multiInstance:n.multiInstance,password:n.password,devMode:ni.isDevMode()};return mr("preCreateRxStorageInstance",b),PQ(n,b).then(C=>{var T=new jL(n,t,e,C,i,r,a,l,u,p,s,_);return T.prepare().then(()=>{Object.entries(s).forEach(([U,W])=>{Object.defineProperty(T,U,{get:()=>W.bind(T)})});var k=Ts;return o&&T.schema.version!==0&&(k=T.migratePromise()),k}).then(()=>(mr("createRxCollection",{collection:T,creator:{name:t,schema:e,storageInstance:C,instanceCreationOptions:i,migrationStrategies:r,methods:a,attachments:l,options:u,cacheReplacementPolicy:p,localDocuments:h,statics:s}}),T)).catch(k=>(My.delete(T),C.close().then(()=>Promise.reject(k))))})}var qL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};qL.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,zL(this)},wrapCall:function(t){var e=this;this.lock();var i;try{i=t()}catch(r){throw this.unlock(),r}return!i.then||typeof i.then!="function"?(this.unlock(),i):i.then(function(r){return e.unlock(),r}).catch(function(r){throw e.unlock(),r})},requestIdlePromise:function(t){var e=this;t=t||{};var i,r=new Promise(function(a){return i=a}),o=function(){UL(e,r),i()};if(r._manRes=o,t.timeout){var s=setTimeout(function(){r._manRes()},t.timeout);r._timeoutObj=s}return this._iC.add(r),zL(this),r},cancelIdlePromise:function(t){UL(this,t)},requestIdleCallback:function(t,e){var i=this._lHN++,r=this.requestIdlePromise(e);return this._hPM.set(i,r),this._pHM.set(r,i),r.then(function(){return t()}),i},cancelIdleCallback:function(t){var e=this._hPM.get(t);this.cancelIdlePromise(e)},clear:function(){var t=this;this._iC.forEach(function(e){return UL(t,e)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function Gye(n){if(n._iC.size!==0){var t=n._iC.values(),e=t.next().value;e._manRes(),setTimeout(function(){return zL(n)},0)}}function UL(n,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),n._pHM.has(t)){var e=n._pHM.get(t);n._hPM.delete(e),n._pHM.delete(t)}n._iC.delete(t)}}function zL(n){n._tryIR||n._iC.size===0||(n._tryIR=!0,setTimeout(function(){if(!n.isIdle()){n._tryIR=!1;return}setTimeout(function(){if(!n.isIdle()){n._tryIR=!1;return}Gye(n),n._tryIR=!1},0)},0))}var FT=new Set,jQ=0,KL=function(){function n(e,i,r,o,s,a,l=!1,u={},h,p,_,b,C){this.idleQueue=new qL,this.rxdbVersion=S0,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new ye,this.observable$=this.eventBulks$.pipe(ji(T=>DT(T))),this.storageToken=Wo,this.storageTokenDocument=Wo,this.emittedEventBulkIds=new Cm(60*1e3),this.name=e,this.token=i,this.storage=r,this.instanceCreationOptions=o,this.password=s,this.multiInstance=a,this.eventReduce=l,this.options=u,this.internalStore=h,this.hashFunction=p,this.cleanupPolicy=_,this.allowSlowCount=b,this.reactivity=C,jQ++,this.name!=="pseudoInstance"&&(this.internalStore=CT(this.asRxDatabase,h,ST),this.storageTokenDocument=M8(this.asRxDatabase).catch(T=>this.startupErrors.push(T)),this.storageToken=this.storageTokenDocument.then(T=>T.data.token).catch(T=>this.startupErrors.push(T)))}var t=n.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw Xe("DB14",{database:this.name});return this.reactivity},t.$emit=function(i){this.emittedEventBulkIds.has(i.id)||(this.emittedEventBulkIds.add(i.id),this.eventBulks$.next(i))},t.removeCollectionDoc=function(i,r){return O(this,null,function*(){var o=yield Cw(this.internalStore,Ay(Iw(i,r),Tm));if(!o)throw Xe("SNH",{name:i,schema:r});var s=Zd(o);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")})},t.addCollections=function(i){return O(this,null,function*(){var r={},o={},s=[],a={};yield Promise.all(Object.entries(i).map(_=>O(this,[_],function*([h,p]){var b=h,C=p.schema;r[b]=C;var T=N8(C,this.hashFunction);if(o[b]=T,this.collections[h])throw Xe("DB3",{name:h});var k=Iw(h,C),U={id:Ay(k,Tm),key:k,context:Tm,data:{name:b,schemaHash:yield T.hash,schema:T.jsonSchema,version:T.version,connectedStorages:[]},_deleted:!1,_meta:dm(),_rev:Ho(),_attachments:{}};s.push({document:U});var W=Object.assign({},p,{name:b,schema:T,database:this}),K=Gt(p);K.database=this,K.name=h,mr("preCreateRxCollection",K),W.conflictHandler=K.conflictHandler,a[b]=W})));var l=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield Xye(this),yield Promise.all(l.error.map(h=>O(this,null,function*(){if(h.status!==409)throw Xe("DB12",{database:this.name,writeError:h});var p=ft(h.documentInDb),_=p.data.name,b=o[_];if(p.data.schemaHash!==(yield b.hash))throw Xe("DB6",{database:this.name,collection:_,previousSchemaHash:p.data.schemaHash,schemaHash:yield b.hash,previousSchema:p.data.schema,schema:ft(r[_])})})));var u={};return yield Promise.all(Object.keys(i).map(h=>O(this,null,function*(){var p=a[h],_=yield $Q(p);u[h]=_,this.collections[h]=_,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})}))),u})},t.lockedRun=function(i){return this.idleQueue.wrapCall(i)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(i){throw ti("json-dump")},t.addState=function(i){throw ti("state")},t.importJSON=function(i){throw ti("json-dump")},t.backup=function(i){throw ti("backup")},t.leaderElector=function(){throw ti("leader-election")},t.isLeader=function(){throw ti("leader-election")},t.waitForLeadership=function(){throw ti("leader-election")},t.migrationStates=function(){throw ti("migration-schema")},t.close=function(){return O(this,null,function*(){return this.closed?Wo:(this.closed=!0,yield Ll("preCloseRxDatabase",this),this.eventBulks$.complete(),jQ--,this._subs.map(i=>i.unsubscribe()),this.name==="pseudoInstance"?Wo:this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(i=>i()))).then(()=>Promise.all(Object.keys(this.collections).map(i=>this.collections[i]).map(i=>i.close()))).then(()=>this.internalStore.close()).then(()=>FT.delete(this.storage.name+"|"+this.name)).then(()=>!0))})},t.remove=function(){return this.close().then(()=>Yye(this.name,this.storage,this.multiInstance,this.password))},Ds(n,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function Qye(n,t){var e=t.name+"|"+n;if(FT.has(e))throw Xe("DB8",{name:n,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function UQ(n,t,e,i,r,o){return O(this,null,function*(){var s=yield t.createStorageInstance({databaseInstanceToken:n,databaseName:e,collectionName:_8,schema:ST,options:i,multiInstance:r,password:o,devMode:ni.isDevMode()});return s})}function zQ({storage:n,instanceCreationOptions:t,name:e,password:i,multiInstance:r=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:a={},cleanupPolicy:l,allowSlowCount:u=!1,localDocuments:h=!1,hashFunction:p=$I,reactivity:_}){if(mr("preCreateRxDatabase",{storage:n,instanceCreationOptions:t,name:e,password:i,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:h}),!s)Qye(e,n);else if(!ni.isDevMode())throw Xe("DB9",{database:e});FT.add(n.name+"|"+e);var b=cp(10);return UQ(b,n,e,t,r,i).catch(C=>{throw FT.delete(n.name+"|"+e),C}).then(C=>{var T=new KL(e,b,n,t,i,r,o,a,C,p,l,u,_);return Ll("createRxDatabase",{database:T,creator:{storage:n,instanceCreationOptions:t,name:e,password:i,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:h}}).then(()=>T)})}function Yye(n,t,e=!0,i){return O(this,null,function*(){var r=cp(10),o=yield UQ(r,t,n,{},e,i),s=yield TT(o),a=new Set;s.forEach(u=>a.add(u.data.name));var l=Array.from(a);return yield Promise.all(l.map(u=>NT(t,o,r,n,u,e,i))),yield Ll("postRemoveRxDatabase",{databaseName:n,storage:t}),yield o.remove(),l})}function Xye(n){return O(this,null,function*(){if(yield n.storageToken,n.startupErrors[0])throw n.startupErrors[0]})}var Jye={RxSchema:DL.prototype,RxDocument:Sw,RxQuery:$L.prototype,RxCollection:jL.prototype,RxDatabase:KL.prototype},HL=new Set,qQ=new Set;function KQ(n){if(mr("preAddRxPlugin",{plugin:n,plugins:HL}),!HL.has(n)){{if(qQ.has(n.name))throw Xe("PL3",{name:n.name,plugin:n});HL.add(n),qQ.add(n.name)}if(!n.rxdb)throw dw("PL1",{plugin:n});n.init&&n.init(),n.prototypes&&Object.entries(n.prototypes).forEach(([t,e])=>e(Jye[t])),n.overwritable&&Object.assign(ni,n.overwritable),n.hooks&&Object.entries(n.hooks).forEach(([t,e])=>{e.after&&Iy[t].push(e.after),e.before&&Iy[t].unshift(e.before)})}}var Zye=new WeakMap,HQ=function(){function n(e,i,r,o,s,a,l,u,h){this.subs=[],this.subjects={received:new ye,sent:new ye,error:new ye,canceled:new gi(!1),active:new gi(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new ye,this.replicationIdentifier=e,this.collection=i,this.deletedField=r,this.pull=o,this.push=s,this.live=a,this.retryTime=l,this.autoStart=u,this.toggleOnDocumentVisible=h,this.metaInfoPromise=O(this,null,function*(){var b="rx-replication-meta-"+(yield i.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-"))),C=E8(this.collection.schema.jsonSchema,bL(this.collection.schema.jsonSchema));return{collectionName:b,schema:C}});var p=Yi(Zye,i,()=>[]);p.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(b=>{Object.defineProperty(this,b+"$",{get:function(){return this.subjects[b].asObservable()}})});var _=new Promise(b=>{this.callOnStart=b});this.startPromise=_}var t=n.prototype;return t.start=function(){return O(this,null,function*(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||A8(this);var i=this.pull&&this.pull.modifier?this.pull.modifier:xL,r=this.push&&this.push.modifier?this.push.modifier:xL,o=this.collection.database,s=yield this.metaInfoPromise,[a]=yield Promise.all([this.collection.database.storage.createStorageInstance({databaseName:o.name,collectionName:s.collectionName,databaseInstanceToken:o.token,multiInstance:o.multiInstance,options:{},schema:s.schema,password:o.password,devMode:ni.isDevMode()}),P8(this.collection,s.collectionName,s.schema)]);this.metaInstance=a,this.internalReplicationState=D8({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:o.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(st(l=>!!this.pull),ji(l=>O(this,null,function*(){if(l==="RESYNC")return l;var u=Gt(l);return u.documents=IT(this.collection,this.deletedField,u.documents),u.documents=yield Promise.all(u.documents.map(h=>i(h))),u}))),masterChangesSince:(l,u)=>O(this,null,function*(){if(!this.pull)return{checkpoint:null,documents:[]};for(var h=!1,p={};!h&&!this.isStoppedOrPaused();)try{p=yield this.pull.handler(l,u),h=!0}catch(C){var _=Xe("RC_PULL",{checkpoint:l,errors:Du(C).map(T=>I0(T)),direction:"pull"});this.subjects.error.next(_),yield SL(this.collection,ft(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var b=Gt(p);return b.documents=IT(this.collection,this.deletedField,b.documents),b.documents=yield Promise.all(b.documents.map(C=>i(C))),b}),masterWrite:l=>O(this,null,function*(){if(!this.push)return[];var u=!1;yield Ll("preReplicationMasterWrite",{rows:l,collection:this.collection});var h=yield Promise.all(l.map(T=>O(this,null,function*(){return T.newDocumentState=yield r(T.newDocumentState),T.newDocumentState===null?null:(T.assumedMasterState&&(T.assumedMasterState=yield r(T.assumedMasterState)),this.deletedField!=="_deleted"&&(T.newDocumentState=IL(this.deletedField,T.newDocumentState),T.assumedMasterState&&(T.assumedMasterState=IL(this.deletedField,T.assumedMasterState))),T)}))),p=h.filter(FH),_=null;for(p.length===0&&(u=!0,_=[]);!u&&!this.isStoppedOrPaused();)try{if(_=yield this.push.handler(p),!Array.isArray(_))throw Xe("RC_PUSH_NO_AR",{pushRows:l,direction:"push",args:{result:_}});u=!0}catch(T){var b=T.rxdb?T:Xe("RC_PUSH",{pushRows:l,errors:Du(T).map(k=>I0(k)),direction:"push"});this.subjects.error.next(b),yield SL(this.collection,ft(this.retryTime))}if(this.isStoppedOrPaused())return[];yield Ll("preReplicationMasterWriteDocumentsHandle",{result:_,collection:this.collection});var C=IT(this.collection,this.deletedField,ft(_));return C})}}),this.subs.push(this.internalReplicationState.events.error.subscribe(l=>{this.subjects.error.next(l)}),this.internalReplicationState.events.processed.down.subscribe(l=>this.subjects.received.next(l.document)),this.internalReplicationState.events.processed.up.subscribe(l=>{this.subjects.sent.next(l.newDocumentState)}),iu([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([l,u])=>{var h=l||u;this.subjects.active.next(h)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:l=>{this.isStoppedOrPaused()||this.remoteEvents$.next(l)},error:l=>{this.subjects.error.next(l)}})),this.live||(yield xT(this.internalReplicationState),yield EL(this.internalReplicationState),yield this.cancel()),this.callOnStart()}})},t.pause=function(){ft(this.internalReplicationState).events.paused.next(!0)},t.isPaused=function(){return this.internalReplicationState?this.internalReplicationState.events.paused.getValue():!1},t.isStopped=function(){return!!this.subjects.canceled.getValue()},t.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},t.awaitInitialReplication=function(){return O(this,null,function*(){return yield this.startPromise,xT(ft(this.internalReplicationState))})},t.awaitInSync=function(){return O(this,null,function*(){yield this.startPromise,yield xT(ft(this.internalReplicationState));for(var i=2;i>0;)i--,yield this.collection.database.requestIdlePromise(),yield EL(ft(this.internalReplicationState));return!0})},t.reSync=function(){this.remoteEvents$.next("RESYNC")},t.emitEvent=function(i){this.remoteEvents$.next(i)},t.cancel=function(){return O(this,null,function*(){if(this.isStopped())return Wo;var i=this.onCancel.map(r=>KH(r()));return this.internalReplicationState&&(yield k8(this.internalReplicationState)),this.metaInstance&&i.push(ft(this.internalReplicationState).checkpointQueue.then(()=>ft(this.metaInstance).close())),this.subs.forEach(r=>r.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(i)})},t.remove=function(){return O(this,null,function*(){yield ft(this.metaInstance).remove();var i=yield this.metaInfoPromise;yield this.cancel(),yield O8(this.collection,i.collectionName,i.schema)})},n}();function WQ(n,t){var e=n&&t.collection.database.multiInstance,i=e?t.collection.database.waitForLeadership():x0;return i.then(()=>{t.isStopped()||t.autoStart&&t.start()})}var eve=new Map;function GQ(n,t){var e=Yi(eve,t,()=>new Map);function i(r){return Yi(e,JSON.stringify(r),()=>n(r))}return r=>Object.assign({},r.storage,{name:"validate-"+t+"-"+r.storage.name,createStorageInstance(s){return O(this,null,function*(){var a=yield r.storage.createStorageInstance(s),l=zr(s.schema.primaryKey),u;GH(()=>u=i(s.schema));var h=a.bulkWrite.bind(a);return a.bulkWrite=(p,_)=>{u||(u=i(s.schema));var b=[],C=[];p.forEach(k=>{var U=k.document[l],W=u(k.document);W.length>0?b.push({status:422,isError:!0,documentId:U,writeRow:k,validationErrors:W,schema:a.schema}):C.push(k)});var T=C.length>0?h(C,_):Promise.resolve({error:[],success:[]});return T.then(k=>(b.forEach(U=>{k.error.push(U)}),k))},a})}})}function WL(n,t){var e=Gt(t);return delete e[n],e}function QQ(n,t){var e=t[n],i=e.toDate();return i.toISOString()}function YQ(n){var t=new Date(n);return Gr.fromDate(t)}function XQ(n,t,e){var i=WL(n,e.data());return i[t]=e.id,t!=="id"&&delete i.id,i}function GL(n,t){return t=Gt(t),delete t[n],t}function JQ(n,t){for(var e=[];n.length;){var i=n.splice(0,10);e.push(t(i))}return Promise.all(e).then(r=>r.flat())}var tve=function(n){function t(e,i,r,o,s,a=!0,l=1e3*5,u=!0){var h;return h=n.call(this,i,r,"_deleted",o,s,a,l,u)||this,h.firestore=e,h.replicationIdentifierHash=i,h.collection=r,h.pull=o,h.push=s,h.live=a,h.retryTime=l,h.autoStart=u,h}return C0(t,n),t}(HQ);function VT(n){var t=n.collection;KQ(gG);var e=new ye,i;n.live=typeof n.live>"u"?!0:n.live,n.waitForLeadership=typeof n.waitForLeadership>"u"?!0:n.waitForLeadership;var r=typeof n.serverTimestampField>"u"?"serverTimestamp":n.serverTimestampField;n.serverTimestampField=r;var o=t.schema.primaryPath,s=Uc(t.schema.jsonSchema,r);if(s||r.includes("."))throw Xe("RC6",{field:r,schema:t.schema.jsonSchema});var a=n.pull?.filter!==void 0?Du(n.pull.filter):[],l=Cp(n.firestore.collection,...a);if(n.pull){let C;i={handler(T,k){return O(this,null,function*(){var U,W;if(T){var K=YQ(T.serverTimestamp);U=Cp(l,ow(r,">",K),sw(r,"asc"),aw(k)),W=Cp(l,ow(r,"==",K),ow(WS(),">",T.id),sw(WS(),"asc"),aw(k))}else U=Cp(l,sw(r,"asc"),aw(k));for(var oe=!0,ae=[];oe;)yield HS(n.firestore.database),yield qV(n.firestore.database,P=>O(this,null,function*(){ae=[];var[N,V]=yield Promise.all([QS(U),W?QS(W):void 0]);if(!(N.metadata.hasPendingWrites||W&&ft(V).metadata.hasPendingWrites)){oe=!1,W&&(ae=ft(V).docs);var S=k-ae.length;if(S>0){var Ot=N.docs.slice(0,S).filter(On=>!!On);Ko(ae,Ot)}}}));if(ae.length===0)return{checkpoint:T??null,documents:[]};var we=ft(LI(ae)),M=ae.map(P=>XQ(r,o,P)),E={id:we.id,serverTimestamp:QQ(r,we.data())},I={documents:M,checkpoint:E};return I})},batchSize:ft(n.pull).batchSize,modifier:ft(n.pull).modifier,stream$:e.asObservable(),initialCheckpoint:n.pull.initialCheckpoint}}var u;if(n.push){let C;var h=n.push?.filter;u={handler(T){return O(this,null,function*(){h!==void 0&&(T=yield VH(T,K=>h(K.newDocumentState)));var k={},U=T.map(K=>{var oe=K.newDocumentState[o];return k[oe]=K,oe});yield HS(n.firestore.database);var W=[];return yield qV(n.firestore.database,K=>O(this,null,function*(){W=[];var oe=I=>QS(Cp(n.firestore.collection,ow(WS(),"in",I))).then(P=>P.docs).catch(P=>{if(P?.code&&P.code==="permission-denied")return Promise.all(I.map(N=>P6($V(n.firestore.collection,N)))).then(N=>N.filter(V=>V.exists()));throw P}),ae=yield JQ(U,oe),we={};ae.forEach(I=>{var P=WL(r,I.data()),N=I.id;P[o]=N,we[N]=P});var M=V6(n.firestore.database),E=!1;yield Promise.all(Object.entries(k).map(N=>O(this,[N],function*([I,P]){var V=we[I];if(V&&(!P.assumedMasterState||t.conflictHandler.isEqual(V,P.assumedMasterState,"replication-firestore-push")===!1))W.push(V);else{E=!0;var S=$V(n.firestore.collection,I),Ot=Gt(P.newDocumentState);Ot[r]=F6(),V?M.update(S,GL(o,Ot)):M.set(S,GL(o,Ot))}}))),E&&(yield M.commit())})),yield HS(n.firestore.database),W})},batchSize:n.push.batchSize,modifier:n.push.modifier}}var p=new tve(n.firestore,n.replicationIdentifier,t,i,u,n.live,n.retryTime,n.autoStart);if(n.live&&n.pull){var _=p.start.bind(p),b=p.cancel.bind(p);p.start=()=>{var C=Cp(l,sw(r,"desc"),aw(1)),T=O6(C,k=>{p.reSync()},k=>{p.subjects.error.next(Xe("RC_STREAM",{error:I0(k)}))});return p.cancel=()=>(T(),b()),_()}}return WQ(n.waitForLeadership,p),p}var LT=g$(ZQ(),1),e7=Symbol.for("Dexie"),Aw=globalThis[e7]||(globalThis[e7]=LT.default);if(LT.default.semVer!==Aw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${LT.default.semVer} and ${Aw.semVer}`);var{liveQuery:Uit,mergeRanges:zit,rangesOverlap:qit,RangeSet:Kit,cmp:Hit,Entity:Wit,PropModSymbol:Git,PropModification:Qit,replacePrefix:Yit,add:Xit,remove:Jit}=Aw;var Rw="docs",nve="changes",t7="attachments",$T="dexie",n7=new Map,BT=new Map;function i7(n,t,e,i){var r="rxdb-dexie-"+n+"--"+i.version+"--"+t,o=Yi(n7,r,()=>{var s=O(this,null,function*(){var a=Gt(e);a.autoOpen=!1;var l=new Aw(r,a),u={[Rw]:ive(i),[nve]:"++sequence, id",[t7]:"id"};return l.version(1).stores(u),yield l.open(),{dexieDb:l,dexieTable:l[Rw],dexieAttachmentsTable:l[t7],booleanIndexes:rve(i)}});return n7.set(r,o),BT.set(o,0),s});return o}function r7(n){return O(this,null,function*(){var t=yield n,e=BT.get(n),i=e-1;i===0?(t.dexieDb.close(),BT.delete(n)):BT.set(n,i)})}var XL="__";function Tp(n){var t=n.split(".");if(t.length>1)return t.map(i=>Tp(i)).join(".");if(n.startsWith("|")){var e=n.substring(1);return XL+e}else return n}function o7(n){var t=n.split(".");if(t.length>1)return t.map(i=>o7(i)).join(".");if(n.startsWith(XL)){var e=n.substring(XL.length);return"|"+e}else return n}function s7(n,t){if(!t)return t;var e=Gt(t);return e=JL(e),n.forEach(i=>{var r=Nd(t,i),o=r?"1":"0",s=Tp(i);lN(e,s,o)}),e}function e2(n,t){return t&&(t=Gt(t),t=ZL(t),n.forEach(e=>{var i=Nd(t,e),r=i==="1";lN(t,e,r)}),t)}function JL(n){if(!n||typeof n=="string"||typeof n=="number"||typeof n=="boolean")return n;if(Array.isArray(n))return n.map(e=>JL(e));if(typeof n=="object"){var t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="object"&&(i=JL(i)),t[Tp(e)]=i}),t}}function ZL(n){if(!n||typeof n=="string"||typeof n=="number"||typeof n=="boolean")return n;if(Array.isArray(n))return n.map(e=>ZL(e));if(typeof n=="object"){var t={};return Object.entries(n).forEach(([e,i])=>{(typeof i=="object"||Array.isArray(n))&&(i=ZL(i)),t[o7(e)]=i}),t}}function ive(n){var t=[],e=zr(n.primaryKey);t.push([e]),t.push(["_deleted",e]),n.indexes&&n.indexes.forEach(o=>{var s=Du(o);t.push(s)}),t.push(["_meta.lwt",e]),t.push(["_meta.lwt"]),t=t.map(o=>o.map(s=>Tp(s)));var i=t.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");i=i.filter((o,s,a)=>a.indexOf(o)===s);var r=i.join(", ");return r}function t2(n,t){return O(this,null,function*(){var e=yield n,i=yield e.dexieTable.bulkGet(t);return i.map(r=>e2(e.booleanIndexes,r))})}function Mw(n,t){return n+"||"+t}function rve(n){var t=new Set,e=[];return n.indexes?(n.indexes.forEach(i=>{var r=Du(i);r.forEach(o=>{if(!t.has(o)){t.add(o);var s=Uc(n,o);s.type==="boolean"&&e.push(o)}})}),e.push("_deleted"),LH(e)):e}function a7(n){return n===Ip?-1/0:n}function c7(n,t,e){if(n.includes(t)){var i=e===xp||e===!0?"1":"0";return i}else return e}function l7(n,t,e){if(!e){if(typeof window>"u")throw new Error("IDBKeyRange missing");e=window.IDBKeyRange}var i=t.startKeys.map((s,a)=>{var l=t.index[a];return c7(n,l,s)}).map(a7),r=t.endKeys.map((s,a)=>{var l=t.index[a];return c7(n,l,s)}).map(a7),o=e.bound(i,r,!t.inclusiveStart,!t.inclusiveEnd);return o}function n2(n,t){return O(this,null,function*(){var e=yield n.internals,i=t.query,r=i.skip?i.skip:0,o=i.limit?i.limit:1/0,s=r+o,a=t.queryPlan,l=!1;a.selectorSatisfiedByIndex||(l=Cy(n.schema,t.query));var u=l7(e.booleanIndexes,a,e.dexieDb._options.IDBKeyRange),h=a.index,p=[];if(yield e.dexieDb.transaction("r",e.dexieTable,b=>O(this,null,function*(){var C=b.idbtrans,T=C.objectStore(Rw),k,U;U="["+h.map(K=>Tp(K)).join("+")+"]",k=T.index(U);var W=k.openCursor(u);yield new Promise(K=>{W.onsuccess=function(oe){var ae=oe.target.result;if(ae){var we=e2(e.booleanIndexes,ae.value);(!l||l(we))&&p.push(we),a.sortSatisfiedByIndex&&p.length===s?K():ae.continue()}else K()}})})),!a.sortSatisfiedByIndex){var _=wT(n.schema,t.query);p=p.sort(_)}return p=p.slice(r,s),{documents:p}})}function u7(n,t){return O(this,null,function*(){var e=yield n.internals,i=t.queryPlan,r=i.index,o=l7(e.booleanIndexes,i,e.dexieDb._options.IDBKeyRange),s=-1;return yield e.dexieDb.transaction("r",e.dexieTable,a=>O(this,null,function*(){var l=a.idbtrans,u=l.objectStore(Rw),h,p;p="["+r.map(b=>Tp(b)).join("+")+"]",h=u.index(p);var _=h.count(o);s=yield new Promise((b,C)=>{_.onsuccess=function(){b(_.result)},_.onerror=T=>C(T)})})),s})}var ove=Xi(),i2=!1,sve=function(){function n(e,i,r,o,s,a,l,u){this.changes$=new ye,this.instanceId=ove++,this.storage=e,this.databaseName=i,this.collectionName=r,this.schema=o,this.internals=s,this.options=a,this.settings=l,this.devMode=u,this.primaryPath=zr(this.schema.primaryKey)}var t=n.prototype;return t.bulkWrite=function(i,r){return O(this,null,function*(){Dp(this),!i2&&!(yield qI())&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),i2=!0,i.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw Xe("SNH",{args:{row:h}})});var o=yield this.internals,s={error:[]};this.devMode&&(i=i.map(h=>{var p=Zd(h.document);return{previous:h.previous,document:p}}));var a=i.map(h=>h.document[this.primaryPath]),l;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>O(this,null,function*(){var h=new Map,p=yield t2(this.internals,a);p.forEach(C=>{var T=C;return T&&h.set(T[this.primaryPath],T),T}),l=y8(this,this.primaryPath,h,i,r),s.error=l.errors;var _=[];l.bulkInsertDocs.forEach(C=>{_.push(C.document)}),l.bulkUpdateDocs.forEach(C=>{_.push(C.document)}),_=_.map(C=>s7(o.booleanIndexes,C)),_.length>0&&(yield o.dexieTable.bulkPut(_));var b=[];l.attachmentsAdd.forEach(C=>{b.push({id:Mw(C.documentId,C.attachmentId),data:C.attachmentData.data})}),l.attachmentsUpdate.forEach(C=>{b.push({id:Mw(C.documentId,C.attachmentId),data:C.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(b),yield o.dexieAttachmentsTable.bulkDelete(l.attachmentsRemove.map(C=>Mw(C.documentId,C.attachmentId)))})),l=ft(l),l.eventBulk.events.length>0){var u=ft(l.newestRow).document;l.eventBulk.checkpoint={id:u[this.primaryPath],lwt:u._meta.lwt},this.changes$.next(l.eventBulk)}return s})},t.findDocumentsById=function(i,r){return O(this,null,function*(){Dp(this);var o=yield this.internals,s=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>O(this,null,function*(){var a=yield t2(this.internals,i);a.forEach(l=>{l&&(!l._deleted||r)&&s.push(l)})})),s})},t.query=function(i){return Dp(this),n2(this,i)},t.count=function(i){return O(this,null,function*(){if(i.queryPlan.selectorSatisfiedByIndex){var r=yield u7(this,i);return{count:r,mode:"fast"}}else{var o=yield n2(this,i);return{count:o.documents.length,mode:"slow"}}})},t.changeStream=function(){return Dp(this),this.changes$.asObservable()},t.cleanup=function(i){return O(this,null,function*(){Dp(this);var r=yield this.internals;return yield r.dexieDb.transaction("rw",r.dexieTable,()=>O(this,null,function*(){var o=Xi()-i,s=yield r.dexieTable.where("_meta.lwt").below(o).toArray(),a=[];s.forEach(l=>{l._deleted==="1"&&a.push(l[this.primaryPath])}),yield r.dexieTable.bulkDelete(a)})),!0})},t.getAttachmentData=function(i,r,o){return O(this,null,function*(){Dp(this);var s=yield this.internals,a=Mw(i,r);return yield s.dexieDb.transaction("r",s.dexieAttachmentsTable,()=>O(this,null,function*(){var l=yield s.dexieAttachmentsTable.get(a);if(l)return l.data;throw new Error("attachment missing documentId: "+i+" attachmentId: "+r)}))})},t.remove=function(){return O(this,null,function*(){Dp(this);var i=yield this.internals;return yield i.dexieTable.clear(),this.close()})},t.close=function(){return this.closed?this.closed:(this.closed=O(this,null,function*(){this.changes$.complete(),yield r7(this.internals)}),this.closed)},n}();function d7(n,t,e){return O(this,null,function*(){var i=i7(t.databaseName,t.collectionName,e,t.schema),r=new sve(n,t.databaseName,t.collectionName,t.schema,i,t.options,e,t.devMode);return yield mG($T,t,r),Promise.resolve(r)})}function Dp(n){if(n.closed)throw new Error("RxStorageInstanceDexie is closed "+n.databaseName+"-"+n.collectionName)}var ave=function(){function n(e){this.name=$T,this.rxdbVersion=S0,this.settings=e}var t=n.prototype;return t.createStorageInstance=function(i){if(v8(i),i.schema.indexes){var r=i.schema.indexes.flat();r.filter(o=>!o.includes(".")).forEach(o=>{if(!i.schema.required||!i.schema.required.includes(o))throw Xe("DXE1",{field:o,schema:i.schema})})}return d7(this,i,this.settings)},n}();function h7(n={}){var t=new ave(n);return t}var YX=g$(QX(),1);var ga;function MEe(){return ga||(ga=new YX.default({strict:!0}),ga.addKeyword("version"),ga.addKeyword("keyCompression"),ga.addKeyword("primaryKey"),ga.addKeyword("indexes"),ga.addKeyword("encrypted"),ga.addKeyword("final"),ga.addKeyword("sharding"),ga.addKeyword("internalIndexes"),ga.addKeyword("attachments"),ga.addKeyword("ref"),ga.addKeyword("crdt")),ga}function PEe(n){var t=MEe().compile(n);return e=>{var i=t(e);return i?[]:t.errors}}var XX=GQ(PEe,"ajv");var Ku=class n{db=Le(void 0);constructor(){this.initialize()}addCollection(t){let e=this.db();e&&e.addCollections(t)}initialize(){return O(this,null,function*(){console.log("initializing rxdb");let t=yield zQ({name:"arphoBalance",storage:XX({storage:h7()})});console.log("initialized rxdb db",t),this.db.set(t),console.log("initialized rxdb this.db",this.db())})}getDb(){return this.db()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hu=class n{constructor(t,e,i,r){this.firestore=t;this.fireDb=e;this.rxDb=i;this.users=r;this.init()}createCategory(t){return O(this,null,function*(){let e=wr(this.firestore,"categorie"),i=yield cm(e,t.serialize()),r=yield Pl(i);return new zo(r.data()).setKey(r.id)})}categories=Le([]);fetchCategoryFromFirestore(t){return O(this,null,function*(){let e=new zo;try{let i=wr(this.firestore,"categorie"),r=yield Pl(qo(i,t));e=new zo(r.data()),e.setKey(t)}catch(i){console.log("error",i),console.error(i)}finally{return e}})}db;rxCategories={categorie:{schema:{version:0,title:"categorie",description:" dfinisce  una categoria",primaryKey:"key",type:"object",properties:{title:{type:"string"},key:{type:"string",maxLength:100},fatherKey:{type:"string"},userKey:{type:"string"}}}}};userKey="";init(){return O(this,null,function*(){this.db=this.rxDb.getDb(),console.log(" initialized this.db",this.db),this.userKey=(yield this.users.getLoggedUser()).key;try{console.log("this.db in init",this.rxDb.getDb());let i=yield this.db?.addCollections(this.rxCategories).then(()=>O(this,null,function*(){let r=this.db?.collections;console.log("collections",r)})).catch(r=>{console.error(r)})}catch(i){console.error(i)}let t=wr(this.firestore,"categorie"),e=this.runReplicateFirestore({collection:this.rxCategories,firestore:{projectId:"fir-6062c",database:this.fireDb,collection:t},pull:{filter:[qa("userKey","==",this.userKey)]}})})}runReplicateFirestore(t){VT(t)}getDbCategories(t){return O(this,null,function*(){let e=Od(this.fireDb,`categorie/${t}`),r=(yield Pd(e)).val(),o=[];return Object.keys(r).forEach(s=>{let a=new zo(r[s]);a.setKey(s),o.push(a)}),o})}fetchDbCategory(t,e){return O(this,null,function*(){let i=yield this.db?.categorie.find().exec();console.log("rxCategories",i);let r=Od(this.fireDb,`categorie/${e}/${t}`),s=(yield Pd(r)).val();return new zo(s).setKey(t)})}listCategories4User(t){return O(this,null,function*(){let e=wr(this.firestore,"categorie"),i=Ol(wr(this.firestore,"categorie"),qa("userKey","==",t)),o=(yield lm(i)).docs.map(s=>{let a=new zo(s.data());return a.setKey(s.id),a});return this.categories.set(o),o})}pushIntoCollection(t){return Nl(qo(this.firestore,`categorie/${t.key}`),t.serialize())}getCategoriesFromRxDb(){return new Promise((t,e)=>{this.db?.categorie.find().exec().then(i=>{let r=[];i.forEach(o=>{let s=new zo(o);s.setKey(o.key),r.push(s)}),t(r)}).catch(i=>{e(i)})})}static \u0275fac=function(e){return new(e||n)(Ve(za),Ve(Ua),Ve(Ku),Ve(gn))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var ID=class n{constructor(t){this.service=t}category=Le(new zo({title:""}));categoryKey="";userKey="";ngOnInit(){return O(this,null,function*(){if(this.categoryKey!=""){let t=yield this.service.fetchDbCategory(this.categoryKey,this.userKey);this.category.set(t)}})}static \u0275fac=function(e){return new(e||n)(pe(Hu))};static \u0275cmp=le({type:n,selectors:[["app-category-name-viewer"]],inputs:{categoryKey:"categoryKey",userKey:"userKey"},decls:2,vars:1,template:function(e,i){e&1&&(D(0,"p"),z(1),R()),e&2&&(B(),Zt(i.category().name))},encapsulation:2})};function OEe(n,t){n&1&&(D(0,"th",8),z(1," Categoria "),R())}function NEe(n,t){if(n&1&&(D(0,"td",9),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.name," ")}}function FEe(n,t){n&1&&(D(0,"th",8),z(1," Categoria madre "),R())}function VEe(n,t){if(n&1&&(D(0,"td",9),be(1,"app-category-name-viewer",10),R()),n&2){let e=t.$implicit,i=Se();B(),re("categoryKey",e.fatherKey)("userKey",i.user.key)}}function LEe(n,t){n&1&&be(0,"tr",11)}function BEe(n,t){n&1&&be(0,"tr",12)}var SD=class n{constructor(t,e,i){this.service=t;this.users=e;this.$snackBar=i}importCategories2firestore(){return O(this,null,function*(){let t=0;console.log("categoria 0",this.Categories()[0]);let e=this.Categories()[0],i=this.user.key;this.Categories().forEach(r=>O(this,null,function*(){r.setUserKey(i),this.service.pushIntoCollection(r).then(()=>{t++,console.log(`Category ${r.name} pushed into Firestore successfully`)}).catch(o=>{console.error("Error pushing category into Firestore:",o)}).finally(()=>{t===this.Categories().length&&(console.log("All categories pushed into Firestore successfully"),this.$snackBar.open("All categories pushed into Firestore successfully","Close",{duration:3e3}))})}))})}Categories=Le([]);displayedColumns=["name","fatherName"];user=new Jh;ngOnInit(){return O(this,null,function*(){this.user=yield this.users.getLoggedUser();let t=yield this.service.getDbCategories(this.user.key);console.log("categories",t);let e=yield this.service.getCategoriesFromRxDb();console.log("rxCategories",e)})}static \u0275fac=function(e){return new(e||n)(pe(Hu),pe(gn),pe(Tl))};static \u0275cmp=le({type:n,selectors:[["app-categories-list"]],decls:11,vars:3,consts:[["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fatherName"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"categoryKey","userKey"],["mat-header-row",""],["mat-row",""]],template:function(e,i){e&1&&(D(0,"button",0),he("click",function(){return i.importCategories2firestore()}),z(1,"carica categorie"),R(),D(2,"table",1),Jn(3,2),Ee(4,OEe,2,0,"th",3)(5,NEe,2,1,"td",4),Zn(),Jn(6,5),Ee(7,FEe,2,0,"th",3)(8,VEe,2,2,"td",4),Zn(),Ee(9,LEe,1,0,"tr",6)(10,BEe,1,0,"tr",7),R()),e&2&&(B(2),re("dataSource",i.Categories()),B(7),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,ID],encapsulation:2})};var Er=class{key="";address={address:"",latitude:0,longitude:0};altirude="";email="";rootSellerKey="";cliente=!1;ecommerce=!1;fidelity_card="";nome="";userKey="";serverTimestamp="";note="";onLine=!1;_deleted=!1;constructor(t){this.build(t)}set title(t){this.nome=t}build(t){return Object.assign(this,t),this}setKey(t){return this.key=t,this}serialize(){return{address:this.address,altirude:this.altirude,rootSellerKey:this.rootSellerKey,userKey:this.userKey,serverTimestamp:this.serverTimestamp,email:this.email,cliente:this.cliente,ecommerce:this.ecommerce,fidelity_card:this.fidelity_card,nome:this.nome,note:this.note,onLine:this.onLine,_deleted:this._deleted}}};function $Ee(n,t){n&1&&be(0,"div",2)}var jEe=new ce("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var TD=(()=>{class n{_elementRef=w(He);_ngZone=w(Ke);_changeDetectorRef=w(qt);_renderer=w(Jr);_cleanupTransitionEnd;_animationMode=w(_i,{optional:!0});constructor(){let e=w(jEe,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=JX(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=JX(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new ke;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,r){i&2&&(tt("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),_r("mat-"+r.color),ut("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Eo],bufferValue:[2,"bufferValue","bufferValue",Eo],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Ft],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){i&1&&(D(0,"div",0),be(1,"div",1),Ee(2,$Ee,1,0,"div",2),R(),D(3,"div",3),be(4,"span",4),R(),D(5,"div",5),be(6,"span",4),R()),i&2&&(B(),Co("flex-basis",r._getBufferBarFlexBasis()),B(),kt(r.mode==="buffer"?2:-1),B(),Co("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return n})();function JX(n,t=0,e=100){return Math.max(t,Math.min(e,n))}var DD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt]})}return n})();function UEe(n,t){}var Nm=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var rC=(()=>{class n extends qh{_elementRef=w(He);_focusTrapFactory=w(QA);_config;_interactivityChecker=w(GA);_ngZone=w(Ke);_overlayRef=w(Bg);_focusMonitor=w(La);_renderer=w(Jr);_platform=w(mn);_document=w(xt,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=w(qt);_injector=w(Mt);_isDestroyed=!1;constructor(){super(),this._config=w(Nm,{optional:!0})||new Nm,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),s=this._renderer.listen(e,"mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||Xr(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=vd(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,i=vd();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=vd()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Vt(Cs,7),i&2){let o;Pe(o=Oe())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&tt("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Et],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Ee(0,UEe,0,0,"ng-template",0)},dependencies:[Cs],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})(),iC=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ye;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Ui(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},zEe=new ce("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.block()}}),qEe=new ce("DialogData"),KEe=new ce("DefaultDialogConfig");var oC=(()=>{class n{_overlay=w(Fi);_injector=w(Mt);_defaultOptions=w(KEe,{optional:!0});_parentDialog=w(n,{optional:!0,skipSelf:!0});_overlayContainer=w(OE);_idGenerator=w(Hn);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ye;_afterOpenedAtThisLevel=new ye;_ariaHiddenElements=new Map;_scrollStrategy=w(zEe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=md(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Kn(void 0)));constructor(){}open(e,i){let r=this._defaultOptions||new Nm;i=ee(ee({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new iC(s,i),l=this._attachContainer(s,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){UB(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){UB(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),UB(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Dc({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let o=r.injector||r.viewContainerRef?.injector,s=[{provide:Nm,useValue:r},{provide:iC,useValue:i},{provide:Bg,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=rC;let l=new Tc(a,r.viewContainerRef,Mt.create({parent:o||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,i,r,o){if(e instanceof tr){let s=this._createInjector(o,i,r,void 0),a={$implicit:o.data,dialogRef:i};o.templateContext&&(a=ee(ee({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new ws(e,null,a,s))}else{let s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new Tc(e,o.viewContainerRef,s));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,o){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:qEe,useValue:e.data},{provide:iC,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!s||!s.get(Ni,null,{optional:!0}))&&a.push({provide:Ni,useValue:{value:e.direction,change:Ye()}}),Mt.create({parent:s||o,providers:a})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UB(n,t){let e=n.length;for(;e--;)t(n[e])}var kD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[oC],imports:[Ac,Es,bE,Es]})}return n})();function HEe(n,t){}var RD=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},zB="mdc-dialog--open",eJ="mdc-dialog--opening",tJ="mdc-dialog--closing",WEe=150,GEe=75,QEe=(()=>{class n extends rC{_animationMode=w(_i,{optional:!0});_animationStateChanged=new ke;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?iJ(this._config.enterAnimationDuration)??WEe:0;_exitAnimationDuration=this._animationsEnabled?iJ(this._config.exitAnimationDuration)??GEe:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(nJ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(eJ,zB)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(zB),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(zB),this._animationsEnabled?(this._hostElement.style.setProperty(nJ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(tJ)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(eJ,tJ)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(ms("id",r._config.id),tt("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),ut("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[Et],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(D(0,"div",0)(1,"div",1),Ee(2,HEe,0,0,"ng-template",2),R()())},dependencies:[Cs],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})(),nJ="--mat-dialog-transition-duration";function iJ(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Va(n.substring(0,n.length-2)):n.endsWith("s")?Va(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var AD=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(AD||{}),rc=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ye;_beforeClosed=new ye;_result;_closeFallbackTimeout;_state=AD.OPEN;_closeInteractionType;constructor(t,e,i){this._ref=t,this._containerInstance=i,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(st(r=>r.state==="opened"),xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(st(r=>r.state==="closed"),xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ri(this.backdropClick(),this.keydownEvents().pipe(st(r=>r.keyCode===27&&!this.disableClose&&!Ui(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),rJ(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(st(e=>e.state==="closing"),xi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=AD.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=AD.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function rJ(n,t,e){return n._closeInteractionType=t,n.close(e)}var oh=new ce("MatMdcDialogData"),YEe=new ce("mat-mdc-dialog-default-options"),XEe=new ce("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.block()}});var oc=(()=>{class n{_overlay=w(Fi);_defaultOptions=w(YEe,{optional:!0});_scrollStrategy=w(XEe);_parentDialog=w(n,{optional:!0,skipSelf:!0});_idGenerator=w(Hn);_dialog=w(oC);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ye;_afterOpenedAtThisLevel=new ye;dialogConfigClass=RD;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=md(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Kn(void 0)));constructor(){this._dialogRefConstructor=rc,this._dialogContainerType=QEe,this._dialogDataToken=oh}open(e,i){let r;i=ee(ee({},this._defaultOptions||new RD),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,Qe(ee({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Nm,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hy=(()=>{class n{dialogRef=w(rc,{optional:!0});_elementRef=w(He);_dialog=w(oc);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=sJ(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){rJ(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&he("click",function(s){return r._onButtonClick(s)}),i&2&&tt("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Tt]})}return n})(),oJ=(()=>{class n{_dialogRef=w(rc,{optional:!0});_elementRef=w(He);_dialog=w(oc);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=sJ(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n})}return n})(),Fm=(()=>{class n extends oJ{id=w(Hn).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&ms("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Et]})}return n})(),Vm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[z$([r4])]})}return n})(),Lm=(()=>{class n extends oJ{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&ut("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},features:[Et]})}return n})();function sJ(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}var Wy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[oc],imports:[kD,Ac,Es,gt,gt]})}return n})();var JEe=["switch"],ZEe=["*"];function exe(n,t){n&1&&(D(0,"span",10),bo(),D(1,"svg",12),be(2,"path",13),R(),D(3,"svg",14),be(4,"path",15),R()())}var txe=new ce("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),nxe={provide:Qh,useExisting:Oo(()=>Gy),multi:!0},MD=class{source;checked;constructor(t,e){this.source=t,this.checked=e}},Gy=(()=>{class n{_elementRef=w(He);_focusMonitor=w(La);_changeDetectorRef=w(qt);defaults=w(txe);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new MD(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new ke;toggleChange=new ke;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){w(vi).load(vs);let e=w(new Cc("tabindex"),{optional:!0}),i=this.defaults,r=w(_i,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this._noopAnimations=r==="NoopAnimations",this.id=this._uniqueId=w(Hn).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new MD(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(i&1&&Vt(JEe,5),i&2){let o;Pe(o=Oe())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){i&2&&(ms("id",r.id),tt("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),_r(r.color?"mat-"+r.color:""),ut("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",We],color:"color",disabled:[2,"disabled","disabled",We],disableRipple:[2,"disableRipple","disableRipple",We],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Eo(e)],checked:[2,"checked","checked",We],hideIcon:[2,"hideIcon","hideIcon",We],disabledInteractive:[2,"disabledInteractive","disabledInteractive",We]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[St([nxe,{provide:xd,useExisting:n,multi:!0}]),Ft,Tt],ngContentSelectors:ZEe,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(i&1){let o=Pt();Xt(),D(0,"div",1)(1,"button",2,0),he("click",function(){return xe(o),Ie(r._handleClick())}),be(3,"span",3),D(4,"span",4)(5,"span",5)(6,"span",6),be(7,"span",7),R(),D(8,"span",8),be(9,"span",9),R(),Ee(10,exe,5,0,"span",10),R()()(),D(11,"label",11),he("click",function(a){return xe(o),Ie(a.stopPropagation())}),nt(12),R()()}if(i&2){let o=hi(2);re("labelPosition",r.labelPosition),B(),ut("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),re("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),tt("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),B(8),re("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),B(),kt(r.hideIcon?-1:10),B(),re("for",r.buttonId),tt("id",r._labelId)}},dependencies:[Zv,Rz],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return n})();var PD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Gy,gt,gt]})}return n})();var sC=class n{constructor(t){this.fb=t;this.dataForm=this.fb.group({name:this.seller.nome,ecommerce:this.seller.ecommerce,cliente:this.seller.cliente,note:this.seller.note})}dataForm=new bi({});seller=new Er;initializeForm(){return this.dataForm=this.fb.group({name:this.seller.nome,ecommerce:this.seller.ecommerce,cliente:this.seller.cliente,note:this.seller.note}),this.dataForm}static \u0275fac=function(e){return new(e||n)(pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-data-form"]],inputs:{seller:"seller"},decls:19,vars:7,consts:[[3,"formGroup"],["matInput","","formControlName","name",3,"ngModelChange","ngModel"],["matInput","","formControlName","note",3,"ngModelChange","ngModel"],["matInput","","hidden","true","formControlName","ecommerce",3,"ngModelChange","ngModel"],["matInput","","formControlName","ecommerce",3,"ngModelChange","ngModel"],["matInput","","hidden","true","formControlName","cliente",3,"ngModelChange","ngModel"],["matInput","","formControlName","cliente",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(D(0,"form",0)(1,"mat-form-field")(2,"mat-label"),z(3,"Nome"),R(),D(4,"input",1),bt("ngModelChange",function(o){return vt(i.seller.nome,o)||(i.seller.nome=o),o}),R()(),D(5,"mat-form-field")(6,"mat-label"),z(7,"Note"),R(),D(8,"input",2),bt("ngModelChange",function(o){return vt(i.seller.note,o)||(i.seller.note=o),o}),R()(),D(9,"mat-form-field")(10,"input",3),bt("ngModelChange",function(o){return vt(i.seller.ecommerce,o)||(i.seller.ecommerce=o),o}),R(),D(11,"mat-label"),z(12,"pratica ecommerce"),R(),D(13,"mat-slide-toggle",4),bt("ngModelChange",function(o){return vt(i.seller.ecommerce,o)||(i.seller.ecommerce=o),o}),R()(),D(14,"mat-form-field")(15,"input",5),bt("ngModelChange",function(o){return vt(i.seller.cliente,o)||(i.seller.cliente=o),o}),R(),D(16,"mat-label"),z(17,"\xE8 un cliente"),R(),D(18,"mat-slide-toggle",6),bt("ngModelChange",function(o){return vt(i.seller.cliente,o)||(i.seller.cliente=o),o}),R()()()),e&2&&(re("formGroup",i.dataForm),B(4),yt("ngModel",i.seller.nome),B(4),yt("ngModel",i.seller.note),B(2),yt("ngModel",i.seller.ecommerce),B(3),yt("ngModel",i.seller.ecommerce),B(2),yt("ngModel",i.seller.cliente),B(3),yt("ngModel",i.seller.cliente))},dependencies:[Gi,io,Ki,Hi,no,Wi,Hr,ai,Ii,Fr,zi,Nc,Ai,lr,ro,PD,Gy],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};function ixe(n,t){}var rxe={bottomSheetState:ps("state",[Vo("void, hidden",yi({transform:"translateY(100%)"})),Vo("visible",yi({transform:"translateY(0%)"})),vr("visible => void, visible => hidden",Rk([Or(`${oR.COMPLEX} ${rR.ACCELERATION_CURVE}`),yv("@*",_v(),{optional:!0})])),vr("void => visible",Rk([Or(`${oR.EXITING} ${rR.DECELERATION_CURVE}`),yv("@*",_v(),{optional:!0})]))])},oxe=(()=>{class n extends rC{_breakpointSubscription;_animationState="void";_animationStateChanged=new ke;_destroyed;constructor(){super();let e=w(xg);this._breakpointSubscription=e.observe([bd.Medium,bd.Large,bd.XLarge]).subscribe(()=>{let i=this._elementRef.nativeElement.classList;i.toggle("mat-bottom-sheet-container-medium",e.isMatched(bd.Medium)),i.toggle("mat-bottom-sheet-container-large",e.isMatched(bd.Large)),i.toggle("mat-bottom-sheet-container-xlarge",e.isMatched(bd.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(e){e.toState==="visible"&&this._trapFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_captureInitialFocus(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(i,r){i&1&&eg("@state.start",function(s){return r._onAnimationStart(s)})("@state.done",function(s){return r._onAnimationDone(s)}),i&2&&(Zp("@state",r._animationState),tt("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-label",r._config.ariaLabel))},features:[Et],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Ee(0,ixe,0,0,"ng-template",0)},dependencies:[Cs],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color, var(--mat-sys-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-sys-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-sys-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-sys-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-sys-body-large-tracking))}@media(forced-colors: active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape, 28px);border-top-right-radius:var(--mat-bottom-sheet-container-shape, 28px)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[rxe.bottomSheetState]}})}return n})(),zl=new ce("MatBottomSheetData"),qB=class{viewContainerRef;panelClass;direction;data=null;hasBackdrop=!0;backdropClass;disableClose=!1;ariaLabel=null;ariaModal=!0;closeOnNavigation=!0;autoFocus="dialog";restoreFocus=!0;scrollStrategy;height="";minHeight;maxHeight},Qc=class{_ref;get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}containerInstance;disableClose;_afterOpened=new ye;_result;_closeFallbackTimeout;constructor(t,e,i){this._ref=t,this.containerInstance=i,this.disableClose=e.disableClose,i._animationStateChanged.pipe(st(r=>r.phaseName==="done"&&r.toState==="visible"),xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(st(r=>r.phaseName==="done"&&r.toState==="hidden"),xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),t.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),ri(this.backdropClick(),this.keydownEvents().pipe(st(r=>r.keyCode===27))).subscribe(r=>{!this.disableClose&&(r.type!=="keydown"||!Ui(r))&&(r.preventDefault(),this.dismiss())})}dismiss(t){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(st(e=>e.phaseName==="start"),xi(1)).subscribe(e=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},e.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=t,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},sxe=new ce("mat-bottom-sheet-default-options"),Lp=(()=>{class n{_overlay=w(Fi);_parentBottomSheet=w(n,{optional:!0,skipSelf:!0});_defaultOptions=w(sxe,{optional:!0});_bottomSheetRefAtThisLevel=null;_dialog=w(oC);get _openedBottomSheetRef(){let e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}constructor(){}open(e,i){let r=ee(ee({},this._defaultOptions||new qB),i),o;return this._dialog.open(e,Qe(ee({},r),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:oxe,scrollStrategy:r.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:o}),providers:(s,a,l)=>(o=new Qc(s,r,l),[{provide:Qc,useValue:o},{provide:zl,useValue:r.data}])})),o.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===o&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>o.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):o.containerInstance.enter(),this._openedBottomSheetRef=o,o}dismiss(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Lp],imports:[kD,gt,Es,gt]})}return n})();var axe=["*"],cxe='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}',lxe=["unscopedContent"],uxe=["text"],dxe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],hxe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var mxe=new ce("ListOption"),fxe=(()=>{class n{_elementRef=w(He);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),pxe=(()=>{class n{_elementRef=w(He);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),gxe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),cJ=(()=>{class n{_listOption=w(mxe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,hostVars:4,hostBindings:function(i,r){i&2&&ut("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),_xe=(()=>{class n extends cJ{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Et]})}return n})(),yxe=(()=>{class n extends cJ{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Et]})}return n})(),vxe=new ce("MAT_LIST_CONFIG"),HB=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ys(e)}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=ys(e)}_disabled=!1;_defaultOptions=w(vxe,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,hostVars:1,hostBindings:function(i,r){i&2&&tt("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),bxe=(()=>{class n{_elementRef=w(He);_ngZone=w(Ke);_listBase=w(HB,{optional:!0});_platform=w(mn);_hostElement;_isButtonElement;_noopAnimations;_avatars;_icons;set lines(e){this._explicitLines=Va(e,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=ys(e)}_disableRipple=!1;get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=ys(e)}_disabled=!1;_subscriptions=new It;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){w(vi).load(vs);let e=w(Ag,{optional:!0}),i=w(_i,{optional:!0});this.rippleConfig=e||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=i==="NoopAnimations",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new kg(this,this._ngZone,this._hostElement,this._platform,w(Mt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(ri(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,contentQueries:function(i,r,o){if(i&1&&(jt(o,_xe,4),jt(o,yxe,4)),i&2){let s;Pe(s=Oe())&&(r._avatars=s),Pe(s=Oe())&&(r._icons=s)}},hostVars:4,hostBindings:function(i,r){i&2&&(tt("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),ut("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var ND=(()=>{class n extends HB{static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[St([{provide:HB,useExisting:n}]),Et],ngContentSelectors:axe,decls:1,vars:0,template:function(i,r){i&1&&(Xt(),nt(0))},styles:[cxe],encapsulation:2,changeDetection:0})}return n})(),FD=(()=>{class n extends bxe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(e){this._activated=ys(e)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=hn(n)))(r||n)}})();static \u0275cmp=le({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(i&1&&(jt(o,pxe,5),jt(o,fxe,5),jt(o,gxe,5)),i&2){let s;Pe(s=Oe())&&(r._lines=s),Pe(s=Oe())&&(r._titles=s),Pe(s=Oe())&&(r._meta=s)}},viewQuery:function(i,r){if(i&1&&(Vt(lxe,5),Vt(uxe,5)),i&2){let o;Pe(o=Oe())&&(r._unscopedContent=o.first),Pe(o=Oe())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(tt("aria-current",r._getAriaCurrent()),ut("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Et],ngContentSelectors:hxe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let o=Pt();Xt(dxe),nt(0),D(1,"span",1),nt(2,1),nt(3,2),D(4,"span",2,0),he("cdkObserveContent",function(){return xe(o),Ie(r._updateItemLines(!0))}),nt(6,3),R()(),nt(7,4),nt(8,5),be(9,"div",3)}},dependencies:[az],encapsulation:2,changeDetection:0})}return n})();var VD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Eg,gt,Cd,uR,Pc]})}return n})();function wxe(n,t){if(n&1){let e=Pt();D(0,"mat-list-item",2),he("click",function(){let r=xe(e).$implicit,o=Se();return Ie(o.selectItem(r))}),z(1),R()}if(n&2){let e=t.$implicit;B(),Ut(" ",e," ")}}var LD=class n{selectItem(t){console.log(t),this.MatBottomSheetRef.dismiss(t)}itemsList=Le([]);ngOnInit(){console.log("data",this.data),this.itemsList.set(this.data),console.log("itemsList",this.itemsList())}data=w(zl);MatBottomSheetRef=w(Qc);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-bottom-list"]],decls:3,vars:0,consts:[["role","list"],["role","listitem"],["role","listitem",3,"click"]],template:function(e,i){e&1&&(D(0,"mat-list",0),No(1,wxe,2,1,"mat-list-item",1,Jp),R()),e&2&&(B(),Fo(i.itemsList()))},dependencies:[VD,ND,FD],encapsulation:2})};var ql=class n{constructor(t){this.http=t}reverseGeocode(t,e){return console.log(`getting address for ${t},${e}`),new Promise((i,r)=>{let o=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${e}&key=${du.GOOGLEapikEY}`;this.http.get(o).subscribe({next:s=>{i(s)},error:s=>{r(s)}})})}static distance(t,e,i,r){var o=.017453292519943295,s=Math.cos,a=.5-s((i-t)*o)/2+s(t*o)*s(i*o)*(1-s((r-e)*o))/2;return 12742*Math.asin(Math.sqrt(a))}fetchAddresFromCoordinates(t,e){}getCurrentPosition(){return new kr(t=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{t.next(e),t.complete()},e=>{t.error(e)}):t.error("Geolocation is not available in this browser.")})}static \u0275fac=function(e){return new(e||n)(Ve(Ef))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var aC=class n{constructor(t,e,i,r,o){this.fb=t;this.geolocation=e;this.http=i;this.bottomSheet=r;this.data=o;this.addressForm=this.fb.group({address:this.seller.address.address,latitude:this.seller.address.latitude,longitude:this.seller.address.longitude})}subscriptions=new It;indirizzi=Le([]);geolocalize(){return O(this,null,function*(){console.log("geolocalize");let t=yield this.geolocation.reverseGeocode(this.seller.address.latitude,this.seller.address.longitude);console.log("address prima ",t),this.geolocation.getCurrentPosition().subscribe({next:e=>O(this,null,function*(){console.log("got position",e),this.seller.address.latitude=e.coords.latitude,this.seller.address.longitude=e.coords.longitude;let i=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e.coords.latitude},${e.coords.longitude}&key=${du.GOOGLEapikEY}`,r=yield this.geolocation.reverseGeocode(this.seller.address.latitude,this.seller.address.longitude);console.log("address",r);let o=[];r&&(o=r.results.map(a=>a.formatted_address)),console.log(o),this.indirizzi.set(o);let s=this.bottomSheet.open(LD,{data:o});this.subscriptions.add(s.afterDismissed().subscribe(a=>{console.log("The bottom sheet was dismissed with result:",a),this.seller.address.address=a}))}),error:e=>{console.error("error getting position",e)}})})}addressForm=new bi({});seller=new Er;ngOnDestroy(){this.subscriptions.unsubscribe()}initializeForm(){return this.addressForm=this.fb.group({address:this.seller.address.address,latitude:this.seller.address.latitude,longitude:this.seller.address.longitude}),this.addressForm}static \u0275fac=function(e){return new(e||n)(pe(cr),pe(ql),pe(Ef),pe(Lp),pe(zl))};static \u0275cmp=le({type:n,selectors:[["app-address-form"]],inputs:{seller:"seller"},decls:16,vars:4,consts:[[3,"formGroup"],["mat-button","","cdkFocusInitial","",3,"click"],["fontIcon","my_location"],["matInput","","formControlName","address",3,"ngModelChange","ngModel"],["matInput","","formControlName","latitude",3,"ngModelChange","ngModel"],["matInput","","formControlName","longitude",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(D(0,"form",0)(1,"button",1),he("click",function(){return i.geolocalize()}),be(2,"mat-icon",2),z(3," Geolocalizza"),R(),D(4,"mat-form-field")(5,"mat-label"),z(6,"Address"),R(),D(7,"input",3),bt("ngModelChange",function(o){return vt(i.seller.address.address,o)||(i.seller.address.address=o),o}),R()(),D(8,"mat-form-field")(9,"mat-label"),z(10,"Latitude"),R(),D(11,"input",4),bt("ngModelChange",function(o){return vt(i.seller.address.latitude,o)||(i.seller.address.latitude=o),o}),R()(),D(12,"mat-form-field")(13,"mat-label"),z(14,"Longitude"),R(),D(15,"input",5),bt("ngModelChange",function(o){return vt(i.seller.address.longitude,o)||(i.seller.address.longitude=o),o}),R()()()),e&2&&(re("formGroup",i.addressForm),B(7),yt("ngModel",i.seller.address.address),B(4),yt("ngModel",i.seller.address.latitude),B(4),yt("ngModel",i.seller.address.longitude))},dependencies:[Gi,io,Ki,Hi,no,Wi,Hr,ai,Ii,Fr,zi,Nc,Ai,lr,ro,Ht,rn,Ri,ci,OD],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};var es=class n{constructor(t,e,i,r){this.firestore=t;this.fireDb=e;this.rxDb=i;this.users=r;this.init()}delete(t){let e=qo(this.firestore,`sellers/${t.key}`);return FI(e)}getSuppliers4UserOnValue(t,e){let i=Ol(wr(this.firestore,"sellers"),qa("userKey","==",t));N_(i,r=>{let o=r.docs.map(s=>{let a=new Er(s.data());return a.setKey(s.id),a});e(o)})}createSupplier(t){return O(this,null,function*(){wr(this.firestore,"sellers");let e=yield cm(wr(this.firestore,"sellers"),t.serialize()),i=yield Pl(e);return new Er(i.data()).setKey(i.id)})}updateSupplier(t){return Nl(qo(this.firestore,`sellers/${t.key}`),t.serialize())}fetchSeller(t){return O(this,null,function*(){let e=new Er({}),i=qo(this.firestore,`sellers/${t}`),r=yield Pl(i);return e.build(r.data()).setKey(t),e})}db;rxSellers={sellers:{schema:{version:0,primaryKey:"key",type:"string",properties:{nome:{type:"string"},rootSellerKey:{type:"string"},userKey:{type:"string"},serverTimestamp:{type:"string"},onLine:{type:"boolean"},email:{type:"string"},cliente:{type:"boolean"},ecommerce:{type:"boolean"},fidelity_card:{type:"string"},address:{type:"object",properties:{address:{type:"string"},latitude:{type:"number"},longitude:{type:"number"}}},note:{type:"string"}},required:["key","userKey","timestamp"]}}};userKey="";runReplicateFirestore(t){VT(t)}init(){return O(this,null,function*(){this.db=this.rxDb.getDb(),this.userKey=(yield this.users.getLoggedUser()).key;let t=yield this.db?.addCollections(this.rxSellers);try{this.db?.addCollections(this.rxSellers)}catch(r){console.error(r)}let e=wr(this.firestore,"sellers"),i=this.runReplicateFirestore({collection:t,firestore:{projectId:"fir-6062c",database:this.fireDb,collection:e},pull:{filter:[qa("userKey","==",this.userKey)]}})})}getSuppliers4User(t){return O(this,null,function*(){return this.fetchSellers4userFromFirestore(t)})}fetchSellers4userFromFirestore(t){return O(this,null,function*(){let e=Ol(wr(this.firestore,"sellers"),qa("userKey","==",t)),i=yield lm(e);console.log("querySnapshot",i);let r=[];return i.forEach(o=>{let s=new Er(o.data());s.setKey(o.id),r.push(s)}),r})}fetchSuppliers4userFromDb(t){return O(this,null,function*(){console.log(`fetching suppliers from real db for user ${t}`);let e=Od(this.fireDb,`fornitori/${t}`),r=(yield Pd(e)).val(),o=[];return console.log("sellers",r),Object.keys(r).forEach(s=>{let a=new Er(r[s]);a.setKey(s),o.push(a)}),o})}pushIntoCollection(t){return Nl(qo(this.firestore,`sellers/${t.key}`),t.serialize())}static \u0275fac=function(e){return new(e||n)(Ve(za),Ve(Ua),Ve(Ku),Ve(gn))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var $p=class n{constructor(t,e,i,r){this.sellers_Service=t;this.users=e;this.geolocation=i;this.fb=r}dataSection;addressSection;updateSeller(){this.dialogRef.close(this.seller())}geolocalize(){console.log("geolocalize"),console.log("form",this.addressForm.value),this.addressForm.patchValue({address:"ciccio",latitude:10,longitude:10}),this.geolocation.getCurrentPosition().subscribe({next:t=>{console.log("got position",t)},error:t=>{console.error("error getting positionerror getting position",t)}})}onkey(t){console.log("filter for",t.target.value),this.sellers.set(this.sellers().filter(e=>e.nome.toLowerCase().includes(t.target.value.toLowerCase())))}sellers=Le([]);address={address:"",latitude:0,longitude:0};makeWindowTitle(){return this.seller().nome?`editing ${this.seller().nome}`:"nuovo fornitore"}ngOnInit(){return O(this,null,function*(){console.log("seller",this.seller()),this.address=this.seller().address;let t=yield this.users.getLoggedUser(),e=yield this.sellers_Service.getSuppliers4User(t.key);this.sellers.set(e),console.log("address",this.seller().address.address),this.address=this.seller().address;let i=this.dataSection.initializeForm(),r=this.addressSection.initializeForm();this.sellerForm=this.fb.group({data:i,address:r})})}dialogRef=w(rc);data=w(oh);seller=gr(this.data.data);buttonText=gr(this.data.buttonText);addressForm=new bi({address:new qi(this.seller().address.address||""),latitude:new qi(this.seller().address.latitude||0),longitude:new qi(this.seller().address.longitude||0)});sellerForm=new bi({nome:new qi(this.seller().nome),note:new qi(this.seller().note),rootSellerKey:new qi(this.seller().rootSellerKey),address:this.addressForm});static \u0275fac=function(e){return new(e||n)(pe(es),pe(gn),pe(ql),pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-seller-dialog"]],viewQuery:function(e,i){if(e&1&&(Vt(sC,7),Vt(aC,7)),e&2){let r;Pe(r=Oe())&&(i.dataSection=r.first),Pe(r=Oe())&&(i.addressSection=r.first)}},inputs:{seller:[1,"seller"],buttonText:[1,"buttonText"]},outputs:{seller:"sellerChange",buttonText:"buttonTextChange"},decls:10,vars:5,consts:[["mat-dialog-title",""],[3,"seller"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"click","mat-dialog-close"]],template:function(e,i){e&1&&(D(0,"h2",0),z(1),R(),D(2,"mat-dialog-content"),be(3,"app-data-form",1)(4,"app-address-form",1),D(5,"mat-dialog-actions",2)(6,"button",3),z(7,"Cancel"),R(),D(8,"button",4),he("click",function(){return i.updateSeller()}),z(9),R()()()),e&2&&(B(),Zt(i.makeWindowTitle()),B(2),re("seller",i.seller()),B(),re("seller",i.seller()),B(4),re("mat-dialog-close",!0),B(),Zt(i.buttonText()))},dependencies:[Fm,Vm,Lm,Hy,Ai,Gi,ai,Ii,ro,Wy,Pc,Ht,rn,sC,aC],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};var Cxe=["*",[["mat-toolbar-row"]]],Exe=["*","mat-toolbar-row"],xxe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),Qy=(()=>{class n{_elementRef=w(He);_platform=w(mn);_document=w(xt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,o){if(i&1&&jt(o,xxe,5),i&2){let s;Pe(s=Oe())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(_r(r.color?"mat-"+r.color:""),ut("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Exe,decls:2,vars:0,template:function(i,r){i&1&&(Xt(Cxe),nt(0),nt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})();var Yy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gt]})}return n})();var Ixe=["mat-menu-item",""],Sxe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Txe=["mat-icon, [matMenuItemIcon]","*"];function Dxe(n,t){n&1&&(bo(),D(0,"svg",2),be(1,"polygon",3),R())}var kxe=["*"];function Axe(n,t){if(n&1){let e=Pt();D(0,"div",0),he("click",function(){xe(e);let r=Se();return Ie(r.closed.emit("click"))})("animationstart",function(r){xe(e);let o=Se();return Ie(o._onAnimationStart(r.animationName))})("animationend",function(r){xe(e);let o=Se();return Ie(o._onAnimationDone(r.animationName))})("animationcancel",function(r){xe(e);let o=Se();return Ie(o._onAnimationDone(r.animationName))}),D(1,"div",1),nt(2),R()()}if(n&2){let e=Se();_r(e._classList),ut("mat-menu-panel-animations-disabled",e._animationsDisabled)("mat-menu-panel-exit-animation",e._panelAnimationState==="void")("mat-menu-panel-animating",e._isAnimating),re("id",e.panelId),tt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var YB=new ce("MAT_MENU_PANEL"),Ps=(()=>{class n{_elementRef=w(He);_document=w(xt);_focusMonitor=w(La);_parentMenu=w(YB,{optional:!0});_changeDetectorRef=w(qt);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new ye;_focused=new ye;_highlighted=!1;_triggersSubmenu=!1;constructor(){w(vi).load(vs),this._parentMenu?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&he("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(tt("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),ut("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",We],disableRipple:[2,"disableRipple","disableRipple",We]},exportAs:["matMenuItem"],features:[Ft],attrs:Ixe,ngContentSelectors:Txe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(Xt(Sxe),nt(0),D(1,"span",0),nt(2,1),R(),be(3,"div",1),Ee(4,Dxe,2,0,":svg:svg",2)),i&2&&(B(3),re("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),B(),kt(r._triggersSubmenu?4:-1))},dependencies:[Zv],encapsulation:2,changeDetection:0})}return n})();var dJ=new ce("MatMenuContent"),Wu=(()=>{class n{_template=w(tr);_appRef=w(ll);_injector=w(Mt);_viewContainerRef=w(Mr);_document=w(xt);_changeDetectorRef=w(qt);_portal;_outlet;_attached=new ye;constructor(){}attach(e={}){this._portal||(this._portal=new ws(this._template,this._viewContainerRef)),this.detach(),this._outlet||(this._outlet=new Lg(this._document.createElement("div"),null,this._appRef,this._injector));let i=this._template.elementRef.nativeElement;i.parentNode.insertBefore(this._outlet.outletElement,i),this._changeDetectorRef.markForCheck(),this._portal.attach(this._outlet,e),this._attached.next()}detach(){this._portal?.isAttached&&this._portal.detach()}ngOnDestroy(){this.detach(),this._outlet?.dispose()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["ng-template","matMenuContent",""]],features:[St([{provide:dJ,useExisting:n}])]})}return n})(),Rxe=new ce("mat-menu-default-options",{providedIn:"root",factory:Mxe});function Mxe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var QB="_mat-menu-enter",BD="_mat-menu-exit",ts=(()=>{class n{_elementRef=w(He);_changeDetectorRef=w(qt);_injector=w(Mt);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled;_allItems;_directDescendantItems=new Ah;_classList={};_panelAnimationState="void";_animationDone=new ye;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(e){let i=this._previousPanelClass,r=ee({},this._classList);i&&i.length&&i.split(" ").forEach(o=>{r[o]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(o=>{r[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}_previousPanelClass;get classList(){return this.panelClass}set classList(e){this.panelClass=e}closed=new ke;close=this.closed;panelId=w(Hn).getId("mat-menu-panel-");constructor(){let e=w(Rxe);this.overlayPanelClass=e.overlayPanelClass||"",this._xPosition=e.xPosition,this._yPosition=e.yPosition,this.backdropClass=e.backdropClass,this.overlapTrigger=e.overlapTrigger,this.hasBackdrop=e.hasBackdrop,this._animationsDisabled=w(_i,{optional:!0})==="NoopAnimations"}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Rf(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Kn(this._directDescendantItems),di(e=>ri(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=e.toArray(),o=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[o]&&!r[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Kn(this._directDescendantItems),di(i=>ri(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let i=e.keyCode,r=this._keyManager;switch(i){case 27:Ui(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(e);return}}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Xr(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList=Qe(ee({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(e){let i=e===BD;(i||e===QB)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(e){(e===QB||e===BD)&&(this._isAnimating=!0)}_setIsOpen(e){if(this._panelAnimationState=e?"enter":"void",e){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(BD),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?QB:BD)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Kn(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let e=null;return this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),e}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,o){if(i&1&&(jt(o,dJ,5),jt(o,Ps,5),jt(o,Ps,4)),i&2){let s;Pe(s=Oe())&&(r.lazyContent=s.first),Pe(s=Oe())&&(r._allItems=s),Pe(s=Oe())&&(r.items=s)}},viewQuery:function(i,r){if(i&1&&Vt(tr,5),i&2){let o;Pe(o=Oe())&&(r.templateRef=o.first)}},hostVars:3,hostBindings:function(i,r){i&2&&tt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",We],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:We(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[St([{provide:YB,useExisting:n}]),Ft],ngContentSelectors:kxe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(Xt(),Ee(0,Axe,3,12,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,changeDetection:0})}return n})(),hJ=new ce("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(Fi);return()=>n.scrollStrategies.reposition()}});function Pxe(n){return()=>n.scrollStrategies.reposition()}var Oxe={provide:hJ,deps:[Fi],useFactory:Pxe},uJ=zs({passive:!0});var cC=new WeakMap,Yc=(()=>{class n{_overlay=w(Fi);_element=w(He);_viewContainerRef=w(Mr);_menuItemInstance=w(Ps,{optional:!0,self:!0});_dir=w(Ni,{optional:!0});_focusMonitor=w(La);_ngZone=w(Ke);_scrollStrategy=w(hJ);_changeDetectorRef=w(qt);_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=It.EMPTY;_hoverSubscription=It.EMPTY;_menuCloseSubscription=It.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_handleTouchStart=e=>{Jv(e)||(this._openedBy="touch")};_openedBy=void 0;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}_menu;menuData;restoreFocus=!0;menuOpened=new ke;onMenuOpen=this.menuOpened;menuClosed=new ke;onMenuClose=this.menuClosed;constructor(){let e=w(YB,{optional:!0});this._parentMaterialMenu=e instanceof ts?e:void 0,this._element.nativeElement.addEventListener("touchstart",this._handleTouchStart,uJ)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this.menu&&this._ownsMenu(this.menu)&&cC.delete(this.menu),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,uJ),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let e=this.menu;if(this._menuOpen||!e)return;this._pendingRemoval?.unsubscribe();let i=cC.get(e);cC.set(e,this),i&&i!==this&&i.closeMenu();let r=this._createOverlay(e),o=r.getConfig(),s=o.positionStrategy;this._setPosition(e,s),o.hasBackdrop=e.hasBackdrop==null?!this.triggersSubmenu():e.hasBackdrop,r.hasAttached()||(r.attach(this._getPortal(e)),e.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),e instanceof ts&&(e._setIsOpen(!0),e._directDescendantItems.changes.pipe(An(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){let i=this._overlayRef,r=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),r instanceof ts&&this._ownsMenu(r)?(this._pendingRemoval=r._animationDone.pipe(xi(1)).subscribe(()=>i.detach()),r._setIsOpen(!1)):i.detach(),r&&this._ownsMenu(r)&&cC.delete(r),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe(r=>{this.menu instanceof ts&&this.menu._handleKeydown(r)})}return this._overlayRef}_getOverlayConfig(e){return new Dc({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr"})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(r=>{this._ngZone.run(()=>{let o=r.connectionPair.overlayX==="start"?"after":"before",s=r.connectionPair.overlayY==="top"?"below":"above";e.setPositionClasses(o,s)})})}_setPosition(e,i){let[r,o]=e.xPosition==="before"?["end","start"]:["start","end"],[s,a]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,u]=[s,a],[h,p]=[r,o],_=0;if(this.triggersSubmenu()){if(p=r=e.xPosition==="before"?"start":"end",o=h=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let b=this._parentMaterialMenu.items.first;this._parentInnerPadding=b?b._getHostElement().offsetTop:0}_=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l=s==="top"?"bottom":"top",u=a==="top"?"bottom":"top");i.withPositions([{originX:r,originY:l,overlayX:h,overlayY:s,offsetY:_},{originX:o,originY:l,overlayX:p,overlayY:s,offsetY:_},{originX:r,originY:u,overlayX:h,overlayY:a,offsetY:-_},{originX:o,originY:u,overlayX:p,overlayY:a,offsetY:-_}])}_menuClosingActions(){let e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Ye(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(st(s=>this._menuOpen&&s!==this._menuItemInstance)):Ye();return ri(e,r,o,i)}_handleMousedown(e){Xv(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let i=e.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(e=>{e===this._menuItemInstance&&!e.disabled&&(this._openedBy="mouse",this.openMenu())}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new ws(e.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(e){return cC.get(e)===this}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&he("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),i&2&&tt("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]})}return n})(),Xc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Oxe],imports:[Cd,gt,Ac,zh,gt]})}return n})(),mJ={transformMenu:ps("transformMenu",[Vo("void",yi({opacity:0,transform:"scale(0.8)"})),vr("void => enter",Or("120ms cubic-bezier(0, 0, 0.2, 1)",yi({opacity:1,transform:"scale(1)"}))),vr("* => void",Or("100ms 25ms linear",yi({opacity:0})))]),fadeInItems:ps("fadeInItems",[Vo("showing",yi({opacity:1})),vr("void => *",[yi({opacity:0}),Or("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},lut=mJ.fadeInItems,uut=mJ.transformMenu;function Nxe(n,t){if(n&1&&(D(0,"button",2)(1,"mat-icon"),z(2),R(),z(3),R()),n&2){let e=t.$implicit;re("routerLink",e.link),B(2),Zt(e.icon),B(),Ut(" ",e.title," ")}}var Bm=class n{menuItems=[{title:"Categorie",icon:"categories.png",link:"/categories-list"},{title:"Fornitori",icon:"seller.png",link:"/suppliers-list"},{title:"Pagamenti",icon:"payment.png",link:"/payments-list"},{title:"Carrelli",icon:"cart.png",link:"/shoppingCart-list"}];showMenu(){console.log("menu")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-my-menu"]],decls:7,vars:1,consts:[["menu","matMenu"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"]],template:function(e,i){if(e&1&&(D(0,"button",1)(1,"mat-icon"),z(2,"menu"),R()(),D(3,"mat-menu",null,0),No(5,Nxe,4,3,"button",2,Jp),R()),e&2){let r=hi(4);re("matMenuTriggerFor",r),B(5),Fo(i.menuItems)}},dependencies:[Ht,Ed,Ri,ci,Xc,ts,Ps,Yc,Wv,zU],encapsulation:2})};var _a=class n{transform(t,...e){return e[0]?t.filter(i=>e[0](i)):t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Xp({name:"filterPipe",type:n,pure:!0})};var Jy=class n{constructor(t){this.dialogRef=t}data=w(oh);onNoClick(){this.dialogRef.close(!1)}static \u0275fac=function(e){return new(e||n)(pe(rc))};static \u0275cmp=le({type:n,selectors:[["app-confirm-dialog"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,i){e&1&&(D(0,"h2",0),z(1),R(),D(2,"mat-dialog-content")(3,"p"),z(4),R()(),D(5,"mat-dialog-actions")(6,"button",1),he("click",function(){return i.onNoClick()}),z(7,"No Cancel"),R(),D(8,"button",2),z(9,"Ok"),R()()),e&2&&(B(),Ut("Hi ",i.data.title,""),B(3),Zt(i.data.message),B(4),re("mat-dialog-close",!0))},dependencies:[Ht,rn,Fm,Vm,Lm,Hy],encapsulation:2,changeDetection:0})};var Fxe=n=>({data:n});function Vxe(n,t){n&1&&(D(0,"th",16),z(1," nome "),R())}function Lxe(n,t){if(n&1&&(D(0,"td",17),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.nome," ")}}function Bxe(n,t){n&1&&(D(0,"th",16),z(1," indirizzo "),R())}function $xe(n,t){if(n&1&&(D(0,"td",17),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.address.address," ")}}function jxe(n,t){n&1&&(D(0,"th",16),z(1," note "),R())}function Uxe(n,t){if(n&1&&(D(0,"td",17),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.note," ")}}function zxe(n,t){n&1&&be(0,"tr",18)}function qxe(n,t){if(n&1&&be(0,"tr",19),n&2){let e=t.$implicit;Se();let i=hi(27);re("matMenuTriggerFor",i)("matMenuTriggerData",tg(2,Fxe,e))}}function Kxe(n,t){if(n&1){let e=Pt();D(0,"button",20),he("click",function(){let r=xe(e).data,o=Se();return Ie(o.updateSeller(r))}),D(1,"mat-icon"),z(2,"create"),R(),D(3,"span"),z(4,"modifica"),R()(),D(5,"button",20),he("click",function(){let r=xe(e).data,o=Se();return Ie(o.deleteSeller(r))}),D(6,"mat-icon"),z(7,"delete"),R(),D(8,"span"),z(9,"elimina"),R()()}}var $D=class n{constructor(t,e,i,r){this.service=t;this.usersService=e;this.dialog=i;this.snackBar=r}deleteSeller(t){console.log("deleteSeller",t);let e=this.dialog.open(Jy,{data:{title:"Delete Supplier",message:`Are you sure you want to delete ${t.nome}?`}});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(console.log("delete",t),this.service.delete(t))}))}filterSellers=t=>!0;filterSuppliers(t){console.log("filterSuppliers",t.target.value),this.filterSellers=e=>(console.log("filtering",e),e.nome?.toLowerCase().toLowerCase().includes(t.target.value.toLowerCase().trim()))}createSupplier(){console.log("createSupplier");let t=new Er,e=this.dialog.open($p,{data:{data:t,buttonText:"Crea fornitore"},height:"80%",width:"90%"});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(console.log("res for created supplier ",i),this.service.createSupplier(i).then(r=>{console.log("created",r),this.snackBar.open("Supplier created successfully","Close",{duration:3e3})}).catch(r=>{console.error(r),this.snackBar.open("Error creating supplier","Close",{duration:3e3})}))}))}subscriptions=new It;updateSeller(t){console.log("updateSeller",t);let e=this.dialog.open($p,{data:{data:t,buttonText:"Update"},height:"80%",width:"90%"});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(t.build(i),console.log("res for updated seller ",t),this.service.updateSupplier(t).then(r=>{console.log("updated",r),this.snackBar.open("Supplier updated successfully","Close",{duration:3e3})}).catch(r=>{console.error(r),this.snackBar.open("Error updating supplier","Close",{duration:3e3})}))}))}progress=Le(0);importSuppliers2firestore(){return O(this,null,function*(){let t=yield this.usersService.getLoggedUser(),e=yield this.service.fetchSuppliers4userFromDb(t.key);console.log("ready 2 upload");let i=0;e.forEach(r=>{r.userKey=t.key,this.service.pushIntoCollection(r).then(o=>{console.log("pushed",r),i++,this.progress.set(i/e.length*100)}).catch(o=>{console.log("err on",r),console.log(o)})}),this.snackBar.open(`${i} suppliers imported successfully`,"Close",{duration:3e3})})}sellers=Le([]);displayedColumns=["nome","indirizzo","note"];ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){return O(this,null,function*(){let t=yield this.usersService.getLoggedUser();this.service.getSuppliers4UserOnValue(t.key,e=>{this.sellers.set(e)})})}static \u0275fac=function(e){return new(e||n)(pe(es),pe(gn),pe(oc),pe(Tl))};static \u0275cmp=le({type:n,selectors:[["app-suppliersList"]],decls:29,vars:7,consts:[["menu","matMenu"],[2,"position","fixed","top","0%","width","100%","z-index","100"],["id","commands"],["matInput","","placeholder","search","id","searchInput",3,"keyup"],["mat-button","",3,"click"],["mat-fab","","extended","","id","createSellerr",3,"click"],["mode","determinate",3,"value"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","indirizzo"],["matColumnDef","note"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matRowDef","matRowDefColumns"],["matMenuContent",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-menu-item","",3,"click"]],template:function(e,i){if(e&1){let r=Pt();D(0,"mat-toolbar",1)(1,"div",2),be(2,"app-my-menu"),D(3,"mat-icon"),z(4,"search"),R(),D(5,"input",3),he("keyup",function(s){return xe(r),Ie(i.filterSuppliers(s))}),R(),D(6,"button",4),he("click",function(){return xe(r),Ie(i.importSuppliers2firestore())}),z(7,"upload Sellers"),R(),D(8,"button",5),he("click",function(){return xe(r),Ie(i.createSupplier())}),D(9,"mat-icon"),z(10,"add"),R(),z(11," crea venditore"),R()()(),be(12,"mat-progress-bar",6),D(13,"table",7),fs(14,"filterPipe"),Jn(15,8),Ee(16,Vxe,2,0,"th",9)(17,Lxe,2,1,"td",10),Zn(),Jn(18,11),Ee(19,Bxe,2,0,"th",9)(20,$xe,2,1,"td",10),Zn(),Jn(21,12),Ee(22,jxe,2,0,"th",9)(23,Uxe,2,1,"td",10),Zn(),Ee(24,zxe,1,0,"tr",13)(25,qxe,1,4,"tr",14),R(),D(26,"mat-menu",null,0),Ee(28,Kxe,10,0,"ng-template",15),R()}e&2&&(B(12),Rh("value",i.progress()),B(),re("dataSource",$s(14,4,i.sellers(),i.filterSellers)),B(11),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,Ht,rn,Og,Ox,DD,TD,ci,Yy,Qy,Bm,_a,Xc,ts,Ps,Wu,Yc],styles:["body[_ngcontent-%COMP%]{overflow:visible;display:block}app-suppliersList[_ngcontent-%COMP%]{display:block;overflow:visible}div#commands[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:sticky;top:0;z-index:100;background:#f2f6f8;padding:5px;width:100%}#searchInput[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;border-radius:4rem;height:1rem}"]})};var Jc=class{key="";nome="";set title(t){this.nome=t}note="";fatherPaymentKey="";userKey="";_deleted=!1;serverTimestamp="";constructor(t){this.build(t)}setKey(t){return this.key=t,this}get fullText(){return`${this.nome} ${this.note}`}serialize(){return{key:this.key,nome:this.nome,userKey:this.userKey,serverTimestamp:b0(),_deleted:this._deleted,note:this.note,fatherPaymentKey:this.fatherPaymentKey}}build(t){return Object.assign(this,t),this}};var Gu=class n{constructor(t,e,i,r){this.firestore=t;this.fireDb=e;this.rxDb=i;this.users=r}getPaymentsOnRealTime4User(t,e){}getPaymentsFromFirestore(t){throw new Error("Method not implemented.")}fetchPayment(t){return O(this,null,function*(){let e=yield Pl(qo(this.firestore,`payments/${t}`)),i=new Jc(e.data());return i.setKey(e.id),i})}createPayment(t){return O(this,null,function*(){let e=yield cm(wr(this.firestore,"payments"),t.serialize()),i=yield Pl(e);return new Jc(i.data()).setKey(i.id)})}updatePayment(t){let e=qo(this.firestore,`payments/${t.key}`);return Nl(e,t.serialize())}getPayments(t){return O(this,null,function*(){return this.fetchPaymentsFromFirestore(t)})}fetchDocumentsFromRealtimeDb(t){return O(this,null,function*(){let e=Od(this.fireDb,`pagamenti/${t}`),r=(yield Pd(e)).val(),o=[];return Object.keys(r).forEach(s=>{let a=new Jc(r[s]);a.setKey(s),o.push(a)}),o})}fetchPaymentsFromFirestoreOnRealTime(t,e){let i=Ol(wr(this.firestore,"payments"),qa("userKey","==",t));N_(i,r=>{let o=r.docs.map(s=>{let a=new Jc(s.data());return a.setKey(s.id),a});e(o)})}fetchPaymentsFromFirestore(t){return O(this,null,function*(){let e=wr(this.firestore,"payments"),i=Ol(wr(this.firestore,"payments"),qa("userKey","==",t));return(yield lm(i)).docs.map(s=>{let a=new Jc(s.data());return a.setKey(s.id),a})})}pushPayment2firestore(t){return Nl(qo(this.firestore,`payments/${t.key}`),t.serialize())}static \u0275fac=function(e){return new(e||n)(Ve(za),Ve(Ua),Ve(Ku),Ve(gn))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hxe=(n,t)=>t.key;function Wxe(n,t){if(n&1&&(D(0,"mat-option",6),z(1),R()),n&2){let e=t.$implicit;Rh("value",e.key),B(),Zt(e.nome)}}var jp=class n{constructor(t,e,i){this.fb=t;this.paymentsService=e;this.Users=i}updatePayment(){console.log("updatePayment",this.payment()),this.dialogRef.close(this.payment())}dialogRef=w(rc);data=w(oh);payment=gr(this.data.data);buttonText=gr(this.data.buttonText);paymentForm=new bi({nome:new qi(this.payment().nome),fatherPaymentKey:new qi(this.payment().fatherPaymentKey),note:new qi(this.payment().note)});ngOnInit(){return O(this,null,function*(){console.log("payment",this.payment());let t=yield this.Users.getLoggedUser(),e=yield this.paymentsService.getPayments(t.key);this.payments.set(e),this.paymentForm=this.fb.group({nome:new qi(this.payment().nome),fatherPaymentKey:new qi(this.payment().fatherPaymentKey),note:new qi(this.payment().note)})})}payments=Le([]);onNoClick(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||n)(pe(cr),pe(Gu),pe(gn))};static \u0275cmp=le({type:n,selectors:[["app-payments-dialog"]],inputs:{payment:[1,"payment"],buttonText:[1,"buttonText"]},outputs:{payment:"paymentChange",buttonText:"buttonTextChange"},decls:24,vars:9,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","formControlName","nome",3,"ngModelChange","ngModel"],["matInput","","formControlName","note",3,"ngModelChange","ngModel"],["matNativeControl","","matInput","","formControlName","fatherPaymentKey",3,"ngModelChange","ngModel"],["matInput","","formControlName","nome",3,"ngModelChange","ngModel","disabled"],[3,"value"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"click","mat-dialog-close"]],template:function(e,i){e&1&&(D(0,"h2",0),z(1),R(),D(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field")(5,"mat-label"),z(6,"Nome"),R(),D(7,"input",2),bt("ngModelChange",function(o){return vt(i.payment().nome,o)||(i.payment().nome=o),o}),R()(),D(8,"mat-form-field")(9,"mat-label"),z(10,"Note"),R(),D(11,"input",3),bt("ngModelChange",function(o){return vt(i.payment().note,o)||(i.payment().note=o),o}),R()(),D(12,"mat-form-field")(13,"mat-label"),z(14," Pagamento base"),R(),D(15,"mat-select",4),bt("ngModelChange",function(o){return vt(i.payment().fatherPaymentKey,o)||(i.payment().fatherPaymentKey=o),o}),D(16,"input",5),bt("ngModelChange",function(o){return vt(i.payment().nome,o)||(i.payment().nome=o),o}),R(),No(17,Wxe,2,2,"mat-option",6,Hxe),R()()()(),D(19,"mat-dialog-actions",7)(20,"button",8),z(21,"Cancel"),R(),D(22,"button",9),he("click",function(){return i.updatePayment()}),z(23),R()()),e&2&&(B(),Ut("editing ",i.payment().nome,""),B(2),re("formGroup",i.paymentForm),B(4),yt("ngModel",i.payment().nome),B(4),yt("ngModel",i.payment().note),B(4),yt("ngModel",i.payment().fatherPaymentKey),B(),yt("ngModel",i.payment().nome),re("disabled",!0),B(),Fo(i.payments()),B(5),re("mat-dialog-close",!0),B(),Zt(i.buttonText()))},dependencies:[Fm,Vm,Lm,Hy,Ai,lr,Fr,zi,Gi,io,Ki,Hi,no,Wi,Hr,ai,Ii,ro,Wg,jh,Wy,Ht,rn],styles:["[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0})};var Gxe=n=>({data:n});function Qxe(n,t){n&1&&(D(0,"th",14),z(1," Nome "),R())}function Yxe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.nome," ")}}function Xxe(n,t){n&1&&(D(0,"th",14),z(1," Note "),R())}function Jxe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.note," ")}}function Zxe(n,t){n&1&&be(0,"tr",16)}function eIe(n,t){if(n&1&&be(0,"tr",17),n&2){let e=t.$implicit;Se();let i=hi(25);re("matMenuTriggerFor",i)("matMenuTriggerData",tg(2,Gxe,e))}}function tIe(n,t){if(n&1){let e=Pt();D(0,"button",18),he("click",function(){let r=xe(e).data,o=Se();return Ie(o.updateItem(r))}),D(1,"mat-icon"),z(2,"create"),R(),D(3,"span"),z(4,"modifica"),R()(),D(5,"button",18),he("click",function(){let r=xe(e).data,o=Se();return Ie(o.deleteItem(r))}),D(6,"mat-icon"),z(7,"delete"),R(),D(8,"span"),z(9,"elimina"),R()()}}var UD=class n{constructor(t,e,i,r){this.service=t;this.usersService=e;this._snackBar=i;this.dialog=r}deleteItem(t){console.log("deleteItem",t)}updateItem(t){console.log("updateItem",t),this.seePayment(t)}filter4payments=t=>!0;filterPayments(t){console.log("filterPauments",t.target.value),this.filter4payments=e=>(e.nome?.toLowerCase()+" "+e.note?.toLowerCase()).toLowerCase().includes(t.target.value.toLowerCase().trim())}createPayment(){console.log("createPayment");let t=this.dialog.open(jp,{data:{data:new Jc,buttonText:"Create"}});this.subscriptions.add(t.afterClosed().subscribe(e=>{e&&(console.log("res for created payment ",e),this.service.createPayment(e).then(i=>{console.log("created",i),this._snackBar.open("Payment created successfully","Close",{duration:3e3})}).catch(i=>{console.error(i),this._snackBar.open("Error creating payment","Close",{duration:3e3})}))}))}subscriptions=new It;uploadPayments2firestore(){return O(this,null,function*(){let t=yield this.usersService.getLoggedUser(),e=yield this.service.fetchDocumentsFromRealtimeDb(t.key);console.log("upload payments",e),e.forEach(i=>{i.userKey=t.key,i.serverTimestamp=w0().toString(),console.log("timestamp",w0()),this.service.pushPayment2firestore(i).then(r=>{console.log("pushed",i)}).catch(r=>{console.log("err on",i),console.error(r)})})})}progress=40;payments=Le([]);displayedColumns=["nome","note"];seePayment(t){console.log("seePayment",t);let e=this.dialog.open(jp,{data:{data:t,buttonText:"Update"}});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(console.log("edited payment",i),i.key&&this.service.updatePayment(i).then(r=>{this._snackBar.open("Payment updated successfully","Close",{})}).catch(r=>{console.error(r),this._snackBar.open("Error updating payment","Close",{})}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){return O(this,null,function*(){let t=yield this.usersService.getLoggedUser(),e=yield this.service.getPayments(t.key);this.service.getPaymentsOnRealTime4User(t.key,i=>{this.payments.set(i)}),console.log("payments",e),this.payments.set(e)})}static \u0275fac=function(e){return new(e||n)(pe(Gu),pe(gn),pe(Tl),pe(oc))};static \u0275cmp=le({type:n,selectors:[["app-paymentsList"]],decls:27,vars:6,consts:[["menu","matMenu"],["mat-button","",3,"click"],[2,"position","fixed","top","0%","width","100%","z-index","100"],["id","commands"],["matInput","","placeholder","search payment","id","searchInput",3,"keyup"],["mat-fab","","extended","","id","createSellerr",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","note"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matRowDef","matRowDefColumns"],["matMenuContent",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-menu-item","",3,"click"]],template:function(e,i){if(e&1){let r=Pt();D(0,"button",1),he("click",function(){return xe(r),Ie(i.uploadPayments2firestore())}),z(1,"upload Payments"),R(),D(2,"mat-toolbar",2)(3,"div",3),be(4,"app-my-menu"),D(5,"mat-icon"),z(6,"search"),R(),D(7,"input",4),he("keyup",function(s){return xe(r),Ie(i.filterPayments(s))}),R(),D(8,"button",1),he("click",function(){return xe(r),Ie(i.uploadPayments2firestore())}),z(9,"upload Payments"),R(),D(10,"button",5),he("click",function(){return xe(r),Ie(i.createPayment())}),D(11,"mat-icon"),z(12,"add"),R(),z(13," crea Pagamento"),R()()(),D(14,"table",6),fs(15,"filterPipe"),Jn(16,7),Ee(17,Qxe,2,0,"th",8)(18,Yxe,2,1,"td",9),Zn(),Jn(19,10),Ee(20,Xxe,2,0,"th",8)(21,Jxe,2,1,"td",9),Zn(),Ee(22,Zxe,1,0,"tr",11)(23,eIe,1,4,"tr",12),R(),D(24,"mat-menu",null,0),Ee(26,tIe,10,0,"ng-template",13),R()}e&2&&(B(14),re("dataSource",$s(15,3,i.payments(),i.filter4payments)),B(8),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,Ht,rn,Og,Ox,ci,Yy,Qy,Bm,_a,Xc,ts,Ps,Wu,Yc],styles:["#searchInput[_ngcontent-%COMP%]{border-radius:2rem}"]})};var Kl=class{paymentsKey="";amount=0;paymentsDate="";note="";get fullText(){return`${this.note}`}constructor(t){this.build(t)}build(t){return Object.assign(this,t),this.paymentsDate=this.paymentsDate||new Date().toISOString(),this}serialize(){return{paymentsKey:this.paymentsKey,amount:this.amount,paymentsDate:this.paymentsDate,note:this.note}}};var $m=class{key="";prezzo=0;moneta="\u20AC";descrizione="";cateoriesKey=[];set categorieId(t){this.cateoriesKey=t}note="";picture="";constructor(t){this.build(t)}build(t){return Object.assign(this,t),this}get fullText(){return`${this.prezzo} ${this.moneta} ${this.descrizione} ${this.note}`}serialize(){return{key:this.key,prezzo:this.prezzo,moneta:this.moneta,descrizione:this.descrizione,categoriesKey:this.cateoriesKey?.length>0?this.cateoriesKey:[],note:this.note,picture:this.picture}}};var qr=class{key="";buyngDate="";deliveredDate="";delivered=!1;title="";items=[];_deleted=!1;currency="\u20AC";_totale=0;set totale(t){this._totale=t}set moneta(t){this.currency=t}set dataAcquisto(t){this.buyngDate=t}userKey="";sellerKey="";set fornitoreId(t){this.sellerKey=t}online=!1;paymentsKey="";set pagamentoId(t){this.paymentsKey=t}get totale(){return this.items.length>0?this.items.reduce((t,e)=>Number(t)+Number(e.prezzo),0):0}note="";payments=[];constructor(t){this.build(t)}build(t){return Object.assign(this,t),this.buyngDate=this.buyngDate||new Date().toISOString(),this.items=this.items.map(e=>new $m(e)),this.payments.length!=0?this.payments=this.payments.map(e=>new Kl(e)):this.totale>0&&this.payments.push(new Kl({paymentsKey:this.paymentsKey,amount:this.totale,paymentsDate:this.buyngDate})),this}get fullText(){let t=this.items.map(i=>i.fullText).join(" "),e=this.payments.map(i=>i.fullText).join(" ");return`${this.title} ${this.note} ${t} ${e}`}get paiedAmount(){return this.payments.reduce((t,e)=>Number(t)+Number(e.amount),0)}setKey(t){return this.key=t,this}serialize(){return{key:this.key,buyngDate:this.buyngDate,deliveredDate:this.deliveredDate,title:this.title,_deleted:this._deleted,currency:this.currency,userKey:this.userKey,sellerKey:this.sellerKey,delivered:this.delivered,online:this.online,paymentsKey:this.paymentsKey,serverTimestamp:w0(),totale:this.totale,note:this.note,items:this.items.map(t=>t.serialize()),payments:this.payments.filter(t=>t.paymentsKey).map(t=>t.serialize())}}};var jm=class n{constructor(t){this.service=t}sellerKey="";seller=Le(new Er);ngOnChanges(t){return O(this,null,function*(){if(t.sellerKey.currentValue)if(t.sellerKey.currentValue){let e=yield this.service.fetchSeller(t.sellerKey.currentValue);this.seller.set(e)}else this.seller.set(new Er({}))})}static \u0275fac=function(e){return new(e||n)(pe(es))};static \u0275cmp=le({type:n,selectors:[["app-sellerViewer"]],inputs:{sellerKey:"sellerKey"},features:[Tt],decls:2,vars:1,template:function(e,i){e&1&&(D(0,"p"),z(1),R()),e&2&&(B(),Ut(`
`,i.seller().nome,`
`))},encapsulation:2,changeDetection:0})};var zD=class n{transform(t,e){return t.sort((i,r)=>new Date(r.buyngDate).getTime()-new Date(i.buyngDate).getTime())}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Xp({name:"appSorterPipe",type:n,pure:!0})};var qD=class n{transform(t,...e){return e[0]?t.sort((i,r)=>ql.distance(Number(r.address.latitude),Number(r.address.longitude),Number(e[0].latitude),Number(e[0].longitude))-ql.distance(Number(i.address.latitude),Number(i.address.longitude),Number(e[0].latitude),Number(e[0].longitude))):t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Xp({name:"distanceSorter",type:n,pure:!0})};function nIe(n,t){n&1&&(D(0,"th",9),z(1," Fornitore "),R())}function iIe(n,t){if(n&1&&(D(0,"td",10),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.nome," ")}}function rIe(n,t){n&1&&(D(0,"th",9),z(1," Fornitore base "),R())}function oIe(n,t){if(n&1&&(D(0,"td",10),be(1,"app-sellerViewer",11),R()),n&2){let e=t.$implicit;B(),re("sellerKey",e.rootSellerKey)}}function sIe(n,t){n&1&&be(0,"tr",12)}function aIe(n,t){if(n&1){let e=Pt();D(0,"tr",13),he("click",function(){let r=xe(e).$implicit,o=Se();return Ie(o.selectSeller(r))}),R()}}var KD=class n{constructor(t,e,i,r){this.users=t;this.Sellers=e;this.geolocation=i;this.fb=r;this.sellerKey.set(this.data.sellerKey),this.form=this.fb.group({filterSeller:""})}selectSeller(t){console.log("selected",t),this.sellerKey.set(t.key),this.MatBottomSheetRef.dismiss(this.sellerKey())}sellers=Le([]);subscriptions=new It;displayedColumns=["nome","rootSeller"];coords=Le({latitude:0,longitude:0});sellerKey=Le("");data=w(zl);MatBottomSheetRef=w(Qc);form;filterSeller="";filter=t=>!0;ngOnInit(){return O(this,null,function*(){let t=yield this.users.getLoggedUser();this.subscriptions.add(this.form.get("filterSeller")?.valueChanges.subscribe(e=>{this.filter=i=>i.nome.toLowerCase().includes(e.toLowerCase())})),this.Sellers.getSuppliers4UserOnValue(t.key,e=>{this.sellers.set(e),this.geolocation.getCurrentPosition().subscribe(i=>{this.coords.set({latitude:i.coords.latitude,longitude:i.coords.longitude})})})})}ngOnDestroy(){this.subscriptions.unsubscribe()}static \u0275fac=function(e){return new(e||n)(pe(gn),pe(es),pe(ql),pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-bottom-seller-selector"]],decls:16,vars:11,consts:[[3,"formGroup"],["matInput","","formControlName","filterSeller",3,"ngModelChange","ngModel"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rootSeller"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"sellerKey"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){e&1&&(D(0,"form",0)(1,"mat-form-field")(2,"input",1),bt("ngModelChange",function(o){return vt(i.filterSeller,o)||(i.filterSeller=o),o}),R(),D(3,"mat-label"),z(4,"fornitore"),R()()(),D(5,"table",2),fs(6,"distanceSorter"),fs(7,"filterPipe"),Jn(8,3),Ee(9,nIe,2,0,"th",4)(10,iIe,2,1,"td",5),Zn(),Jn(11,6),Ee(12,rIe,2,0,"th",4)(13,oIe,2,1,"td",5),Zn(),Ee(14,sIe,1,0,"tr",7)(15,aIe,1,0,"tr",8),R()),e&2&&(re("formGroup",i.form),B(2),yt("ngModel",i.filterSeller),B(3),re("dataSource",$s(7,8,$s(6,5,i.sellers(),i.coords()),i.filter)),B(9),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,jm,qD,Gi,io,Ki,Hi,no,Wi,Hr,ai,Ai,lr,Fr,zi,_a],encapsulation:2})};var HD=class n{constructor(t,e,i,r){this.dialog=t;this.bottomSheet=e;this.service=i;this.users=r}subscriptions=new It;sellerKeyChange="";selectedSeller=wo();sellerKey=gr("");fnTouched=t=>{};fnchanged=t=>{};ngOnChanges(t){console.log("changes on seller viewer",t),this.sellerKey.set(t.sellerKey.currentValue)}writeValue(t){this.sellerKey.set(t)}registerOnChange(t){this.fnchanged=t}registerOnTouched(t){this.fnTouched=t}setDisabledState(t){throw new Error("Method not implemented.")}ngOnDestroy(){this.subscriptions.unsubscribe()}createDialog(){let t=this.dialog.open($p,{data:{data:new Er({}),buttonText:"crea fornitore"}});this.subscriptions.add(t.afterClosed().subscribe(e=>O(this,null,function*(){if(e){console.log("seller to be created",e);let i=new Er(e),r=yield this.users.getLoggedUser();i.userKey=r.key,this.service.createSupplier(i).then(o=>{console.log("created",o),this.sellerKey.set(o.key),this.selectedSeller.emit(this.sellerKey())}),this.fnTouched(this.sellerKey()),this.fnchanged(this.sellerKey())}})))}openDialog(){let t=this.bottomSheet.open(KD,{data:{sellerKey:this.sellerKey(),buttonText:"Select"}});this.subscriptions.add(t.afterDismissed().subscribe(e=>{if(e){let i=new Er({key:e});this.sellerKey.set(i.key),console.log("selected",e),this.fnTouched(this.sellerKey()),this.fnchanged(this.sellerKey()),this.selectedSeller.emit(this.sellerKey())}}))}ngOnInit(){console.log("sellerKey",this.sellerKey())}static \u0275fac=function(e){return new(e||n)(pe(oc),pe(Lp),pe(es),pe(gn))};static \u0275cmp=le({type:n,selectors:[["app-seller-selector"]],inputs:{sellerKey:[1,"sellerKey"]},outputs:{sellerKeyChange:"sellerKeyChange",selectedSeller:"selectedSeller",sellerKey:"sellerKeyChange"},features:[Tt],decls:7,vars:1,consts:[["mat-icon-button","",3,"click"],[3,"sellerKey"]],template:function(e,i){e&1&&(D(0,"button",0),he("click",function(){return i.createDialog()}),D(1,"mat-icon"),z(2,"add_circle"),R()(),be(3,"app-sellerViewer",1),D(4,"button",0),he("click",function(){return i.openDialog()}),D(5,"mat-icon"),z(6,"search"),R()()),e&2&&(B(3),re("sellerKey",i.sellerKey()))},dependencies:[jm,Ht,Ed,Ri,ci],encapsulation:2,changeDetection:0})};var fJ=new ce("CdkAccordion");var pJ=(()=>{class n{accordion=w(fJ,{optional:!0,skipSelf:!0});_changeDetectorRef=w(qt);_expansionDispatcher=w(ME);_openCloseAllSubscription=It.EMPTY;closed=new ke;opened=new ke;destroyed=new ke;expandedChange=new ke;id=w(Hn).getId("cdk-accordion-child-");get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let i=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,i)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}_expanded=!1;disabled=!1;_removeUniqueSelectionListener=()=>{};constructor(){}ngOnInit(){this._removeUniqueSelectionListener=this._expansionDispatcher.listen((e,i)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===i&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",We],disabled:[2,"disabled","disabled",We]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[St([{provide:fJ,useValue:void 0}]),Ft]})}return n})(),gJ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({})}return n})();var cIe=["body"],lIe=["bodyWrapper"],uIe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dIe=["mat-expansion-panel-header","*","mat-action-row"];function hIe(n,t){}var _J=new ce("MAT_ACCORDION"),yJ=new ce("MAT_EXPANSION_PANEL"),mIe=(()=>{class n{_template=w(tr);_expansionPanel=w(yJ,{optional:!0});constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),fIe=new ce("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),WD=(()=>{class n extends pJ{_viewContainerRef=w(Mr);_animationsDisabled=w(_i,{optional:!0})==="NoopAnimations";_document=w(xt);_ngZone=w(Ke);_elementRef=w(He);_renderer=w(Jr);_cleanupTransitionEnd;get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}_hideToggle=!1;get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_togglePosition;afterExpand=new ke;afterCollapse=new ke;_inputChanges=new ye;accordion=w(_J,{optional:!0,skipSelf:!0});_lazyContent;_body;_bodyWrapper;_portal;_headerId=w(Hn).getId("mat-expansion-panel-header-");constructor(){super();let e=w(fIe,{optional:!0});this._expansionDispatcher=w(ME),e&&(this.hideToggle=e.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Kn(null),st(()=>this.expanded&&!this._portal),xi(1)).subscribe(()=>{this._portal=new ws(this._lazyContent._template,this._viewContainerRef)}),this._setupAnimationEvents()}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransitionEnd?.(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}_transitionEndListener=({target:e,propertyName:i})=>{e===this._bodyWrapper?.nativeElement&&i==="grid-template-rows"&&this._ngZone.run(()=>{this.expanded?this.afterExpand.emit():this.afterCollapse.emit()})};_setupAnimationEvents(){this._ngZone.runOutsideAngular(()=>{this._animationsDisabled?(this.opened.subscribe(()=>this._ngZone.run(()=>this.afterExpand.emit())),this.closed.subscribe(()=>this._ngZone.run(()=>this.afterCollapse.emit()))):setTimeout(()=>{let e=this._elementRef.nativeElement;this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this._transitionEndListener),e.classList.add("mat-expansion-panel-animations-enabled")},200)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(i&1&&jt(o,mIe,5),i&2){let s;Pe(s=Oe())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(i&1&&(Vt(cIe,5),Vt(lIe,5)),i&2){let o;Pe(o=Oe())&&(r._body=o.first),Pe(o=Oe())&&(r._bodyWrapper=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:4,hostBindings:function(i,r){i&2&&ut("mat-expanded",r.expanded)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",We],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[St([{provide:_J,useValue:void 0},{provide:yJ,useExisting:n}]),Ft,Et,Tt],ngContentSelectors:dIe,decls:9,vars:4,consts:[["bodyWrapper",""],["body",""],[1,"mat-expansion-panel-content-wrapper"],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){i&1&&(Xt(uIe),nt(0),D(1,"div",2,0)(3,"div",3,1)(5,"div",4),nt(6,1),Ee(7,hIe,0,0,"ng-template",5),R(),nt(8,2),R()()),i&2&&(B(),tt("inert",r.expanded?null:""),B(2),re("id",r.id),tt("aria-labelledby",r._headerId),B(4),re("cdkPortalOutlet",r._portal))},dependencies:[Cs],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;position:relative;background:var(--mat-expansion-container-background-color, var(--mat-sys-surface));color:var(--mat-expansion-container-text-color, var(--mat-sys-on-surface));border-radius:var(--mat-expansion-container-shape, 12px)}.mat-expansion-panel.mat-expansion-panel-animations-enabled{transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape, 12px);border-top-left-radius:var(--mat-expansion-container-shape, 12px)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape, 12px);border-bottom-left-radius:var(--mat-expansion-container-shape, 12px)}@media(forced-colors: active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel-content-wrapper{display:grid;grid-template-rows:0fr;grid-template-columns:100%}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content-wrapper{transition:grid-template-rows 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{grid-template-rows:1fr}@supports not (grid-template-rows: 0fr){.mat-expansion-panel-content-wrapper{height:0}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{height:auto}}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;min-height:0;visibility:hidden;font-family:var(--mat-expansion-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-sys-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-sys-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-sys-body-large-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content{transition:visibility 190ms linear}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper>.mat-expansion-panel-content{visibility:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-sys-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return n})();var Zy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt,gJ,Es]})}return n})();var GD=class n{constructor(t){this.service=t}paymentsKey="";payment=Le(null);ngOnChanges(t){return O(this,null,function*(){if(console.log("changes on payment viewer",t),t.paymentsKey.currentValue){let e=yield this.service.fetchPayment(t.paymentsKey.currentValue);console.log("fetch payment",e),this.payment.set(e)}})}static \u0275fac=function(e){return new(e||n)(pe(Gu))};static \u0275cmp=le({type:n,selectors:[["app-payment-viewer"]],inputs:{paymentsKey:"paymentsKey"},features:[Tt],decls:2,vars:1,template:function(e,i){if(e&1&&(D(0,"p"),z(1),R()),e&2){let r;B(),Zt((r=i.payment())==null?null:r.nome)}},encapsulation:2})};var pIe=(n,t)=>t.key;function gIe(n,t){if(n&1&&(D(0,"mat-option",4),z(1),R()),n&2){let e=t.$implicit;Rh("value",e.key),B(),Zt(e.nome)}}var QD=class n{constructor(t,e,i,r){this.service=t;this.users=e;this.fb=i;this._dialog=r}selectedPayment(t){console.log("selectedPayment from payment selector",t)}change(t){console.log("change",t)}createPayment(){console.log("createPayment"),this._dialog.open(jp,{data:{data:new Jc,buttonText:"Create"}}).afterClosed().subscribe(t=>O(this,null,function*(){let e=yield this.users.getLoggedUser();console.log("closed payment dialog",t),t.userKey=e.key,this.service.createPayment(t).then(i=>{console.log("created",i),this.paymentsKey.set(i.key),this.paymentsKeyChanged.emit(i.key),this.searchForm.get("paymentsKey")?.setValue(i.key)}).catch(i=>{console.error(i)})}))}onKey(t){console.log("filtering",t.target.value),this.searchPayment=e=>e.nome.toLowerCase().includes(t.target.value.toLowerCase())}paymentsKey=gr("");$payments=Le([]);subscriptions=new It;paymentsKeyChanged=new ke;searchForm=new bi({searchPayment:new qi(""),paymentsKey:new qi("")});searchPayment=t=>!0;ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){return O(this,null,function*(){let t=yield this.users.getLoggedUser(),e=yield this.service.getPayments(t.key);this.service.fetchPaymentsFromFirestoreOnRealTime(t.key,i=>{this.$payments.set(i)}),this.$payments.set(e),this.searchForm=this.fb.group({search:new qi(""),paymentsKey:new qi("")}),this.searchForm.get("search")?.valueChanges.subscribe(i=>{e.filter(r=>r.title.toLowerCase().includes(i.toLowerCase()))}),this.paymentsKey.subscribe(i=>{this.paymentsKey.set(i),this.paymentsKeyChanged.emit(i)})})}ngOnChanges(t){console.log("changes on payment viewer",t),this.searchForm.valueChanges.subscribe(e=>{console.log("value on form",e),this.paymentsKeyChanged.emit(e.paymentsKey)})}static \u0275fac=function(e){return new(e||n)(pe(Gu),pe(gn),pe(cr),pe(oc))};static \u0275cmp=le({type:n,selectors:[["app-paymets-selector"]],inputs:{paymentsKey:[1,"paymentsKey"]},outputs:{paymentsKey:"paymentsKeyChange",paymentsKeyChanged:"paymentsKeyChanged"},features:[Tt],decls:14,vars:5,consts:[[3,"formGroup"],["matInput","","formControlName","paymentsKey",3,"ngModelChange","ngModel"],["matPrefix",""],["matInput","","id","searchPayment",3,"keyup"],[3,"value"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,i){e&1&&(D(0,"form",0)(1,"mat-select",1),bt("ngModelChange",function(o){return vt(i.paymentsKey,o)||(i.paymentsKey=o),o}),D(2,"mat-icon",2),z(3,"search"),R(),D(4,"input",3),he("keyup",function(o){return i.onKey(o)}),R(),D(5,"mat-option"),z(6,"None"),R(),No(7,gIe,2,2,"mat-option",4,pIe),fs(9,"filterPipe"),R(),D(10,"button",5),he("click",function(){return i.createPayment()}),D(11,"mat-icon"),z(12,"create"),R(),z(13,"crea una nuovo pagamento"),R()()),e&2&&(re("formGroup",i.searchForm),B(),yt("ngModel",i.paymentsKey),B(6),Fo($s(9,2,i.$payments(),i.searchPayment)))},dependencies:[ai,io,Hi,no,ro,$g,Wg,jh,Gi,Wi,Hr,Ai,lr,Ri,ci,_a,Ht,rn],styles:["#searchPayment[_ngcontent-%COMP%]{border-radius:2rem}"]})};var YD=class n{constructor(t){this.fb=t}data=au();updated=wo();ngOnChanges(t){console.log("changes",t),t.data.currentValue&&(this.amount.set(t.data.currentValue.payment.amount),this.paymentNote.set(t.data.currentValue.payment.note),this.paymentsDate.set(t.data.currentValue.payment.paymentsDate),this.paymentsKey.set(t.data.currentValue.payment.paymentsKey),this.newFraction=this.fb.group({amount:this.amount(),paymentsDate:this.paymentsDate(),note:this.paymentNote(),paymentsKey:this.paymentsKey()}),this.panelOpenState.set(!0))}ngOnInit(){this.newFraction=this.fb.group({amount:0,paymentsDate:new Date().toISOString(),note:"",paymentsKey:""})}amount=Le(0);paymentsListChanged=wo();paymentsDate=Le(new Date().toISOString());paymentNote=Le("");paymentsKey=Le("");panelOpenState=Le(!1);newFraction=new bi({});newFractionValue=nr(()=>({amount:this.amount(),paymentsDate:this.paymentsDate(),paymentsKey:this.paymentsKey(),note:this.paymentNote()}));selectedPayment(t){console.log("selectedPayment from payment selector",t)}submit(){if(console.log("submit",this.paymentsKey()),console.log("addPayment",this.newFractionValue()),this.data()){let t={payment:new Kl(this.newFractionValue()),operation:this.data()?.operation,index:this.data()?.index};this.updated.emit(t),console.log("emitted",t),this.panelOpenState.set(!1)}}static \u0275fac=function(e){return new(e||n)(pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-payment-fraction-expansion-panel"]],inputs:{data:[1,"data"]},outputs:{updated:"updated",paymentsListChanged:"paymentsListChanged"},features:[Tt],decls:26,vars:8,consts:[["picker0",""],[3,"opened","closed","expanded"],["matInput","",3,"paymentsKeyChange","paymentsKeyChanged","paymentsKey"],[3,"formGroup"],["matInput","","formControlName","amount","type","number",3,"ngModelChange","ngModel"],["matInput","","formControlName","note",3,"ngModelChange","ngModel"],["matInput","","formControlName","paymentsDate",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,i){if(e&1){let r=Pt();D(0,"mat-expansion-panel",1),he("opened",function(){return xe(r),Ie(i.panelOpenState.set(!0))})("closed",function(){return xe(r),Ie(i.panelOpenState.set(!1))}),D(1,"mat-label"),z(2," pagamento"),R(),D(3,"app-paymets-selector",2),bt("paymentsKeyChange",function(s){return xe(r),vt(i.paymentsKey,s)||(i.paymentsKey=s),Ie(s)}),he("paymentsKeyChanged",function(s){return xe(r),Ie(i.selectedPayment(s))}),R(),D(4,"form",3)(5,"mat-form-field")(6,"mat-label"),z(7,"Importo"),R(),D(8,"input",4),bt("ngModelChange",function(s){return xe(r),vt(i.amount,s)||(i.amount=s),Ie(s)}),R()(),D(9,"mat-form-field")(10,"mat-label"),z(11,"nota"),R(),D(12,"input",5),bt("ngModelChange",function(s){return xe(r),vt(i.paymentNote,s)||(i.paymentNote=s),Ie(s)}),R()(),D(13,"mat-form-field")(14,"mat-label"),z(15,"data del pagamento"),R(),D(16,"input",6),bt("ngModelChange",function(s){return xe(r),vt(i.paymentsDate,s)||(i.paymentsDate=s),Ie(s)}),R(),D(17,"mat-hint"),z(18,"DD/MM/YYYY"),R(),be(19,"mat-datepicker-toggle",7)(20,"mat-datepicker",null,0),R()(),D(22,"button",8),he("click",function(){return xe(r),Ie(i.submit())}),D(23,"mat-icon"),z(24,"price_check"),R(),z(25,"conferma Pagamento"),R()()}if(e&2){let r=hi(21);re("expanded",i.panelOpenState()),B(3),yt("paymentsKey",i.paymentsKey),B(),re("formGroup",i.newFraction),B(4),yt("ngModel",i.amount),B(4),yt("ngModel",i.paymentNote),B(4),re("matDatepicker",r),yt("ngModel",i.paymentsDate),B(3),re("for",r)}},dependencies:[Zy,WD,Gi,io,Ki,QR,Hi,no,Wi,Hr,ai,Fr,Ii,zi,Kh,jg,Ai,lr,Ht,rn,Nc,Xg,Xh,Lf,QD,ci],encapsulation:2})};var _Ie=(n,t)=>({data:n,index:t});function yIe(n,t){if(n&1){let e=Pt();D(0,"button",13),he("click",function(){let r=xe(e),o=r.data,s=r.index,a=Se();return Ie(a.updatePayment(o,s))}),D(1,"mat-icon"),z(2,"create"),R(),D(3,"span"),z(4,"modifica"),R()(),D(5,"button",13),he("click",function(){let r=xe(e).index,o=Se();return Ie(o.deletePayment(r))}),D(6,"mat-icon"),z(7,"delete"),R(),D(8,"span"),z(9,"elimina"),R()()}}function vIe(n,t){n&1&&(D(0,"th",14),z(1," Importo "),R())}function bIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.amount," ")}}function wIe(n,t){n&1&&(D(0,"th",14),z(1," Pagato il "),R())}function CIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit,i=Se();B(),Ut(" ",i.formatDate(e.paymentsDate)," ")}}function EIe(n,t){n&1&&(D(0,"th",14),z(1," nota "),R())}function xIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.note," ")}}function IIe(n,t){n&1&&(D(0,"th",14),z(1," metodo di pagamento "),R())}function SIe(n,t){if(n&1&&(D(0,"td",15),be(1,"app-payment-viewer",16),R()),n&2){let e=t.$implicit;B(),re("paymentsKey",e.paymentsKey)}}function TIe(n,t){n&1&&be(0,"tr",17)}function DIe(n,t){if(n&1){let e=Pt();D(0,"tr",18),he("click",function(){let r=xe(e),o=r.$implicit,s=r.index,a=Se();return Ie(a.selectPayment(o,s))}),R()}if(n&2){let e=t.$implicit,i=t.index;Se();let r=hi(5);re("matMenuTriggerFor",r)("matMenuTriggerData",EC(2,_Ie,e,i))}}var XD=class n{constructor(t){this.fb=t}formatDate(t){let e=new Date;return console.log("formatDate",t),t.seconds?e=new Date(t.seconds*1e3):e=new Date(t),e.toLocaleDateString().slice(0,10)}deletePayment(t){console.log("deletePayment from payment selector",t),this.payments().splice(t,1);let e=this.payments();console.log("payments",e),this.payments.set([...e]),console.log("deletePayment",this.payments())}total=nr(()=>{let t=this.payments().reduce((e,i)=>e+Number(i.amount),0);return Math.round(t*100)/100||t});selectPayment(t,e){console.log("selectPayment from payment selector",t,e)}updatePayment(t,e){console.log("updatePayment from payment selector",t,e),this.fractionPayment.set({payment:t,operation:"update",index:e})}updatedPayment(t){if(console.log("updatedPayment from payment selector",t),t.operation=="add"){let e=new Kl(t.payment);this.payments.set([...this.payments(),e]),console.log("added",e)}if(t.operation=="update"){this.payments().splice(t.index??0,1,t.payment);let e=this.payments();this.payments.set([...e]),console.log("updated",this.payments())}this.paymentsListChanged.emit(this.payments())}submit(){throw new Error("Method not implemented.")}insertNewPayment(){let t=new Kl;console.log("insertNewPayment from payment selector",t),this.fractionPayment.set({payment:t,operation:"add"})}fractionPayment=Le(null);insertPayment(){console.log("insertPayment from payment selector",this.newFractionValue()),this.panelOpenState.set(!1)}selectedPayment(t){console.log("selectedPayment from payment selector",t)}addPayment(){console.log("addPayment",this.newFractionValue());let t=new Kl;this.fractionPayment.set({payment:t,operation:"add"}),this.payments().push(t),this.paymentsListChanged.emit(this.payments()),this.panelOpenState.set(!1)}newFraction=new bi({});amount=Le(0);paymentsListChanged=wo();paymentsDate=Le(new Date().toISOString());paymentNote=Le("");paymentsKey=Le("");panelOpenState=Le(!1);ngOnInit(){console.log("payments",this.payments()),this.newFraction=this.fb.group({amount:this.amount(),paymentsDate:this.paymentsDate(),note:this.paymentNote(),paymentsKey:this.paymentsKey()})}displayedColumns=["amount","data","note","pagatoCon"];payments=gr.required();paymetsListChanged=new ke;newFractionValue=nr(()=>({amount:this.amount(),paymentsDate:this.paymentsDate(),paymentsKey:this.paymentsKey(),note:this.paymentNote()}));static \u0275fac=function(e){return new(e||n)(pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-payments-table"]],inputs:{payments:[1,"payments"]},outputs:{paymentsListChanged:"paymentsListChanged",payments:"paymentsChange"},decls:28,vars:5,consts:[["menu","matMenu"],[3,"updated","data"],["matMenuContent",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","amount"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","data"],["matColumnDef","note"],["matColumnDef","pagatoCon"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-menu-item","",3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"paymentsKey"],["mat-header-row",""],["mat-row","",3,"click","matMenuTriggerFor","matMenuTriggerData"]],template:function(e,i){if(e&1){let r=Pt();be(0,"mat-divider"),D(1,"h1"),z(2,"Pagamenti"),R(),D(3,"app-payment-fraction-expansion-panel",1),he("updated",function(s){return xe(r),Ie(i.updatedPayment(s))}),R(),D(4,"mat-menu",null,0),Ee(6,yIe,10,0,"ng-template",2),R(),D(7,"button",3),he("click",function(){return xe(r),Ie(i.insertNewPayment())}),D(8,"mat-icon"),z(9,"add"),R(),z(10,"aggiungi pagamento "),R(),D(11,"p"),z(12),R(),D(13,"table",4),Jn(14,5),Ee(15,vIe,2,0,"th",6)(16,bIe,2,1,"td",7),Zn(),Jn(17,8),Ee(18,wIe,2,0,"th",6)(19,CIe,2,1,"td",7),Zn(),Jn(20,9),Ee(21,EIe,2,0,"th",6)(22,xIe,2,1,"td",7),Zn(),Jn(23,10),Ee(24,IIe,2,0,"th",6)(25,SIe,2,1,"td",7),Zn(),Ee(26,TIe,1,0,"tr",11)(27,DIe,1,5,"tr",12),R()}e&2&&(B(3),re("data",i.fractionPayment()),B(9),Ut(" totale: ",i.total(),""),B(),re("dataSource",i.payments()),B(13),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,GD,Zy,Gi,ai,Ii,Ai,Ht,rn,Nc,Xc,ts,Ps,Wu,Yc,Ri,ci,YD,Pc,dq],styles:["h1[_ngcontent-%COMP%]{text-align:center}"]})};var kIe=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],AIe=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function RIe(n,t){n&1&&(D(0,"span",3),nt(1,1),R())}function MIe(n,t){n&1&&(D(0,"span",6),nt(1,2),R())}var PIe=["*"];var OIe=new ce("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),bJ=new ce("MatChipAvatar"),wJ=new ce("MatChipTrailingIcon"),CJ=new ce("MatChipRemove"),xJ=new ce("MatChip"),EJ=(()=>{class n{_elementRef=w(He);_parentChip=w(xJ);isInteractive=!0;_isPrimary=!0;get disabled(){return this._disabled||this._parentChip?.disabled||!1}set disabled(e){this._disabled=e}_disabled=!1;tabIndex=-1;_allowFocusWhenDisabled=!1;_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(){w(vi).load(vs),this._elementRef.nativeElement.nodeName==="BUTTON"&&this._elementRef.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(i,r){i&1&&he("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(tt("tabindex",r._getTabindex())("disabled",r._getDisabledAttribute())("aria-disabled",r.disabled),ut("mdc-evolution-chip__action--primary",r._isPrimary)("mdc-evolution-chip__action--presentational",!r.isInteractive)("mdc-evolution-chip__action--trailing",!r._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",We],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?-1:Eo(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},features:[Ft]})}return n})();var XB=(()=>{class n{_changeDetectorRef=w(qt);_elementRef=w(He);_ngZone=w(Ke);_focusMonitor=w(La);_globalRippleOptions=w(Ag,{optional:!0});_document=w(xt);_onFocus=new ye;_onBlur=new ye;_isBasicChip;role=null;_hasFocusInternal=!1;_pendingFocus;_actionChanges;_animationsDisabled;_allLeadingIcons;_allTrailingIcons;_allRemoveIcons;_hasFocus(){return this._hasFocusInternal}id=w(Hn).getId("mat-mdc-chip-");ariaLabel=null;ariaDescription=null;_ariaDescriptionId=`${this.id}-aria-description`;_chipListDisabled=!1;_textElement;get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}_value;color;removable=!0;highlighted=!1;disableRipple=!1;get disabled(){return this._disabled||this._chipListDisabled}set disabled(e){this._disabled=e}_disabled=!1;removed=new ke;destroyed=new ke;basicChipAttrName="mat-basic-chip";leadingIcon;trailingIcon;removeIcon;primaryAction;_rippleLoader=w(EE);_injector=w(Mt);constructor(){w(vi).load(vs),w(vi).load(pu);let e=w(_i,{optional:!0});this._animationsDisabled=e==="NoopAnimations",this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=ri(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{let r=i._elementRef.nativeElement;return r===e||r.contains(e)})}_getActions(){let e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let i=e!==null;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):Xr(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,r,o){if(i&1&&(jt(o,bJ,5),jt(o,wJ,5),jt(o,CJ,5),jt(o,bJ,5),jt(o,wJ,5),jt(o,CJ,5)),i&2){let s;Pe(s=Oe())&&(r.leadingIcon=s.first),Pe(s=Oe())&&(r.trailingIcon=s.first),Pe(s=Oe())&&(r.removeIcon=s.first),Pe(s=Oe())&&(r._allLeadingIcons=s),Pe(s=Oe())&&(r._allTrailingIcons=s),Pe(s=Oe())&&(r._allRemoveIcons=s)}},viewQuery:function(i,r){if(i&1&&Vt(EJ,5),i&2){let o;Pe(o=Oe())&&(r.primaryAction=o.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(i,r){i&1&&he("keydown",function(s){return r._handleKeydown(s)}),i&2&&(ms("id",r.id),tt("role",r.role)("aria-label",r.ariaLabel),_r("mat-"+(r.color||"primary")),ut("mdc-evolution-chip",!r._isBasicChip)("mdc-evolution-chip--disabled",r.disabled)("mdc-evolution-chip--with-trailing-action",r._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",r.leadingIcon)("mdc-evolution-chip--with-primary-icon",r.leadingIcon)("mdc-evolution-chip--with-avatar",r.leadingIcon)("mat-mdc-chip-with-avatar",r.leadingIcon)("mat-mdc-chip-highlighted",r.highlighted)("mat-mdc-chip-disabled",r.disabled)("mat-mdc-basic-chip",r._isBasicChip)("mat-mdc-standard-chip",!r._isBasicChip)("mat-mdc-chip-with-trailing-icon",r._hasTrailingIcon())("_mat-animation-noopable",r._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",We],highlighted:[2,"highlighted","highlighted",We],disableRipple:[2,"disableRipple","disableRipple",We],disabled:[2,"disabled","disabled",We]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[St([{provide:xJ,useExisting:n}]),Ft],ngContentSelectors:AIe,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,r){i&1&&(Xt(kIe),be(0,"span",0),D(1,"span",1)(2,"span",2),Ee(3,RIe,2,0,"span",3),D(4,"span",4),nt(5),be(6,"span",5),R()()(),Ee(7,MIe,2,0,"span",6)),i&2&&(B(2),re("isInteractive",!1),B(),kt(r.leadingIcon?3:-1),B(4),kt(r._hasTrailingIcon()?7:-1))},dependencies:[EJ],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width, 1px);border-radius:var(--mdc-chip-container-shape-radius, 8px);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-sys-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size, 24px);height:var(--mdc-chip-with-avatar-avatar-size, 24px);font-size:var(--mdc-chip-with-avatar-avatar-size, 24px)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@media(forced-colors: active){.mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity, 1)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity, 1)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius, 8px);height:var(--mdc-chip-container-height, 32px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-sys-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}@media(forced-colors: active){.mat-mdc-standard-chip{outline:solid 1px}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius, 24px);width:var(--mdc-chip-with-icon-icon-size, 18px);height:var(--mdc-chip-with-icon-icon-size, 18px);font-size:var(--mdc-chip-with-icon-icon-size, 18px)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-sys-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-sys-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity, 0.38)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity, 0.38)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity, 1)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity, 1)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity, 1)}.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}@media(forced-colors: active){.mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}}.mat-mdc-chip-action:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();var IJ=(()=>{class n{_elementRef=w(He);_changeDetectorRef=w(qt);_dir=w(Ni,{optional:!0});_lastDestroyedFocusedChipIndex=null;_keyManager;_destroyed=new ye;_defaultRole="presentation";get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}_disabled=!1;get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}tabIndex=0;set role(e){this._explicitRole=e}_explicitRole=null;get focused(){return this._hasFocusedChip()}_chips;_chipActions=new Ah;constructor(){}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips?.forEach(e=>{e._chipListDisabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){let e=this._elementRef.nativeElement.tabIndex;e!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=e))}_getChipStream(e){return this._chips.changes.pipe(Kn(null),di(()=>ri(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-mdc-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(Kn(this._chips)).subscribe(e=>{let i=[];e.forEach(r=>r._getActions().forEach(o=>i.push(o))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new Rf(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(An(this._destroyed)).subscribe(({chip:e})=>{let i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe(An(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(Kn(null),An(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(An(this._destroyed)).subscribe(e=>{let r=this._chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=r)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-chip-set"]],contentQueries:function(i,r,o){if(i&1&&jt(o,XB,5),i&2){let s;Pe(s=Oe())&&(r._chips=s)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(i,r){i&1&&he("keydown",function(s){return r._handleKeydown(s)}),i&2&&tt("role",r.role)},inputs:{disabled:[2,"disabled","disabled",We],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Eo(e)]},features:[Ft],ngContentSelectors:PIe,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,r){i&1&&(Xt(),D(0,"div",0),nt(1),R())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return n})();var JD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({providers:[Mf,{provide:OIe,useValue:{separatorKeyCodes:[13]}}],imports:[gt,Cd,gt]})}return n})();var ZD=class n{constructor(t){this.service=t}clickedChip=wo();selectedChip(t){this.clickedChip.emit(this.categoryKey()),console.log("clicked ",this.categoryKey())}categoryKey=au.required();category=Le(new zo({title:""}));ngOnChanges(t){return O(this,null,function*(){let e=yield this.service.fetchCategoryFromFirestore(this.categoryKey());this.category.set(e)})}static \u0275fac=function(e){return new(e||n)(pe(Hu))};static \u0275cmp=le({type:n,selectors:[["app-category-chip"]],inputs:{categoryKey:[1,"categoryKey"]},outputs:{clickedChip:"clickedChip"},features:[Tt],decls:2,vars:1,consts:[[3,"click"]],template:function(e,i){e&1&&(D(0,"mat-chip",0),he("click",function(){return i.selectedChip(i.category().key)}),z(1),R()),e&2&&(B(),Zt(i.category().title))},dependencies:[JD,XB],encapsulation:2})};function NIe(n,t){if(n&1){let e=Pt();D(0,"app-category-chip",2),he("clickedChip",function(r){xe(e);let o=Se();return Ie(o.categoryClicked(r))}),R()}if(n&2){let e=t.$implicit;re("categoryKey",e)}}var Um=class n{chipEvent=wo();categoryClicked(t){this.chipEvent.emit(t)}ngOnChanges(t){}categoriesKey=gr.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-category-viewer"]],inputs:{categoriesKey:[1,"categoriesKey"]},outputs:{chipEvent:"chipEvent",categoriesKey:"categoriesKeyChange"},features:[Tt],decls:3,vars:0,consts:[["aria-label","Fish selection"],[3,"categoryKey"],[3,"clickedChip","categoryKey"]],template:function(e,i){e&1&&(D(0,"mat-chip-set",0),No(1,NIe,1,1,"app-category-chip",1,Jp),R()),e&2&&(B(),Fo(i.categoriesKey()))},dependencies:[JD,IJ,ZD],encapsulation:2})};var FIe=(n,t)=>t.key;function VIe(n,t){if(n&1){let e=Pt();D(0,"button",3),he("click",function(){xe(e);let r=Se();return Ie(r.createCategory())}),D(1,"mat-icon"),z(2,"create"),R()(),D(3,"p"),z(4,"nessuna categoria trovata: vuoi crearla?"),R()}}function LIe(n,t){if(n&1){let e=Pt();D(0,"mat-list-item",5),he("click",function(){let r=xe(e).$implicit,o=Se();return Ie(o.selectCategory(r))}),z(1),R()}if(n&2){let e=t.$implicit;B(),Ut("",e.title," ")}}var ek=class n{constructor(t,e){this.service=t;this.users=e}requestedCategory=Le("");createCategory(){return O(this,null,function*(){console.log("createCategory",this.requestedCategory());let t=new zo({title:this.requestedCategory()}),e=yield this.users.getLoggedUser();t.userKey=e.key;let i=yield this.service.createCategory(t);this.categoriesKey.set([...this.categoriesKey(),i.key])})}closeDialog(){console.log("closeDialog"),this.MatBottomSheetRef.dismiss(this.categoriesKey())}fetchCategoriesList(t,e){return O(this,null,function*(){if(console.log("fetchCategoriesList to be added",t),t.push(e.key),e.fatherKey){let i=yield this.service.fetchCategoryFromFirestore(e.fatherKey);yield this.fetchCategoriesList(t,i)}return t})}selectCategory(t){return O(this,null,function*(){console.log("selectCategory",t),console.log("categoriesKey",this.categoriesKey());let e=yield this.fetchCategoriesList(this.categoriesKey()||[],t);this.categoriesKey.set(Array.from(new Set([...this.categoriesKey(),...e])))})}searchInput="";searchFilter=t=>!0;filterCategories(t){this.requestedCategory.set(t.target.value),this.searchFilter=e=>e.title.toLowerCase().includes(t.target.value.toLowerCase().trim())}searchText;assignCategories(){throw new Error("Method not implemented.")}categories=Le([]);selectedCategory(t){console.log("selectedCategory tobe removed",t),this.categoriesKey.set(this.categoriesKey().filter(e=>e!=t))}categoriesKey=Le([]);ngOnInit(){return O(this,null,function*(){console.log("data",this.data),this.categoriesKey.set(this.data.categoriesKey||[]);let t=yield this.users.getLoggedUser(),e=yield this.service.listCategories4User(t.key);this.categories.set(e)})}data=w(zl);MatBottomSheetRef=w(Qc);static \u0275fac=function(e){return new(e||n)(pe(Hu),pe(gn))};static \u0275cmp=le({type:n,selectors:[["app-bottom-sheet-categories"]],decls:14,vars:9,consts:[[3,"chipEvent","categoriesKey"],["mat-button","",3,"click"],["matInput","","placeholder","search","id","searchInput",3,"ngModelChange","keyup","ngModel"],["mat-icon-button","",3,"click"],["role","listitem"],["role","listitem",3,"click"]],template:function(e,i){e&1&&(D(0,"app-category-viewer",0),he("chipEvent",function(o){return i.selectedCategory(o)}),R(),D(1,"button",1),he("click",function(){return i.assignCategories()}),D(2,"mat-icon"),z(3,"search"),R()(),D(4,"input",2),bt("ngModelChange",function(o){return vt(i.searchText,o)||(i.searchText=o),o}),he("keyup",function(o){return i.filterCategories(o)}),R(),D(5,"button",3),he("click",function(){return i.closeDialog()}),D(6,"mat-icon"),z(7,"check"),R()(),Ee(8,VIe,5,0),fs(9,"filterPipe"),D(10,"mat-list"),No(11,LIe,2,1,"mat-list-item",4,FIe),fs(13,"filterPipe"),R()),e&2&&(re("categoriesKey",i.categoriesKey()),B(4),yt("ngModel",i.searchText),B(4),kt($s(9,3,i.categories(),i.searchFilter).length==0?8:-1),B(3),Fo($s(13,6,i.categories(),i.searchFilter)))},dependencies:[Um,Ri,ci,Ht,rn,Ed,ai,Ki,Hi,Vf,VD,ND,FD,_a],styles:["#searchInput[_ngcontent-%COMP%]{border-radius:2rem}"],changeDetection:0})};var tk=class n{constructor(t){this.$bottomSheet=t}subscriptions=new It;assignCategories(){return O(this,null,function*(){console.log("assign categories");let t=this.$bottomSheet.open(ek,{data:{categoriesKey:this.categoriesKey()}});this.subscriptions.add(t.afterDismissed().subscribe(e=>{e&&(console.log("selected",e),this.categoriesKey.set(e),this.categoriesUpdated.emit(this.categoriesKey()))}))})}categoriesKey=gr.required();categoriesUpdated=wo();selectedCategory(t){console.log("selectedCategory",t),this.categoriesKey.set(this.categoriesKey().filter(e=>e!=t)),this.categoriesUpdated.emit(this.categoriesKey())}static \u0275fac=function(e){return new(e||n)(pe(Lp))};static \u0275cmp=le({type:n,selectors:[["app-cateories-selector"]],inputs:{categoriesKey:[1,"categoriesKey"]},outputs:{categoriesKey:"categoriesKeyChange",categoriesUpdated:"categoriesUpdated"},decls:6,vars:1,consts:[["mat-button","",3,"click"],[3,"chipEvent","categoriesKey"]],template:function(e,i){e&1&&(D(0,"mat-label"),z(1,"Categorie"),R(),D(2,"button",0),he("click",function(){return i.assignCategories()}),D(3,"mat-icon"),z(4,"sell"),R()(),D(5,"app-category-viewer",1),he("chipEvent",function(o){return i.selectedCategory(o)}),R()),e&2&&(B(5),re("categoriesKey",i.categoriesKey()))},dependencies:[Um,zi,Ri,ci,Ht,rn,OD],encapsulation:2,changeDetection:0})};var nk=class n{constructor(t){this.fb=t;this.itemForm=this.fb.group({descrizione:"",note:"",prezzo:0,moneta:"\u20AC",picture:""})}submitItem(){console.log("submitItem",this.itemValue()),this.updated.emit({item:new $m(this.itemValue()),operation:this.data()?.operation,index:this.data()?.index}),this.isPanelOpen.set(!1)}subscription=new It;selectedCategory(t){console.log("selectedCategory",t),this.categoriesKey.set(t)}data=au();updated=wo();descrizione=Le("");note=Le("");prezzo=Le(0);moneta=Le("");picture=Le("");categoriesKey=Le([]);isPanelOpen=Le(!1);itemForm=new bi({});itemValue=nr(()=>({descrizione:this.descrizione(),note:this.note(),prezzo:this.prezzo(),moneta:this.moneta(),picture:this.picture(),categoriesKey:this.categoriesKey()}));immagine="";ngOnChanges(t){t.data.currentValue&&(console.log("data",t.data.currentValue),this.descrizione.set(t.data.currentValue.item.descrizione),this.note.set(t.data.currentValue.item.note),this.prezzo.set(t.data.currentValue.item.prezzo),this.moneta.set(t.data.currentValue.item.moneta),this.picture.set(t.data.currentValue.item.picture),this.categoriesKey.set(t.data.currentValue.item.categoriesKey),this.isPanelOpen.set(!0),this.itemForm=this.fb.group({descrizione:this.descrizione(),note:this.note(),prezzo:this.prezzo(),moneta:this.moneta(),picture:this.picture(),categoriesKey:[]}),this.subscription.add(this.itemForm.valueChanges.subscribe(e=>{this.descrizione.set(e.descrizione),this.note.set(e.note),this.prezzo.set(e.prezzo),this.moneta.set(e.moneta),this.picture.set(e.picture)})))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||n)(pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-item-expansion-panel"]],inputs:{data:[1,"data"]},outputs:{updated:"updated"},features:[Tt],decls:25,vars:7,consts:[[3,"opened","closed","expanded"],["mat-button","",3,"click"],[3,"formGroup"],["matInput","","formControlName","descrizione",3,"ngModelChange","ngModel"],["matInput","","formControlName","note",3,"ngModelChange","ngModel"],["matInput","","formControlName","prezzo",3,"ngModelChange","ngModel"],["matInput","","formControlName","moneta",3,"ngModelChange","ngModel"],["matInput","",3,"categoriesUpdated","categoriesKey"]],template:function(e,i){e&1&&(D(0,"mat-expansion-panel",0),he("opened",function(){return i.isPanelOpen.set(!0)})("closed",function(){return i.isPanelOpen.set(!1)}),D(1,"button",1),he("click",function(){return i.submitItem()}),D(2,"mat-icon"),z(3,"move_down"),R(),z(4,"inserisci "),R(),D(5,"mat-label"),z(6," acquisto"),R(),D(7,"form",2)(8,"mat-form-field")(9,"mat-label"),z(10,"Descrizione"),R(),D(11,"input",3),bt("ngModelChange",function(o){return vt(i.descrizione,o)||(i.descrizione=o),o}),R()(),D(12,"mat-form-field")(13,"mat-label"),z(14,"note"),R(),D(15,"input",4),bt("ngModelChange",function(o){return vt(i.note,o)||(i.note=o),o}),R()(),D(16,"mat-form-field")(17,"mat-label"),z(18,"prezzo"),R(),D(19,"input",5),bt("ngModelChange",function(o){return vt(i.prezzo,o)||(i.prezzo=o),o}),R()(),D(20,"mat-form-field")(21,"mat-label"),z(22,"moneta"),R(),D(23,"input",6),bt("ngModelChange",function(o){return vt(i.moneta,o)||(i.moneta=o),o}),R()(),D(24,"app-cateories-selector",7),he("categoriesUpdated",function(o){return i.selectedCategory(o)}),R()()()),e&2&&(re("expanded",i.isPanelOpen()),B(7),re("formGroup",i.itemForm),B(4),yt("ngModel",i.descrizione),B(4),yt("ngModel",i.note),B(4),yt("ngModel",i.prezzo),B(4),yt("ngModel",i.moneta),B(),re("categoriesKey",i.categoriesKey()))},dependencies:[Zy,WD,Gi,io,Ki,Hi,no,Wi,Hr,ai,Fr,Ii,zi,Ai,lr,Ht,rn,Ri,ci,tk],encapsulation:2,changeDetection:0})};var BIe=(n,t)=>({data:n,index:t});function $Ie(n,t){if(n&1){let e=Pt();D(0,"button",13),he("click",function(){let r=xe(e),o=r.data,s=r.index,a=Se();return Ie(a.updateItem(o,s))}),D(1,"mat-icon"),z(2,"create"),R(),D(3,"span"),z(4,"modifica"),R()(),D(5,"button",13),he("click",function(){let r=xe(e).index,o=Se();return Ie(o.deleteItem(r))}),D(6,"mat-icon"),z(7,"delete"),R(),D(8,"span"),z(9,"elimina"),R()()}}function jIe(n,t){n&1&&(D(0,"th",14),z(1," Descrizione "),R())}function UIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.descrizione," ")}}function zIe(n,t){n&1&&(D(0,"th",14),z(1," note "),R())}function qIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.note," ")}}function KIe(n,t){n&1&&(D(0,"th",14),z(1," prezzo "),R())}function HIe(n,t){if(n&1&&(D(0,"td",15),z(1),R()),n&2){let e=t.$implicit;B(),Ut(" ",e.prezzo," ")}}function WIe(n,t){n&1&&(D(0,"th",14),z(1," Categorie "),R())}function GIe(n,t){if(n&1&&(D(0,"td",15),be(1,"app-category-viewer",16),R()),n&2){let e=t.$implicit;B(),re("categoriesKey",e.categoriesKey)}}function QIe(n,t){n&1&&be(0,"tr",17)}function YIe(n,t){if(n&1){let e=Pt();D(0,"tr",18),he("click",function(){let r=xe(e),o=r.$implicit,s=r.index,a=Se();return Ie(a.selectItem(o,s))}),R()}if(n&2){let e=t.$implicit,i=t.index;Se();let r=hi(4);re("matMenuTriggerFor",r)("matMenuTriggerData",EC(2,BIe,e,i))}}var ik=class n{selectItem(t,e){console.log("selectItem from item selector",t,e)}total=nr(()=>{let t=this.items().reduce((e,i)=>e+Number(i.prezzo),0);return Math.round(t*100)/100||t});deleteItem(t){console.log("deleteItem from item selector",t),this.items().splice(t,1),this.items.set([...this.items()]),this.itemsListChanged.emit(this.items())}updateItem(t,e){console.log("updateItem from item selector",t,"on index",e),this.item2edit.set({item:t,operation:"update",index:e})}ItemEdited(t){if(t.operation=="update"&&(this.items().splice(t.index,1,t.item),this.items.set([...this.items()]),this.itemsListChanged.emit(this.items())),t.operation=="add"){let e=[...this.items(),t.item];this.items.set(e),this.itemsListChanged.emit(this.items())}}item2edit=Le(null);insertNewItem(){console.log("insertNewItem"),this.item2edit.set({item:new $m,operation:"add"})}displayedColumns=["descrizione","note","prezzo","categorie"];ngOnInit(){}items=gr([]);itemsListChanged=wo();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-items-table"]],inputs:{items:[1,"items"]},outputs:{items:"itemsChange",itemsListChanged:"itemsListChanged"},decls:27,vars:5,consts:[["menu","matMenu"],[3,"updated","data"],["matMenuContent",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","descrizione"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","note"],["matColumnDef","prezzo"],["matColumnDef","categorie"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData","click",4,"matRowDef","matRowDefColumns"],["mat-menu-item","",3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"categoriesKey"],["mat-header-row",""],["mat-row","",3,"click","matMenuTriggerFor","matMenuTriggerData"]],template:function(e,i){if(e&1){let r=Pt();D(0,"h1"),z(1,"Acquisti"),R(),D(2,"app-item-expansion-panel",1),he("updated",function(s){return xe(r),Ie(i.ItemEdited(s))}),R(),D(3,"mat-menu",null,0),Ee(5,$Ie,10,0,"ng-template",2),R(),D(6,"button",3),he("click",function(){return xe(r),Ie(i.insertNewItem())}),D(7,"mat-icon"),z(8,"add"),R(),z(9,"aggiungi acquisto "),R(),D(10,"p"),z(11),R(),D(12,"table",4),Jn(13,5),Ee(14,jIe,2,0,"th",6)(15,UIe,2,1,"td",7),Zn(),Jn(16,8),Ee(17,zIe,2,0,"th",6)(18,qIe,2,1,"td",7),Zn(),Jn(19,9),Ee(20,KIe,2,0,"th",6)(21,HIe,2,1,"td",7),Zn(),Jn(22,10),Ee(23,WIe,2,0,"th",6)(24,GIe,2,1,"td",7),Zn(),Ee(25,QIe,1,0,"tr",11)(26,YIe,1,5,"tr",12),R()}e&2&&(B(2),re("data",i.item2edit()),B(9),Ut(" totale: ",i.total(),""),B(),re("dataSource",i.items()),B(13),re("matHeaderRowDef",i.displayedColumns),B(),re("matRowDefColumns",i.displayedColumns))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,Um,Pc,Ri,ci,Ht,rn,nk,Xc,ts,Ps,Wu,Yc],styles:["h1[_ngcontent-%COMP%]{text-align:center}"]})};function XIe(n,t){if(n&1){let e=Pt();D(0,"mat-form-field")(1,"mat-label"),z(2,"Consegnato"),R(),D(3,"input",6),bt("ngModelChange",function(r){xe(e);let o=Se();return vt(o.cart.key,r)||(o.cart.key=r),Ie(r)}),R(),D(4,"mat-slide-toggle",16),bt("ngModelChange",function(r){xe(e);let o=Se();return vt(o.delivered,r)||(o.delivered=r),Ie(r)}),R()()}if(n&2){let e=Se();B(3),yt("ngModel",e.cart.key),B(),yt("ngModel",e.delivered)}}function JIe(n,t){if(n&1){let e=Pt();D(0,"button",17),he("click",function(){xe(e);let r=Se();return Ie(r.onYesClick())}),z(1,"Ok"),R()}}var rk=class n{constructor(t,e,i){this.fb=t;this.sellersService=e;this.users=i;this.form=this.fb.group({note:this.cart.note,title:this.cart.title,totale:this.cart.totale,online:this.cart.online,delivered:this.cart.delivered,sellerKey:this.cart.sellerKey,id:"",buyngDate:this.cart.buyngDate,deliveredDate:this.cart.deliveredDate})}itemsListChanged(t){console.log("itemsListChanged",t),this.items.set(t),this.updatedCart.emit({cart:new qr(this.formValue()),submitted:!1,closeDialog:!1})}paymentsListChanged(t){console.log("paymentsListChanged",t),this.payments.set(t),this.updatedCart.emit({cart:new qr(this.formValue()),submitted:!1,closeDialog:!1})}sellerKeyChange(t){throw new Error("Method not implemented.")}note=Le("");title=Le("");totale=Le(0);online=Le(!1);buttonText=au();delivered=Le(!1);updatedCart=new ke;buyngDate=Le(new Date().toISOString());sellerKey=Le("");deliveredDate=Le("");payments=Le([]);items=Le([]);ngOnInit(){this.title.set(this.cart.title),this.note.set(this.cart.note),this.totale.set(Math.round(this.cart.paiedAmount*100)/100),this.online.set(this.cart.online),this.delivered.set(this.cart.delivered),this.buyngDate.set(this.cart.buyngDate),this.sellerKey.set(this.cart.sellerKey),this.deliveredDate.set(this.cart.deliveredDate),this.payments.set(this.cart.payments),this.items.set(this.cart.items)}formValue=nr(()=>({note:this.note(),title:this.title(),totale:this.totale(),online:this.online(),delivered:this.delivered(),buyngDate:this.buyngDate(),key:this.cart.key,userKey:this.cart.userKey,deliveredDate:this.deliveredDate(),sellerKey:this.sellerKey(),payments:this.payments(),items:this.items()}));formValid=nr(()=>{let{note:t,title:e,sellerKey:i,payments:r}=this.formValue();return i});onYesClick(){console.log("yes",this.formValue()),this.updatedCart.emit({cart:new qr(this.formValue()),submitted:!0,closeDialog:!0})}onNoClick(){this.updatedCart.emit({cart:new qr(this.formValue()),submitted:!1,closeDialog:!0})}selectedSeller(t){console.log("selectedSeller",t),this.sellerKey.set(t),this.cart=new qr(Qe(ee({},this.cart),{sellerKey:t}))}onKey(t){console.log(t)}cart=new qr;filterSeller=t=>!0;form=new bi({});sellers=Le([]);static \u0275fac=function(e){return new(e||n)(pe(cr),pe(es),pe(gn))};static \u0275cmp=le({type:n,selectors:[["app-cart-form"]],inputs:{buttonText:[1,"buttonText"],cart:"cart"},outputs:{updatedCart:"updatedCart"},features:[St([{provide:to,useClass:sR},{provide:wd,useValue:aR}])],decls:45,vars:17,consts:[["picker0",""],["picker",""],[3,"formGroup"],["matInput","","formControlName","title","id","title",3,"ngModelChange","ngModel"],["matInput","","formControlName","note","id","note",3,"ngModelChange","ngModel"],["matInput","","formControlName","totale",3,"ngModelChange","ngModel"],["matInput","","hidden","true","formControlName","id",3,"ngModelChange","ngModel"],["matInput","","formControlName","online","id","online",3,"ngModelChange","ngModel"],["matInput","","formControlName","buyngDate",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["matInput","","formControlName","deliveredDate",3,"ngModelChange","matDatepicker","ngModel"],[3,"selectedSeller","sellerKey"],[3,"itemsListChanged","items"],[3,"paymentsListChanged","payments"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial",""],["matInput","","formControlName","delivered",3,"ngModelChange","ngModel"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,i){if(e&1){let r=Pt();D(0,"form",2)(1,"mat-form-field")(2,"mat-label"),z(3,"Titolo"),R(),D(4,"input",3),bt("ngModelChange",function(s){return xe(r),vt(i.title,s)||(i.title=s),Ie(s)}),R()(),D(5,"mat-form-field")(6,"mat-label"),z(7,"Note"),R(),D(8,"input",4),bt("ngModelChange",function(s){return xe(r),vt(i.note,s)||(i.note=s),Ie(s)}),R()(),D(9,"mat-form-field")(10,"mat-label"),z(11,"Totale"),R(),D(12,"input",5),bt("ngModelChange",function(s){return xe(r),vt(i.totale,s)||(i.totale=s),Ie(s)}),R()(),D(13,"input",6),bt("ngModelChange",function(s){return xe(r),vt(i.cart.key,s)||(i.cart.key=s),Ie(s)}),R(),D(14,"mat-label"),z(15,"acquisto online"),R(),D(16,"mat-slide-toggle",7),bt("ngModelChange",function(s){return xe(r),vt(i.online,s)||(i.online=s),Ie(s)}),R(),Ee(17,XIe,5,2,"mat-form-field"),D(18,"mat-form-field")(19,"mat-label"),z(20,"data di acquisto"),R(),D(21,"input",8),bt("ngModelChange",function(s){return xe(r),vt(i.cart.buyngDate,s)||(i.cart.buyngDate=s),Ie(s)}),R(),D(22,"mat-hint"),z(23,"DD/MM/YYYY"),R(),be(24,"mat-datepicker-toggle",9)(25,"mat-datepicker",null,0),R(),D(27,"mat-form-field")(28,"mat-label"),z(29,"data di consegna"),R(),D(30,"input",10),bt("ngModelChange",function(s){return xe(r),vt(i.cart.deliveredDate,s)||(i.cart.deliveredDate=s),Ie(s)}),R(),D(31,"mat-hint"),z(32,"DD/MM/YYYY"),R(),be(33,"mat-datepicker-toggle",9)(34,"mat-datepicker",null,1),R(),D(36,"mat-label"),z(37,"fornitore"),R(),D(38,"app-seller-selector",11),he("selectedSeller",function(s){return xe(r),Ie(i.selectedSeller(s))}),R(),D(39,"app-items-table",12),he("itemsListChanged",function(s){return xe(r),Ie(i.itemsListChanged(s))}),R(),D(40,"app-payments-table",13),he("paymentsListChanged",function(s){return xe(r),Ie(i.paymentsListChanged(s))}),R()(),D(41,"mat-dialog-actions")(42,"button",14),he("click",function(){return xe(r),Ie(i.onNoClick())}),z(43,"No Thanks"),R(),Ee(44,JIe,2,0,"button",15),R()}if(e&2){let r=hi(26),o=hi(35);re("formGroup",i.form),B(4),yt("ngModel",i.title),B(4),yt("ngModel",i.note),B(4),yt("ngModel",i.totale),B(),yt("ngModel",i.cart.key),B(3),yt("ngModel",i.online),B(),kt(i.online()?17:-1),B(4),re("matDatepicker",r),yt("ngModel",i.cart.buyngDate),B(3),re("for",r),B(6),re("matDatepicker",o),yt("ngModel",i.cart.deliveredDate),B(3),re("for",o),B(5),re("sellerKey",i.sellerKey()),B(),re("items",i.cart.items),B(),re("payments",i.cart.payments),B(4),kt(i.formValid()?44:-1)}},dependencies:[Gi,io,Ki,Hi,no,Wi,Hr,ai,Fr,Ii,zi,Kh,jg,Ai,lr,PD,Gy,Nc,Xg,Xh,Lf,Dz,ro,Ri,HD,Lm,Ht,rn,XD,ik],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}app-seller-selector[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:flex-end}"],changeDetection:0})};var lC=class n{title=nr(()=>this.makeWindowTitle());makeWindowTitle(){let t=Math.round(this.cart().totale*100)/100,e=Math.round(this.cart().paiedAmount*100)/100;return`editing ${this.cart().title} `}updatedCart(t){let e=t.cart;this.cart.set(new qr(e)),t.closeDialog&&this.dialogRef.close(e)}subscriptions=new It;ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}dialogRef=w(rc);data=w(oh);cart=gr(this.data.data);buttonText=gr(this.data.buttonText);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-cart-dialog"]],inputs:{cart:[1,"cart"],buttonText:[1,"buttonText"]},outputs:{cart:"cartChange",buttonText:"buttonTextChange"},decls:4,vars:3,consts:[["mat-dialog-title",""],[3,"updatedCart","cart","buttonText"]],template:function(e,i){e&1&&(D(0,"h1",0),z(1),R(),D(2,"mat-dialog-content")(3,"app-cart-form",1),he("updatedCart",function(o){return i.updatedCart(o)}),R()()),e&2&&(B(),Zt(i.title()),B(2),re("cart",i.cart())("buttonText",i.buttonText()))},dependencies:[rk,Gi,ai,Vm,Wy,Fm],styles:["h1#mat-mdc-dialog-title-0[_ngcontent-%COMP%]{text-align:center}"]})};var ZIe=["determinateSpinner"];function eSe(n,t){if(n&1&&(bo(),D(0,"svg",11),be(1,"circle",12),R()),n&2){let e=Se();tt("viewBox",e._viewBox()),B(),Co("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),tt("r",e._circleRadius())}}var tSe=new ce("mat-progress-spinner-default-options",{providedIn:"root",factory:nSe});function nSe(){return{diameter:TJ}}var TJ=100,iSe=10,DJ=(()=>{class n{_elementRef=w(He);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=w(_i,{optional:!0}),i=w(tSe);this._noopAnimations=e==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=TJ;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-iSe)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(i&1&&Vt(ZIe,5),i&2){let o;Pe(o=Oe())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,r){i&2&&(tt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),_r("mat-"+r.color),Co("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),ut("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Eo],diameter:[2,"diameter","diameter",Eo],strokeWidth:[2,"strokeWidth","strokeWidth",Eo]},exportAs:["matProgressSpinner"],features:[Ft],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(i&1&&(Ee(0,eSe,2,8,"ng-template",null,0,dv),D(2,"div",2,1),bo(),D(4,"svg",3),be(5,"circle",4),R()(),Wp(),D(6,"div",5)(7,"div",6)(8,"div",7),Zr(9,8),R(),D(10,"div",9),Zr(11,8),R(),D(12,"div",10),Zr(13,8),R()()()),i&2){let o=hi(1);B(4),tt("viewBox",r._viewBox()),B(),Co("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),tt("r",r._circleRadius()),B(4),re("ngTemplateOutlet",o),B(2),re("ngTemplateOutlet",o),B(2),re("ngTemplateOutlet",o)}},dependencies:[AC],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return n})();var kJ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[gt]})}return n})();var ok=class n{constructor(t,e,i,r){this.firestore=t;this.fireDb=e;this.rxDb=i;this.users=r}deleteCart(t){return FI(qo(this.firestore,`carts/${t.key}`))}createCart(t){return O(this,null,function*(){let e=new qr({});try{console.log("cart to be stored",t);let i=yield cm(wr(this.firestore,"carts"),t.serialize()),r=yield Pl(i);e=new qr(r.data()).setKey(i.id)}catch(i){console.log(i)}return e})}updateCart(t){let e=qo(this.firestore,`carts/${t.key}`);return Nl(e,t.serialize())}pushCart2firestore(t){return Nl(qo(this.firestore,`carts/${t.key}`),t.serialize())}getShoppingCartsFRomRealtimeDb(t){return O(this,null,function*(){let e=Od(this.fireDb,`acquisti/${t}`),r=(yield Pd(e)).val(),o=[];return Object.keys(r).forEach(s=>{let a=new qr(r[s]);a.setKey(s),o.push(a)}),o})}getShoppingCartsFRomFirestore(t){return O(this,null,function*(){let e=Ol(wr(this.firestore,"carts"),qa("userKey","==",t));return(yield lm(e)).docs.map(o=>{let s=new qr(o.data());return s.setKey(o.id),s})})}getCarts4User(t){return this.getShoppingCartsFRomFirestore(t)}getCarts4UserOnValue(t,e){let i=Ol(wr(this.firestore,"carts"),qa("userKey","==",t));N_(i,r=>{let o=r.docs.map(s=>{let a=new qr(s.data());return a.setKey(s.id),a});e(o)})}static \u0275fac=function(e){return new(e||n)(Ve(za),Ve(Ua),Ve(Ku),Ve(gn))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var sSe=n=>({data:n});function aSe(n,t){n&1&&(D(0,"th",23),z(1,"titolo"),R())}function cSe(n,t){if(n&1&&(D(0,"td",24),z(1),R()),n&2){let e=t.$implicit;B(),Zt(e.title)}}function lSe(n,t){n&1&&(D(0,"th",23),z(1,"data"),R())}function uSe(n,t){if(n&1&&(D(0,"td",24),z(1),R()),n&2){let e=t.$implicit;B(),Zt(e.buyngDate)}}function dSe(n,t){n&1&&(D(0,"th",23),z(1,"note"),R())}function hSe(n,t){if(n&1&&(D(0,"td",24),z(1),R()),n&2){let e=t.$implicit;B(),Zt(e.note)}}function mSe(n,t){n&1&&(D(0,"th",23),z(1,"pagato su un totale di"),R())}function fSe(n,t){if(n&1&&(D(0,"td",24),z(1),R()),n&2){let e=t.$implicit,i=Se(2);B(),W$(" ",i.fixed(e.paiedAmount,2),"/",i.fixed(e.totale,2),"",e.currency," ")}}function pSe(n,t){n&1&&(D(0,"th",23),z(1,"fornitore"),R())}function gSe(n,t){if(n&1&&(D(0,"td",24),be(1,"app-sellerViewer",25),R()),n&2){let e=t.$implicit;B(),re("sellerKey",e.sellerKey)}}function _Se(n,t){n&1&&be(0,"tr",26)}function ySe(n,t){if(n&1&&be(0,"tr",27),n&2){let e=t.$implicit;Se();let i=hi(21);re("matMenuTriggerFor",i)("matMenuTriggerData",tg(2,sSe,e))}}function vSe(n,t){if(n&1){let e=Pt();D(0,"button",28),he("click",function(){let r=xe(e).data,o=Se(2);return Ie(o.updateItem(r))}),D(1,"mat-icon"),z(2,"create"),R(),D(3,"span"),z(4,"modifica"),R()(),D(5,"button",28),he("click",function(){let r=xe(e).data,o=Se(2);return Ie(o.deleteItem(r))}),D(6,"mat-icon"),z(7,"delete"),R(),D(8,"span"),z(9,"elimina"),R()()}}function bSe(n,t){if(n&1&&(D(0,"table",12),fs(1,"appSorterPipe"),fs(2,"filterPipe"),Jn(3,13),Ee(4,aSe,2,0,"th",14)(5,cSe,2,1,"td",15),Zn(),Jn(6,16),Ee(7,lSe,2,0,"th",14)(8,uSe,2,1,"td",15),Zn(),Jn(9,17),Ee(10,dSe,2,0,"th",14)(11,hSe,2,1,"td",15),Zn(),Jn(12,18),Ee(13,mSe,2,0,"th",14)(14,fSe,2,3,"td",15),Zn(),Jn(15,19),Ee(16,pSe,2,0,"th",14)(17,gSe,2,1,"td",15),Zn(),Ee(18,_Se,1,0,"tr",20)(19,ySe,1,4,"tr",21),R(),D(20,"mat-menu",null,0),Ee(22,vSe,10,0,"ng-template",22),R()),n&2){let e=Se();re("dataSource",$s(2,5,G$(1,3,e.carts()),e.filterFunction)),B(18),re("matHeaderRowDef",e.displayedColumns),B(),re("matRowDefColumns",e.displayedColumns)}}function wSe(n,t){n&1&&(D(0,"div",11),be(1,"mat-spinner"),R())}var sk=class n{constructor(t,e,i,r,o,s){this.users=t;this.service=e;this.Sellers=i;this.dialog=r;this.snackBar=o;this.fb=s;this.fullText="",this.filterForm=new bi({limit:this.fb.control(this.timeFilterLimit),fullText:this.fb.control(this.fullText)}),this.filterForm.valueChanges.subscribe(a=>{let l=a.fullText;console.log("fullText",a),this.timeFilterLimit=a.limit,console.log("timeFilterLimit",this.timeFilterLimit),this.timeFilterFunction=this.timeFilterFactory(this.timeFilterLimit),l&&(this.fullTextFilterFunction=this.fullTextFilterFactory(l.trim())),this.filterFunction=u=>this.timeFilterFunction(u)&&this.fullTextFilterFunction(u)}),this.timeFilterFunction=this.timeFilterFactory(this.timeFilterLimit)}timeFilterLimit=7;fullText="";filterForm=new bi({});timeFilterFunction=t=>!0;fullTextFilterFunction=t=>!0;filterFunction=t=>this.timeFilterFunction(t)&&this.fullTextFilterFunction(t);deleteItem(t){let e=this.dialog.open(Jy,{data:{title:"Delete Cart",message:"Are you sure you want to delete this cart?"}});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(console.log("cart to be deleted",t),this.service.deleteCart(t).then(r=>{this.snackBar.open("Cart deleted successfully","Close",{})}).catch(r=>{console.error(r),this.snackBar.open("Error deleting cart","Close",{})}))}))}updateItem(t){this.seeCart(t)}fullTextFilterFactory(t){return console.log("text 2 search",t),i=>i.fullText.toLowerCase().includes(t.toLowerCase())}timeFilterFactory(t){let e=new Date,s=24*(60*(60*1e3));return l=>{let u=s*t;return e.getTime()-new Date(l.buyngDate).getTime()<u}}fixed(t,e){return Number(t).toFixed(e)}subscriptions=new It;createCart(){console.log("createCart");let t=this.dialog.open(lC,{data:{data:new qr({}),buttonText:"Crea Carrello"}});this.subscriptions.add(t.afterClosed().subscribe(e=>O(this,null,function*(){if(console.log("cart",e),e){let i=new qr(e),r=yield this.users.getLoggedUser();i.userKey=r.key;let o=yield this.Sellers.fetchSeller(i.sellerKey);i.title=i.title||`${o.nome}  del ${i.buyngDate}`,console.log("cart to be stored",i),this.service.createCart(i).then(s=>{console.log("created",s),this.snackBar.open("Cart created successfully","Close",{duration:3e3})}).catch(s=>{console.error(s),console.log("err",s),this.snackBar.open("Error creating cart","Close",{duration:3e3})})}})))}progress=Le(0);uploadCarts2firestore(){return O(this,null,function*(){console.log("uploadCarts2firestore");let t=yield this.service.getShoppingCartsFRomRealtimeDb((yield this.users.getLoggedUser()).key);console.log("carts",t);let e=(yield this.users.getLoggedUser()).key,i=0,r=Object.create(null);t.forEach(o=>{o.userKey=e,r[o.key]=o,this.service.pushCart2firestore(o).then(s=>{console.log("pushed",o),i++,this.progress.set(i/t.length*100),console.log("progress",this.progress)}).catch(s=>{console.log("err on",o),console.log(s)}).finally(()=>{console.log("uploaded",i,"documents")})}),console.log("data",r)})}seeCart(t){console.log("seeCart",t);let e=this.dialog.open(lC,{data:{data:t,buttonText:"Update"}});this.subscriptions.add(e.afterClosed().subscribe(i=>{i&&(console.log("cart  updated",i),this.service.updateCart(i).then(r=>{console.log("updated",r),this.snackBar.open("Carrello aggiornato con successo","Close",{})}).catch(r=>{console.error(r),this.snackBar.open("Error updating cart","Close",{})}))}))}carts=Le([]);displayedColumns=["title","dataAcquisto","note","totale","fornitore"];ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){return O(this,null,function*(){let t=yield this.users.getLoggedUser();this.service.getCarts4UserOnValue(t.key,e=>{this.carts.set(e)})})}fetchSeller(t){return O(this,null,function*(){return t?(yield this.Sellers.fetchSeller(t)).nome:""})}static \u0275fac=function(e){return new(e||n)(pe(gn),pe(ok),pe(es),pe(oc),pe(Tl),pe(cr))};static \u0275cmp=le({type:n,selectors:[["app-shopping-cart-list"]],decls:30,vars:9,consts:[["menu","matMenu"],["mat-button","",3,"click"],[2,"position","fixed","top","0%","width","100%","z-index","100"],["id","commands"],["mat-fab","","extended","","id","createSellerr",3,"click"],[3,"formGroup"],["id","selector"],["formControlName","limit",1,"dropDown-seasons-panel",3,"valueChange","value"],[3,"value"],["matInput","","type","text","placeholder","search","formControlName","fullText","id","searchCart"],["mode","determinate",3,"value"],["id","spinner"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataAcquisto"],["matColumnDef","note"],["matColumnDef","totale"],["matColumnDef","fornitore"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matRowDef","matRowDefColumns"],["matMenuContent",""],["mat-header-cell",""],["mat-cell",""],[3,"sellerKey"],["mat-header-row",""],["mat-row","",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-menu-item","",3,"click"]],template:function(e,i){e&1&&(D(0,"button",1),he("click",function(){return i.uploadCarts2firestore()}),z(1,"upload Cart"),R(),D(2,"mat-toolbar",2)(3,"div",3),be(4,"app-my-menu"),D(5,"button",1),he("click",function(){return i.uploadCarts2firestore()}),z(6," upload Carrelli "),R(),D(7,"button",4),he("click",function(){return i.createCart()}),D(8,"mat-icon"),z(9,"add"),R()(),D(10,"mat-label"),z(11,"filtra per data"),R(),D(12,"form",5)(13,"mat-form-field",6)(14,"mat-select",7),bt("valueChange",function(o){return vt(i.timeFilterLimit,o)||(i.timeFilterLimit=o),o}),D(15,"mat-option",8),z(16," ultima settimana"),R(),D(17,"mat-option",8),z(18," ultime 2 settimane"),R(),D(19,"mat-option",8),z(20," ultimo mese"),R(),D(21,"mat-option",8),z(22," ultimo anno"),R(),D(23,"mat-option",8),z(24," ultimi 10 anni"),R()()(),D(25,"mat-form-field"),be(26,"input",9),R()()()(),be(27,"mat-progress-bar",10),Ee(28,bSe,23,8)(29,wSe,2,0,"div",11)),e&2&&(B(12),re("formGroup",i.filterForm),B(2),yt("value",i.timeFilterLimit),B(),re("value",7),B(2),re("value",14),B(2),re("value",28),B(2),re("value",365),B(2),re("value",3650),B(4),Rh("value",i.progress()),B(),kt(i.carts().length?28:29))},dependencies:[sa,Ys,Js,na,Zs,Xs,ia,ea,ta,ra,oa,kJ,DJ,jm,zD,Ht,rn,Og,DD,TD,Yy,Qy,Ri,ci,Bm,Xc,ts,Ps,Wu,Yc,ro,Fr,zi,Wg,jh,Ii,Gi,io,Ki,Hi,no,Wi,Hr,Ai,lr,ai,_a],styles:["[_nghost-%COMP%]{display:block}#spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;min-height:100vh}div#mat-select-value-0[_ngcontent-%COMP%]{color:#6495ed}#commands[_ngcontent-%COMP%]{display:flex;align-items:baseline}.dropDown-seasons-panel[_ngcontent-%COMP%], #searchCart[_ngcontent-%COMP%]{border-radius:10px!important;border:1px solid gray!important;position:absolute!important;background-color:#faf9fd}"],changeDetection:0})};var JB=[{path:"home",component:TE,canActivate:[i4]},{path:"login",component:YE},{path:"test",component:XE},{path:"signup",component:Nx},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"categories-list",component:SD},{path:"suppliers-list",component:$D},{path:"payments-list",component:UD},{path:"shoppingCart-list",component:sk}],AJ=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ue({type:n});static \u0275inj=je({imports:[Wv.forRoot(JB),Wv]})};var CSe="@",ESe=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=w(A$,{optional:!0});loadingSchedulerFn=w(xSe,{optional:!0});_engine;constructor(e,i,r,o,s){this.doc=e,this.delegate=i,this.zone=r,this.animationType=o,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-CWIRQ3HD.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(r=>{throw new oi(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new ZB(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let a=s.createRenderer(e,i);o.use(a),this.scheduler?.notify(11)}).catch(s=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(i){Yp()};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),ZB=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(CSe)}},xSe=new ce("");function RJ(n="animations"){return vC("NgAsyncAnimations"),Rr([{provide:pd,useFactory:(t,e,i)=>new ESe(t,e,i,n),deps:[xt,UC,Ke]},{provide:_i,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var OJ="functions";var e$=class{constructor(t,e,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(r=>this.auth=r,()=>{}),this.messaging||e.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return O(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return O(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return O(this,null,function*(){if(this.appCheck){let e=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return e.error?null:e.token}return null})}getContext(t){return O(this,null,function*(){let e=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:r}})}};var t$="us-central1";var n$=class{constructor(t,e,i,r,o=t$,s){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new e$(e,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=t$}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){let e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function ISe(n,t,e){n.emulatorOrigin=`http://${t}:${e}`}var MJ="@firebase/functions",PJ="0.11.8";var SSe="auth-internal",TSe="app-check-internal",DSe="messaging-internal";function kSe(n,t){let e=(i,{instanceIdentifier:r})=>{let o=i.getProvider("app").getImmediate(),s=i.getProvider(SSe),a=i.getProvider(DSe),l=i.getProvider(TSe);return new n$(o,s,a,l,r,n)};ml(new dl(OJ,e,"PUBLIC").setMultipleInstances(!0)),ei(MJ,PJ,t),ei(MJ,PJ,"esm2017")}function NJ(n=fl(),t=t$){let i=gd(yr(n),OJ).getImmediate({identifier:t}),r=Mh("functions");return r&&FJ(i,...r),i}function FJ(n,t,e){ISe(yr(n),t,e)}kSe(fetch.bind(self));var uC=class{constructor(t){return t}},VJ="functions",i$=class{constructor(){return gl(VJ)}};var r$=new ce("angularfire2.functions-instances");function ASe(n,t){let e=fu(VJ,n,t);return e&&new uC(e)}function RSe(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new uC(i)}}var MSe={provide:i$,deps:[[new Rn,r$]]},PSe={provide:uC,useFactory:ASe,deps:[[new Rn,r$],bs]};function LJ(n,...t){return ei("angularfire",js.full,"fn"),Rr([PSe,MSe,{provide:r$,useFactory:RSe(n),multi:!0,deps:[Ke,Mt,Us,Ba,[new Rn,El],[new Rn,_s],...t]}])}var BJ=ki(NJ,!0);var KJ="firebasestorage.googleapis.com",OSe="storageBucket",NSe=2*60*1e3,FSe=10*60*1e3;var Qu=class n extends fv{constructor(t,e,i=0){super(o$(t),`Firebase Storage: ${e} (${o$(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return o$(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ah=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ah||{});function o$(n){return"storage/"+n}function VSe(){let n="An unknown error occurred, please check the error payload for server response.";return new Qu(ah.UNKNOWN,n)}function LSe(){return new Qu(ah.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BSe(){return new Qu(ah.CANCELED,"User canceled the upload/download.")}function $Se(n){return new Qu(ah.INVALID_URL,"Invalid URL '"+n+"'.")}function jSe(n){return new Qu(ah.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function $J(n){return new Qu(ah.INVALID_ARGUMENT,n)}function HJ(){return new Qu(ah.APP_DELETED,"The Firebase app was deleted.")}function USe(n){return new Qu(ah.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var sh=class n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=n.makeFromUrl(t,e)}catch{return new n(t,"")}if(i.path==="")return i;throw jSe(t)}static makeFromUrl(t,e){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),l={bucket:1,path:3};function u(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",p=e.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${h}/b/${r}/o${_}`,"i"),C={bucket:1,path:3},T=e===KJ?"(?:storage.googleapis.com|storage.cloud.google.com)":e,k="([^?#]*)",U=new RegExp(`^https?://${T}/${r}/${k}`,"i"),K=[{regex:a,indices:l,postModify:o},{regex:b,indices:C,postModify:u},{regex:U,indices:{bucket:1,path:2},postModify:u}];for(let oe=0;oe<K.length;oe++){let ae=K[oe],we=ae.regex.exec(t);if(we){let M=we[ae.indices.bucket],E=we[ae.indices.path];E||(E=""),i=new n(M,E),ae.postModify(i);break}}if(i==null)throw $Se(t);return i}},s$=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function zSe(n,t,e){let i=1,r=null,o=null,s=!1,a=0;function l(){return a===2}let u=!1;function h(...k){u||(u=!0,t.apply(null,k))}function p(k){r=setTimeout(()=>{r=null,n(b,l())},k)}function _(){o&&clearTimeout(o)}function b(k,...U){if(u){_();return}if(k){_(),h.call(null,k,...U);return}if(l()||s){_(),h.call(null,k,...U);return}i<64&&(i*=2);let K;a===1?(a=2,K=0):K=(i+Math.random())*1e3,p(K)}let C=!1;function T(k){C||(C=!0,_(),!u&&(r!==null?(k||(a=2),clearTimeout(r),p(0)):k||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,T(!0)},e),T}function qSe(n){n(!1)}function KSe(n){return n!==void 0}function jJ(n,t,e,i){if(i<t)throw $J(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw $J(`Invalid value for '${n}'. Expected ${e} or less.`)}function HSe(n){let t=encodeURIComponent,e="?";for(let i in n)if(n.hasOwnProperty(i)){let r=t(i)+"="+t(n[i]);e=e+r+"&"}return e=e.slice(0,-1),e}var a$=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(a$||{});function WSe(n,t){let e=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||r||o}var c$=class{constructor(t,e,i,r,o,s,a,l,u,h,p,_=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,C)=>{this.resolve_=b,this.reject_=C,this.start_()})}start_(){let t=(i,r)=>{if(r){i(!1,new ev(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===a$.NO_ERROR,l=o.getStatus();if(!a||WSe(l,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===a$.ABORT;i(!1,new ev(!1,null,h));return}let u=this.successCodes_.indexOf(l)!==-1;i(!0,new ev(u,o))})},e=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());KSe(l)?o(l):o()}catch(l){s(l)}else if(a!==null){let l=VSe();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(r.canceled){let l=this.appDelete_?HJ():BSe();s(l)}else{let l=LSe();s(l)}};this.canceled_?e(!1,new ev(!1,null,!0)):this.backoffId_=zSe(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&qSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ev=class{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}};function GSe(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function QSe(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function YSe(n,t){t&&(n["X-Firebase-GMPID"]=t)}function XSe(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function JSe(n,t,e,i,r,o,s=!0){let a=HSe(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return YSe(u,t),GSe(u,e),QSe(u,o),XSe(u,i),new c$(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,s)}function ZSe(n){if(n.length===0)return null;let t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function eTe(n){let t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}var Myt=256*1024;var l$=class n{constructor(t,e){this._service=t,e instanceof sh?this._location=e:this._location=sh.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new n(t,e)}get root(){let t=new sh(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eTe(this._location.path)}get storage(){return this._service}get parent(){let t=ZSe(this._location.path);if(t===null)return null;let e=new sh(this._location.bucket,t);return new n(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw USe(t)}};function UJ(n,t){let e=t?.[OSe];return e==null?null:sh.makeFromBucketSpec(e,n)}function tTe(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:og(r,n.app.options.projectId))}var u$=class{constructor(t,e,i,r,o){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=KJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NSe,this._maxUploadRetryTime=FSe,this._requests=new Set,r!=null?this._bucket=sh.makeFromBucketSpec(r,this._host):this._bucket=UJ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=sh.makeFromBucketSpec(this._url,t):this._bucket=UJ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jJ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jJ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return O(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=yield t.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return O(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new l$(this,t)}_makeRequest(t,e,i,r,o=!0){if(this._deleted)return new s$(HJ());{let s=JSe(t,this._appId,i,r,e,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){return O(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,r).getPromise()})}},zJ="@firebase/storage",qJ="0.13.2";var WJ="storage";function GJ(n=fl(),t){n=yr(n);let i=gd(n,WJ).getImmediate({identifier:t}),r=Mh("storage");return r&&QJ(i,...r),i}function QJ(n,t,e,i={}){tTe(n,t,e,i)}function nTe(n,{instanceIdentifier:t}){let e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new u$(e,i,r,t,ag)}function iTe(){ml(new dl(WJ,nTe,"PUBLIC").setMultipleInstances(!0)),ei(zJ,qJ,""),ei(zJ,qJ,"esm2017")}iTe();var dC=class{constructor(t){return t}},YJ="storage",d$=class{constructor(){return gl(YJ)}};var h$=new ce("angularfire2.storage-instances");function rTe(n,t){let e=fu(YJ,n,t);return e&&new dC(e)}function oTe(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new dC(i)}}var sTe={provide:d$,deps:[[new Rn,h$]]},aTe={provide:dC,useFactory:rTe,deps:[[new Rn,h$],bs]};function XJ(n,...t){return ei("angularfire",js.full,"gcs"),Rr([aTe,sTe,{provide:h$,useFactory:oTe(n),multi:!0,deps:[Ke,Mt,Us,Ba,[new Rn,El],[new Rn,_s],...t]}])}var JJ=ki(GJ,!0);var ZJ={providers:[{provide:Qc,useValue:{}},{provide:zl,useValue:{}},$j(jj()),Q$({eventCoalescing:!0}),HU(JB,PA(qU)),RJ(),zz(()=>qz(du.firebaseConfig)),Dq(()=>_b()),PH(()=>OH()),AH(()=>RH()),LJ(()=>BJ()),XJ(()=>JJ()),{provide:dE,useValue:du.firebaseConfig},Zj()]};var ak=class n{constructor(t){this.user=t}title="muibalance";ngOnInit(){return O(this,null,function*(){let t=yield this.user.getLoggedUser()})}static \u0275fac=function(e){return new(e||n)(pe(gn))};static \u0275cmp=le({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&be(0,"router-outlet")},dependencies:[TA],encapsulation:2})};du.production;du.production&&void 0;Xj(ak,ZJ).catch(n=>console.error(n));
